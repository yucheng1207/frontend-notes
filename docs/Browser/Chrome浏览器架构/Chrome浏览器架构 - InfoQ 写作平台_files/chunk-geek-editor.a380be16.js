(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-geek-editor"],{9207:function(e,t,n){!function(t,r){e.exports=r(n("2b0e"),n("3b2f"),n("d4cd"),n("56b3"))}(window,(function(e,t,n,r){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="./",n(n.s=149)}([function(e,t,n){"use strict";n.r(t),n.d(t,"DOC",(function(){return r})),n.d(t,"PARAGRAPH",(function(){return i})),n.d(t,"BLOCK_QUOTE",(function(){return o})),n.d(t,"HORIZONTAL_RULE",(function(){return a})),n.d(t,"HEADING",(function(){return s})),n.d(t,"CODE_BLOCK",(function(){return c})),n.d(t,"CODE_BLOCK_PREVIEW",(function(){return l})),n.d(t,"CODE_BLOCK_PREVIEW_LINE",(function(){return u})),n.d(t,"KATEX_BLOCK",(function(){return f})),n.d(t,"KATEX_INLINE",(function(){return d})),n.d(t,"IMAGE",(function(){return h})),n.d(t,"VIDEO",(function(){return p})),n.d(t,"EMBED_COMPONENT",(function(){return v})),n.d(t,"NUMBERED_LIST",(function(){return m})),n.d(t,"BULLETED_LIST",(function(){return g})),n.d(t,"LIST_ITEM",(function(){return y})),n.d(t,"LINK",(function(){return b})),n.d(t,"MARK_CLASS",(function(){return w})),n.d(t,"ITALIC",(function(){return E})),n.d(t,"DEL",(function(){return k})),n.d(t,"UNDERLINE",(function(){return O})),n.d(t,"STRONG",(function(){return _})),n.d(t,"SIZE",(function(){return x})),n.d(t,"COLOR",(function(){return S})),n.d(t,"BG_COLOR",(function(){return N})),n.d(t,"INDENT",(function(){return M})),n.d(t,"ALIGN",(function(){return C})),n.d(t,"CODE_INLINE",(function(){return A})),n.d(t,"SUP",(function(){return T})),n.d(t,"SUB",(function(){return D})),n.d(t,"TEXT",(function(){return I})),n.d(t,"ZERO_WIDTH",(function(){return R})),n.d(t,"D_DECO",(function(){return L})),n.d(t,"D_NOTE",(function(){return P})),n.d(t,"D_MARK",(function(){return B})),n.d(t,"D_PUBLIC",(function(){return $})),n.d(t,"TABLE",(function(){return j})),n.d(t,"TABLE_ROW",(function(){return z})),n.d(t,"TABLE_HEADER",(function(){return F})),n.d(t,"TABLE_CELL",(function(){return H})),n.d(t,"LEAF_BLOCK_TYPES",(function(){return U})),n.d(t,"NODE_VIEW_TYPES",(function(){return K})),n.d(t,"INLINE_TYPES",(function(){return W}));var r="doc",i="paragraph",o="blockquote",a="horizontalrule",s="heading",c="codeblock",l="pre",u="codeline",f="katexblock",d="katexinline",h="image",p="video",v="embedcomp",m="numberedlist",g="bulletedlist",y="listitem",b="link",w="markclass",E="italic",k="del",O="underline",_="strong",x="size",S="color",N="bgcolor",M="indent",C="align",A="codeinline",T="sup",D="sub",I="text",R="zerowidth",L="deco",P="note",B="mark",$="public",j="table",z="row",F="headercell",H="cell",U=[i,s,a,u,f,h,v,p],K=[f,h,p,c,v,a],W=[I,b,T,D,d,A]},function(e,t,n){"use strict";function r(e,t,n){for(var i=0;;i++){if(i==e.childCount||i==t.childCount)return e.childCount==t.childCount?null:n;var o=e.child(i),a=t.child(i);if(o!=a){if(!o.sameMarkup(a))return n;if(o.isText&&o.text!=a.text){for(var s=0;o.text[s]==a.text[s];s++)n++;return n}if(o.content.size||a.content.size){var c=r(o.content,a.content,n+1);if(null!=c)return c}n+=o.nodeSize}else n+=o.nodeSize}}function i(e,t,n,r){for(var o=e.childCount,a=t.childCount;;){if(0==o||0==a)return o==a?null:{a:n,b:r};var s=e.child(--o),c=t.child(--a),l=s.nodeSize;if(s!=c){if(!s.sameMarkup(c))return{a:n,b:r};if(s.isText&&s.text!=c.text){for(var u=0,f=Math.min(s.text.length,c.text.length);u<f&&s.text[s.text.length-u-1]==c.text[c.text.length-u-1];)u++,n--,r--;return{a:n,b:r}}if(s.content.size||c.content.size){var d=i(s.content,c.content,n-1,r-1);if(d)return d}n-=l,r-=l}else n-=l,r-=l}}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.content=t,this.size=n||0,null==n)for(var r=0;r<t.length;r++)this.size+=t[r].nodeSize}var t,n,a;return t=e,a=[{key:"fromJSON",value:function(t,n){if(!n)return e.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new e(n.map(t.nodeFromJSON))}},{key:"fromArray",value:function(t){if(!t.length)return e.empty;for(var n,r=0,i=0;i<t.length;i++){var o=t[i];r+=o.nodeSize,i&&o.isText&&t[i-1].sameMarkup(o)?(n||(n=t.slice(0,i)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new e(n||t,r)}},{key:"from",value:function(t){if(!t)return e.empty;if(t instanceof e)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new e([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}],(n=[{key:"nodesBetween",value:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0,o=0,a=0;a<t;o++){var s=this.content[o],c=a+s.nodeSize;if(c>e&&!1!==n(s,r+a,i,o)&&s.content.size){var l=a+1;s.nodesBetween(Math.max(0,e-l),Math.min(s.content.size,t-l),n,r+l)}a=c}}},{key:"descendants",value:function(e){this.nodesBetween(0,this.size,e)}},{key:"textBetween",value:function(e,t,n,r){var i="",o=!0;return this.nodesBetween(e,t,(function(a,s){a.isText?(i+=a.text.slice(Math.max(e,s)-s,t-s),o=!n):a.isLeaf&&r?(i+=r,o=!n):!o&&a.isBlock&&(i+=n,o=!0)}),0),i}},{key:"append",value:function(t){if(!t.size)return this;if(!this.size)return t;var n=this.lastChild,r=t.firstChild,i=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),o=1);o<t.content.length;o++)i.push(t.content[o]);return new e(i,this.size+t.size)}},{key:"cut",value:function(t,n){if(null==n&&(n=this.size),0==t&&n==this.size)return this;var r=[],i=0;if(n>t)for(var o=0,a=0;a<n;o++){var s=this.content[o],c=a+s.nodeSize;c>t&&((a<t||c>n)&&(s=s.isText?s.cut(Math.max(0,t-a),Math.min(s.text.length,n-a)):s.cut(Math.max(0,t-a-1),Math.min(s.content.size,n-a-1))),r.push(s),i+=s.nodeSize),a=c}return new e(r,i)}},{key:"cutByIndex",value:function(t,n){return t==n?e.empty:0==t&&n==this.content.length?this:new e(this.content.slice(t,n))}},{key:"replaceChild",value:function(t,n){var r=this.content[t];if(r==n)return this;var i=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return i[t]=n,new e(i,o)}},{key:"addToStart",value:function(t){return new e([t].concat(this.content),this.size+t.nodeSize)}},{key:"addToEnd",value:function(t){return new e(this.content.concat(t),this.size+t.nodeSize)}},{key:"eq",value:function(e){if(this.content.length!=e.content.length)return!1;for(var t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}},{key:"child",value:function(e){var t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}},{key:"maybeChild",value:function(e){return this.content[e]}},{key:"forEach",value:function(e){for(var t=0,n=0;t<this.content.length;t++){var r=this.content[t];e(r,n,t),n+=r.nodeSize}}},{key:"findDiffStart",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r(this,e,t)}},{key:"findDiffEnd",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.size;return i(this,e,t,n)}},{key:"findIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(0==e)return c(0,e);if(e==this.size)return c(this.content.length,e);if(e>this.size||e<0)throw new RangeError("Position ".concat(e," outside of fragment (").concat(this,")"));for(var n=0,r=0;;n++){var i=this.child(n),o=r+i.nodeSize;if(o>=e)return o==e||t>0?c(n+1,o):c(n,r);r=o}}},{key:"toString",value:function(){return"<"+this.toStringInner()+">"}},{key:"toStringInner",value:function(){return this.content.join(", ")}},{key:"toJSON",value:function(){return this.content.length?this.content.map((function(e){return e.toJSON()})):null}},{key:"firstChild",get:function(){return this.content.length?this.content[0]:null}},{key:"lastChild",get:function(){return this.content.length?this.content[this.content.length-1]:null}},{key:"childCount",get:function(){return this.content.length}}])&&o(t.prototype,n),a&&o(t,a),e}(),s={index:0,offset:0};function c(e,t){return s.index=e,s.offset=t,s}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(e===t)return!0;if(!e||"object"!=l(e)||!t||"object"!=l(t))return!1;var n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!u(e[r],t[r]))return!1}else{for(var i in e)if(!(i in t)||!u(e[i],t[i]))return!1;for(var o in t)if(!(o in e))return!1}return!0}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}a.empty=new a([],0);var d=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t,this.attrs=n}var t,n,r;return t=e,r=[{key:"fromJSON",value:function(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");var n=e.marks[t.type];if(!n)throw new RangeError("There is no mark type ".concat(t.type," in this schema"));return n.create(t.attrs)}},{key:"sameSet",value:function(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}},{key:"setFrom",value:function(t){if(!t||0==t.length)return e.none;if(t instanceof e)return[t];var n=t.slice();return n.sort((function(e,t){return e.type.rank-t.type.rank})),n}}],(n=[{key:"addToSet",value:function(e){for(var t,n=!1,r=0;r<e.length;r++){var i=e[r];if(this.eq(i))return e;if(this.type.excludes(i.type))t||(t=e.slice(0,r));else{if(i.type.excludes(this.type))return e;!n&&i.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),n=!0),t&&t.push(i)}}return t||(t=e.slice()),n||t.push(this),t}},{key:"removeFromSet",value:function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}},{key:"isInSet",value:function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}},{key:"eq",value:function(e){return this==e||this.type==e.type&&u(this.attrs,e.attrs)}},{key:"toJSON",value:function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return e}}])&&f(t.prototype,n),r&&f(t,r),e}();function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e){var t=Error.call(this,e);return t.__proto__=p.prototype,t}d.none=[],p.prototype=Object.create(Error.prototype),p.prototype.constructor=p,p.prototype.name="ReplaceError";var v=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.content=t,this.openStart=n,this.openEnd=r}var t,n,r;return t=e,r=[{key:"fromJSON",value:function(t,n){if(!n)return e.empty;var r=n.openStart||0,i=n.openEnd||0;if("number"!=typeof r||"number"!=typeof i)throw new RangeError("Invalid input for Slice.fromJSON");return new e(a.fromJSON(t,n.content),r,i)}},{key:"maxOpen",value:function(t){for(var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=0,i=0,o=t.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(var a=t.lastChild;a&&!a.isLeaf&&(n||!a.type.spec.isolating);a=a.lastChild)i++;return new e(t,r,i)}}],(n=[{key:"insertAt",value:function(t,n){var r=function e(t,n,r,i){var o=t.findIndex(n),a=o.index,s=o.offset,c=t.maybeChild(a);if(s==n||c.isText)return i&&!i.canReplace(a,a,r)?null:t.cut(0,n).append(r).append(t.cut(n));var l=e(c.content,n-s-1,r);return l&&t.replaceChild(a,c.copy(l))}(this.content,t+this.openStart,n,null);return r&&new e(r,this.openStart,this.openEnd)}},{key:"removeBetween",value:function(t,n){return new e(function e(t,n,r){var i=t.findIndex(n),o=i.index,a=i.offset,s=t.maybeChild(o),c=t.findIndex(r),l=c.index,u=c.offset;if(a==n||s.isText){if(u!=r&&!t.child(l).isText)throw new RangeError("Removing non-flat range");return t.cut(0,n).append(t.cut(r))}if(o!=l)throw new RangeError("Removing non-flat range");return t.replaceChild(o,s.copy(e(s.content,n-a-1,r-a-1)))}(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)}},{key:"eq",value:function(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}},{key:"toString",value:function(){return this.content+"("+this.openStart+","+this.openEnd+")"}},{key:"toJSON",value:function(){if(!this.content.size)return null;var e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}},{key:"size",get:function(){return this.content.size-this.openStart-this.openEnd}}])&&h(t.prototype,n),r&&h(t,r),e}();function m(e,t,n){if(n.openStart>e.depth)throw new p("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new p("Inconsistent open depths");return function e(t,n,r,i){var o=t.index(i),s=t.node(i);if(o==n.index(i)&&i<t.depth-r.openStart){var c=e(t,n,r,i+1);return s.copy(s.content.replaceChild(o,c))}if(r.content.size){if(r.openStart||r.openEnd||t.depth!=i||n.depth!=i){var l=function(e,t){for(var n=t.depth-e.openStart,r=t.node(n).copy(e.content),i=n-1;i>=0;i--)r=t.node(i).copy(a.from(r));return{start:r.resolveNoCache(e.openStart+n),end:r.resolveNoCache(r.content.size-e.openEnd-n)}}(r,t),u=l.start,f=l.end;return E(s,function e(t,n,r,i,o){var s=t.depth>o&&y(t,n,o+1),c=i.depth>o&&y(r,i,o+1),l=[];return w(null,t,o,l),s&&c&&n.index(o)==r.index(o)?(g(s,c),b(E(s,e(t,n,r,i,o+1)),l)):(s&&b(E(s,k(t,n,o+1)),l),w(n,r,o,l),c&&b(E(c,k(r,i,o+1)),l)),w(i,null,o,l),new a(l)}(t,u,f,n,i))}var d=t.parent,h=d.content;return E(d,h.cut(0,t.parentOffset).append(r.content).append(h.cut(n.parentOffset)))}return E(s,k(t,n,i))}(e,t,n,0)}function g(e,t){if(!t.type.compatibleContent(e.type))throw new p("Cannot join "+t.type.name+" onto "+e.type.name)}function y(e,t,n){var r=e.node(n);return g(r,t.node(n)),r}function b(e,t){var n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function w(e,t,n,r){var i=(t||e).node(n),o=0,a=t?t.index(n):i.childCount;e&&(o=e.index(n),e.depth>n?o++:e.textOffset&&(b(e.nodeAfter,r),o++));for(var s=o;s<a;s++)b(i.child(s),r);t&&t.depth==n&&t.textOffset&&b(t.nodeBefore,r)}function E(e,t){if(!e.type.validContent(t))throw new p("Invalid content for node "+e.type.name);return e.copy(t)}function k(e,t,n){var r=[];return w(null,e,n,r),e.depth>n&&b(E(y(e,t,n+1),k(e,t,n+1)),r),w(t,null,n,r),new a(r)}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t,n){return t&&_(e.prototype,t),n&&_(e,n),e}v.empty=new v(a.empty,0,0);var S=function(){function e(t,n,r){O(this,e),this.pos=t,this.path=n,this.depth=n.length/3-1,this.parentOffset=r}return x(e,[{key:"resolveDepth",value:function(e){return null==e?this.depth:e<0?this.depth+e:e}},{key:"node",value:function(e){return this.path[3*this.resolveDepth(e)]}},{key:"index",value:function(e){return this.path[3*this.resolveDepth(e)+1]}},{key:"indexAfter",value:function(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)}},{key:"start",value:function(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1}},{key:"end",value:function(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}},{key:"before",value:function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]}},{key:"after",value:function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize}},{key:"posAtIndex",value:function(e,t){t=this.resolveDepth(t);for(var n=this.path[3*t],r=0==t?0:this.path[3*t-1]+1,i=0;i<e;i++)r+=n.child(i).nodeSize;return r}},{key:"marks",value:function(){var e=this.parent,t=this.index();if(0==e.content.size)return d.none;if(this.textOffset)return e.child(t).marks;var n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){var i=n;n=r,r=i}for(var o=n.marks,a=0;a<o.length;a++)!1!==o[a].type.spec.inclusive||r&&o[a].isInSet(r.marks)||(o=o[a--].removeFromSet(o));return o}},{key:"marksAcross",value:function(e){var t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;for(var n=t.marks,r=e.parent.maybeChild(e.index()),i=0;i<n.length;i++)!1!==n[i].type.spec.inclusive||r&&n[i].isInSet(r.marks)||(n=n[i--].removeFromSet(n));return n}},{key:"sharedDepth",value:function(e){for(var t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}},{key:"blockRange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,t=arguments.length>1?arguments[1]:void 0;if(e.pos<this.pos)return e.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new A(this,e,n)}},{key:"sameParent",value:function(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}},{key:"max",value:function(e){return e.pos>this.pos?e:this}},{key:"min",value:function(e){return e.pos<this.pos?e:this}},{key:"toString",value:function(){for(var e="",t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}},{key:"parent",get:function(){return this.node(this.depth)}},{key:"doc",get:function(){return this.node(0)}},{key:"textOffset",get:function(){return this.pos-this.path[this.path.length-1]}},{key:"nodeAfter",get:function(){var e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r}},{key:"nodeBefore",get:function(){var e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)}}],[{key:"resolve",value:function(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");for(var r=[],i=0,o=n,a=t;;){var s=a.content.findIndex(o),c=s.index,l=s.offset,u=o-l;if(r.push(a,c,i+l),!u)break;if((a=a.child(c)).isText)break;o=u-1,i+=l+1}return new e(n,r,o)}},{key:"resolveCached",value:function(t,n){for(var r=0;r<N.length;r++){var i=N[r];if(i.pos==n&&i.doc==t)return i}var o=N[M]=e.resolve(t,n);return M=(M+1)%C,o}}]),e}(),N=[],M=0,C=12,A=function(){function e(t,n,r){O(this,e),this.$from=t,this.$to=n,this.depth=r}return x(e,[{key:"start",get:function(){return this.$from.before(this.depth+1)}},{key:"end",get:function(){return this.$to.after(this.depth+1)}},{key:"parent",get:function(){return this.$from.node(this.depth)}},{key:"startIndex",get:function(){return this.$from.index(this.depth)}},{key:"endIndex",get:function(){return this.$to.indexAfter(this.depth)}}]),e}();function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t,n){return(D="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var i=P(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return L(this,n)}}function L(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t,n){return t&&$(e.prototype,t),n&&$(e,n),e}var z=Object.create(null),F=function(){function e(t,n,r,i){B(this,e),this.type=t,this.attrs=n,this.content=r||a.empty,this.marks=i||d.none}return j(e,[{key:"child",value:function(e){return this.content.child(e)}},{key:"maybeChild",value:function(e){return this.content.maybeChild(e)}},{key:"forEach",value:function(e){this.content.forEach(e)}},{key:"nodesBetween",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.content.nodesBetween(e,t,n,r,this)}},{key:"descendants",value:function(e){this.nodesBetween(0,this.content.size,e)}},{key:"textBetween",value:function(e,t,n,r){return this.content.textBetween(e,t,n,r)}},{key:"eq",value:function(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}},{key:"sameMarkup",value:function(e){return this.hasMarkup(e.type,e.attrs,e.marks)}},{key:"hasMarkup",value:function(e,t,n){return this.type==e&&u(this.attrs,t||e.defaultAttrs||z)&&d.sameSet(this.marks,n||d.none)}},{key:"copy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e==this.content?this:new this.constructor(this.type,this.attrs,e,this.marks)}},{key:"mark",value:function(e){return e==this.marks?this:new this.constructor(this.type,this.attrs,this.content,e)}},{key:"cut",value:function(e,t){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))}},{key:"slice",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.content.size,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e==t)return v.empty;var r=this.resolve(e),i=this.resolve(t),o=n?0:r.sharedDepth(t),a=r.start(o),s=r.node(o),c=s.content.cut(r.pos-a,i.pos-a);return new v(c,r.depth-o,i.depth-o)}},{key:"replace",value:function(e,t,n){return m(this.resolve(e),this.resolve(t),n)}},{key:"nodeAt",value:function(e){for(var t=this;;){var n=t.content.findIndex(e),r=n.index,i=n.offset;if(!(t=t.maybeChild(r)))return null;if(i==e||t.isText)return t;e-=i+1}}},{key:"childAfter",value:function(e){var t=this.content.findIndex(e),n=t.index,r=t.offset;return{node:this.content.maybeChild(n),index:n,offset:r}}},{key:"childBefore",value:function(e){if(0==e)return{node:null,index:0,offset:0};var t=this.content.findIndex(e),n=t.index,r=t.offset;if(r<e)return{node:this.content.child(n),index:n,offset:r};var i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}},{key:"resolve",value:function(e){return S.resolveCached(this,e)}},{key:"resolveNoCache",value:function(e){return S.resolve(this,e)}},{key:"rangeHasMark",value:function(e,t,n){var r=!1;return t>e&&this.nodesBetween(e,t,(function(e){return n.isInSet(e.marks)&&(r=!0),!r})),r}},{key:"toString",value:function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),U(this.marks,e)}},{key:"contentMatchAt",value:function(e){var t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}},{key:"canReplace",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.empty,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n.childCount,o=this.contentMatchAt(e).matchFragment(n,r,i),s=o&&o.matchFragment(this.content,t);if(!s||!s.validEnd)return!1;for(var c=r;c<i;c++)if(!this.type.allowsMarks(n.child(c).marks))return!1;return!0}},{key:"canReplaceWith",value:function(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;var i=this.contentMatchAt(e).matchType(n),o=i&&i.matchFragment(this.content,t);return!!o&&o.validEnd}},{key:"canAppend",value:function(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}},{key:"check",value:function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node ".concat(this.type.name,": ").concat(this.content.toString().slice(0,50)));this.content.forEach((function(e){return e.check()}))}},{key:"toJSON",value:function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map((function(e){return e.toJSON()}))),e}},{key:"nodeSize",get:function(){return this.isLeaf?1:2+this.content.size}},{key:"childCount",get:function(){return this.content.childCount}},{key:"textContent",get:function(){return this.textBetween(0,this.content.size,"")}},{key:"firstChild",get:function(){return this.content.firstChild}},{key:"lastChild",get:function(){return this.content.lastChild}},{key:"isBlock",get:function(){return this.type.isBlock}},{key:"isTextblock",get:function(){return this.type.isTextblock}},{key:"inlineContent",get:function(){return this.type.inlineContent}},{key:"isInline",get:function(){return this.type.isInline}},{key:"isText",get:function(){return this.type.isText}},{key:"isLeaf",get:function(){return this.type.isLeaf}},{key:"isAtom",get:function(){return this.type.isAtom}}],[{key:"fromJSON",value:function(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}var r=a.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,r,n)}}]),e}(),H=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(n,e);var t=R(n);function n(e,r,i,o){var a;if(B(this,n),a=t.call(this,e,r,null,o),!i)throw new RangeError("Empty text nodes are not allowed");return a.text=i,a}return j(n,[{key:"toString",value:function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):U(this.marks,JSON.stringify(this.text))}},{key:"textBetween",value:function(e,t){return this.text.slice(e,t)}},{key:"mark",value:function(e){return e==this.marks?this:new n(this.type,this.attrs,this.text,e)}},{key:"withText",value:function(e){return e==this.text?this:new n(this.type,this.attrs,e,this.marks)}},{key:"cut",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.text.length;return 0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))}},{key:"eq",value:function(e){return this.sameMarkup(e)&&this.text==e.text}},{key:"toJSON",value:function(){var e=D(P(n.prototype),"toJSON",this).call(this);return e.text=this.text,e}},{key:"textContent",get:function(){return this.text}},{key:"nodeSize",get:function(){return this.text.length}}]),n}(F);function U(e,t){for(var n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}function K(e){this.content=e}K.prototype={constructor:K,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,i=r.find(e),o=r.content.slice();return-1==i?o.push(n||e,t):(o[i+1]=t,n&&(o[i]=n)),new K(o)},remove:function(e){var t=this.find(e);if(-1==t)return this;var n=this.content.slice();return n.splice(t,2),new K(n)},addToStart:function(e,t){return new K([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new K(n)},addBefore:function(e,t,n){var r=this.remove(t),i=r.content.slice(),o=r.find(e);return i.splice(-1==o?i.length:o,0,t,n),new K(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=K.from(e)).size?new K(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=K.from(e)).size?new K(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=K.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},get size(){return this.content.length>>1}},K.from=function(e){if(e instanceof K)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new K(t)};var W=K;function V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e,t,n){return t&&G(e.prototype,t),n&&G(e,n),e}var J=function(){function e(t){V(this,e),this.validEnd=t,this.next=[],this.wrapCache=[]}return q(e,[{key:"matchType",value:function(e){for(var t=0;t<this.next.length;t+=2)if(this.next[t]==e)return this.next[t+1];return null}},{key:"matchFragment",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.childCount,r=this,i=t;r&&i<n;i++)r=r.matchType(e.child(i).type);return r}},{key:"compatible",value:function(e){for(var t=0;t<this.next.length;t+=2)for(var n=0;n<e.next.length;n+=2)if(this.next[t]==e.next[n])return!0;return!1}},{key:"fillBefore",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[this];function i(o,s){var c=o.matchFragment(e,n);if(c&&(!t||c.validEnd))return a.from(s.map((function(e){return e.createAndFill()})));for(var l=0;l<o.next.length;l+=2){var u=o.next[l],f=o.next[l+1];if(!u.isText&&!u.hasRequiredAttrs()&&-1==r.indexOf(f)){r.push(f);var d=i(f,s.concat(u));if(d)return d}}}return i(this,[])}},{key:"findWrapping",value:function(e){for(var t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];var n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}},{key:"computeWrapping",value:function(e){for(var t=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var r=n.shift(),i=r.match;if(i.matchType(e)){for(var o=[],a=r;a.type;a=a.via)o.push(a.type);return o.reverse()}for(var s=0;s<i.next.length;s+=2){var c=i.next[s];c.isLeaf||c.hasRequiredAttrs()||c.name in t||r.type&&!i.next[s+1].validEnd||(n.push({match:c.contentMatch,type:c,via:r}),t[c.name]=!0)}}}},{key:"edge",value:function(e){var t=e<<1;if(t>=this.next.length)throw new RangeError("There's no ".concat(e,"th edge in this content match"));return{type:this.next[t],next:this.next[t+1]}}},{key:"toString",value:function(){var e=[];return function t(n){e.push(n);for(var r=1;r<n.next.length;r+=2)-1==e.indexOf(n.next[r])&&t(n.next[r])}(this),e.map((function(t,n){for(var r=n+(t.validEnd?"*":" ")+" ",i=0;i<t.next.length;i+=2)r+=(i?", ":"")+t.next[i].name+"->"+e.indexOf(t.next[i+1]);return r})).join("\n")}},{key:"inlineContent",get:function(){var e=this.next[0];return!!e&&e.isInline}},{key:"defaultType",get:function(){for(var e=0;e<this.next.length;e+=2){var t=this.next[e];if(!t.isText&&!t.hasRequiredAttrs())return t}}},{key:"edgeCount",get:function(){return this.next.length>>1}}],[{key:"parse",value:function(t,n){var r=new X(t,n);if(null==r.next)return e.empty;var i=Z(r);r.next&&r.err("Unexpected trailing text");var o=function(e){var t=Object.create(null);return function n(r){var i=[];r.forEach((function(t){e[t].forEach((function(t){var n=t.term,r=t.to;if(n){var o=i.indexOf(n),a=o>-1&&i[o+1];re(e,r).forEach((function(e){a||i.push(n,a=[]),-1==a.indexOf(e)&&a.push(e)}))}}))}));for(var o=t[r.join(",")]=new J(r.indexOf(e.length-1)>-1),a=0;a<i.length;a+=2){var s=i[a+1].sort(ne);o.next.push(i[a],t[s.join(",")]||n(s))}return o}(re(e,0))}(function(e){var t=[[]];return i(function e(t,o){if("choice"==t.type)return t.exprs.reduce((function(t,n){return t.concat(e(n,o))}),[]);if("seq"==t.type)for(var a=0;;a++){var s=e(t.exprs[a],o);if(a==t.exprs.length-1)return s;i(s,o=n())}else{if("star"==t.type){var c=n();return r(o,c),i(e(t.expr,c),c),[r(c)]}if("plus"==t.type){var l=n();return i(e(t.expr,o),l),i(e(t.expr,l),l),[r(l)]}if("opt"==t.type)return[r(o)].concat(e(t.expr,o));if("range"==t.type){for(var u=o,f=0;f<t.min;f++){var d=n();i(e(t.expr,u),d),u=d}if(-1==t.max)i(e(t.expr,u),u);else for(var h=t.min;h<t.max;h++){var p=n();r(u,p),i(e(t.expr,u),p),u=p}return[r(u)]}if("name"==t.type)return[r(o,null,t.value)]}}(e,0),n()),t;function n(){return t.push([])-1}function r(e,n,r){var i={term:r,to:n};return t[e].push(i),i}function i(e,t){e.forEach((function(e){return e.to=t}))}}(i));return function(e,t){for(var n=0,r=[e];n<r.length;n++){for(var i=r[n],o=!i.validEnd,a=[],s=0;s<i.next.length;s+=2){var c=i.next[s],l=i.next[s+1];a.push(c.name),!o||c.isText||c.hasRequiredAttrs()||(o=!1),-1==r.indexOf(l)&&r.push(l)}o&&t.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(o,r),o}}]),e}();J.empty=new J(!0);var X=function(){function e(t,n){V(this,e),this.string=t,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}return q(e,[{key:"eat",value:function(e){return this.next==e&&(this.pos++||!0)}},{key:"err",value:function(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}},{key:"next",get:function(){return this.tokens[this.pos]}}]),e}();function Z(e){var t=[];do{t.push(Q(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function Q(e){var t=[];do{t.push(Y(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function Y(e){for(var t=function(e){if(e.eat("(")){var t=Z(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){var n=function(e,t){var n=e.nodeTypes,r=n[t];if(r)return[r];var i=[];for(var o in n){var a=n[o];a.groups.indexOf(t)>-1&&i.push(a)}return 0==i.length&&e.err("No node type or group '"+t+"' found"),i}(e,e.next).map((function(t){return null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t}}));return e.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}e.err("Unexpected token '"+e.next+"'")}(e);;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=te(e,t)}return t}function ee(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");var t=Number(e.next);return e.pos++,t}function te(e,t){var n=ee(e),r=n;return e.eat(",")&&(r="}"!=e.next?ee(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function ne(e,t){return t-e}function re(e,t){var n=[];return function t(r){var i=e[r];if(1==i.length&&!i[0].term)return t(i[0].to);n.push(r);for(var o=0;o<i.length;o++){var a=i[o],s=a.term,c=a.to;s||-1!=n.indexOf(c)||t(c)}}(t),n.sort(ne)}function ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ae(e,t,n){return t&&oe(e.prototype,t),n&&oe(e,n),e}function se(e){var t=Object.create(null);for(var n in e){var r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function ce(e,t){var n=Object.create(null);for(var r in e){var i=t&&t[r];if(void 0===i){var o=e[r];if(!o.hasDefault)throw new RangeError("No value supplied for attribute "+r);i=o.default}n[r]=i}return n}function le(e){var t=Object.create(null);if(e)for(var n in e)t[n]=new fe(e[n]);return t}var ue=function(){function e(t,n,r){ie(this,e),this.name=t,this.schema=n,this.spec=r,this.groups=r.group?r.group.split(" "):[],this.attrs=le(r.attrs),this.defaultAttrs=se(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(r.inline||"text"==t),this.isText="text"==t}return ae(e,[{key:"hasRequiredAttrs",value:function(){for(var e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}},{key:"compatibleContent",value:function(e){return this==e||this.contentMatch.compatible(e.contentMatch)}},{key:"computeAttrs",value:function(e){return!e&&this.defaultAttrs?this.defaultAttrs:ce(this.attrs,e)}},{key:"create",value:function(e,t,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new F(this,this.computeAttrs(e),a.from(t),d.setFrom(n))}},{key:"createChecked",value:function(e,t,n){if(t=a.from(t),!this.validContent(t))throw new RangeError("Invalid content for node "+this.name);return new F(this,this.computeAttrs(e),t,d.setFrom(n))}},{key:"createAndFill",value:function(e,t,n){if(e=this.computeAttrs(e),(t=a.from(t)).size){var r=this.contentMatch.fillBefore(t);if(!r)return null;t=r.append(t)}var i=this.contentMatch.matchFragment(t).fillBefore(a.empty,!0);return i?new F(this,e,t.append(i),d.setFrom(n)):null}},{key:"validContent",value:function(e){var t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(var n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}},{key:"allowsMarkType",value:function(e){return null==this.markSet||this.markSet.indexOf(e)>-1}},{key:"allowsMarks",value:function(e){if(null==this.markSet)return!0;for(var t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}},{key:"allowedMarks",value:function(e){if(null==this.markSet)return e;for(var t,n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:d.empty:e}},{key:"isInline",get:function(){return!this.isBlock}},{key:"isTextblock",get:function(){return this.isBlock&&this.inlineContent}},{key:"isLeaf",get:function(){return this.contentMatch==J.empty}},{key:"isAtom",get:function(){return this.isLeaf||this.spec.atom}}],[{key:"compile",value:function(t,n){var r=Object.create(null);t.forEach((function(t,i){return r[t]=new e(t,n,i)}));var i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(var o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}}]),e}(),fe=function(){function e(t){ie(this,e),this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default}return ae(e,[{key:"isRequired",get:function(){return!this.hasDefault}}]),e}(),de=function(){function e(t,n,r,i){ie(this,e),this.name=t,this.schema=r,this.spec=i,this.attrs=le(i.attrs),this.rank=n,this.excluded=null;var o=se(this.attrs);this.instance=o&&new d(this,o)}return ae(e,[{key:"create",value:function(e){return!e&&this.instance?this.instance:new d(this,ce(this.attrs,e))}},{key:"removeFromSet",value:function(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}},{key:"isInSet",value:function(e){for(var t=0;t<e.length;t++)if(e[t].type==this)return e[t]}},{key:"excludes",value:function(e){return this.excluded.indexOf(e)>-1}}],[{key:"compile",value:function(t,n){var r=Object.create(null),i=0;return t.forEach((function(t,o){return r[t]=new e(t,i++,n,o)})),r}}]),e}(),he=function(){function e(t){for(var n in ie(this,e),this.spec={},t)this.spec[n]=t[n];this.spec.nodes=W.from(t.nodes),this.spec.marks=W.from(t.marks),this.nodes=ue.compile(this.spec.nodes,this),this.marks=de.compile(this.spec.marks,this);var r=Object.create(null);for(var i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");var o=this.nodes[i],a=o.spec.content||"",s=o.spec.marks;o.contentMatch=r[a]||(r[a]=J.parse(a,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.markSet="_"==s?null:s?pe(this,s.split(" ")):""!=s&&o.inlineContent?null:[]}for(var c in this.marks){var l=this.marks[c],u=l.spec.excludes;l.excluded=null==u?[l]:""==u?[]:pe(this,u.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)}return ae(e,[{key:"node",value:function(e,t,n,r){if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof ue))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,n,r)}},{key:"text",value:function(e,t){var n=this.nodes.text;return new H(n,n.defaultAttrs,e,d.setFrom(t))}},{key:"mark",value:function(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)}},{key:"nodeFromJSON",value:function(e){return F.fromJSON(this,e)}},{key:"markFromJSON",value:function(e){return d.fromJSON(this,e)}},{key:"nodeType",value:function(e){var t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}]),e}();function pe(e,t){for(var n=[],r=0;r<t.length;r++){var i=t[r],o=e.marks[i],a=o;if(o)n.push(o);else for(var s in e.marks){var c=e.marks[s];("_"==i||c.spec.group&&c.spec.group.split(" ").indexOf(i)>-1)&&n.push(a=c)}if(!a)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ye(e,t,n){return t&&ge(e.prototype,t),n&&ge(e,n),e}var be=function(){function e(t,n){var r=this;me(this,e),this.schema=t,this.rules=n,this.tags=[],this.styles=[],n.forEach((function(e){e.tag?r.tags.push(e):e.style&&r.styles.push(e)})),this.normalizeLists=!this.tags.some((function(e){if(!/^(ul|ol)\b/.test(e.tag)||!e.node)return!1;var n=t.nodes[e.node];return n.contentMatch.matchType(n)}))}return ye(e,[{key:"parse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new xe(this,t,!1);return n.addAll(e,null,t.from,t.to),n.finish()}},{key:"parseSlice",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new xe(this,t,!0);return n.addAll(e,null,t.from,t.to),v.maxOpen(n.finish())}},{key:"matchTag",value:function(e,t,n){for(var r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){var i=this.tags[r];if(Se(e,i.tag)&&(void 0===i.namespace||e.namespaceURI==i.namespace)&&(!i.context||t.matchesContext(i.context))){if(i.getAttrs){var o=i.getAttrs(e);if(!1===o)continue;i.attrs=o}return i}}}},{key:"matchStyle",value:function(e,t,n,r){for(var i=r?this.styles.indexOf(r)+1:0;i<this.styles.length;i++){var o=this.styles[i];if(!(0!=o.style.indexOf(e)||o.context&&!n.matchesContext(o.context)||o.style.length>e.length&&(61!=o.style.charCodeAt(e.length)||o.style.slice(e.length+1)!=t))){if(o.getAttrs){var a=o.getAttrs(t);if(!1===a)continue;o.attrs=a}return o}}}}],[{key:"schemaRules",value:function(e){var t=[];function n(e){for(var n=null==e.priority?50:e.priority,r=0;r<t.length;r++){var i=t[r];if((null==i.priority?50:i.priority)<n)break}t.splice(r,0,e)}var r=function(t){var r=e.marks[t].spec.parseDOM;r&&r.forEach((function(e){n(e=Ne(e)),e.mark=t}))};for(var i in e.marks)r(i);var o=function(t){var r=e.nodes[t].spec.parseDOM;r&&r.forEach((function(e){n(e=Ne(e)),e.node=t}))};for(var a in e.nodes)o(a);return t}},{key:"fromSchema",value:function(t){return t.cached.domParser||(t.cached.domParser=new e(t,e.schemaRules(t)))}}]),e}(),we={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Ee={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},ke={ol:!0,ul:!0};function Oe(e){return(e?1:0)|("full"===e?2:0)}var _e=function(){function e(t,n,r,i,o,a,s){me(this,e),this.type=t,this.attrs=n,this.solid=o,this.match=a||(4&s?null:t.contentMatch),this.options=s,this.content=[],this.marks=r,this.activeMarks=d.none,this.pendingMarks=i,this.stashMarks=[]}return ye(e,[{key:"findWrapping",value:function(e){if(!this.match){if(!this.type)return[];var t=this.type.contentMatch.fillBefore(a.from(e));if(!t){var n,r=this.type.contentMatch;return(n=r.findWrapping(e.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)}},{key:"finish",value:function(e){if(!(1&this.options)){var t,n=this.content[this.content.length-1];n&&n.isText&&(t=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-t[0].length)))}var r=a.from(this.content);return!e&&this.match&&(r=r.append(this.match.fillBefore(a.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r}},{key:"popFromStashMark",value:function(e){for(var t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}},{key:"applyPending",value:function(e){for(var t=0,n=this.pendingMarks;t<n.length;t++){var r=n[t];(this.type?this.type.allowsMarkType(r.type):Me(r.type,e))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}}}]),e}(),xe=function(){function e(t,n,r){me(this,e),this.parser=t,this.options=n,this.isOpen=r;var i,o=n.topNode,a=Oe(n.preserveWhitespace)|(r?4:0);i=o?new _e(o.type,o.attrs,d.none,d.none,!0,n.topMatch||o.type.contentMatch,a):new _e(r?null:t.schema.topNodeType,null,d.none,d.none,!0,null,a),this.nodes=[i],this.open=0,this.find=n.findPositions,this.needsBlock=!1}return ye(e,[{key:"addDOM",value:function(e){if(3==e.nodeType)this.addTextNode(e);else if(1==e.nodeType){var t=e.getAttribute("style"),n=t?this.readStyles(function(e){for(var t,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];t=n.exec(e);)r.push(t[1],t[2].trim());return r}(t)):null,r=this.top;if(null!=n)for(var i=0;i<n.length;i++)this.addPendingMark(n[i]);if(this.addElement(e),null!=n)for(var o=0;o<n.length;o++)this.removePendingMark(n[o],r)}}},{key:"addTextNode",value:function(e){var t=e.nodeValue,n=this.top;if((n.type?n.type.inlineContent:n.content.length&&n.content[0].isInline)||/[^ \t\r\n\u000c]/.test(t)){if(1&n.options)2&n.options||(t=t.replace(/\r?\n|\r/g," "));else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],i=e.previousSibling;(!r||i&&"BR"==i.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}},{key:"addElement",value:function(e,t){var n,r=e.nodeName.toLowerCase();ke.hasOwnProperty(r)&&this.parser.normalizeLists&&function(e){for(var t=e.firstChild,n=null;t;t=t.nextSibling){var r=1==t.nodeType?t.nodeName.toLowerCase():null;r&&ke.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):"li"==r?n=t:r&&(n=null)}}(e);var i=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(n=this.parser.matchTag(e,this,t));if(i?i.ignore:Ee.hasOwnProperty(r))this.findInside(e);else if(!i||i.skip||i.closeParent){i&&i.closeParent?this.open=Math.max(0,this.open-1):i&&i.skip.nodeType&&(e=i.skip);var o,a=this.top,s=this.needsBlock;if(we.hasOwnProperty(r))o=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild)return void this.leafFallback(e);this.addAll(e),o&&this.sync(a),this.needsBlock=s}else this.addElementByRule(e,i,!1===i.consuming?n:null)}},{key:"leafFallback",value:function(e){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"))}},{key:"readStyles",value:function(e){var t=d.none;e:for(var n=0;n<e.length;n+=2)for(var r=null;;){var i=this.parser.matchStyle(e[n],e[n+1],this,r);if(!i)continue e;if(i.ignore)return null;if(t=this.parser.schema.marks[i.mark].create(i.attrs).addToSet(t),!1!==i.consuming)break;r=i}return t}},{key:"addElementByRule",value:function(e,t,n){var r,i,o,a=this;t.node?(i=this.parser.schema.nodes[t.node]).isLeaf?this.insertNode(i.create(t.attrs))||this.leafFallback(e):r=this.enter(i,t.attrs,t.preserveWhitespace):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));var s=this.top;if(i&&i.isLeaf)this.findInside(e);else if(n)this.addElement(e,n);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach((function(e){return a.insertNode(e)}));else{var c=t.contentElement;"string"==typeof c?c=e.querySelector(c):"function"==typeof c&&(c=c(e)),c||(c=e),this.findAround(e,c,!0),this.addAll(c,r)}r&&(this.sync(s),this.open--),o&&this.removePendingMark(o,s)}},{key:"addAll",value:function(e,t,n,r){for(var i=n||0,o=n?e.childNodes[n]:e.firstChild,a=null==r?null:e.childNodes[r];o!=a;o=o.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(o),t&&we.hasOwnProperty(o.nodeName.toLowerCase())&&this.sync(t);this.findAtPoint(e,i)}},{key:"findPlace",value:function(e){for(var t,n,r=this.open;r>=0;r--){var i=this.nodes[r],o=i.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,n=i,!o.length))break;if(i.solid)break}if(!t)return!1;this.sync(n);for(var a=0;a<t.length;a++)this.enterInner(t[a],null,!1);return!0}},{key:"insertNode",value:function(e){if(e.isInline&&this.needsBlock&&!this.top.type){var t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();var n=this.top;n.applyPending(e.type),n.match&&(n.match=n.match.matchType(e.type));for(var r=n.activeMarks,i=0;i<e.marks.length;i++)n.type&&!n.type.allowsMarkType(e.marks[i].type)||(r=e.marks[i].addToSet(r));return n.content.push(e.mark(r)),!0}return!1}},{key:"enter",value:function(e,t,n){var r=this.findPlace(e.create(t));return r&&this.enterInner(e,t,!0,n),r}},{key:"enterInner",value:function(e,t,n,r){this.closeExtra();var i=this.top;i.applyPending(e),i.match=i.match&&i.match.matchType(e,t);var o=null==r?-5&i.options:Oe(r);4&i.options&&0==i.content.length&&(o|=4),this.nodes.push(new _e(e,t,i.activeMarks,i.pendingMarks,n,null,o)),this.open++}},{key:"closeExtra",value:function(e){var t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}},{key:"finish",value:function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}},{key:"sync",value:function(e){for(var t=this.open;t>=0;t--)if(this.nodes[t]==e)return void(this.open=t)}},{key:"findAtPoint",value:function(e,t){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}},{key:"findInside",value:function(e){if(this.find)for(var t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}},{key:"findAround",value:function(e,t,n){if(e!=t&&this.find)for(var r=0;r<this.find.length;r++)null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node)&&t.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}},{key:"findInText",value:function(e){if(this.find)for(var t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}},{key:"matchesContext",value:function(e){var t=this;if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);var n=e.split("/"),r=this.options.context,i=!(this.isOpen||r&&r.parent.type!=this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1);return function e(a,s){for(;a>=0;a--){var c=n[a];if(""==c){if(a==n.length-1||0==a)continue;for(;s>=o;s--)if(e(a-1,s))return!0;return!1}var l=s>0||0==s&&i?t.nodes[s].type:r&&s>=o?r.node(s-o).type:null;if(!l||l.name!=c&&-1==l.groups.indexOf(c))return!1;s--}return!0}(n.length-1,this.open)}},{key:"textblockFromContext",value:function(){var e=this.options.context;if(e)for(var t=e.depth;t>=0;t--){var n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var i=this.parser.schema.nodes[r];if(i.isTextblock&&i.defaultAttrs)return i}}},{key:"addPendingMark",value:function(e){var t=function(e,t){for(var n=0;n<t.length;n++)if(e.eq(t[n]))return t[n]}(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}},{key:"removePendingMark",value:function(e,t){for(var n=this.open;n>=0;n--){var r=this.nodes[n];if(r.pendingMarks.lastIndexOf(e)>-1)r.pendingMarks=e.removeFromSet(r.pendingMarks);else{r.activeMarks=e.removeFromSet(r.activeMarks);var i=r.popFromStashMark(e);i&&r.type&&r.type.allowsMarkType(i.type)&&(r.activeMarks=i.addToSet(r.activeMarks))}if(r==t)break}}},{key:"top",get:function(){return this.nodes[this.open]}},{key:"currentPos",get:function(){this.closeExtra();for(var e=0,t=this.open;t>=0;t--){for(var n=this.nodes[t].content,r=n.length-1;r>=0;r--)e+=n[r].nodeSize;t&&e++}return e}}]),e}();function Se(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function Ne(e){var t={};for(var n in e)t[n]=e[n];return t}function Me(e,t){var n=t.schema.nodes,r=function(r){var i=n[r];if(!i.allowsMarkType(e))return"continue";var o=[];return function e(n){o.push(n);for(var r=0;r<n.edgeCount;r++){var i=n.edge(r),a=i.type,s=i.next;if(a==t)return!0;if(o.indexOf(s)<0&&e(s))return!0}}(i.contentMatch)?{v:!0}:void 0};for(var i in n){var o=r(i);switch(o){case"continue":continue;default:if("object"===ve(o))return o.v}}}function Ce(e){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Te=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.nodes=t||{},this.marks=n||{}}var t,n,r;return t=e,r=[{key:"renderSpec",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("string"==typeof n)return{dom:t.createTextNode(n)};if(null!=n.nodeType)return{dom:n};if(n.dom&&null!=n.dom.nodeType)return n;var i=n[0],o=i.indexOf(" ");o>0&&(r=i.slice(0,o),i=i.slice(o+1));var a=null,s=r?t.createElementNS(r,i):t.createElement(i),c=n[1],l=1;if(c&&"object"==Ce(c)&&null==c.nodeType&&!Array.isArray(c))for(var u in l=2,c)if(null!=c[u]){var f=u.indexOf(" ");f>0?s.setAttributeNS(u.slice(0,f),u.slice(f+1),c[u]):s.setAttribute(u,c[u])}for(var d=l;d<n.length;d++){var h=n[d];if(0===h){if(d<n.length-1||d>l)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}var p=e.renderSpec(t,h,r),v=p.dom,m=p.contentDOM;if(s.appendChild(v),m){if(a)throw new RangeError("Multiple content holes");a=m}}return{dom:s,contentDOM:a}}},{key:"fromSchema",value:function(t){return t.cached.domSerializer||(t.cached.domSerializer=new e(this.nodesFromSchema(t),this.marksFromSchema(t)))}},{key:"nodesFromSchema",value:function(e){var t=De(e.nodes);return t.text||(t.text=function(e){return e.text}),t}},{key:"marksFromSchema",value:function(e){return De(e.marks)}}],(n=[{key:"serializeFragment",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;r||(r=Ie(n).createDocumentFragment());var i=r,o=null;return e.forEach((function(e){if(o||e.marks.length){o||(o=[]);for(var r=0,a=0;r<o.length&&a<e.marks.length;){var s=e.marks[a];if(t.marks[s.type.name]){if(!s.eq(o[r])||!1===s.type.spec.spanning)break;r+=2,a++}else a++}for(;r<o.length;)i=o.pop(),o.pop();for(;a<e.marks.length;){var c=e.marks[a++],l=t.serializeMark(c,e.isInline,n);l&&(o.push(c,i),i.appendChild(l.dom),i=l.contentDOM||l.dom)}}i.appendChild(t.serializeNode(e,n))})),r}},{key:"serializeNode",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.renderSpec(Ie(n),this.nodes[t.type.name](t)),i=r.dom,o=r.contentDOM;if(o){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");n.onContent?n.onContent(t,o,n):this.serializeFragment(t.content,n,o)}return i}},{key:"serializeNodeAndMarks",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.serializeNode(e,t),r=e.marks.length-1;r>=0;r--){var i=this.serializeMark(e.marks[r],e.isInline,t);i&&((i.contentDOM||i.dom).appendChild(n),n=i.dom)}return n}},{key:"serializeMark",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.marks[t.type.name];return i&&e.renderSpec(Ie(r),i(t,n))}}])&&Ae(t.prototype,n),r&&Ae(t,r),e}();function De(e){var t={};for(var n in e){var r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function Ie(e){return e.document||window.document}n.d(t,"f",(function(){return F})),n.d(t,"c",(function(){return a})),n.d(t,"i",(function(){return v})),n.d(t,"g",(function(){return p})),n.d(t,"d",(function(){return d})),n.d(t,"h",(function(){return he})),n.d(t,"e",(function(){return de})),n.d(t,"a",(function(){return be})),n.d(t,"b",(function(){return Te}))},function(e,t,n){"use strict";var r=n(1),i=n(3);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}var v=Object.create(null),m=function(){function e(t,n,r){d(this,e),this.ranges=r||[new g(t.min(n),t.max(n))],this.$anchor=t,this.$head=n}return p(e,[{key:"content",value:function(){return this.$from.node(0).slice(this.from,this.to,!0)}},{key:"replace",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.i.empty,n=t.content.lastChild,i=null,o=0;o<t.openEnd;o++)i=n,n=n.lastChild;for(var a=e.steps.length,s=this.ranges,c=0;c<s.length;c++){var l=s[c],u=l.$from,f=l.$to,d=e.mapping.slice(a);e.replaceRange(d.map(u.pos),d.map(f.pos),c?r.i.empty:t),0==c&&x(e,a,(n?n.isInline:i&&i.isTextblock)?-1:1)}}},{key:"replaceWith",value:function(e,t){for(var n=e.steps.length,r=this.ranges,i=0;i<r.length;i++){var o=r[i],a=o.$from,s=o.$to,c=e.mapping.slice(n),l=c.map(a.pos),u=c.map(s.pos);i?e.deleteRange(l,u):(e.replaceRangeWith(l,u,t),x(e,n,t.isInline?-1:1))}}},{key:"getBookmark",value:function(){return y.between(this.$anchor,this.$head).getBookmark()}},{key:"anchor",get:function(){return this.$anchor.pos}},{key:"head",get:function(){return this.$head.pos}},{key:"from",get:function(){return this.$from.pos}},{key:"to",get:function(){return this.$to.pos}},{key:"$from",get:function(){return this.ranges[0].$from}},{key:"$to",get:function(){return this.ranges[0].$to}},{key:"empty",get:function(){for(var e=this.ranges,t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}}],[{key:"findFrom",value:function(e,t,n){var r=e.parent.inlineContent?new y(e):_(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(var i=e.depth-1;i>=0;i--){var o=t<0?_(e.node(0),e.node(i),e.before(i+1),e.index(i),t,n):_(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,t,n);if(o)return o}}},{key:"near",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.findFrom(e,t)||this.findFrom(e,-t)||new k(e.node(0))}},{key:"atStart",value:function(e){return _(e,e,0,0,1)||new k(e)}},{key:"atEnd",value:function(e){return _(e,e,e.content.size,e.childCount,-1)||new k(e)}},{key:"fromJSON",value:function(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=v[t.type];if(!n)throw new RangeError("No selection type ".concat(t.type," defined"));return n.fromJSON(e,t)}},{key:"jsonID",value:function(e,t){if(e in v)throw new RangeError("Duplicate use of selection JSON ID "+e);return v[e]=t,t.prototype.jsonID=e,t}}]),e}();m.prototype.visible=!0;var g=function e(t,n){d(this,e),this.$from=t,this.$to=n},y=function(e){s(n,e);var t=l(n);function n(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return d(this,n),t.call(this,e,r)}return p(n,[{key:"map",value:function(e,t){var r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return m.near(r);var i=e.resolve(t.map(this.anchor));return new n(i.parent.inlineContent?i:r,r)}},{key:"replace",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.i.empty;if(a(f(n.prototype),"replace",this).call(this,e,t),t==r.i.empty){var i=this.$from.marksAcross(this.$to);i&&e.ensureMarks(i)}}},{key:"eq",value:function(e){return e instanceof n&&e.anchor==this.anchor&&e.head==this.head}},{key:"getBookmark",value:function(){return new b(this.anchor,this.head)}},{key:"toJSON",value:function(){return{type:"text",anchor:this.anchor,head:this.head}}},{key:"$cursor",get:function(){return this.$anchor.pos==this.$head.pos?this.$head:null}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.anchor||"number"!=typeof t.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new n(e.resolve(t.anchor),e.resolve(t.head))}},{key:"create",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))}},{key:"between",value:function(e,t,r){var i=e.pos-t.pos;if(r&&!i||(r=i>=0?1:-1),!t.parent.inlineContent){var o=m.findFrom(t,r,!0)||m.findFrom(t,-r,!0);if(!o)return m.near(t,r);t=o.$head}return e.parent.inlineContent||(0==i||(e=(m.findFrom(e,-r,!0)||m.findFrom(e,r,!0)).$anchor).pos<t.pos!=i<0)&&(e=t),new n(e,t)}}]),n}(m);m.jsonID("text",y);var b=function(){function e(t,n){d(this,e),this.anchor=t,this.head=n}return p(e,[{key:"map",value:function(t){return new e(t.map(this.anchor),t.map(this.head))}},{key:"resolve",value:function(e){return y.between(e.resolve(this.anchor),e.resolve(this.head))}}]),e}(),w=function(e){s(n,e);var t=l(n);function n(e){var r;d(this,n);var i=e.nodeAfter,o=e.node(0).resolve(e.pos+i.nodeSize);return(r=t.call(this,e,o)).node=i,r}return p(n,[{key:"map",value:function(e,t){var r=t.mapResult(this.anchor),i=r.deleted,o=r.pos,a=e.resolve(o);return i?m.near(a):new n(a)}},{key:"content",value:function(){return new r.i(r.c.from(this.node),0,0)}},{key:"eq",value:function(e){return e instanceof n&&e.anchor==this.anchor}},{key:"toJSON",value:function(){return{type:"node",anchor:this.anchor}}},{key:"getBookmark",value:function(){return new E(this.anchor)}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new n(e.resolve(t.anchor))}},{key:"create",value:function(e,t){return new this(e.resolve(t))}},{key:"isSelectable",value:function(e){return!e.isText&&!1!==e.type.spec.selectable}}]),n}(m);w.prototype.visible=!1,m.jsonID("node",w);var E=function(){function e(t){d(this,e),this.anchor=t}return p(e,[{key:"map",value:function(t){var n=t.mapResult(this.anchor),r=n.deleted,i=n.pos;return r?new b(i,i):new e(i)}},{key:"resolve",value:function(e){var t=e.resolve(this.anchor),n=t.nodeAfter;return n&&w.isSelectable(n)?new w(t):m.near(t)}}]),e}(),k=function(e){s(n,e);var t=l(n);function n(e){return d(this,n),t.call(this,e.resolve(0),e.resolve(e.content.size))}return p(n,[{key:"replace",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.i.empty;if(t==r.i.empty){e.delete(0,e.doc.content.size);var i=m.atStart(e.doc);i.eq(e.selection)||e.setSelection(i)}else a(f(n.prototype),"replace",this).call(this,e,t)}},{key:"toJSON",value:function(){return{type:"all"}}},{key:"map",value:function(e){return new n(e)}},{key:"eq",value:function(e){return e instanceof n}},{key:"getBookmark",value:function(){return O}}],[{key:"fromJSON",value:function(e){return new n(e)}}]),n}(m);m.jsonID("all",k);var O={map:function(){return this},resolve:function(e){return new k(e)}};function _(e,t,n,r,i,o){if(t.inlineContent)return y.create(e,n);for(var a=r-(i>0?0:1);i>0?a<t.childCount:a>=0;a+=i){var s=t.child(a);if(s.isAtom){if(!o&&w.isSelectable(s))return w.create(e,n-(i<0?s.nodeSize:0))}else{var c=_(e,s,n+i,i<0?s.childCount:0,i,o);if(c)return c}n+=s.nodeSize*i}}function x(e,t,n){var r=e.steps.length-1;if(!(r<t)){var o,a=e.steps[r];(a instanceof i.c||a instanceof i.b)&&(e.mapping.maps[r].forEach((function(e,t,n,r){null==o&&(o=r)})),e.setSelection(m.near(e.doc.resolve(o),n)))}}function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e,t,n){return(M="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=D(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=D(e);if(t){var i=D(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return T(this,n)}}function T(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(a,e);var t,n,i,o=A(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e.doc)).time=Date.now(),t.curSelection=e.selection,t.curSelectionFor=0,t.storedMarks=e.storedMarks,t.updated=0,t.meta=Object.create(null),t}return t=a,(n=[{key:"setSelection",value:function(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this}},{key:"setStoredMarks",value:function(e){return this.storedMarks=e,this.updated|=2,this}},{key:"ensureMarks",value:function(e){return r.d.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}},{key:"addStoredMark",value:function(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}},{key:"removeStoredMark",value:function(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}},{key:"addStep",value:function(e,t){M(D(a.prototype),"addStep",this).call(this,e,t),this.updated=-3&this.updated,this.storedMarks=null}},{key:"setTime",value:function(e){return this.time=e,this}},{key:"replaceSelection",value:function(e){return this.selection.replace(this,e),this}},{key:"replaceSelectionWith",value:function(e,t){var n=this.selection;return!1!==t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||r.d.none))),n.replaceWith(this,e),this}},{key:"deleteSelection",value:function(){return this.selection.replace(this),this}},{key:"insertText",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();if(!e)return this.deleteRange(t,n);var i=this.storedMarks;if(!i){var o=this.doc.resolve(t);i=n==t?o.marks():o.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,r.text(e,i)),this.selection.empty||this.setSelection(m.near(this.selection.$to)),this}},{key:"setMeta",value:function(e,t){return this.meta["string"==typeof e?e:e.key]=t,this}},{key:"getMeta",value:function(e){return this.meta["string"==typeof e?e:e.key]}},{key:"scrollIntoView",value:function(){return this.updated|=4,this}},{key:"selection",get:function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}},{key:"selectionSet",get:function(){return(1&this.updated)>0}},{key:"storedMarksSet",get:function(){return(2&this.updated)>0}},{key:"isGeneric",get:function(){for(var e in this.meta)return!1;return!0}},{key:"scrolledIntoView",get:function(){return(4&this.updated)>0}}])&&N(t.prototype,n),i&&N(t,i),a}(i.e);function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){return t&&e?e.bind(t):e}var $=function e(t,n,r){P(this,e),this.name=t,this.init=B(n.init,r),this.apply=B(n.apply,r)},j=[new $("doc",{init:function(e){return e.doc||e.schema.topNodeType.createAndFill()},apply:function(e){return e.doc}}),new $("selection",{init:function(e,t){return e.selection||m.atStart(t.doc)},apply:function(e){return e.selection}}),new $("storedMarks",{init:function(e){return e.storedMarks||null},apply:function(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new $("scrollToSelection",{init:function(){return 0},apply:function(e,t){return e.scrolledIntoView?t+1:t}})],z=function e(t,n){var r=this;P(this,e),this.schema=t,this.fields=j.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),n&&n.forEach((function(e){if(r.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");r.plugins.push(e),r.pluginsByKey[e.key]=e,e.spec.state&&r.fields.push(new $(e.key,e.spec.state,e))}))},F=function(){function e(t){P(this,e),this.config=t}var t,n,i;return t=e,i=[{key:"create",value:function(t){for(var n=new z(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new e(n),i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(t,r);return r}},{key:"fromJSON",value:function(t,n,i){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");var o=new z(t.schema,t.plugins),a=new e(o);return o.fields.forEach((function(e){if("doc"==e.name)a.doc=r.f.fromJSON(t.schema,n.doc);else if("selection"==e.name)a.selection=m.fromJSON(a.doc,n.selection);else if("storedMarks"==e.name)n.storedMarks&&(a.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(i)for(var o in i){var s=i[o],c=s.spec.state;if(s.key==e.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,o))return void(a[e.name]=c.fromJSON.call(s,t,n[o],a))}a[e.name]=e.init(t,a)}})),a}},{key:"addApplyListener",value:function(e){H.push(e)}},{key:"removeApplyListener",value:function(e){var t=H.indexOf(e);t>-1&&H.splice(t,1)}}],(n=[{key:"apply",value:function(e){return this.applyTransaction(e).state}},{key:"filterTransaction",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=0;n<this.config.plugins.length;n++)if(n!=t){var r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,e,this))return!1}return!0}},{key:"applyTransaction",value:function(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};for(var t=[e],n=this.applyInner(e),r=null;;){for(var i=!1,o=0;o<this.config.plugins.length;o++){var a=this.config.plugins[o];if(a.spec.appendTransaction){var s=r?r[o].n:0,c=r?r[o].state:this,l=s<t.length&&a.spec.appendTransaction.call(a,s?t.slice(s):t,c,n);if(l&&n.filterTransaction(l,o)){if(l.setMeta("appendedTransaction",e),!r){r=[];for(var u=0;u<this.config.plugins.length;u++)r.push(u<o?{state:n,n:t.length}:{state:this,n:0})}t.push(l),n=n.applyInner(l),i=!0}r&&(r[o]={state:n,n:t.length})}}if(!i)return{state:n,transactions:t}}}},{key:"applyInner",value:function(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var n=new e(this.config),r=this.config.fields,i=0;i<r.length;i++){var o=r[i];n[o.name]=o.apply(t,this[o.name],this,n)}for(var a=0;a<H.length;a++)H[a](this,t,n);return n}},{key:"reconfigure",value:function(t){for(var n=new z(this.schema,t.plugins),r=n.fields,i=new e(n),o=0;o<r.length;o++){var a=r[o].name;i[a]=this.hasOwnProperty(a)?this[a]:r[o].init(t,i)}return i}},{key:"toJSON",value:function(e){var t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map((function(e){return e.toJSON()}))),e&&"object"==R(e))for(var n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var r=e[n],i=r.spec.state;i&&i.toJSON&&(t[n]=i.toJSON.call(r,this[r.key]))}return t}},{key:"schema",get:function(){return this.config.schema}},{key:"plugins",get:function(){return this.config.plugins}},{key:"tr",get:function(){return new I(this)}}])&&L(t.prototype,n),i&&L(t,i),e}(),H=[];function U(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e,t,n){return t&&K(e.prototype,t),n&&K(e,n),e}var V=function(){function e(t){U(this,e),this.props={},t.props&&function e(t,n,r){for(var i in t){var o=t[i];o instanceof Function?o=o.bind(n):"handleDOMEvents"==i&&(o=e(o,n,{})),r[i]=o}return r}(t.props,this,this.props),this.spec=t,this.key=t.key?t.key.key:q("plugin")}return W(e,[{key:"getState",value:function(e){return e[this.key]}}]),e}(),G=Object.create(null);function q(e){return e in G?e+"$"+ ++G[e]:(G[e]=0,e+"$")}var J=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"key";U(this,e),this.key=q(t)}return W(e,[{key:"get",value:function(e){return e.config.pluginsByKey[this.key]}},{key:"getState",value:function(e){return e[this.key]}}]),e}();n.d(t,"f",(function(){return m})),n.d(t,"g",(function(){return g})),n.d(t,"h",(function(){return y})),n.d(t,"c",(function(){return w})),n.d(t,"a",(function(){return k})),n.d(t,"b",(function(){return F})),n.d(t,"d",(function(){return V})),n.d(t,"e",(function(){return J}))},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=Math.pow(2,16);function s(e){return 65535&e}var c=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;o(this,e),this.pos=t,this.deleted=n,this.recover=r},l=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];o(this,e),this.ranges=t,this.inverted=n}return i(e,[{key:"recover",value:function(e){var t=0,n=s(e);if(!this.inverted)for(var r=0;r<n;r++)t+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+t+function(e){return(e-(65535&e))/a}(e)}},{key:"mapResult",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!1)}},{key:"map",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!0)}},{key:"_map",value:function(e,t,n){for(var r=0,i=this.inverted?2:1,o=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var l=this.ranges[s]-(this.inverted?r:0);if(l>e)break;var u=this.ranges[s+i],f=this.ranges[s+o],d=l+u;if(e<=d){var h=l+r+((u?e==l?-1:e==d?1:t:t)<0?0:f);if(n)return h;var p=e==(t<0?l:d)?null:s/3+(e-l)*a;return new c(h,t<0?e!=l:e!=d,p)}r+=f-u}return n?e+r:new c(e+r)}},{key:"touches",value:function(e,t){for(var n=0,r=s(t),i=this.inverted?2:1,o=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var c=this.ranges[a]-(this.inverted?n:0);if(c>e)break;var l=this.ranges[a+i];if(e<=c+l&&a==3*r)return!0;n+=this.ranges[a+o]-l}return!1}},{key:"forEach",value:function(e){for(var t=this.inverted?2:1,n=this.inverted?1:2,r=0,i=0;r<this.ranges.length;r+=3){var o=this.ranges[r],a=o-(this.inverted?i:0),s=o+(this.inverted?0:i),c=this.ranges[r+t],l=this.ranges[r+n];e(a,a+c,s,s+l),i+=l-c}}},{key:"invert",value:function(){return new e(this.ranges,!this.inverted)}},{key:"toString",value:function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}}],[{key:"offset",value:function(t){return 0==t?e.empty:new e(t<0?[0,-t,0]:[0,0,t])}}]),e}();l.empty=new l([]);var u=function(){function e(t,n,r,i){o(this,e),this.maps=t||[],this.from=r||0,this.to=null==i?this.maps.length:i,this.mirror=n}return i(e,[{key:"slice",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.maps.length;return new e(this.maps,this.mirror,t,n)}},{key:"copy",value:function(){return new e(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}},{key:"appendMap",value:function(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)}},{key:"appendMapping",value:function(e){for(var t=0,n=this.maps.length;t<e.maps.length;t++){var r=e.getMirror(t);this.appendMap(e.maps[t],null!=r&&r<t?n+r:null)}}},{key:"getMirror",value:function(e){if(this.mirror)for(var t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}},{key:"setMirror",value:function(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}},{key:"appendMappingInverted",value:function(e){for(var t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){var r=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=r&&r>t?n-r-1:null)}}},{key:"invert",value:function(){var t=new e;return t.appendMappingInverted(this),t}},{key:"map",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.mirror)return this._map(e,t,!0);for(var n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e}},{key:"mapResult",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!1)}},{key:"_map",value:function(e,t,n){for(var r=!1,i=this.from;i<this.to;i++){var o=this.maps[i].mapResult(e,t);if(null!=o.recover){var a=this.getMirror(i);if(null!=a&&a>i&&a<this.to){i=a,e=this.maps[a].recover(o.recover);continue}}o.deleted&&(r=!0),e=o.pos}return n?e:new c(e,r)}}]),e}();function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e){var t=Error.call(this,e);return t.__proto__=d.prototype,t}d.prototype=Object.create(Error.prototype),d.prototype.constructor=d,d.prototype.name="TransformError";var h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.doc=t,this.steps=[],this.docs=[],this.mapping=new u}var t,n,r;return t=e,(n=[{key:"step",value:function(e){var t=this.maybeStep(e);if(t.failed)throw new d(t.failed);return this}},{key:"maybeStep",value:function(e){var t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}},{key:"addStep",value:function(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}},{key:"before",get:function(){return this.docs.length?this.docs[0]:this.doc}},{key:"docChanged",get:function(){return this.steps.length>0}}])&&f(t.prototype,n),r&&f(t,r),e}(),p=n(1);function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}function y(){throw new Error("Override me")}var b=Object.create(null),w=function(){function e(){v(this,e)}return g(e,[{key:"apply",value:function(e){return y()}},{key:"getMap",value:function(){return l.empty}},{key:"invert",value:function(e){return y()}},{key:"map",value:function(e){return y()}},{key:"merge",value:function(e){return null}},{key:"toJSON",value:function(){return y()}}],[{key:"fromJSON",value:function(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=b[t.stepType];if(!n)throw new RangeError("No step type ".concat(t.stepType," defined"));return n.fromJSON(e,t)}},{key:"jsonID",value:function(e,t){if(e in b)throw new RangeError("Duplicate use of step JSON ID "+e);return b[e]=t,t.prototype.jsonID=e,t}}]),e}(),E=function(){function e(t,n){v(this,e),this.doc=t,this.failed=n}return g(e,null,[{key:"ok",value:function(t){return new e(t,null)}},{key:"fail",value:function(t){return new e(null,t)}},{key:"fromReplace",value:function(t,n,r,i){try{return e.ok(t.replace(n,r,i))}catch(t){if(t instanceof p.g)return e.fail(t.message);throw t}}}]),e}();function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t,n){return t&&_(e.prototype,t),n&&_(e,n),e}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var i=A(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return C(this,n)}}function C(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var T=function(e){S(n,e);var t=M(n);function n(e,r,i,o){var a;return O(this,n),(a=t.call(this)).from=e,a.to=r,a.slice=i,a.structure=!!o,a}return x(n,[{key:"apply",value:function(e){return this.structure&&I(e,this.from,this.to)?E.fail("Structure replace would overwrite content"):E.fromReplace(e,this.from,this.to,this.slice)}},{key:"getMap",value:function(){return new l([this.from,this.to-this.from,this.slice.size])}},{key:"invert",value:function(e){return new n(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}},{key:"map",value:function(e){var t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted?null:new n(t.pos,Math.max(t.pos,r.pos),this.slice)}},{key:"merge",value:function(e){if(!(e instanceof n)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;var t=this.slice.size+e.slice.size==0?p.i.empty:new p.i(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new n(e.from,this.to,t,this.structure)}var r=this.slice.size+e.slice.size==0?p.i.empty:new p.i(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new n(this.from,this.to+(e.to-e.from),r,this.structure)}},{key:"toJSON",value:function(){var e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new n(t.from,t.to,p.i.fromJSON(e,t.slice),!!t.structure)}}]),n}(w);w.jsonID("replace",T);var D=function(e){S(n,e);var t=M(n);function n(e,r,i,o,a,s,c){var l;return O(this,n),(l=t.call(this)).from=e,l.to=r,l.gapFrom=i,l.gapTo=o,l.slice=a,l.insert=s,l.structure=!!c,l}return x(n,[{key:"apply",value:function(e){if(this.structure&&(I(e,this.from,this.gapFrom)||I(e,this.gapTo,this.to)))return E.fail("Structure gap-replace would overwrite content");var t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return E.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,t.content);return n?E.fromReplace(e,this.from,this.to,n):E.fail("Content does not fit in gap")}},{key:"getMap",value:function(){return new l([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}},{key:"invert",value:function(e){var t=this.gapTo-this.gapFrom;return new n(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}},{key:"map",value:function(e){var t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),o=e.map(this.gapTo,1);return t.deleted&&r.deleted||i<t.pos||o>r.pos?null:new n(t.pos,r.pos,i,o,this.slice,this.insert,this.structure)}},{key:"toJSON",value:function(){var e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.from||"number"!=typeof t.to||"number"!=typeof t.gapFrom||"number"!=typeof t.gapTo||"number"!=typeof t.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new n(t.from,t.to,t.gapFrom,t.gapTo,p.i.fromJSON(e,t.slice),t.insert,!!t.structure)}}]),n}(w);function I(e,t,n){for(var r=e.resolve(t),i=n-t,o=r.depth;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0)for(var a=r.node(o).maybeChild(r.indexAfter(o));i>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,i--}return!1}function R(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function L(e){for(var t=e.parent.content.cutByIndex(e.startIndex,e.endIndex),n=e.depth;;--n){var r=e.$from.node(n),i=e.$from.index(n),o=e.$to.indexAfter(n);if(n<e.depth&&r.canReplace(i,o,t))return n;if(0==n||r.type.spec.isolating||!R(r,i,o))break}}function P(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,i=$(e,t),o=i&&j(r,t);return o?i.map(B).concat({type:t,attrs:n}).concat(o.map(B)):null}function B(e){return{type:e,attrs:null}}function $(e,t){var n=e.parent,r=e.startIndex,i=e.endIndex,o=n.contentMatchAt(r).findWrapping(t);if(!o)return null;var a=o.length?o[0]:t;return n.canReplaceWith(r,i,a)?o:null}function j(e,t){var n=e.parent,r=e.startIndex,i=e.endIndex,o=n.child(r),a=t.contentMatch.findWrapping(o.type);if(!a)return null;for(var s=(a.length?a[a.length-1]:t).contentMatch,c=r;s&&c<i;c++)s=s.matchType(n.child(c).type);return s&&s.validEnd?a:null}function z(e,t,n){var r=e.resolve(t),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function F(e,t,n){var r=e.resolve(t);if(!n.content.size)return t;for(var i=n.content,o=0;o<n.openStart;o++)i=i.firstChild.content;for(var a=1;a<=(0==n.openStart&&n.size?2:1);a++)for(var s=r.depth;s>=0;s--){var c=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,l=r.index(s)+(c>0?1:0);if(1==a?r.node(s).canReplace(l,l,i):r.node(s).contentMatchAt(l).findWrapping(i.firstChild.type))return 0==c?r.pos:c<0?r.before(s+1):r.after(s+1)}return null}function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e,t,n){return t&&K(e.prototype,t),n&&K(e,n),e}function V(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=X(e);if(t){var i=X(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return J(this,n)}}function J(e,t){return!t||"object"!==H(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z(e,t,n){for(var r=[],i=0;i<e.childCount;i++){var o=e.child(i);o.content.size&&(o=o.copy(Z(o.content,t,o))),o.isInline&&(o=t(o,n,i)),r.push(o)}return p.c.fromArray(r)}w.jsonID("replaceAround",D),h.prototype.lift=function(e,t){for(var n=e.$from,r=e.$to,i=e.depth,o=n.before(i+1),a=r.after(i+1),s=o,c=a,l=p.c.empty,u=0,f=i,d=!1;f>t;f--)d||n.index(f)>0?(d=!0,l=p.c.from(n.node(f).copy(l)),u++):s--;for(var h=p.c.empty,v=0,m=i,g=!1;m>t;m--)g||r.after(m+1)<r.end(m)?(g=!0,h=p.c.from(r.node(m).copy(h)),v++):c++;return this.step(new D(s,c,o,a,new p.i(l.append(h),u,v),l.size-u,!0))},h.prototype.wrap=function(e,t){for(var n=p.c.empty,r=t.length-1;r>=0;r--)n=p.c.from(t[r].type.create(t[r].attrs,n));var i=e.start,o=e.end;return this.step(new D(i,o,i,o,new p.i(n,0,0),t.length,!0))},h.prototype.setBlockType=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var o=this.steps.length;return this.doc.nodesBetween(e,n,(function(e,n){if(e.isTextblock&&!e.hasMarkup(r,i)&&z(t.doc,t.mapping.slice(o).map(n),r)){t.clearIncompatible(t.mapping.slice(o).map(n,1),r);var a=t.mapping.slice(o),s=a.map(n,1),c=a.map(n+e.nodeSize,1);return t.step(new D(s,c,s+1,c-1,new p.i(p.c.from(r.create(i,null,e.marks)),0,0),1,!0)),!1}})),this},h.prototype.setNodeMarkup=function(e,t,n,r){var i=this.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");t||(t=i.type);var o=t.create(n,null,r||i.marks);if(i.isLeaf)return this.replaceWith(e,e+i.nodeSize,o);if(!t.validContent(i.content))throw new RangeError("Invalid content for node type "+t.name);return this.step(new D(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new p.i(p.c.from(o),0,0),1,!0))},h.prototype.split=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,r=this.doc.resolve(e),i=p.c.empty,o=p.c.empty,a=r.depth,s=r.depth-t,c=t-1;a>s;a--,c--){i=p.c.from(r.node(a).copy(i));var l=n&&n[c];o=p.c.from(l?l.type.create(l.attrs,o):r.node(a).copy(o))}return this.step(new T(e,e,new p.i(i.append(o),t,t),!0))},h.prototype.join=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=new T(e-t,e+t,p.i.empty,!0);return this.step(n)};var Q=function(e){V(n,e);var t=q(n);function n(e,r,i){var o;return U(this,n),(o=t.call(this)).from=e,o.to=r,o.mark=i,o}return W(n,[{key:"apply",value:function(e){var t=this,n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new p.i(Z(n.content,(function(e,n){return e.isAtom&&n.type.allowsMarkType(t.mark.type)?e.mark(t.mark.addToSet(e.marks)):e}),i),n.openStart,n.openEnd);return E.fromReplace(e,this.from,this.to,o)}},{key:"invert",value:function(){return new Y(this.from,this.to,this.mark)}},{key:"map",value:function(e){var t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new n(t.pos,r.pos,this.mark)}},{key:"merge",value:function(e){if(e instanceof n&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new n(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)}},{key:"toJSON",value:function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new n(t.from,t.to,e.markFromJSON(t.mark))}}]),n}(w);w.jsonID("addMark",Q);var Y=function(e){V(n,e);var t=q(n);function n(e,r,i){var o;return U(this,n),(o=t.call(this)).from=e,o.to=r,o.mark=i,o}return W(n,[{key:"apply",value:function(e){var t=this,n=e.slice(this.from,this.to),r=new p.i(Z(n.content,(function(e){return e.mark(t.mark.removeFromSet(e.marks))})),n.openStart,n.openEnd);return E.fromReplace(e,this.from,this.to,r)}},{key:"invert",value:function(){return new Q(this.from,this.to,this.mark)}},{key:"map",value:function(e){var t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new n(t.pos,r.pos,this.mark)}},{key:"merge",value:function(e){if(e instanceof n&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new n(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)}},{key:"toJSON",value:function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new n(t.from,t.to,e.markFromJSON(t.mark))}}]),n}(w);function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:p.i.empty;if(t==n&&!r.size)return null;var i=e.resolve(t),o=e.resolve(n);return ne(i,o,r)?new T(t,n,r):new re(i,o,r).fit()}function ne(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}w.jsonID("removeMark",Y),h.prototype.addMark=function(e,t,n){var r=this,i=[],o=[],a=null,s=null;return this.doc.nodesBetween(e,t,(function(r,c,l){if(r.isInline){var u=r.marks;if(!n.isInSet(u)&&l.type.allowsMarkType(n.type)){for(var f=Math.max(c,e),d=Math.min(c+r.nodeSize,t),h=n.addToSet(u),p=0;p<u.length;p++)u[p].isInSet(h)||(a&&a.to==f&&a.mark.eq(u[p])?a.to=d:i.push(a=new Y(f,d,u[p])));s&&s.to==f?s.to=d:o.push(s=new Q(f,d,n))}}})),i.forEach((function(e){return r.step(e)})),o.forEach((function(e){return r.step(e)})),this},h.prototype.removeMark=function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=[],o=0;return this.doc.nodesBetween(e,t,(function(n,a){if(n.isInline){o++;var s=null;if(r instanceof p.e)for(var c,l=n.marks;c=r.isInSet(l);)(s||(s=[])).push(c),l=c.removeFromSet(l);else r?r.isInSet(n.marks)&&(s=[r]):s=n.marks;if(s&&s.length)for(var u=Math.min(a+n.nodeSize,t),f=0;f<s.length;f++){for(var d=s[f],h=void 0,v=0;v<i.length;v++){var m=i[v];m.step==o-1&&d.eq(i[v].style)&&(h=m)}h?(h.to=u,h.step=o):i.push({style:d,from:Math.max(a,e),to:u,step:o})}}})),i.forEach((function(e){return n.step(new Y(e.from,e.to,e.style))})),this},h.prototype.clearIncompatible=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.contentMatch,r=this.doc.nodeAt(e),i=[],o=e+1,a=0;a<r.childCount;a++){var s=r.child(a),c=o+s.nodeSize,l=n.matchType(s.type,s.attrs);if(l){n=l;for(var u=0;u<s.marks.length;u++)t.allowsMarkType(s.marks[u].type)||this.step(new Y(o,c,s.marks[u]))}else i.push(new T(o,c,p.i.empty));o=c}if(!n.validEnd){var f=n.fillBefore(p.c.empty,!0);this.replace(o,o,new p.i(f,0,0))}for(var d=i.length-1;d>=0;d--)this.step(i[d]);return this},h.prototype.replace=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p.i.empty,r=te(this.doc,e,t,n);return r&&this.step(r),this},h.prototype.replaceWith=function(e,t,n){return this.replace(e,t,new p.i(p.c.from(n),0,0))},h.prototype.delete=function(e,t){return this.replace(e,t,p.i.empty)},h.prototype.insert=function(e,t){return this.replaceWith(e,e,t)};var re=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$to=n,this.$from=t,this.unplaced=r,this.frontier=[];for(var i=0;i<=t.depth;i++){var o=t.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(t.indexAfter(i))})}this.placed=p.c.empty;for(var a=t.depth;a>0;a--)this.placed=p.c.from(t.node(a).copy(this.placed))}var t,n,r;return t=e,(n=[{key:"fit",value:function(){for(;this.unplaced.size;){var e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}var t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(t<0?this.$to:r.doc.resolve(t));if(!i)return null;for(var o=this.placed,a=r.depth,s=i.depth;a&&s&&1==o.childCount;)o=o.firstChild.content,a--,s--;var c=new p.i(o,a,s);return t>-1?new D(r.pos,t,this.$to.pos,this.$to.end(),c,n):c.size||r.pos!=this.$to.pos?new T(r.pos,i.pos,c):void 0}},{key:"findFittable",value:function(){for(var e=1;e<=2;e++)for(var t=this.unplaced.openStart;t>=0;t--)for(var n=void 0,r=(t?(n=ae(this.unplaced.content,t-1).firstChild).content:this.unplaced.content).firstChild,i=this.depth;i>=0;i--){var o=this.frontier[i],a=o.type,s=o.match,c=void 0,l=void 0;if(1==e&&(r?s.matchType(r.type)||(l=s.fillBefore(p.c.from(r),!1)):a.compatibleContent(n.type)))return{sliceDepth:t,frontierDepth:i,parent:n,inject:l};if(2==e&&r&&(c=s.findWrapping(r.type)))return{sliceDepth:t,frontierDepth:i,parent:n,wrap:c};if(n&&s.matchType(n.type))break}}},{key:"openMore",value:function(){var e=this.unplaced,t=e.content,n=e.openStart,r=e.openEnd,i=ae(t,n);return!(!i.childCount||i.firstChild.isLeaf||(this.unplaced=new p.i(t,n+1,Math.max(r,i.size+n>=t.size-r?n+1:0)),0))}},{key:"dropNode",value:function(){var e=this.unplaced,t=e.content,n=e.openStart,r=e.openEnd,i=ae(t,n);if(i.childCount<=1&&n>0){var o=t.size-n<=n+i.size;this.unplaced=new p.i(ie(t,n-1,1),n-1,o?n-1:r)}else this.unplaced=new p.i(ie(t,n,1),n,r)}},{key:"placeNodes",value:function(e){for(var t=e.sliceDepth,n=e.frontierDepth,r=e.parent,i=e.inject,o=e.wrap;this.depth>n;)this.closeFrontierNode();if(o)for(var a=0;a<o.length;a++)this.openFrontierNode(o[a]);var s=this.unplaced,c=r?r.content:s.content,l=s.openStart-t,u=0,f=[],d=this.frontier[n],h=d.match,v=d.type;if(i){for(var m=0;m<i.childCount;m++)f.push(i.child(m));h=h.matchFragment(i)}for(var g=c.size+t-(s.content.size-s.openEnd);u<c.childCount;){var y=c.child(u),b=h.matchType(y.type);if(!b)break;(++u>1||0==l||y.content.size)&&(h=b,f.push(se(y.mark(v.allowedMarks(y.marks)),1==u?l:0,u==c.childCount?g:-1)))}var w=u==c.childCount;w||(g=-1),this.placed=oe(this.placed,n,p.c.from(f)),this.frontier[n].match=h,w&&g<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var E=0,k=c;E<g;E++){var O=k.lastChild;this.frontier.push({type:O.type,match:O.contentMatchAt(O.childCount)}),k=O.content}this.unplaced=w?0==t?p.i.empty:new p.i(ie(s.content,t-1,1),t-1,g<0?s.openEnd:t-1):new p.i(ie(s.content,t,u),s.openStart,s.openEnd)}},{key:"mustMoveInline",value:function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var e,t=this.frontier[this.depth];if(!t.type.isTextblock||!ce(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;for(var n=this.$to.depth,r=this.$to.after(n);n>1&&r==this.$to.end(--n);)++r;return r}},{key:"findCloseLevel",value:function(e){e:for(var t=Math.min(this.depth,e.depth);t>=0;t--){var n=this.frontier[t],r=n.match,i=n.type,o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),a=ce(e,t,i,r,o);if(a){for(var s=t-1;s>=0;s--){var c=this.frontier[s],l=c.match,u=ce(e,s,c.type,l,!0);if(!u||u.childCount)continue e}return{depth:t,fit:a,move:o?e.doc.resolve(e.after(t+1)):e}}}}},{key:"close",value:function(e){var t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=oe(this.placed,t.depth,t.fit)),e=t.move;for(var n=t.depth+1;n<=e.depth;n++){var r=e.node(n),i=r.type.contentMatch.fillBefore(r.content,!0,e.index(n));this.openFrontierNode(r.type,r.attrs,i)}return e}},{key:"openFrontierNode",value:function(e,t,n){var r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=oe(this.placed,this.depth,p.c.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}},{key:"closeFrontierNode",value:function(){var e=this.frontier.pop().match.fillBefore(p.c.empty,!0);e.childCount&&(this.placed=oe(this.placed,this.frontier.length,e))}},{key:"depth",get:function(){return this.frontier.length-1}}])&&ee(t.prototype,n),r&&ee(t,r),e}();function ie(e,t,n){return 0==t?e.cutByIndex(n):e.replaceChild(0,e.firstChild.copy(ie(e.firstChild.content,t-1,n)))}function oe(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(oe(e.lastChild.content,t-1,n)))}function ae(e,t){for(var n=0;n<t;n++)e=e.firstChild.content;return e}function se(e,t,n){if(t<=0)return e;var r=e.content;return t>1&&(r=r.replaceChild(0,se(r.firstChild,t-1,1==r.childCount?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(p.c.empty,!0)))),e.copy(r)}function ce(e,t,n,r,i){var o=e.node(t),a=i?e.indexAfter(t):e.index(t);if(a==o.childCount&&!n.compatibleContent(o.type))return null;var s=r.fillBefore(o.content,!0,a);return s&&!function(e,t,n){for(var r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}(n,o.content,a)?s:null}function le(e,t,n,r,i){if(t<n){var o=e.firstChild;e=e.replaceChild(0,o.copy(le(o.content,t+1,n,r,o)))}if(t>r){var a=i.contentMatchAt(0),s=a.fillBefore(e).append(e);e=s.append(a.matchFragment(s).fillBefore(p.c.empty,!0))}return e}function ue(e,t){for(var n=[],r=Math.min(e.depth,t.depth);r>=0;r--){var i=e.start(r);if(i<e.pos-(e.depth-r)||t.end(r)>t.pos+(t.depth-r)||e.node(r).type.spec.isolating||t.node(r).type.spec.isolating)break;i==t.start(r)&&n.push(r)}return n}h.prototype.replaceRange=function(e,t,n){if(!n.size)return this.deleteRange(e,t);var r=this.doc.resolve(e),i=this.doc.resolve(t);if(ne(r,i,n))return this.step(new T(e,t,n));var o=ue(r,this.doc.resolve(t));0==o[o.length-1]&&o.pop();var a=-(r.depth+1);o.unshift(a);for(var s=r.depth,c=r.pos-1;s>0;s--,c--){var l=r.node(s).type.spec;if(l.defining||l.isolating)break;o.indexOf(s)>-1?a=s:r.before(s)==c&&o.splice(1,0,-s)}for(var u=o.indexOf(a),f=[],d=n.openStart,h=n.content,v=0;;v++){var m=h.firstChild;if(f.push(m),v==n.openStart)break;h=m.content}d>0&&f[d-1].type.spec.defining&&r.node(u).type!=f[d-1].type?d-=1:d>=2&&f[d-1].isTextblock&&f[d-2].type.spec.defining&&r.node(u).type!=f[d-2].type&&(d-=2);for(var g=n.openStart;g>=0;g--){var y=(g+d+1)%(n.openStart+1),b=f[y];if(b)for(var w=0;w<o.length;w++){var E=o[(w+u)%o.length],k=!0;E<0&&(k=!1,E=-E);var O=r.node(E-1),_=r.index(E-1);if(O.canReplaceWith(_,_,b.type,b.marks))return this.replace(r.before(E),k?i.after(E):t,new p.i(le(n.content,0,n.openStart,y),y,n.openEnd))}}for(var x=this.steps.length,S=o.length-1;S>=0&&(this.replace(e,t,n),!(this.steps.length>x));S--){var N=o[S];S<0||(e=r.before(N),t=i.after(N))}return this},h.prototype.replaceRangeWith=function(e,t,n){if(!n.isInline&&e==t&&this.doc.resolve(e).parent.content.size){var r=function(e,t,n){var r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(var i=r.depth-1;i>=0;i--){var o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(var a=r.depth-1;a>=0;a--){var s=r.indexAfter(a);if(r.node(a).canReplaceWith(s,s,n))return r.after(a+1);if(s<r.node(a).childCount)return null}}(this.doc,e,n.type);null!=r&&(e=t=r)}return this.replaceRange(e,t,new p.i(p.c.from(n),0,0))},h.prototype.deleteRange=function(e,t){for(var n=this.doc.resolve(e),r=this.doc.resolve(t),i=ue(n,r),o=0;o<i.length;o++){var a=i[o],s=o==i.length-1;if(s&&0==a||n.node(a).type.contentMatch.validEnd)return this.delete(n.start(a),r.end(a));if(a>0&&(s||n.node(a-1).canReplace(n.index(a-1),r.indexAfter(a-1))))return this.delete(n.before(a),r.after(a))}for(var c=1;c<=n.depth&&c<=r.depth;c++)if(e-n.start(c)==n.depth-c&&t>n.end(c)&&r.end(c)-t!=r.depth-c)return this.delete(n.before(c),t);return this.delete(e,t)},n.d(t,"e",(function(){return h})),n.d(t,"d",(function(){return w})),n.d(t,"f",(function(){return F})),n.d(t,"h",(function(){return L})),n.d(t,"g",(function(){return P})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return T})),n.d(t,"b",(function(){return D}))},function(t,n){t.exports=e},function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||Function("return this")()}).call(this,n(20))},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var r=n(5),i=n(59),o=n(8),a=n(37),s=n(66),c=n(112),l=i("wks"),u=r.Symbol,f=c?u:u&&u.withoutSetter||a;e.exports=function(e){return o(l,e)||(s&&o(u,e)?l[e]=u[e]:l[e]=f("Symbol."+e)),l[e]}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var r=n(9);e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return u}));var r,i,o=n(1),a=n(0);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=null,l=(s(r={},a.DOC,{content:"block+"}),s(r,a.PARAGRAPH,{content:"inline*",group:"block",attrs:{indent:{default:0},number:{default:0},align:{default:null},origin:{default:null}},isBase:!0,parseDOM:[{tag:"p",getAttrs:function(e){var t=0,n=null;return e.getAttributeNames().forEach((function(e){e.indexOf("data-indent")>-1&&(t=Number(e.match(/\d/)[0])),"data-align-right"===e&&(n="right"),"data-align-center"===e&&(n="center")})),{number:Number(e.getAttribute("data-number")),indent:t,align:n}}},{tag:"br",attrs:{origin:"br"}}],toDOM:function(e){var t=e.attrs,n=t.indent,r=t.number,i=t.align,o={};return"number"==typeof n&&n>0&&n<9&&(o["data-indent-".concat(n)]=""),"number"==typeof r&&r>0&&(o["data-number"]=r),["center","right"].indexOf(i)>-1&&(o["data-align-".concat(i)]=""),["p",o,0]}}),s(r,a.BLOCK_QUOTE,{content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"},{tag:".listtype-quote"}],toDOM:function(){return["blockquote",0]}}),s(r,a.HORIZONTAL_RULE,{group:"block",atom:!0,parseDOM:[{tag:"hr"}],toDOM:function(){return["hr"]}}),s(r,a.HEADING,{attrs:{align:{default:null},level:{default:1}},marks:"".concat(a.COLOR," ").concat(a.BG_COLOR," ").concat(a.ITALIC," ").concat(a.UNDERLINE," ").concat(a.DEL),content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}}],toDOM:function(e){var t={},n=e.attrs.align,r=e.attrs.level;return[1,2,3,4,5].indexOf(r)<0&&(r=5),["center","right"].indexOf(n)>-1&&(t["data-align-".concat(n)]=""),["h"+r,t,0]}}),s(r,a.CODE_BLOCK,{attrs:{lang:{default:"text"}},content:"text*",marks:"",group:"block",code:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:function(e){return e.innerHTML=e.innerHTML.replace(/<br[^>]*>/gi,"\n"),{lang:e.getAttribute("lang")}}}],toDOM:function(){return["pre",["code",0]]}}),s(r,a.KATEX_BLOCK,{attrs:{mathString:{default:null}},marks:"",group:"block",atom:!0,parseDOM:[{tag:"div[data-pm-katex-block]",getAttrs:function(e){var t=e.getAttribute("data-pm-attrs");try{t=JSON.parse(t)}catch(e){t=null}return t?{mathString:t.mathString}:{mathString:"Katex_no_found"}}}],toDOM:function(e){var t=document.createElement("div");return t.setAttribute("data-pm-attrs",JSON.stringify(e.attrs)),t.setAttribute("data-pm-katex-block",""),t.innerText=e.attrs.mathString,t},toText:function(e){return"$$".concat(e.attrs.mathString,"$$")}}),s(r,a.KATEX_INLINE,{attrs:{mathString:{default:null}},marks:"",group:"inline",inline:!0,atom:!0,parseDOM:[{tag:"span[data-pm-katex-inline]",getAttrs:function(e){var t=e.getAttribute("data-pm-attrs");try{t=JSON.parse(t)}catch(e){t=null}return t?{mathString:t.mathString}:{mathString:"Katex_no_found"}}}],toDOM:function(e){var t=document.createElement("span");return t.setAttribute("data-pm-attrs",JSON.stringify(e.attrs)),t.setAttribute("data-pm-katex-inline",""),t.innerText=e.attrs.mathString,c=t,t},toText:function(e){return"$".concat(e.attrs.mathString,"$")},transformCopyDom:function(){c&&""===c.getAttribute("data-pm-katex-inline")&&c.setAttribute("data-pm-slice","1 1 ".concat(JSON.stringify(["paragraph",null]))),c=null}}),s(r,a.TEXT,{group:"inline"}),s(r,a.IMAGE,{attrs:{src:{default:null},alt:{default:null},title:{default:null},style:{default:null},href:{default:null},fromPaste:{default:!1},pastePass:{default:!1}},group:"block",atom:!0,parseDOM:[{tag:"img[src]",getAttrs:function(e){var t=e.getAttribute("data-pm-attrs");return t?JSON.parse(t):{src:e.getAttribute("src"),title:e.getAttribute("title"),alt:e.getAttribute("alt")}}}],toDOM:function(e){var t={};return t["data-pm-attrs"]=JSON.stringify(e.attrs),t.src=e.attrs.src,t.title=e.attrs.title,t.alt=e.attrs.alt,["img",t]}}),s(r,a.VIDEO,{attrs:{videoHTML:{default:null}},group:"block",atom:!0,toDOM:function(){return["div"]}}),s(r,a.EMBED_COMPONENT,{attrs:{type:{default:""},data:{default:null}},group:"block",atom:!0,parseDOM:[{tag:"div[data-pm-embed-component]",getAttrs:function(e){var t=e.getAttribute("data-pm-attrs");try{t=JSON.parse(t)}catch(e){t={}}return t}},{tag:"table",getAttrs:function(e){if("table_prosemirror"===e.className)return!1;var t={type:"table"};return t.data={content:e.outerHTML},t}}],toDOM:function(e){var t=document.createElement("div");return t.setAttribute("data-pm-attrs",JSON.stringify(e.attrs)),t.setAttribute("data-pm-embed-component",""),t}}),s(r,a.LINK,{inline:!0,content:"text*",group:"inline",marks:"".concat(a.BG_COLOR," ").concat(a.ITALIC," ").concat(a.UNDERLINE," ").concat(a.DEL),attrs:{href:{},title:{default:""},type:{default:null}},parseDOM:[{tag:"a[href]",getAttrs:function(e){var t=e.getAttribute("href");return!!(t&&t.length>1)&&{href:t,title:e.getAttribute("title")}}}],toDOM:function(e){var t=e.attrs,n=t.href,r=t.title,i=a.LINK+String((new Date).getTime()).slice(-6);return["a",{href:n,title:r,"data-type":a.LINK,"data-id":i},0]}}),s(r,a.CODE_INLINE,{inline:!0,content:"text*",group:"inline",parseDOM:[{tag:"code"},{tag:".inline-code"},{tag:"a",getAttrs:function(e){return e.getAttribute("data-type")===a.CODE_INLINE&&{}}}],toDOM:function(){return["a",{href:"#","data-type":a.CODE_INLINE},0]}}),s(r,a.SUP,{inline:!0,content:"text*",group:"inline",parseDOM:[{tag:"sup"}],toDOM:function(){return["a",{href:"#","data-type":a.SUP},0]}}),s(r,a.SUB,{inline:!0,content:"text*",group:"inline",parseDOM:[{tag:"sub"}],toDOM:function(){return["a",{href:"#","data-type":a.SUB},0]}}),s(r,a.ZERO_WIDTH,{marks:"",group:"inline",selectable:!1,inline:!0,atom:!0,toDOM:function(){return["span",0]}}),r),u=(s(i={},a.ITALIC,{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:function(){return["i",0]}}),s(i,a.DEL,{parseDOM:[{tag:"s"},{tag:"strike"},{style:"text-decoration=line-through"}],toDOM:function(){return["s",0]}}),s(i,a.UNDERLINE,{parseDOM:[{tag:"u"},{style:"text-decoration=underline"}],toDOM:function(){return["u",0]}}),s(i,a.SIZE,{attrs:{size:{}},toDOM:function(e){var t=e.attrs.size;return"number"==typeof t&&t>8&&t<99?["span",{"data-size":"".concat(t)},0]:["span",0]}}),s(i,a.COLOR,{attrs:{color:{},name:{}},parseDOM:[{style:"color",getAttrs:function(e){return!!/^#[a-f0-9]{6}$/i.test(e)&&{name:"user",color:e}}}],toDOM:function(e){var t=e.attrs.color,n=e.attrs.name;return/^#[a-f0-9]{6}$/i.test(t)&&/^[a-z_]{1,20}$/i.test(n)?["span",{style:"color: ".concat(t),"data-name":n},0]:["span",0]}}),s(i,a.BG_COLOR,{attrs:{color:{},name:{}},toDOM:function(e){var t=e.attrs.color,n=e.attrs.name;return/^#[a-f0-9]{6}$/i.test(t)&&/^[a-z_]{1,20}$/i.test(n)?["span",{style:"background: ".concat(t),"data-name":n},0]:["span",0]}}),s(i,a.STRONG,{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:function(e){return"normal"!==e.style.fontWeight}},{style:"font-weight",getAttrs:function(e){return/^(bold(er)?|[5-9]\d{2,})$/.test(e)}}],toDOM:function(){return["strong",0]}}),i);function f(e){var t=e.getAttribute("data-background")||null;return{colspan:Number(e.getAttribute("colspan")||1),rowspan:Number(e.getAttribute("rowspan")||1),background:t}}function d(e){var t={},n=e.attrs.colspan,r=e.attrs.rowspan;return"number"==typeof n&&n>1&&(t.colspan=n),"number"==typeof r&&r>1&&(t.rowspan=r),e.attrs.background&&(t.style=(t.style||"")+"background-color: ".concat(e.attrs.background,";")),t}l[a.NUMBERED_LIST]={content:"".concat(a.LIST_ITEM,"+"),group:"block",attrs:{start:{default:1},normalizeStart:{default:1}},parseDOM:[{tag:"ol",getAttrs:function(e){return{start:e.getAttribute("start")}}}],toDOM:function(e){var t=e.attrs.start,n={};return"number"==typeof t&&t>1&&(n.start=t),["ol",n,0]}},l[a.BULLETED_LIST]={content:"".concat(a.LIST_ITEM,"+"),group:"block",parseDOM:[{tag:"ul"}],toDOM:function(){return["ul",0]}},l[a.LIST_ITEM]={content:"(".concat(a.PARAGRAPH,"|").concat(a.IMAGE,")+"),group:"block",attrs:{listStyle:{default:null}},parseDOM:[{tag:"li",context:"".concat(a.BULLETED_LIST,"/|").concat(a.NUMBERED_LIST,"/")}],toDOM:function(e){var t=e.attrs.listStyle,n={};return"string"==typeof t&&(n["data-liststyle"]=t),["li",n,0]}},l[a.TABLE]={content:"".concat(a.TABLE_ROW,"+"),attrs:{colWidth:{default:null}},group:"block",isolating:!0,parseDOM:[{tag:"table",getAttrs:function(e){return"table_prosemirror"===e.className&&{colWidth:null}}}],toDOM:function(){return["table",["tbody",0]]}},l[a.TABLE_ROW]={content:"(".concat(a.TABLE_CELL,")*"),tableRole:a.TABLE_ROW,parseDOM:[{tag:"tr"}],toDOM:function(){return["tr",0]}},l[a.TABLE_CELL]={content:"(".concat(a.PARAGRAPH," | ").concat(a.BULLETED_LIST," | ").concat(a.NUMBERED_LIST,")*"),attrs:{colspan:{default:1},rowspan:{default:1},background:{default:null}},tableRole:a.TABLE_CELL,isolating:!0,parseDOM:[{tag:"td",getAttrs:function(e){return f(e)}},{tag:"th",getAttrs:function(e){return f(e)}}],toDOM:function(e){return["td",d(e),0]}},t.a=function(){return new o.h({nodes:l,marks:u})}},function(e,t,n){var r=n(14),i=n(16),o=n(33);e.exports=r?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(5),i=n(51).f,o=n(12),a=n(18),s=n(34),c=n(104),l=n(62);e.exports=function(e,t){var n,u,f,d,h,p=e.target,v=e.global,m=e.stat;if(n=v?r:m?r[p]||s(p,{}):(r[p]||{}).prototype)for(u in t){if(d=t[u],f=e.noTargetGet?(h=i(n,u))&&h.value:n[u],!l(v?u:p+(m?".":"#")+u,e.forced)&&void 0!==f){if(typeof d==typeof f)continue;c(d,f)}(e.sham||f&&f.sham)&&o(d,"sham",!0),a(n,u,d,e)}}},function(e,t,n){var r=n(6);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(e,n){e.exports=t},function(e,t,n){var r=n(14),i=n(54),o=n(10),a=n(53),s=Object.defineProperty;t.f=r?s:function(e,t,n){if(o(e),t=a(t,!0),o(n),i)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},function(e,t,n){var r=n(5),i=n(12),o=n(8),a=n(34),s=n(56),c=n(21),l=c.get,u=c.enforce,f=String(String).split("String");(e.exports=function(e,t,n,s){var c=!!s&&!!s.unsafe,l=!!s&&!!s.enumerable,d=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof t||o(n,"name")||i(n,"name",t),u(n).source=f.join("string"==typeof t?t:"")),e!==r?(c?!d&&e[t]&&(l=!0):delete e[t],l?e[t]=n:i(e,t,n)):l?e[t]=n:a(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&l(this).source||s(this)}))},function(e,t,n){var r=n(29),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r,i,o,a=n(58),s=n(5),c=n(9),l=n(12),u=n(8),f=n(35),d=n(28),h=s.WeakMap;if(a){var p=new h,v=p.get,m=p.has,g=p.set;r=function(e,t){return g.call(p,e,t),t},i=function(e){return v.call(p,e)||{}},o=function(e){return m.call(p,e)}}else{var y=f("state");d[y]=!0,r=function(e,t){return l(e,y,t),t},i=function(e){return u(e,y)?e[y]:{}},o=function(e){return u(e,y)}}e.exports={set:r,get:i,has:o,enforce:function(e){return o(e)?i(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=i(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},function(e,t,n){var r=n(17);e.exports=function(e){return Object(r(e))}},function(e,t){e.exports={}},function(e,t){var n={exports:{}};function r(e){return e instanceof Map?e.clear=e.delete=e.set=function(){throw new Error("map is read-only")}:e instanceof Set&&(e.add=e.clear=e.delete=function(){throw new Error("set is read-only")}),Object.freeze(e),Object.getOwnPropertyNames(e).forEach((function(t){var n=e[t];"object"!=typeof n||Object.isFrozen(n)||r(n)})),e}n.exports=r,n.exports.default=r;var i=n.exports;class o{constructor(e){void 0===e.data&&(e.data={}),this.data=e.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function a(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function s(e,...t){const n=Object.create(null);for(const r in e)n[r]=e[r];return t.forEach((function(e){for(const t in e)n[t]=e[t]})),n}const c=e=>!!e.kind;class l{constructor(e,t){this.buffer="",this.classPrefix=t.classPrefix,e.walk(this)}addText(e){this.buffer+=a(e)}openNode(e){if(!c(e))return;let t=e.kind;t=e.sublanguage?"language-"+t:((e,{prefix:t})=>{if(e.includes(".")){const n=e.split(".");return[`${t}${n.shift()}`,...n.map((e,t)=>`${e}${"_".repeat(t+1)}`)].join(" ")}return`${t}${e}`})(t,{prefix:this.classPrefix}),this.span(t)}closeNode(e){c(e)&&(this.buffer+="</span>")}value(){return this.buffer}span(e){this.buffer+=`<span class="${e}">`}}class u{constructor(){this.rootNode={children:[]},this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(e){this.top.children.push(e)}openNode(e){const t={kind:e,children:[]};this.add(t),this.stack.push(t)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(e){return this.constructor._walk(e,this.rootNode)}static _walk(e,t){return"string"==typeof t?e.addText(t):t.children&&(e.openNode(t),t.children.forEach(t=>this._walk(e,t)),e.closeNode(t)),e}static _collapse(e){"string"!=typeof e&&e.children&&(e.children.every(e=>"string"==typeof e)?e.children=[e.children.join("")]:e.children.forEach(e=>{u._collapse(e)}))}}class f extends u{constructor(e){super(),this.options=e}addKeyword(e,t){""!==e&&(this.openNode(t),this.addText(e),this.closeNode())}addText(e){""!==e&&this.add(e)}addSublanguage(e,t){const n=e.root;n.kind=t,n.sublanguage=!0,this.add(n)}toHTML(){return new l(this,this.options).value()}finalize(){return!0}}function d(e){return e?"string"==typeof e?e:e.source:null}function h(e){return m("(?=",e,")")}function p(e){return m("(?:",e,")*")}function v(e){return m("(?:",e,")?")}function m(...e){return e.map(e=>d(e)).join("")}function g(...e){return"("+(function(e){const t=e[e.length-1];return"object"==typeof t&&t.constructor===Object?(e.splice(e.length-1,1),t):{}}(e).capture?"":"?:")+e.map(e=>d(e)).join("|")+")"}function y(e){return new RegExp(e.toString()+"|").exec("").length-1}const b=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function w(e,{joinWith:t}){let n=0;return e.map(e=>{n+=1;const t=n;let r=d(e),i="";for(;r.length>0;){const e=b.exec(r);if(!e){i+=r;break}i+=r.substring(0,e.index),r=r.substring(e.index+e[0].length),"\\"===e[0][0]&&e[1]?i+="\\"+String(Number(e[1])+t):(i+=e[0],"("===e[0]&&n++)}return i}).map(e=>`(${e})`).join(t)}const E="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",k={begin:"\\\\[\\s\\S]",relevance:0},O={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[k]},_={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[k]},x=function(e,t,n={}){const r=s({scope:"comment",begin:e,end:t,contains:[]},n);r.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const i=g("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return r.contains.push({begin:m(/[ ]+/,"(",i,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),r},S=x("//","$"),N=x("/\\*","\\*/"),M=x("#","$"),C={scope:"number",begin:"\\b\\d+(\\.\\d+)?",relevance:0},A={scope:"number",begin:E,relevance:0},T={scope:"number",begin:"\\b(0b[01]+)",relevance:0},D={begin:/(?=\/[^/\n]*\/)/,contains:[{scope:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[k,{begin:/\[/,end:/\]/,relevance:0,contains:[k]}]}]},I={scope:"title",begin:"[a-zA-Z]\\w*",relevance:0},R={scope:"title",begin:"[a-zA-Z_]\\w*",relevance:0},L={begin:"\\.\\s*[a-zA-Z_]\\w*",relevance:0};var P=Object.freeze({__proto__:null,MATCH_NOTHING_RE:/\b\B/,IDENT_RE:"[a-zA-Z]\\w*",UNDERSCORE_IDENT_RE:"[a-zA-Z_]\\w*",NUMBER_RE:"\\b\\d+(\\.\\d+)?",C_NUMBER_RE:E,BINARY_NUMBER_RE:"\\b(0b[01]+)",RE_STARTERS_RE:"!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",SHEBANG:(e={})=>{const t=/^#![ ]*\//;return e.binary&&(e.begin=m(t,/.*\b/,e.binary,/\b.*/)),s({scope:"meta",begin:t,end:/$/,relevance:0,"on:begin":(e,t)=>{0!==e.index&&t.ignoreMatch()}},e)},BACKSLASH_ESCAPE:k,APOS_STRING_MODE:O,QUOTE_STRING_MODE:_,PHRASAL_WORDS_MODE:{begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},COMMENT:x,C_LINE_COMMENT_MODE:S,C_BLOCK_COMMENT_MODE:N,HASH_COMMENT_MODE:M,NUMBER_MODE:C,C_NUMBER_MODE:A,BINARY_NUMBER_MODE:T,REGEXP_MODE:D,TITLE_MODE:I,UNDERSCORE_TITLE_MODE:R,METHOD_GUARD:L,END_SAME_AS_BEGIN:function(e){return Object.assign(e,{"on:begin":(e,t)=>{t.data._beginMatch=e[1]},"on:end":(e,t)=>{t.data._beginMatch!==e[1]&&t.ignoreMatch()}})}});function B(e,t){"."===e.input[e.index-1]&&t.ignoreMatch()}function $(e,t){void 0!==e.className&&(e.scope=e.className,delete e.className)}function j(e,t){t&&e.beginKeywords&&(e.begin="\\b("+e.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",e.__beforeBegin=B,e.keywords=e.keywords||e.beginKeywords,delete e.beginKeywords,void 0===e.relevance&&(e.relevance=0))}function z(e,t){Array.isArray(e.illegal)&&(e.illegal=g(...e.illegal))}function F(e,t){if(e.match){if(e.begin||e.end)throw new Error("begin & end are not supported with match");e.begin=e.match,delete e.match}}function H(e,t){void 0===e.relevance&&(e.relevance=1)}const U=(e,t)=>{if(!e.beforeMatch)return;if(e.starts)throw new Error("beforeMatch cannot be used with starts");const n=Object.assign({},e);Object.keys(e).forEach(t=>{delete e[t]}),e.keywords=n.keywords,e.begin=m(n.beforeMatch,h(n.begin)),e.starts={relevance:0,contains:[Object.assign(n,{endsParent:!0})]},e.relevance=0,delete n.beforeMatch},K=["of","and","for","in","not","or","if","then","parent","list","value"];function W(e,t){return t?Number(t):function(e){return K.includes(e.toLowerCase())}(e)?0:1}const V={},G=(e,t)=>{V[`${e}/${t}`]||(V[`${e}/${t}`]=!0)},q=new Error;function J(e,t,{key:n}){let r=0;const i=e[n],o={},a={};for(let s=1;s<=t.length;s++)a[s+r]=i[s],o[s+r]=!0,r+=y(t[s-1]);e[n]=a,e[n]._emit=o,e[n]._multi=!0}function X(e){!function(e){e.scope&&"object"==typeof e.scope&&null!==e.scope&&(e.beginScope=e.scope,delete e.scope)}(e),"string"==typeof e.beginScope&&(e.beginScope={_wrap:e.beginScope}),"string"==typeof e.endScope&&(e.endScope={_wrap:e.endScope}),function(e){if(Array.isArray(e.begin)){if(e.skip||e.excludeBegin||e.returnBegin)throw q;if("object"!=typeof e.beginScope||null===e.beginScope)throw q;J(e,e.begin,{key:"beginScope"}),e.begin=w(e.begin,{joinWith:""})}}(e),function(e){if(Array.isArray(e.end)){if(e.skip||e.excludeEnd||e.returnEnd)throw q;if("object"!=typeof e.endScope||null===e.endScope)throw q;J(e,e.end,{key:"endScope"}),e.end=w(e.end,{joinWith:""})}}(e)}function Z(e){function t(t,n){return new RegExp(d(t),"m"+(e.case_insensitive?"i":"")+(e.unicodeRegex?"u":"")+(n?"g":""))}class n{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(e,t){t.position=this.position++,this.matchIndexes[this.matchAt]=t,this.regexes.push([t,e]),this.matchAt+=y(e)+1}compile(){0===this.regexes.length&&(this.exec=()=>null);const e=this.regexes.map(e=>e[1]);this.matcherRe=t(w(e,{joinWith:"|"}),!0),this.lastIndex=0}exec(e){this.matcherRe.lastIndex=this.lastIndex;const t=this.matcherRe.exec(e);if(!t)return null;const n=t.findIndex((e,t)=>t>0&&void 0!==e),r=this.matchIndexes[n];return t.splice(0,n),Object.assign(t,r)}}class r{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(e){if(this.multiRegexes[e])return this.multiRegexes[e];const t=new n;return this.rules.slice(e).forEach(([e,n])=>t.addRule(e,n)),t.compile(),this.multiRegexes[e]=t,t}resumingScanAtSamePosition(){return 0!==this.regexIndex}considerAll(){this.regexIndex=0}addRule(e,t){this.rules.push([e,t]),"begin"===t.type&&this.count++}exec(e){const t=this.getMatcher(this.regexIndex);t.lastIndex=this.lastIndex;let n=t.exec(e);if(this.resumingScanAtSamePosition())if(n&&n.index===this.lastIndex);else{const t=this.getMatcher(0);t.lastIndex=this.lastIndex+1,n=t.exec(e)}return n&&(this.regexIndex+=n.position+1,this.regexIndex===this.count&&this.considerAll()),n}}if(e.compilerExtensions||(e.compilerExtensions=[]),e.contains&&e.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return e.classNameAliases=s(e.classNameAliases||{}),function n(i,o){const a=i;if(i.isCompiled)return a;[$,F,X,U].forEach(e=>e(i,o)),e.compilerExtensions.forEach(e=>e(i,o)),i.__beforeBegin=null,[j,z,H].forEach(e=>e(i,o)),i.isCompiled=!0;let c=null;return"object"==typeof i.keywords&&i.keywords.$pattern&&(i.keywords=Object.assign({},i.keywords),c=i.keywords.$pattern,delete i.keywords.$pattern),c=c||/\w+/,i.keywords&&(i.keywords=function e(t,n,r="keyword"){const i=Object.create(null);return"string"==typeof t?o(r,t.split(" ")):Array.isArray(t)?o(r,t):Object.keys(t).forEach((function(r){Object.assign(i,e(t[r],n,r))})),i;function o(e,t){n&&(t=t.map(e=>e.toLowerCase())),t.forEach((function(t){const n=t.split("|");i[n[0]]=[e,W(n[0],n[1])]}))}}(i.keywords,e.case_insensitive)),a.keywordPatternRe=t(c,!0),o&&(i.begin||(i.begin=/\B|\b/),a.beginRe=t(a.begin),i.end||i.endsWithParent||(i.end=/\B|\b/),i.end&&(a.endRe=t(a.end)),a.terminatorEnd=d(a.end)||"",i.endsWithParent&&o.terminatorEnd&&(a.terminatorEnd+=(i.end?"|":"")+o.terminatorEnd)),i.illegal&&(a.illegalRe=t(i.illegal)),i.contains||(i.contains=[]),i.contains=[].concat(...i.contains.map((function(e){return function(e){return e.variants&&!e.cachedVariants&&(e.cachedVariants=e.variants.map((function(t){return s(e,{variants:null},t)}))),e.cachedVariants?e.cachedVariants:function e(t){return!!t&&(t.endsWithParent||e(t.starts))}(e)?s(e,{starts:e.starts?s(e.starts):null}):Object.isFrozen(e)?s(e):e}("self"===e?i:e)}))),i.contains.forEach((function(e){n(e,a)})),i.starts&&n(i.starts,o),a.matcher=function(e){const t=new r;return e.contains.forEach(e=>t.addRule(e.begin,{rule:e,type:"begin"})),e.terminatorEnd&&t.addRule(e.terminatorEnd,{type:"end"}),e.illegal&&t.addRule(e.illegal,{type:"illegal"}),t}(a),a}(e)}class Q extends Error{constructor(e,t){super(e),this.name="HTMLInjectionError",this.html=t}}const Y=a,ee=s,te=Symbol("nomatch");var ne=function(e){const t=Object.create(null),n=Object.create(null),r=[];let a=!0;const s="Could not find the language '{}', did you forget to load/include a language module?",c={disableAutodetect:!0,name:"Plain text",contains:[]};let l={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:f};function u(e){return l.noHighlightRe.test(e)}function d(e,t,n){let r="",i="";"object"==typeof t?(r=e,n=t.ignoreIllegals,i=t.language):(G("10.7.0","highlight(lang, code, ...args) has been deprecated."),G("10.7.0","Please use highlight(code, options) instead.\nhttps://github.com/highlightjs/highlight.js/issues/2277"),i=e,r=t),void 0===n&&(n=!0);const o={code:r,language:i};S("before:highlight",o);const a=o.result?o.result:y(o.language,o.code,n);return a.code=o.code,S("after:highlight",a),a}function y(e,n,r,i){const c=Object.create(null);function u(){if(!_.keywords)return void S.addText(N);let e=0;_.keywordPatternRe.lastIndex=0;let t=_.keywordPatternRe.exec(N),n="";for(;t;){n+=N.substring(e,t.index);const i=w.case_insensitive?t[0].toLowerCase():t[0],o=(r=i,_.keywords[r]);if(o){const[e,r]=o;if(S.addText(n),n="",c[i]=(c[i]||0)+1,c[i]<=7&&(M+=r),e.startsWith("_"))n+=t[0];else{const n=w.classNameAliases[e]||e;S.addKeyword(t[0],n)}}else n+=t[0];e=_.keywordPatternRe.lastIndex,t=_.keywordPatternRe.exec(N)}var r;n+=N.substr(e),S.addText(n)}function f(){null!=_.subLanguage?function(){if(""===N)return;let e=null;if("string"==typeof _.subLanguage){if(!t[_.subLanguage])return void S.addText(N);e=y(_.subLanguage,N,!0,x[_.subLanguage]),x[_.subLanguage]=e._top}else e=b(N,_.subLanguage.length?_.subLanguage:null);_.relevance>0&&(M+=e.relevance),S.addSublanguage(e._emitter,e.language)}():u(),N=""}function d(e,t){let n=1;for(;void 0!==t[n];){if(!e._emit[n]){n++;continue}const r=w.classNameAliases[e[n]]||e[n],i=t[n];r?S.addKeyword(i,r):(N=i,u(),N=""),n++}}function h(e,t){return e.scope&&"string"==typeof e.scope&&S.openNode(w.classNameAliases[e.scope]||e.scope),e.beginScope&&(e.beginScope._wrap?(S.addKeyword(N,w.classNameAliases[e.beginScope._wrap]||e.beginScope._wrap),N=""):e.beginScope._multi&&(d(e.beginScope,t),N="")),_=Object.create(e,{parent:{value:_}}),_}function p(e){return 0===_.matcher.regexIndex?(N+=e[0],1):(T=!0,0)}function v(e){const t=e[0],r=n.substr(e.index),i=function e(t,n,r){let i=function(e,t){const n=e&&e.exec(t);return n&&0===n.index}(t.endRe,r);if(i){if(t["on:end"]){const e=new o(t);t["on:end"](n,e),e.isMatchIgnored&&(i=!1)}if(i){for(;t.endsParent&&t.parent;)t=t.parent;return t}}if(t.endsWithParent)return e(t.parent,n,r)}(_,e,r);if(!i)return te;const a=_;_.endScope&&_.endScope._wrap?(f(),S.addKeyword(t,_.endScope._wrap)):_.endScope&&_.endScope._multi?(f(),d(_.endScope,e)):a.skip?N+=t:(a.returnEnd||a.excludeEnd||(N+=t),f(),a.excludeEnd&&(N=t));do{_.scope&&S.closeNode(),_.skip||_.subLanguage||(M+=_.relevance),_=_.parent}while(_!==i.parent);return i.starts&&h(i.starts,e),a.returnEnd?0:t.length}let m={};function g(t,i){const s=i&&i[0];if(N+=t,null==s)return f(),0;if("begin"===m.type&&"end"===i.type&&m.index===i.index&&""===s){if(N+=n.slice(i.index,i.index+1),!a){const t=new Error(`0 width match regex (${e})`);throw t.languageName=e,t.badRule=m.rule,t}return 1}if(m=i,"begin"===i.type)return function(e){const t=e[0],n=e.rule,r=new o(n),i=[n.__beforeBegin,n["on:begin"]];for(const o of i)if(o&&(o(e,r),r.isMatchIgnored))return p(t);return n.skip?N+=t:(n.excludeBegin&&(N+=t),f(),n.returnBegin||n.excludeBegin||(N=t)),h(n,e),n.returnBegin?0:t.length}(i);if("illegal"===i.type&&!r){const e=new Error('Illegal lexeme "'+s+'" for mode "'+(_.scope||"<unnamed>")+'"');throw e.mode=_,e}if("end"===i.type){const e=v(i);if(e!==te)return e}if("illegal"===i.type&&""===s)return 1;if(A>1e5&&A>3*i.index)throw new Error("potential infinite loop, way more iterations than matches");return N+=s,s.length}const w=O(e);if(!w)throw s.replace("{}",e),new Error('Unknown language: "'+e+'"');const E=Z(w);let k="",_=i||E;const x={},S=new l.__emitter(l);!function(){const e=[];for(let t=_;t!==w;t=t.parent)t.scope&&e.unshift(t.scope);e.forEach(e=>S.openNode(e))}();let N="",M=0,C=0,A=0,T=!1;try{for(_.matcher.considerAll();;){A++,T?T=!1:_.matcher.considerAll(),_.matcher.lastIndex=C;const e=_.matcher.exec(n);if(!e)break;const t=g(n.substring(C,e.index),e);C=e.index+t}return g(n.substr(C)),S.closeAllNodes(),S.finalize(),k=S.toHTML(),{language:e,value:k,relevance:M,illegal:!1,_emitter:S,_top:_}}catch(t){if(t.message&&t.message.includes("Illegal"))return{language:e,value:Y(n),illegal:!0,relevance:0,_illegalBy:{message:t.message,index:C,context:n.slice(C-100,C+100),mode:t.mode,resultSoFar:k},_emitter:S};if(a)return{language:e,value:Y(n),illegal:!1,relevance:0,errorRaised:t,_emitter:S,_top:_};throw t}}function b(e,n){n=n||l.languages||Object.keys(t);const r=function(e){const t={value:Y(e),illegal:!1,relevance:0,_top:c,_emitter:new l.__emitter(l)};return t._emitter.addText(e),t}(e),i=n.filter(O).filter(x).map(t=>y(t,e,!1));i.unshift(r);const o=i.sort((e,t)=>{if(e.relevance!==t.relevance)return t.relevance-e.relevance;if(e.language&&t.language){if(O(e.language).supersetOf===t.language)return 1;if(O(t.language).supersetOf===e.language)return-1}return 0}),[a,s]=o,u=a;return u.secondBest=s,u}function w(e){let t=null;const r=function(e){let t=e.className+" ";t+=e.parentNode?e.parentNode.className:"";const n=l.languageDetectRe.exec(t);if(n){const e=O(n[1]);return e||s.replace("{}",n[1]),e?n[1]:"no-highlight"}return t.split(/\s+/).find(e=>u(e)||O(e))}(e);if(u(r))return;if(S("before:highlightElement",{el:e,language:r}),e.children.length>0&&(l.ignoreUnescapedHTML,l.throwUnescapedHTML))throw new Q("One of your code blocks includes unescaped HTML.",e.innerHTML);t=e;const i=t.textContent,o=r?d(i,{language:r,ignoreIllegals:!0}):b(i);e.innerHTML=o.value,function(e,t,r){const i=t&&n[t]||r;e.classList.add("hljs"),e.classList.add("language-"+i)}(e,r,o.language),e.result={language:o.language,re:o.relevance,relevance:o.relevance},o.secondBest&&(e.secondBest={language:o.secondBest.language,relevance:o.secondBest.relevance}),S("after:highlightElement",{el:e,result:o,text:i})}let E=!1;function k(){"loading"!==document.readyState?document.querySelectorAll(l.cssSelector).forEach(w):E=!0}function O(e){return e=(e||"").toLowerCase(),t[e]||t[n[e]]}function _(e,{languageName:t}){"string"==typeof e&&(e=[e]),e.forEach(e=>{n[e.toLowerCase()]=t})}function x(e){const t=O(e);return t&&!t.disableAutodetect}function S(e,t){const n=e;r.forEach((function(e){e[n]&&e[n](t)}))}"undefined"!=typeof window&&window.addEventListener&&window.addEventListener("DOMContentLoaded",(function(){E&&k()}),!1),Object.assign(e,{highlight:d,highlightAuto:b,highlightAll:k,highlightElement:w,highlightBlock:function(e){return G("10.7.0","highlightBlock will be removed entirely in v12.0"),G("10.7.0","Please use highlightElement now."),w(e)},configure:function(e){l=ee(l,e)},initHighlighting:()=>{k(),G("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")},initHighlightingOnLoad:function(){k(),G("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")},registerLanguage:function(n,r){let i=null;try{i=r(e)}catch(e){if("Language definition for '{}' could not be registered.".replace("{}",n),!a)throw e;i=c}i.name||(i.name=n),t[n]=i,i.rawDefinition=r.bind(null,e),i.aliases&&_(i.aliases,{languageName:n})},unregisterLanguage:function(e){delete t[e];for(const t of Object.keys(n))n[t]===e&&delete n[t]},listLanguages:function(){return Object.keys(t)},getLanguage:O,registerAliases:_,autoDetection:x,inherit:ee,addPlugin:function(e){!function(e){e["before:highlightBlock"]&&!e["before:highlightElement"]&&(e["before:highlightElement"]=t=>{e["before:highlightBlock"](Object.assign({block:t.el},t))}),e["after:highlightBlock"]&&!e["after:highlightElement"]&&(e["after:highlightElement"]=t=>{e["after:highlightBlock"](Object.assign({block:t.el},t))})}(e),r.push(e)}}),e.debugMode=function(){a=!1},e.safeMode=function(){a=!0},e.versionString="11.3.1",e.regex={concat:m,lookahead:h,either:g,optional:v,anyNumberOfTimes:p};for(const o in P)"object"==typeof P[o]&&i(P[o]);return Object.assign(e,P),e}({});e.exports=ne,ne.HighlightJS=ne,ne.default=ne},function(e,t,n){var r=n(26),i=n(17);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(6),i=n(27),o="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==i(e)?o.call(e,""):Object(e)}:Object},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports={}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t){e.exports=n},function(e,t){e.exports=r},function(e,t){var n=!("undefined"==typeof window||!window.document||!window.document.createElement);e.exports=n},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(5),i=n(12);e.exports=function(e,t){try{i(r,e,t)}catch(n){r[e]=t}return t}},function(e,t,n){var r=n(59),i=n(37),o=r("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},function(e,t){e.exports=!1},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+r).toString(36)}},function(e,t,n){var r=n(106),i=n(5),o=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?o(r[e])||o(i[e]):r[e]&&r[e][t]||i[e]&&i[e][t]}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t,n){var r=n(64),i=n(26),o=n(22),a=n(19),s=n(110),c=[].push,l=function(e){var t=1==e,n=2==e,l=3==e,u=4==e,f=6==e,d=5==e||f;return function(h,p,v,m){for(var g,y,b=o(h),w=i(b),E=r(p,v,3),k=a(w.length),O=0,_=m||s,x=t?_(h,k):n?_(h,0):void 0;k>O;O++)if((d||O in w)&&(y=E(g=w[O],O,b),e))if(t)x[O]=y;else if(y)switch(e){case 3:return!0;case 5:return g;case 6:return O;case 2:c.call(x,g)}else if(u)return!1;return f?-1:l||u?u:x}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6)}},function(e,t,n){var r=n(14),i=n(6),o=n(8),a=Object.defineProperty,s={},c=function(e){throw e};e.exports=function(e,t){if(o(s,e))return s[e];t||(t={});var n=[][e],l=!!o(t,"ACCESSORS")&&t.ACCESSORS,u=o(t,0)?t[0]:c,f=o(t,1)?t[1]:void 0;return s[e]=!!n&&!i((function(){if(l&&!r)return!0;var e={length:-1};l?a(e,1,{enumerable:!0,get:c}):e[1]=1,n.call(e,u,f)}))}},function(e,t,n){var r=n(16).f,i=n(8),o=n(7)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){var r={};r[n(7)("toStringTag")]="z",e.exports="[object z]"===String(r)},function(e,t,n){var r=n(28),i=n(9),o=n(8),a=n(16).f,s=n(37),c=n(133),l=s("meta"),u=0,f=Object.isExtensible||function(){return!0},d=function(e){a(e,l,{value:{objectID:"O"+ ++u,weakData:{}}})},h=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,l)){if(!f(e))return"F";if(!t)return"E";d(e)}return e[l].objectID},getWeakData:function(e,t){if(!o(e,l)){if(!f(e))return!0;if(!t)return!1;d(e)}return e[l].weakData},onFreeze:function(e){return c&&h.REQUIRED&&f(e)&&!o(e,l)&&d(e),e}};r[l]=!0},function(e,t,n){"use strict";var r,i,o=n(145),a=n(146),s=RegExp.prototype.exec,c=String.prototype.replace,l=s,u=(r=/a/,i=/b*/g,s.call(r,"a"),s.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),f=a.UNSUPPORTED_Y||a.BROKEN_CARET,d=void 0!==/()??/.exec("")[1];(u||d||f)&&(l=function(e){var t,n,r,i,a=this,l=f&&a.sticky,h=o.call(a),p=a.source,v=0,m=e;return l&&(-1===(h=h.replace("y","")).indexOf("g")&&(h+="g"),m=String(e).slice(a.lastIndex),a.lastIndex>0&&(!a.multiline||a.multiline&&"\n"!==e[a.lastIndex-1])&&(p="(?: "+p+")",m=" "+m,v++),n=new RegExp("^(?:"+p+")",h)),d&&(n=new RegExp("^"+p+"$(?!\\s)",h)),u&&(t=a.lastIndex),r=s.call(l?n:a,m),l?r?(r.input=r.input.slice(v),r[0]=r[0].slice(v),r.index=a.lastIndex,a.lastIndex+=r[0].length):a.lastIndex=0:u&&r&&(a.lastIndex=a.global?r.index+r[0].length:t),d&&r&&r.length>1&&c.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r}),e.exports=l},function(e,t,n){(function(t){var n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,s="object"==typeof t&&t&&t.Object===Object&&t,c="object"==typeof self&&self&&self.Object===Object&&self,l=s||c||Function("return this")(),u=Object.prototype.toString,f=Math.max,d=Math.min,h=function(){return l.Date.now()};function p(e,t,n){var r,i,o,a,s,c,l=0,u=!1,p=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=r,o=i;return r=i=void 0,l=t,a=e.apply(o,n)}function b(e){return l=e,s=setTimeout(E,t),u?y(e):a}function w(e){var n=e-c;return void 0===c||n>=t||n<0||p&&e-l>=o}function E(){var e=h();if(w(e))return k(e);s=setTimeout(E,function(e){var n=t-(e-c);return p?d(n,o-(e-l)):n}(e))}function k(e){return s=void 0,g&&r?y(e):(r=i=void 0,a)}function O(){var e=h(),n=w(e);if(r=arguments,i=this,c=e,n){if(void 0===s)return b(c);if(p)return s=setTimeout(E,t),y(c)}return void 0===s&&(s=setTimeout(E,t)),a}return t=m(t)||0,v(n)&&(u=!!n.leading,o=(p="maxWait"in n)?f(m(n.maxWait)||0,t):o,g="trailing"in n?!!n.trailing:g),O.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=c=i=s=void 0},O.flush=function(){return void 0===s?a:k(h())},O}function v(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function m(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==u.call(e)}(e))return NaN;if(v(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=v(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var s=i.test(e);return s||o.test(e)?a(e.slice(2),s?2:8):r.test(e)?NaN:+e}e.exports=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return v(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),p(e,t,{leading:r,maxWait:t,trailing:i})}}).call(this,n(20))},function(e,t,n){(function(t){var n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,s="object"==typeof t&&t&&t.Object===Object&&t,c="object"==typeof self&&self&&self.Object===Object&&self,l=s||c||Function("return this")(),u=Object.prototype.toString,f=Math.max,d=Math.min,h=function(){return l.Date.now()};function p(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function v(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==u.call(e)}(e))return NaN;if(p(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=p(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var s=i.test(e);return s||o.test(e)?a(e.slice(2),s?2:8):r.test(e)?NaN:+e}e.exports=function(e,t,n){var r,i,o,a,s,c,l=0,u=!1,m=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=r,o=i;return r=i=void 0,l=t,a=e.apply(o,n)}function b(e){return l=e,s=setTimeout(E,t),u?y(e):a}function w(e){var n=e-c;return void 0===c||n>=t||n<0||m&&e-l>=o}function E(){var e=h();if(w(e))return k(e);s=setTimeout(E,function(e){var n=t-(e-c);return m?d(n,o-(e-l)):n}(e))}function k(e){return s=void 0,g&&r?y(e):(r=i=void 0,a)}function O(){var e=h(),n=w(e);if(r=arguments,i=this,c=e,n){if(void 0===s)return b(c);if(m)return s=setTimeout(E,t),y(c)}return void 0===s&&(s=setTimeout(E,t)),a}return t=v(t)||0,p(n)&&(u=!!n.leading,o=(m="maxWait"in n)?f(v(n.maxWait)||0,t):o,g="trailing"in n?!!n.trailing:g),O.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=c=i=s=void 0},O.flush=function(){return void 0===s?a:k(h())},O}}).call(this,n(20))},function(e,t){e.exports=function(e){const t=e.regex,n={},r={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[n]}]};Object.assign(n,{className:"variable",variants:[{begin:t.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},r]});const i={className:"subst",begin:/\$\(/,end:/\)/,contains:[e.BACKSLASH_ESCAPE]},o={begin:/<<-?\s*(?=\w+)/,starts:{contains:[e.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},a={className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,n,i]};i.contains.push(a);const s={begin:/\$\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},e.NUMBER_MODE,n]},c=e.SHEBANG({binary:`(${["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"].join("|")})`,relevance:10}),l={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[e.inherit(e.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0};return{name:"Bash",aliases:["sh"],keywords:{$pattern:/\b[a-z._-]+\b/,keyword:["if","then","else","elif","fi","for","while","in","do","done","case","esac","function"],literal:["true","false"],built_in:["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset","alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","type","typeset","ulimit","unalias","set","shopt","autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp","chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"]},contains:[c,e.SHEBANG(),l,s,e.HASH_COMMENT_MODE,o,{match:/(\/[a-z._-]+)+/},a,{className:"",begin:/\\"/},{className:"string",begin:/'/,end:/'/},n]}}},function(e,t){e.exports=function(e){const t=e.regex,n=t.concat(/[A-Z_]/,t.optional(/[A-Z0-9_.-]*:/),/[A-Z0-9_.-]*/),r={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},i={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},o=e.inherit(i,{begin:/\(/,end:/\)/}),a=e.inherit(e.APOS_STRING_MODE,{className:"string"}),s=e.inherit(e.QUOTE_STRING_MODE,{className:"string"}),c={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:/[A-Za-z0-9._:-]+/,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[r]},{begin:/'/,end:/'/,contains:[r]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[i,s,a,o,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[i,o,s,a]}]}]},e.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},r,{className:"meta",begin:/<\?xml/,end:/\?>/,relevance:10},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[c],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[c],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:t.concat(/</,t.lookahead(t.concat(n,t.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:n,relevance:0,starts:c}]},{className:"tag",begin:t.concat(/<\//,t.lookahead(t.concat(n,/>/))),contains:[{className:"name",begin:n,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}},function(e,t){e.exports=function(e){const t=e.regex,n=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="(decltype\\(auto\\)|"+t.optional("[a-zA-Z_]\\w*::")+"[a-zA-Z_]\\w*"+t.optional("<[^<>]+>")+")",i={className:"type",variants:[{begin:"\\b[a-z\\d_]*_t\\b"},{match:/\batomic_[a-z]{3,6}\b/}]},o={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'(\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},a={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},s={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(o,{className:"string"}),{className:"string",begin:/<.*?>/},n,e.C_BLOCK_COMMENT_MODE]},c={className:"title",begin:t.optional("[a-zA-Z_]\\w*::")+e.IDENT_RE,relevance:0},l=t.optional("[a-zA-Z_]\\w*::")+e.IDENT_RE+"\\s*\\(",u={keyword:["asm","auto","break","case","continue","default","do","else","enum","extern","for","fortran","goto","if","inline","register","restrict","return","sizeof","struct","switch","typedef","union","volatile","while","_Alignas","_Alignof","_Atomic","_Generic","_Noreturn","_Static_assert","_Thread_local","alignas","alignof","noreturn","static_assert","thread_local","_Pragma"],type:["float","double","signed","unsigned","int","short","long","char","void","_Bool","_Complex","_Imaginary","_Decimal32","_Decimal64","_Decimal128","const","static","complex","bool","imaginary"],literal:"true false NULL",built_in:"std string wstring cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set pair bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap priority_queue make_pair array shared_ptr abort terminate abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf future isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr"},f=[s,i,n,e.C_BLOCK_COMMENT_MODE,a,o],d={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:u,contains:f.concat([{begin:/\(/,end:/\)/,keywords:u,contains:f.concat(["self"]),relevance:0}]),relevance:0},h={begin:"("+r+"[\\*&\\s]+)+"+l,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:u,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:"decltype\\(auto\\)",keywords:u,relevance:0},{begin:l,returnBegin:!0,contains:[e.inherit(c,{className:"title.function"})],relevance:0},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:u,relevance:0,contains:[n,e.C_BLOCK_COMMENT_MODE,o,a,i,{begin:/\(/,end:/\)/,keywords:u,relevance:0,contains:["self",n,e.C_BLOCK_COMMENT_MODE,o,a,i]}]},i,n,e.C_BLOCK_COMMENT_MODE,s]};return{name:"C",aliases:["h"],keywords:u,disableAutodetect:!0,illegal:"</",contains:[].concat(d,h,f,[s,{begin:e.IDENT_RE+"::",keywords:u},{className:"class",beginKeywords:"enum class struct union",end:/[{;:<>=]/,contains:[{beginKeywords:"final class struct"},e.TITLE_MODE]}]),exports:{preprocessor:s,strings:o,keywords:u}}}},function(e,t,n){var r=n(14),i=n(52),o=n(33),a=n(25),s=n(53),c=n(8),l=n(54),u=Object.getOwnPropertyDescriptor;t.f=r?u:function(e,t){if(e=a(e),t=s(t,!0),l)try{return u(e,t)}catch(e){}if(c(e,t))return o(!i.f.call(e,t),e[t])}},function(e,t,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);t.f=o?function(e){var t=i(this,e);return!!t&&t.enumerable}:r},function(e,t,n){var r=n(9);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(14),i=n(6),o=n(55);e.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(5),i=n(9),o=r.document,a=i(o)&&i(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},function(e,t,n){var r=n(57),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return i.call(e)}),e.exports=r.inspectSource},function(e,t,n){var r=n(5),i=n(34),o=r["__core-js_shared__"]||i("__core-js_shared__",{});e.exports=o},function(e,t,n){var r=n(5),i=n(56),o=r.WeakMap;e.exports="function"==typeof o&&/native code/.test(i(o))},function(e,t,n){var r=n(36),i=n(57);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.5",mode:r?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var r=n(8),i=n(25),o=n(108).indexOf,a=n(28);e.exports=function(e,t){var n,s=i(e),c=0,l=[];for(n in s)!r(a,n)&&r(s,n)&&l.push(n);for(;t.length>c;)r(s,n=t[c++])&&(~o(l,n)||l.push(n));return l}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(6),i=/#|\.prototype\./,o=function(e,t){var n=s[a(e)];return n==l||n!=c&&("function"==typeof t?r(t):!!t)},a=o.normalize=function(e){return String(e).replace(i,".").toLowerCase()},s=o.data={},c=o.NATIVE="N",l=o.POLYFILL="P";e.exports=o},function(e,t,n){"use strict";var r=n(40).forEach,i=n(67),o=n(41),a=i("forEach"),s=o("forEach");e.exports=a&&s?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},function(e,t,n){var r=n(65);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t,n){var r=n(6);e.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},function(e,t,n){"use strict";var r=n(6);e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,t,n){"use strict";var r=n(25),i=n(118),o=n(23),a=n(21),s=n(72),c=a.set,l=a.getterFor("Array Iterator");e.exports=s(Array,"Array",(function(e,t){c(this,{type:"Array Iterator",target:r(e),index:0,kind:t})}),(function(){var e=l(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(e,t,n){var r,i=n(10),o=n(119),a=n(39),s=n(28),c=n(120),l=n(55),u=n(35),f=u("IE_PROTO"),d=function(){},h=function(e){return"<script>"+e+"<\/script>"},p=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;p=r?function(e){e.write(h("")),e.close();var t=e.parentWindow.Object;return e=null,t}(r):((t=l("iframe")).style.display="none",c.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(h("document.F=Object")),e.close(),e.F);for(var n=a.length;n--;)delete p.prototype[a[n]];return p()};s[f]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(d.prototype=i(e),n=new d,d.prototype=null,n[f]=e):n=p(),void 0===t?n:o(n,t)}},function(e,t,n){var r=n(60),i=n(39);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){"use strict";var r=n(13),i=n(121),o=n(74),a=n(75),s=n(42),c=n(12),l=n(18),u=n(7),f=n(36),d=n(23),h=n(73),p=h.IteratorPrototype,v=h.BUGGY_SAFARI_ITERATORS,m=u("iterator"),g=function(){return this};e.exports=function(e,t,n,u,h,y,b){i(n,t,u);var w,E,k,O=function(e){if(e===h&&M)return M;if(!v&&e in S)return S[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},_=t+" Iterator",x=!1,S=e.prototype,N=S[m]||S["@@iterator"]||h&&S[h],M=!v&&N||O(h),C="Array"==t&&S.entries||N;if(C&&(w=o(C.call(new e)),p!==Object.prototype&&w.next&&(f||o(w)===p||(a?a(w,p):"function"!=typeof w[m]&&c(w,m,g)),s(w,_,!0,!0),f&&(d[_]=g))),"values"==h&&N&&"values"!==N.name&&(x=!0,M=function(){return N.call(this)}),f&&!b||S[m]===M||c(S,m,M),d[t]=M,h)if(E={values:O("values"),keys:y?M:O("keys"),entries:O("entries")},b)for(k in E)(v||x||!(k in S))&&l(S,k,E[k]);else r({target:t,proto:!0,forced:v||x},E);return E}},function(e,t,n){"use strict";var r,i,o,a=n(74),s=n(12),c=n(8),l=n(7),u=n(36),f=l("iterator"),d=!1;[].keys&&("next"in(o=[].keys())?(i=a(a(o)))!==Object.prototype&&(r=i):d=!0),null==r&&(r={}),u||c(r,f)||s(r,f,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:d}},function(e,t,n){var r=n(8),i=n(22),o=n(35),a=n(122),s=o("IE_PROTO"),c=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){return e=i(e),r(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?c:null}},function(e,t,n){var r=n(10),i=n(123);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,o){return r(n),i(o),t?e.call(n,o):n.__proto__=o,n}}():void 0)},function(e,t,n){var r=n(43),i=n(27),o=n(7)("toStringTag"),a="Arguments"==i(function(){return arguments}());e.exports=r?i:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?n:a?i(t):"Object"==(r=i(t))&&"function"==typeof t.callee?"Arguments":r}},function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},function(e,t,n){var r=n(29),i=n(17),o=function(e){return function(t,n){var o,a,s=String(i(t)),c=r(n),l=s.length;return c<0||c>=l?e?"":void 0:(o=s.charCodeAt(c))<55296||o>56319||c+1===l||(a=s.charCodeAt(c+1))<56320||a>57343?e?s.charAt(c):o:e?s.slice(c,c+2):a-56320+(o-55296<<10)+65536}};e.exports={codeAt:o(!1),charAt:o(!0)}},function(e,t,n){var r=n(18);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},function(e,t,n){var r=n(10),i=n(135),o=n(19),a=n(64),s=n(136),c=n(137),l=function(e,t){this.stopped=e,this.result=t};(e.exports=function(e,t,n,u,f){var d,h,p,v,m,g,y,b=a(t,n,u?2:1);if(f)d=e;else{if("function"!=typeof(h=s(e)))throw TypeError("Target is not iterable");if(i(h)){for(p=0,v=o(e.length);v>p;p++)if((m=u?b(r(y=e[p])[0],y[1]):b(e[p]))&&m instanceof l)return m;return new l(!1)}d=h.call(e)}for(g=d.next;!(y=g.call(d)).done;)if("object"==typeof(m=c(d,b,y.value,u))&&m&&m instanceof l)return m;return new l(!1)}).stop=function(e){return new l(!0,e)}},function(e,t){e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},function(e,t,n){"use strict";var r=n(13),i=n(45);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},function(e,t,n){"use strict";n(82);var r=n(18),i=n(6),o=n(7),a=n(45),s=n(12),c=o("species"),l=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u="$0"==="a".replace(/./,"$0"),f=o("replace"),d=!!/./[f]&&""===/./[f]("a","$0"),h=!i((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,f){var p=o(e),v=!i((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),m=v&&!i((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[c]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return t=!0,null},n[p](""),!t}));if(!v||!m||"replace"===e&&(!l||!u||d)||"split"===e&&!h){var g=/./[p],y=n(p,""[e],(function(e,t,n,r,i){return t.exec===a?v&&!i?{done:!0,value:g.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),b=y[0],w=y[1];r(String.prototype,e,b),r(RegExp.prototype,p,2==t?function(e,t){return w.call(e,this,t)}:function(e){return w.call(e,this)})}f&&s(RegExp.prototype[p],"sham",!0)}},function(e,t,n){"use strict";var r=n(78).charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},function(e,t,n){var r=n(27),i=n(45);e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var o=n.call(e,t);if("object"!=typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},function(e,t,n){(function(t){var n,r=/^\[object .+?Constructor\]$/,i="object"==typeof t&&t&&t.Object===Object&&t,o="object"==typeof self&&self&&self.Object===Object&&self,a=i||o||Function("return this")(),s=Array.prototype,c=Function.prototype,l=Object.prototype,u=a["__core-js_shared__"],f=(n=/[^.]+$/.exec(u&&u.keys&&u.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",d=c.toString,h=l.hasOwnProperty,p=l.toString,v=RegExp("^"+d.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),m=s.splice,g=x(a,"Map"),y=x(Object,"create");function b(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function w(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function E(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function k(e,t){for(var n,r,i=e.length;i--;)if((n=e[i][0])===(r=t)||n!=n&&r!=r)return i;return-1}function O(e){return!(!N(e)||(t=e,f&&f in t))&&(function(e){var t=N(e)?p.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?v:r).test(function(e){if(null!=e){try{return d.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}function _(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function x(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return O(n)?n:void 0}function S(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a),a};return n.cache=new(S.Cache||E),n}function N(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}b.prototype.clear=function(){this.__data__=y?y(null):{}},b.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},b.prototype.get=function(e){var t=this.__data__;if(y){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return h.call(t,e)?t[e]:void 0},b.prototype.has=function(e){var t=this.__data__;return y?void 0!==t[e]:h.call(t,e)},b.prototype.set=function(e,t){return this.__data__[e]=y&&void 0===t?"__lodash_hash_undefined__":t,this},w.prototype.clear=function(){this.__data__=[]},w.prototype.delete=function(e){var t=this.__data__,n=k(t,e);return!(n<0)&&(n==t.length-1?t.pop():m.call(t,n,1),!0)},w.prototype.get=function(e){var t=this.__data__,n=k(t,e);return n<0?void 0:t[n][1]},w.prototype.has=function(e){return k(this.__data__,e)>-1},w.prototype.set=function(e,t){var n=this.__data__,r=k(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},E.prototype.clear=function(){this.__data__={hash:new b,map:new(g||w),string:new b}},E.prototype.delete=function(e){return _(this,e).delete(e)},E.prototype.get=function(e){return _(this,e).get(e)},E.prototype.has=function(e){return _(this,e).has(e)},E.prototype.set=function(e,t){return _(this,e).set(e,t),this},S.Cache=E,e.exports=S}).call(this,n(20))},function(e,t,n){"use strict";(function(e){var n=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];e.call(t,i[1],i[0])}},t}()}(),r="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,i=void 0!==e&&e.Math===Math?e:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),o="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(i):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)},a=["top","right","bottom","left","width","height","size","weight"],s="undefined"!=typeof MutationObserver,c=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,i=0;function a(){n&&(n=!1,e()),r&&c()}function s(){o(a)}function c(){var e=Date.now();if(n){if(e-i<2)return;r=!0}else n=!0,r=!1,setTimeout(s,t);i=e}return c}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){r&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),s?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){r&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;a.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),l=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},u=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||i},f=g(0,0,0,0);function d(e){return parseFloat(e)||0}function h(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+d(e["border-"+n+"-width"])}),0)}function p(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return f;var r=u(e).getComputedStyle(e),i=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],o=e["padding-"+i];t[i]=d(o)}return t}(r),o=i.left+i.right,a=i.top+i.bottom,s=d(r.width),c=d(r.height);if("border-box"===r.boxSizing&&(Math.round(s+o)!==t&&(s-=h(r,"left","right")+o),Math.round(c+a)!==n&&(c-=h(r,"top","bottom")+a)),!function(e){return e===u(e).document.documentElement}(e)){var l=Math.round(s+o)-t,p=Math.round(c+a)-n;1!==Math.abs(l)&&(s-=l),1!==Math.abs(p)&&(c-=p)}return g(i.left,i.top,s,c)}var v="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof u(e).SVGGraphicsElement}:function(e){return e instanceof u(e).SVGElement&&"function"==typeof e.getBBox};function m(e){return r?v(e)?function(e){var t=e.getBBox();return g(0,0,t.width,t.height)}(e):p(e):f}function g(e,t,n,r){return{x:e,y:t,width:n,height:r}}var y=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=g(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=m(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),b=function(e,t){var n,r,i,o,a,s,c,u=(r=(n=t).x,i=n.y,o=n.width,a=n.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,c=Object.create(s.prototype),l(c,{x:r,y:i,width:o,height:a,top:i,right:r+o,bottom:a+i,left:r}),c);l(this,{target:e,contentRect:u})},w=function(){function e(e,t,r){if(this.activeObservations_=[],this.observations_=new n,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=r}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof u(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new y(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof u(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new b(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),E="undefined"!=typeof WeakMap?new WeakMap:new n,k=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=c.getInstance(),r=new w(t,n,this);E.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){k.prototype[e]=function(){var t;return(t=E.get(this))[e].apply(t,arguments)}}));var O=void 0!==i.ResizeObserver?i.ResizeObserver:k;t.a=O}).call(this,n(20))},function(e,t){const n=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],r=["true","false","null","undefined","NaN","Infinity"],i=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],o=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],a=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],s=["arguments","this","super","console","window","document","localStorage","module","global"],c=[].concat(a,i,o);e.exports=function(e){const t=e.regex,l="[A-Za-z$_][0-9A-Za-z$_]*",u="<>",f="</>",d={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(e,t)=>{const n=e[0].length+e.index,r=e.input[n];if("<"===r||","===r)return void t.ignoreMatch();let i;">"===r&&(((e,{after:t})=>{const n="</"+e[0].slice(1);return-1!==e.input.indexOf(n,t)})(e,{after:n})||t.ignoreMatch()),(i=e.input.substr(n).match(/^\s+extends\s+/))&&0===i.index&&t.ignoreMatch()}},h={$pattern:"[A-Za-z$_][0-9A-Za-z$_]*",keyword:n,literal:r,built_in:c,"variable.language":s},p="\\.([0-9](_?[0-9])*)",v={className:"number",variants:[{begin:`(\\b(0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*)((${p})|\\.)?|(${p}))[eE][+-]?([0-9](_?[0-9])*)\\b`},{begin:`\\b(0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*)\\b((${p})\\b|\\.)?|(${p})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},m={className:"subst",begin:"\\$\\{",end:"\\}",keywords:h,contains:[]},g={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,m],subLanguage:"xml"}},y={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,m],subLanguage:"css"}},b={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,m]},w={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:l+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},E=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,g,y,b,v];m.contains=E.concat({begin:/\{/,end:/\}/,keywords:h,contains:["self"].concat(E)});const k=[].concat(w,m.contains),O=k.concat([{begin:/\(/,end:/\)/,keywords:h,contains:["self"].concat(k)}]),_={className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:h,contains:O},x={variants:[{match:[/class/,/\s+/,l,/\s+/,/extends/,/\s+/,t.concat(l,"(",t.concat(/\./,l),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,l],scope:{1:"keyword",3:"title.class"}}]},S={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]+|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+/),className:"title.class",keywords:{_:[...i,...o]}},N={variants:[{match:[/function/,/\s+/,l,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[_],illegal:/%/},M={match:t.concat(/\b/,(C=[...a,"super"],t.concat("(?!",C.join("|"),")")),l,t.lookahead(/\(/)),className:"title.function",relevance:0};var C;const A={begin:t.concat(/\./,t.lookahead(t.concat(l,/(?![0-9A-Za-z$_(])/))),end:l,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},T={match:[/get|set/,/\s+/,l,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},_]},D="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",I={match:[/const|var|let/,/\s+/,l,/\s*/,/=\s*/,t.lookahead(D)],className:{1:"keyword",3:"title.function"},contains:[_]};return{name:"Javascript",aliases:["js","jsx","mjs","cjs"],keywords:h,exports:{PARAMS_CONTAINS:O,CLASS_REFERENCE:S},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),{label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,g,y,b,w,v,S,{className:"attr",begin:l+t.lookahead(":"),relevance:0},I,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[w,e.REGEXP_MODE,{className:"function",begin:D,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:h,contains:O}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:u,end:f},{match:/<[A-Za-z0-9\\._:-]+\s*\/>/},{begin:d.begin,"on:begin":d.isTrulyOpeningTag,end:d.end}],subLanguage:"xml",contains:[{begin:d.begin,end:d.end,skip:!0,contains:["self"]}]}]},N,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[_,e.inherit(e.TITLE_MODE,{begin:l,className:"title.function"})]},{match:/\.\.\./,relevance:0},A,{match:"\\$"+l,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[_]},M,{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},x,T,{match:/\$[(.]/}]}}},function(e,t){e.exports=function(e){const t=e.regex,n=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="(?!struct)(decltype\\(auto\\)|"+t.optional("[a-zA-Z_]\\w*::")+"[a-zA-Z_]\\w*"+t.optional("<[^<>]+>")+")",i={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},o={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'(\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},a={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},s={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(o,{className:"string"}),{className:"string",begin:/<.*?>/},n,e.C_BLOCK_COMMENT_MODE]},c={className:"title",begin:t.optional("[a-zA-Z_]\\w*::")+e.IDENT_RE,relevance:0},l=t.optional("[a-zA-Z_]\\w*::")+e.IDENT_RE+"\\s*\\(",u={type:["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],keyword:["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"]},f={className:"function.dispatch",relevance:0,keywords:{_hint:["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"]},begin:t.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,e.IDENT_RE,t.lookahead(/(<[^<>]+>|)\s*\(/))},d=[f,s,i,n,e.C_BLOCK_COMMENT_MODE,a,o],h={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:u,contains:d.concat([{begin:/\(/,end:/\)/,keywords:u,contains:d.concat(["self"]),relevance:0}]),relevance:0},p={className:"function",begin:"("+r+"[\\*&\\s]+)+"+l,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:u,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:"decltype\\(auto\\)",keywords:u,relevance:0},{begin:l,returnBegin:!0,contains:[c],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[o,a]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:u,relevance:0,contains:[n,e.C_BLOCK_COMMENT_MODE,o,a,i,{begin:/\(/,end:/\)/,keywords:u,relevance:0,contains:["self",n,e.C_BLOCK_COMMENT_MODE,o,a,i]}]},i,n,e.C_BLOCK_COMMENT_MODE,s]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:u,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(h,p,f,d,[s,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function)\\s*<",end:">",keywords:u,contains:["self",i]},{begin:e.IDENT_RE+"::",keywords:u},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}},function(e,t){e.exports=function(e){const t=e.regex,n=/[\p{XID_Start}_]\p{XID_Continue}*/u,r={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:["and","as","assert","async","await","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},i={className:"meta",begin:/^(>>>|\.\.\.) /},o={className:"subst",begin:/\{/,end:/\}/,keywords:r,illegal:/#/},a={begin:/\{\{/,relevance:0},s={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,i],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,i],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,i,a,o]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,i,a,o]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[e.BACKSLASH_ESCAPE,a,o]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,a,o]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},c="[0-9](_?[0-9])*",l=`(\\b(${c}))?\\.(${c})|\\b(${c})\\.`,u={className:"number",relevance:0,variants:[{begin:`(\\b(${c})|(${l}))[eE][+-]?(${c})[jJ]?\\b`},{begin:`(${l})[jJ]?`},{begin:"\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?\\b"},{begin:"\\b0[bB](_?[01])+[lL]?\\b"},{begin:"\\b0[oO](_?[0-7])+[lL]?\\b"},{begin:"\\b0[xX](_?[0-9a-fA-F])+[lL]?\\b"},{begin:`\\b(${c})[jJ]\\b`}]},f={className:"comment",begin:t.lookahead(/# type:/),end:/$/,keywords:r,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},d={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:r,contains:["self",i,u,s,e.HASH_COMMENT_MODE]}]};return o.contains=[s,u,i],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:r,illegal:/(<\/|->|\?)|=>/,contains:[i,u,{begin:/\bself\b/},{beginKeywords:"if",relevance:0},s,f,e.HASH_COMMENT_MODE,{match:[/def/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[d]},{variants:[{match:[/class/,/\s+/,n,/\s*/,/\(\s*/,n,/\s*\)/]},{match:[/class/,/\s+/,n]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[u,d,s]}]}}},function(e,t){var n="\\.([0-9](_*[0-9])*)",r="[0-9a-fA-F](_*[0-9a-fA-F])*",i={className:"number",variants:[{begin:`(\\b([0-9](_*[0-9])*)((${n})|\\.)?|(${n}))[eE][+-]?([0-9](_*[0-9])*)[fFdD]?\\b`},{begin:`\\b([0-9](_*[0-9])*)((${n})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${n})[fFdD]?\\b`},{begin:"\\b([0-9](_*[0-9])*)[fFdD]\\b"},{begin:`\\b0[xX]((${r})\\.?|(${r})?\\.(${r}))[pP][+-]?([0-9](_*[0-9])*)[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${r})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};e.exports=function(e){e.regex;const t="[À-ʸa-zA-Z_$][À-ʸa-zA-Z_$0-9]*",n=t+function e(t,n,r){return-1===r?"":t.replace(n,i=>e(t,n,r-1))}("(?:<"+t+"~~~(?:\\s*,\\s*"+t+"~~~)*>)?",/~~~/g,2),r={keyword:["synchronized","abstract","private","var","static","if","const ","for","while","strictfp","finally","protected","import","native","final","void","enum","else","break","transient","catch","instanceof","volatile","case","assert","package","default","public","try","switch","continue","throws","protected","public","private","module","requires","exports","do"],literal:["false","true","null"],type:["char","boolean","long","float","int","byte","short","double"],built_in:["super","this"]},o={className:"meta",begin:"@"+t,contains:[{begin:/\(/,end:/\)/,contains:["self"]}]},a={className:"params",begin:/\(/,end:/\)/,keywords:r,relevance:0,contains:[e.C_BLOCK_COMMENT_MODE],endsParent:!0};return{name:"Java",aliases:["jsp"],keywords:r,illegal:/<\/|#/,contains:[e.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{begin:/\w+@/,relevance:0},{className:"doctag",begin:"@[A-Za-z]+"}]}),{begin:/import java\.[a-z]+\./,keywords:"import",relevance:2},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{begin:/"""/,end:/"""/,className:"string",contains:[e.BACKSLASH_ESCAPE]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{match:[/\b(?:class|interface|enum|extends|implements|new)/,/\s+/,t],className:{1:"keyword",3:"title.class"}},{begin:[t,/\s+/,t,/\s+/,/=/],className:{1:"type",3:"variable",5:"operator"}},{begin:[/record/,/\s+/,t],className:{1:"keyword",3:"title.class"},contains:[a,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"new throw return else",relevance:0},{begin:["(?:"+n+"\\s+)",e.UNDERSCORE_IDENT_RE,/\s*(?=\()/],className:{2:"title.function"},keywords:r,contains:[{className:"params",begin:/\(/,end:/\)/,keywords:r,relevance:0,contains:[o,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,i,e.C_BLOCK_COMMENT_MODE]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},i,o]}}},function(e,t){e.exports=function(e){const t=e.regex,n=e.COMMENT("--","$"),r=["true","false","unknown"],i=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],o=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],a=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],s=o,c=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year","add","asc","collation","desc","final","first","last","view"].filter(e=>!o.includes(e)),l={begin:t.concat(/\b/,t.either(...s),/\s*\(/),relevance:0,keywords:{built_in:s}};return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:function(e,{exceptions:t,when:n}={}){const r=n;return t=t||[],e.map(e=>e.match(/\|\d+$/)||t.includes(e)?e:r(e)?e+"|0":e)}(c,{when:e=>e.length<3}),literal:r,type:i,built_in:["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"]},contains:[{begin:t.either(...a),relevance:0,keywords:{$pattern:/[\w\.]+/,keyword:c.concat(a),literal:r,type:i}},{className:"type",begin:t.either("double precision","large object","with timezone","without timezone")},l,{className:"variable",begin:/@[a-z0-9]+/},{className:"string",variants:[{begin:/'/,end:/'/,contains:[{begin:/''/}]}]},{begin:/"/,end:/"/,contains:[{begin:/""/}]},e.C_NUMBER_MODE,e.C_BLOCK_COMMENT_MODE,n,{className:"operator",begin:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0}]}}},function(e,t){const n="[A-Za-z$_][0-9A-Za-z$_]*",r=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],i=["true","false","null","undefined","NaN","Infinity"],o=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],a=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],s=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],c=["arguments","this","super","console","window","document","localStorage","module","global"],l=[].concat(s,o,a);function u(e){const t=e.regex,u=n,f="<>",d="</>",h={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(e,t)=>{const n=e[0].length+e.index,r=e.input[n];if("<"===r||","===r)return void t.ignoreMatch();let i;">"===r&&(((e,{after:t})=>{const n="</"+e[0].slice(1);return-1!==e.input.indexOf(n,t)})(e,{after:n})||t.ignoreMatch()),(i=e.input.substr(n).match(/^\s+extends\s+/))&&0===i.index&&t.ignoreMatch()}},p={$pattern:n,keyword:r,literal:i,built_in:l,"variable.language":c},v="\\.([0-9](_?[0-9])*)",m={className:"number",variants:[{begin:`(\\b(0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*)((${v})|\\.)?|(${v}))[eE][+-]?([0-9](_?[0-9])*)\\b`},{begin:`\\b(0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*)\\b((${v})\\b|\\.)?|(${v})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},g={className:"subst",begin:"\\$\\{",end:"\\}",keywords:p,contains:[]},y={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,g],subLanguage:"xml"}},b={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,g],subLanguage:"css"}},w={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,g]},E={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:u+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},k=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,y,b,w,m];g.contains=k.concat({begin:/\{/,end:/\}/,keywords:p,contains:["self"].concat(k)});const O=[].concat(E,g.contains),_=O.concat([{begin:/\(/,end:/\)/,keywords:p,contains:["self"].concat(O)}]),x={className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:p,contains:_},S={variants:[{match:[/class/,/\s+/,u,/\s+/,/extends/,/\s+/,t.concat(u,"(",t.concat(/\./,u),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,u],scope:{1:"keyword",3:"title.class"}}]},N={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]+|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+/),className:"title.class",keywords:{_:[...o,...a]}},M={variants:[{match:[/function/,/\s+/,u,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[x],illegal:/%/},C={match:t.concat(/\b/,(A=[...s,"super"],t.concat("(?!",A.join("|"),")")),u,t.lookahead(/\(/)),className:"title.function",relevance:0};var A;const T={begin:t.concat(/\./,t.lookahead(t.concat(u,/(?![0-9A-Za-z$_(])/))),end:u,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},D={match:[/get|set/,/\s+/,u,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},x]},I="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",R={match:[/const|var|let/,/\s+/,u,/\s*/,/=\s*/,t.lookahead(I)],className:{1:"keyword",3:"title.function"},contains:[x]};return{name:"Javascript",aliases:["js","jsx","mjs","cjs"],keywords:p,exports:{PARAMS_CONTAINS:_,CLASS_REFERENCE:N},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),{label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,y,b,w,E,m,N,{className:"attr",begin:u+t.lookahead(":"),relevance:0},R,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[E,e.REGEXP_MODE,{className:"function",begin:I,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:p,contains:_}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:f,end:d},{match:/<[A-Za-z0-9\\._:-]+\s*\/>/},{begin:h.begin,"on:begin":h.isTrulyOpeningTag,end:h.end}],subLanguage:"xml",contains:[{begin:h.begin,end:h.end,skip:!0,contains:["self"]}]}]},M,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[x,e.inherit(e.TITLE_MODE,{begin:u,className:"title.function"})]},{match:/\.\.\./,relevance:0},T,{match:"\\$"+u,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[x]},C,{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},S,D,{match:/\$[(.]/}]}}e.exports=function(e){const t=u(e),o=["any","void","number","boolean","string","object","never","enum"],a={beginKeywords:"namespace",end:/\{/,excludeEnd:!0,contains:[t.exports.CLASS_REFERENCE]},s={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:o},contains:[t.exports.CLASS_REFERENCE]},f={$pattern:n,keyword:r.concat(["type","namespace","typedef","interface","public","private","protected","implements","declare","abstract","readonly"]),literal:i,built_in:l.concat(o),"variable.language":c},d={className:"meta",begin:"@[A-Za-z$_][0-9A-Za-z$_]*"},h=(e,t,n)=>{const r=e.contains.findIndex(e=>e.label===t);if(-1===r)throw new Error("can not find mode to replace");e.contains.splice(r,1,n)};return Object.assign(t.keywords,f),t.exports.PARAMS_CONTAINS.push(d),t.contains=t.contains.concat([d,a,s]),h(t,"shebang",e.SHEBANG()),h(t,"use_strict",{className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/}),t.contains.find(e=>"func.def"===e.label).relevance=0,Object.assign(t,{name:"TypeScript",aliases:["ts","tsx"]}),t}},function(e,t){e.exports=function(e){const t=/[a-zA-Z@][a-zA-Z0-9_]*/,n={$pattern:t,keyword:["@interface","@class","@protocol","@implementation"]};return{name:"Objective-C",aliases:["mm","objc","obj-c","obj-c++","objective-c++"],keywords:{$pattern:t,keyword:["int","float","while","char","export","sizeof","typedef","const","struct","for","union","unsigned","long","volatile","static","bool","mutable","if","do","return","goto","void","enum","else","break","extern","asm","case","short","default","double","register","explicit","signed","typename","this","switch","continue","wchar_t","inline","readonly","assign","readwrite","self","@synchronized","id","typeof","nonatomic","super","unichar","IBOutlet","IBAction","strong","weak","copy","in","out","inout","bycopy","byref","oneway","__strong","__weak","__block","__autoreleasing","@private","@protected","@public","@try","@property","@end","@throw","@catch","@finally","@autoreleasepool","@synthesize","@dynamic","@selector","@optional","@required","@encode","@package","@import","@defs","@compatibility_alias","__bridge","__bridge_transfer","__bridge_retained","__bridge_retain","__covariant","__contravariant","__kindof","_Nonnull","_Nullable","_Null_unspecified","__FUNCTION__","__PRETTY_FUNCTION__","__attribute__","getter","setter","retain","unsafe_unretained","nonnull","nullable","null_unspecified","null_resettable","class","instancetype","NS_DESIGNATED_INITIALIZER","NS_UNAVAILABLE","NS_REQUIRES_SUPER","NS_RETURNS_INNER_POINTER","NS_INLINE","NS_AVAILABLE","NS_DEPRECATED","NS_ENUM","NS_OPTIONS","NS_SWIFT_UNAVAILABLE","NS_ASSUME_NONNULL_BEGIN","NS_ASSUME_NONNULL_END","NS_REFINED_FOR_SWIFT","NS_SWIFT_NAME","NS_SWIFT_NOTHROW","NS_DURING","NS_HANDLER","NS_ENDHANDLER","NS_VALUERETURN","NS_VOIDRETURN"],literal:["false","true","FALSE","TRUE","nil","YES","NO","NULL"],built_in:["BOOL","dispatch_once_t","dispatch_queue_t","dispatch_sync","dispatch_async","dispatch_once"]},illegal:"</",contains:[{className:"built_in",begin:"\\b(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)\\w+"},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,e.C_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,{className:"string",variants:[{begin:'@"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]}]},{className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(e.QUOTE_STRING_MODE,{className:"string"}),{className:"string",begin:/<.*?>/,end:/$/,illegal:"\\n"},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{className:"class",begin:"("+n.keyword.join("|")+")\\b",end:/(\{|$)/,excludeEnd:!0,keywords:n,contains:[e.UNDERSCORE_TITLE_MODE]},{begin:"\\."+e.UNDERSCORE_IDENT_RE,relevance:0}]}}},function(e,t){e.exports=function(e){const t={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:t,illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"string",variants:[e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{begin:e.C_NUMBER_RE+"[i]",relevance:1},e.C_NUMBER_MODE]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[e.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:t,illegal:/["']/}]}]}}},function(e,t){e.exports=function(e){const t={begin:"\\[=*\\[",end:"\\]=*\\]",contains:["self"]},n=[e.COMMENT("--(?!\\[=*\\[)","$"),e.COMMENT("--\\[=*\\[","\\]=*\\]",{contains:[t],relevance:10})];return{name:"Lua",keywords:{$pattern:e.UNDERSCORE_IDENT_RE,literal:"true false nil",keyword:"and break do else elseif end for goto if in local not or repeat return then until while",built_in:"_G _ENV _VERSION __index __newindex __mode __call __metatable __tostring __len __gc __add __sub __mul __div __mod __pow __concat __unm __eq __lt __le assert collectgarbage dofile error getfenv getmetatable ipairs load loadfile loadstring module next pairs pcall print rawequal rawget rawset require select setfenv setmetatable tonumber tostring type unpack xpcall arg self coroutine resume yield status wrap create running debug getupvalue debug sethook getmetatable gethook setmetatable setlocal traceback setfenv getinfo setupvalue getlocal getregistry getfenv io lines write close flush open output type read stderr stdin input stdout popen tmpfile math log max acos huge ldexp pi cos tanh pow deg tan cosh sinh random randomseed frexp ceil floor rad abs sqrt modf asin min mod fmod log10 atan2 exp sin atan os exit setlocale date getenv difftime remove time clock tmpname rename execute package preload loadlib loaded loaders cpath config path seeall string sub upper len gfind rep find match char dump gmatch reverse byte format gsub lower table setn insert getn foreachi maxn foreach concat sort remove"},contains:n.concat([{className:"function",beginKeywords:"function",end:"\\)",contains:[e.inherit(e.TITLE_MODE,{begin:"([_a-zA-Z]\\w*\\.)*([_a-zA-Z]\\w*:)?[_a-zA-Z]\\w*"}),{className:"params",begin:"\\(",endsWithParent:!0,contains:n}].concat(n)},e.C_NUMBER_MODE,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{className:"string",begin:"\\[=*\\[",end:"\\]=*\\]",contains:[t],relevance:5}])}}},function(e,t){e.exports=function(e){const t={className:"variable",begin:"\\$+[a-zA-Z_-ÿ][a-zA-Z0-9_-ÿ]*(?![A-Za-z0-9])(?![$])"},n={className:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?[=]?/},{begin:/\?>/}]},r={className:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]},i=e.inherit(e.APOS_STRING_MODE,{illegal:null}),o=e.inherit(e.QUOTE_STRING_MODE,{illegal:null,contains:e.QUOTE_STRING_MODE.contains.concat(r)}),a=e.END_SAME_AS_BEGIN({begin:/<<<[ \t]*(\w+)\n/,end:/[ \t]*(\w+)\b/,contains:e.QUOTE_STRING_MODE.contains.concat(r)}),s={className:"string",contains:[e.BACKSLASH_ESCAPE,n],variants:[e.inherit(i,{begin:"b'",end:"'"}),e.inherit(o,{begin:'b"',end:'"'}),o,i,a]},c={className:"number",variants:[{begin:"\\b0b[01]+(?:_[01]+)*\\b"},{begin:"\\b0o[0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0x[\\da-f]+(?:_[\\da-f]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:e[+-]?\\d+)?"}],relevance:0},l={keyword:"__CLASS__ __DIR__ __FILE__ __FUNCTION__ __LINE__ __METHOD__ __NAMESPACE__ __TRAIT__ die echo exit include include_once print require require_once array abstract and as binary bool boolean break callable case catch class clone const continue declare default do double else elseif empty enddeclare endfor endforeach endif endswitch endwhile enum eval extends final finally float for foreach from global goto if implements instanceof insteadof int integer interface isset iterable list match|0 mixed new object or private protected public real return string switch throw trait try unset use var void while xor yield",literal:"false null true",built_in:"Error|0 AppendIterator ArgumentCountError ArithmeticError ArrayIterator ArrayObject AssertionError BadFunctionCallException BadMethodCallException CachingIterator CallbackFilterIterator CompileError Countable DirectoryIterator DivisionByZeroError DomainException EmptyIterator ErrorException Exception FilesystemIterator FilterIterator GlobIterator InfiniteIterator InvalidArgumentException IteratorIterator LengthException LimitIterator LogicException MultipleIterator NoRewindIterator OutOfBoundsException OutOfRangeException OuterIterator OverflowException ParentIterator ParseError RangeException RecursiveArrayIterator RecursiveCachingIterator RecursiveCallbackFilterIterator RecursiveDirectoryIterator RecursiveFilterIterator RecursiveIterator RecursiveIteratorIterator RecursiveRegexIterator RecursiveTreeIterator RegexIterator RuntimeException SeekableIterator SplDoublyLinkedList SplFileInfo SplFileObject SplFixedArray SplHeap SplMaxHeap SplMinHeap SplObjectStorage SplObserver SplObserver SplPriorityQueue SplQueue SplStack SplSubject SplSubject SplTempFileObject TypeError UnderflowException UnexpectedValueException UnhandledMatchError ArrayAccess Closure Generator Iterator IteratorAggregate Serializable Stringable Throwable Traversable WeakReference WeakMap Directory __PHP_Incomplete_Class parent php_user_filter self static stdClass"};return{case_insensitive:!0,keywords:l,contains:[e.HASH_COMMENT_MODE,e.COMMENT("//","$",{contains:[n]}),e.COMMENT("/\\*","\\*/",{contains:[{className:"doctag",begin:"@[A-Za-z]+"}]}),e.COMMENT("__halt_compiler.+?;",!1,{endsWithParent:!0,keywords:"__halt_compiler"}),n,{className:"keyword",begin:/\$this\b/},t,{begin:/(::|->)+[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/},{className:"function",relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,illegal:"[$%\\[]",contains:[{beginKeywords:"use"},e.UNDERSCORE_TITLE_MODE,{begin:"=>",endsParent:!0},{className:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,keywords:l,contains:["self",t,e.C_BLOCK_COMMENT_MODE,s,c]}]},{className:"class",variants:[{beginKeywords:"enum",illegal:/[($"]/},{beginKeywords:"class interface trait",illegal:/[:($"]/}],relevance:0,end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},e.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[e.UNDERSCORE_TITLE_MODE]},{beginKeywords:"use",relevance:0,end:";",contains:[e.UNDERSCORE_TITLE_MODE]},s,c]}}},function(e,t){e.exports=function(e){const t=e.regex,n={className:"title.function.invoke",relevance:0,begin:t.concat(/\b/,/(?!let\b)/,e.IDENT_RE,t.lookahead(/\s*\(/))},r="([ui](8|16|32|64|128|size)|f(32|64))?",i=["drop ","Copy","Send","Sized","Sync","Drop","Fn","FnMut","FnOnce","ToOwned","Clone","Debug","PartialEq","PartialOrd","Eq","Ord","AsRef","AsMut","Into","From","Default","Iterator","Extend","IntoIterator","DoubleEndedIterator","ExactSizeIterator","SliceConcatExt","ToString","assert!","assert_eq!","bitflags!","bytes!","cfg!","col!","concat!","concat_idents!","debug_assert!","debug_assert_eq!","env!","panic!","file!","format!","format_args!","include_bin!","include_str!","line!","local_data_key!","module_path!","option_env!","print!","println!","select!","stringify!","try!","unimplemented!","unreachable!","vec!","write!","writeln!","macro_rules!","assert_ne!","debug_assert_ne!"];return{name:"Rust",aliases:["rs"],keywords:{$pattern:e.IDENT_RE+"!?",type:["i8","i16","i32","i64","i128","isize","u8","u16","u32","u64","u128","usize","f32","f64","str","char","bool","Box","Option","Result","String","Vec"],keyword:["abstract","as","async","await","become","box","break","const","continue","crate","do","dyn","else","enum","extern","false","final","fn","for","if","impl","in","let","loop","macro","match","mod","move","mut","override","priv","pub","ref","return","self","Self","static","struct","super","trait","true","try","type","typeof","unsafe","unsized","use","virtual","where","while","yield"],literal:["true","false","Some","None","Ok","Err"],built_in:i},illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.COMMENT("/\\*","\\*/",{contains:["self"]}),e.inherit(e.QUOTE_STRING_MODE,{begin:/b?"/,illegal:null}),{className:"string",variants:[{begin:/b?r(#*)"(.|\n)*?"\1(?!#)/},{begin:/b?'\\?(x\w{2}|u\w{4}|U\w{8}|.)'/}]},{className:"symbol",begin:/'[a-zA-Z_][a-zA-Z0-9_]*/},{className:"number",variants:[{begin:"\\b0b([01_]+)"+r},{begin:"\\b0o([0-7_]+)"+r},{begin:"\\b0x([A-Fa-f0-9_]+)"+r},{begin:"\\b(\\d[\\d_]*(\\.[0-9_]+)?([eE][+-]?[0-9_]+)?)"+r}],relevance:0},{begin:[/fn/,/\s+/,e.UNDERSCORE_IDENT_RE],className:{1:"keyword",3:"title.function"}},{className:"meta",begin:"#!?\\[",end:"\\]",contains:[{className:"string",begin:/"/,end:/"/}]},{begin:[/let/,/\s+/,/(?:mut\s+)?/,e.UNDERSCORE_IDENT_RE],className:{1:"keyword",3:"keyword",4:"variable"}},{begin:[/for/,/\s+/,e.UNDERSCORE_IDENT_RE,/\s+/,/in/],className:{1:"keyword",3:"variable",5:"keyword"}},{begin:[/type/,/\s+/,e.UNDERSCORE_IDENT_RE],className:{1:"keyword",3:"title.class"}},{begin:[/(?:trait|enum|struct|union|impl|for)/,/\s+/,e.UNDERSCORE_IDENT_RE],className:{1:"keyword",3:"title.class"}},{begin:e.IDENT_RE+"::",keywords:{keyword:"Self",built_in:i}},{className:"punctuation",begin:"->"},n]}}},function(e,t){function n(e){return e?"string"==typeof e?e:e.source:null}function r(e){return i("(?=",e,")")}function i(...e){return e.map(e=>n(e)).join("")}function o(...e){return"("+(function(e){const t=e[e.length-1];return"object"==typeof t&&t.constructor===Object?(e.splice(e.length-1,1),t):{}}(e).capture?"":"?:")+e.map(e=>n(e)).join("|")+")"}const a=e=>i(/\b/,e,/\w$/.test(e)?/\b/:/\B/),s=["Protocol","Type"].map(a),c=["init","self"].map(a),l=["Any","Self"],u=["actor","associatedtype","async","await",/as\?/,/as!/,"as","break","case","catch","class","continue","convenience","default","defer","deinit","didSet","do","dynamic","else","enum","extension","fallthrough",/fileprivate\(set\)/,"fileprivate","final","for","func","get","guard","if","import","indirect","infix",/init\?/,/init!/,"inout",/internal\(set\)/,"internal","in","is","isolated","nonisolated","lazy","let","mutating","nonmutating",/open\(set\)/,"open","operator","optional","override","postfix","precedencegroup","prefix",/private\(set\)/,"private","protocol",/public\(set\)/,"public","repeat","required","rethrows","return","set","some","static","struct","subscript","super","switch","throws","throw",/try\?/,/try!/,"try","typealias",/unowned\(safe\)/,/unowned\(unsafe\)/,"unowned","var","weak","where","while","willSet"],f=["false","nil","true"],d=["assignment","associativity","higherThan","left","lowerThan","none","right"],h=["#colorLiteral","#column","#dsohandle","#else","#elseif","#endif","#error","#file","#fileID","#fileLiteral","#filePath","#function","#if","#imageLiteral","#keyPath","#line","#selector","#sourceLocation","#warn_unqualified_access","#warning"],p=["abs","all","any","assert","assertionFailure","debugPrint","dump","fatalError","getVaList","isKnownUniquelyReferenced","max","min","numericCast","pointwiseMax","pointwiseMin","precondition","preconditionFailure","print","readLine","repeatElement","sequence","stride","swap","swift_unboxFromSwiftValueWithType","transcode","type","unsafeBitCast","unsafeDowncast","withExtendedLifetime","withUnsafeMutablePointer","withUnsafePointer","withVaList","withoutActuallyEscaping","zip"],v=o(/[/=\-+!*%<>&|^~?]/,/[\u00A1-\u00A7]/,/[\u00A9\u00AB]/,/[\u00AC\u00AE]/,/[\u00B0\u00B1]/,/[\u00B6\u00BB\u00BF\u00D7\u00F7]/,/[\u2016-\u2017]/,/[\u2020-\u2027]/,/[\u2030-\u203E]/,/[\u2041-\u2053]/,/[\u2055-\u205E]/,/[\u2190-\u23FF]/,/[\u2500-\u2775]/,/[\u2794-\u2BFF]/,/[\u2E00-\u2E7F]/,/[\u3001-\u3003]/,/[\u3008-\u3020]/,/[\u3030]/),m=o(v,/[\u0300-\u036F]/,/[\u1DC0-\u1DFF]/,/[\u20D0-\u20FF]/,/[\uFE00-\uFE0F]/,/[\uFE20-\uFE2F]/),g=i(v,m,"*"),y=o(/[a-zA-Z_]/,/[\u00A8\u00AA\u00AD\u00AF\u00B2-\u00B5\u00B7-\u00BA]/,/[\u00BC-\u00BE\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF]/,/[\u0100-\u02FF\u0370-\u167F\u1681-\u180D\u180F-\u1DBF]/,/[\u1E00-\u1FFF]/,/[\u200B-\u200D\u202A-\u202E\u203F-\u2040\u2054\u2060-\u206F]/,/[\u2070-\u20CF\u2100-\u218F\u2460-\u24FF\u2776-\u2793]/,/[\u2C00-\u2DFF\u2E80-\u2FFF]/,/[\u3004-\u3007\u3021-\u302F\u3031-\u303F\u3040-\uD7FF]/,/[\uF900-\uFD3D\uFD40-\uFDCF\uFDF0-\uFE1F\uFE30-\uFE44]/,/[\uFE47-\uFEFE\uFF00-\uFFFD]/),b=o(y,/\d/,/[\u0300-\u036F\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]/),w=i(y,b,"*"),E=i(/[A-Z]/,b,"*"),k=["autoclosure",i(/convention\(/,o("swift","block","c"),/\)/),"discardableResult","dynamicCallable","dynamicMemberLookup","escaping","frozen","GKInspectable","IBAction","IBDesignable","IBInspectable","IBOutlet","IBSegueAction","inlinable","main","nonobjc","NSApplicationMain","NSCopying","NSManaged",i(/objc\(/,w,/\)/),"objc","objcMembers","propertyWrapper","requires_stored_property_inits","resultBuilder","testable","UIApplicationMain","unknown","usableFromInline"],O=["iOS","iOSApplicationExtension","macOS","macOSApplicationExtension","macCatalyst","macCatalystApplicationExtension","watchOS","watchOSApplicationExtension","tvOS","tvOSApplicationExtension","swift"];e.exports=function(e){const t={match:/\s+/,relevance:0},n=e.COMMENT("/\\*","\\*/",{contains:["self"]}),v=[e.C_LINE_COMMENT_MODE,n],y={match:[/\./,o(...s,...c)],className:{2:"keyword"}},_={match:i(/\./,o(...u)),relevance:0},x=u.filter(e=>"string"==typeof e).concat(["_|0"]),S={variants:[{className:"keyword",match:o(...u.filter(e=>"string"!=typeof e).concat(l).map(a),...c)}]},N={$pattern:o(/\b\w+/,/#\w+/),keyword:x.concat(h),literal:f},M=[y,_,S],C=[{match:i(/\./,o(...p)),relevance:0},{className:"built_in",match:i(/\b/,o(...p),/(?=\()/)}],A={match:/->/,relevance:0},T=[A,{className:"operator",relevance:0,variants:[{match:g},{match:`\\.(\\.|${m})+`}]}],D={className:"number",relevance:0,variants:[{match:"\\b(([0-9]_*)+)(\\.(([0-9]_*)+))?([eE][+-]?(([0-9]_*)+))?\\b"},{match:"\\b0x(([0-9a-fA-F]_*)+)(\\.(([0-9a-fA-F]_*)+))?([pP][+-]?(([0-9]_*)+))?\\b"},{match:/\b0o([0-7]_*)+\b/},{match:/\b0b([01]_*)+\b/}]},I=(e="")=>({className:"subst",variants:[{match:i(/\\/,e,/[0\\tnr"']/)},{match:i(/\\/,e,/u\{[0-9a-fA-F]{1,8}\}/)}]}),R=(e="")=>({className:"subst",match:i(/\\/,e,/[\t ]*(?:[\r\n]|\r\n)/)}),L=(e="")=>({className:"subst",label:"interpol",begin:i(/\\/,e,/\(/),end:/\)/}),P=(e="")=>({begin:i(e,/"""/),end:i(/"""/,e),contains:[I(e),R(e),L(e)]}),B=(e="")=>({begin:i(e,/"/),end:i(/"/,e),contains:[I(e),L(e)]}),$={className:"string",variants:[P(),P("#"),P("##"),P("###"),B(),B("#"),B("##"),B("###")]},j={match:i(/`/,w,/`/)},z=[j,{className:"variable",match:/\$\d+/},{className:"variable",match:`\\$${b}+`}],F=[{match:/(@|#)available/,className:"keyword",starts:{contains:[{begin:/\(/,end:/\)/,keywords:O,contains:[...T,D,$]}]}},{className:"keyword",match:i(/@/,o(...k))},{className:"meta",match:i(/@/,w)}],H={match:r(/\b[A-Z]/),relevance:0,contains:[{className:"type",match:i(/(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)/,b,"+")},{className:"type",match:E,relevance:0},{match:/[?!]+/,relevance:0},{match:/\.\.\./,relevance:0},{match:i(/\s+&\s+/,r(E)),relevance:0}]},U={begin:/</,end:/>/,keywords:N,contains:[...v,...M,...F,A,H]};H.contains.push(U);const K={begin:/\(/,end:/\)/,relevance:0,keywords:N,contains:["self",{match:i(w,/\s*:/),keywords:"_|0",relevance:0},...v,...M,...C,...T,D,$,...z,...F,H]},W={begin:/</,end:/>/,contains:[...v,H]},V={begin:/\(/,end:/\)/,keywords:N,contains:[{begin:o(r(i(w,/\s*:/)),r(i(w,/\s+/,w,/\s*:/))),end:/:/,relevance:0,contains:[{className:"keyword",match:/\b_\b/},{className:"params",match:w}]},...v,...M,...T,D,$,...F,H,K],endsParent:!0,illegal:/["']/},G={match:[/func/,/\s+/,o(j.match,w,g)],className:{1:"keyword",3:"title.function"},contains:[W,V,t],illegal:[/\[/,/%/]},q={match:[/\b(?:subscript|init[?!]?)/,/\s*(?=[<(])/],className:{1:"keyword"},contains:[W,V,t],illegal:/\[|%/},J={match:[/operator/,/\s+/,g],className:{1:"keyword",3:"title"}},X={begin:[/precedencegroup/,/\s+/,E],className:{1:"keyword",3:"title"},contains:[H],keywords:[...d,...f],end:/}/};for(const r of $.variants){const e=r.contains.find(e=>"interpol"===e.label);e.keywords=N;const t=[...M,...C,...T,D,$,...z];e.contains=[...t,{begin:/\(/,end:/\)/,contains:["self",...t]}]}return{name:"Swift",keywords:N,contains:[...v,G,q,{beginKeywords:"struct protocol class extension enum actor",end:"\\{",excludeEnd:!0,keywords:N,contains:[e.inherit(e.TITLE_MODE,{className:"title.class",begin:/[A-Za-z$_][\u00C0-\u02B80-9A-Za-z$_]*/}),...M]},J,X,{beginKeywords:"import",end:/$/,contains:[...v],relevance:0},...M,...C,...T,D,$,...z,...F,H,K]}}},function(e,t){e.exports=function(e){const t=e.regex,n="([a-zA-Z_]\\w*[!?=]?|[-+~]@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?)",r={keyword:"and then defined module in return redo if BEGIN retry end for self when next until do begin unless END rescue else break undef not super class case require yield alias while ensure elsif or include attr_reader attr_writer attr_accessor __FILE__",built_in:"proc lambda",literal:"true false nil"},i={className:"doctag",begin:"@[A-Za-z]+"},o={begin:"#<",end:">"},a=[e.COMMENT("#","$",{contains:[i]}),e.COMMENT("^=begin","^=end",{contains:[i],relevance:10}),e.COMMENT("^__END__","\\n$")],s={className:"subst",begin:/#\{/,end:/\}/,keywords:r},c={className:"string",contains:[e.BACKSLASH_ESCAPE,s],variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/`/,end:/`/},{begin:/%[qQwWx]?\(/,end:/\)/},{begin:/%[qQwWx]?\[/,end:/\]/},{begin:/%[qQwWx]?\{/,end:/\}/},{begin:/%[qQwWx]?</,end:/>/},{begin:/%[qQwWx]?\//,end:/\//},{begin:/%[qQwWx]?%/,end:/%/},{begin:/%[qQwWx]?-/,end:/-/},{begin:/%[qQwWx]?\|/,end:/\|/},{begin:/\B\?(\\\d{1,3})/},{begin:/\B\?(\\x[A-Fa-f0-9]{1,2})/},{begin:/\B\?(\\u\{?[A-Fa-f0-9]{1,6}\}?)/},{begin:/\B\?(\\M-\\C-|\\M-\\c|\\c\\M-|\\M-|\\C-\\M-)[\x20-\x7e]/},{begin:/\B\?\\(c|C-)[\x20-\x7e]/},{begin:/\B\?\\?\S/},{begin:t.concat(/<<[-~]?'?/,t.lookahead(/(\w+)(?=\W)[^\n]*\n(?:[^\n]*\n)*?\s*\1\b/)),contains:[e.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,contains:[e.BACKSLASH_ESCAPE,s]})]}]},l={className:"number",relevance:0,variants:[{begin:"\\b([1-9](_?[0-9])*|0)(\\.([0-9](_?[0-9])*))?([eE][+-]?([0-9](_?[0-9])*)|r)?i?\\b"},{begin:"\\b0[dD][0-9](_?[0-9])*r?i?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*r?i?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*r?i?\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*r?i?\\b"},{begin:"\\b0(_?[0-7])+r?i?\\b"}]},u={className:"params",begin:"\\(",end:"\\)",endsParent:!0,keywords:r},f=[c,{className:"class",beginKeywords:"class module",end:"$|;",illegal:/=/,contains:[e.inherit(e.TITLE_MODE,{begin:"[A-Za-z_]\\w*(::\\w+)*(\\?|!)?"}),{begin:"<\\s*",contains:[{begin:"("+e.IDENT_RE+"::)?"+e.IDENT_RE,relevance:0}]}].concat(a)},{className:"function",begin:t.concat(/def\s+/,t.lookahead(n+"\\s*(\\(|;|$)")),relevance:0,keywords:"def",end:"$|;",contains:[e.inherit(e.TITLE_MODE,{begin:n}),u].concat(a)},{begin:e.IDENT_RE+"::"},{className:"symbol",begin:e.UNDERSCORE_IDENT_RE+"(!|\\?)?:",relevance:0},{className:"symbol",begin:":(?!\\s)",contains:[c,{begin:n}],relevance:0},l,{className:"variable",begin:"(\\$\\W)|((\\$|@@?)(\\w+))(?=[^@$?])(?![A-Za-z])(?![@$?'])"},{className:"params",begin:/\|/,end:/\|/,relevance:0,keywords:r},{begin:"("+e.RE_STARTERS_RE+"|unless)\\s*",keywords:"unless",contains:[{className:"regexp",contains:[e.BACKSLASH_ESCAPE,s],illegal:/\n/,variants:[{begin:"/",end:"/[a-z]*"},{begin:/%r\{/,end:/\}[a-z]*/},{begin:"%r\\(",end:"\\)[a-z]*"},{begin:"%r!",end:"![a-z]*"},{begin:"%r\\[",end:"\\][a-z]*"}]}].concat(o,a),relevance:0}].concat(o,a);s.contains=f,u.contains=f;const d=[{begin:/^\s*=>/,starts:{end:"$",contains:f}},{className:"meta",begin:"^([>?]>|[\\w#]+\\(\\w+\\):\\d+:\\d+>|(\\w+-)?\\d+\\.\\d+\\.\\d+(p\\d+)?[^\\d][^>]+>)(?=[ ])",starts:{end:"$",contains:f}}];return a.unshift(o),{name:"Ruby",aliases:["rb","gemspec","podspec","thor","irb"],keywords:r,illegal:/\/\*/,contains:[e.SHEBANG({binary:"ruby"})].concat(d).concat(a).concat(f)}}},function(e,t){var n="\\.([0-9](_*[0-9])*)",r="[0-9a-fA-F](_*[0-9a-fA-F])*",i={className:"number",variants:[{begin:`(\\b([0-9](_*[0-9])*)((${n})|\\.)?|(${n}))[eE][+-]?([0-9](_*[0-9])*)[fFdD]?\\b`},{begin:`\\b([0-9](_*[0-9])*)((${n})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${n})[fFdD]?\\b`},{begin:"\\b([0-9](_*[0-9])*)[fFdD]\\b"},{begin:`\\b0[xX]((${r})\\.?|(${r})?\\.(${r}))[pP][+-]?([0-9](_*[0-9])*)[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${r})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};e.exports=function(e){const t={keyword:"abstract as val var vararg get set class object open private protected public noinline crossinline dynamic final enum if else do while for when throw try catch finally import package is in fun override companion reified inline lateinit init interface annotation data sealed internal infix operator out by constructor super tailrec where const inner suspend typealias external expect actual",built_in:"Byte Short Char Int Long Boolean Float Double Void Unit Nothing",literal:"true false null"},n={className:"symbol",begin:e.UNDERSCORE_IDENT_RE+"@"},r={className:"subst",begin:/\$\{/,end:/\}/,contains:[e.C_NUMBER_MODE]},o={className:"variable",begin:"\\$"+e.UNDERSCORE_IDENT_RE},a={className:"string",variants:[{begin:'"""',end:'"""(?=[^"])',contains:[o,r]},{begin:"'",end:"'",illegal:/\n/,contains:[e.BACKSLASH_ESCAPE]},{begin:'"',end:'"',illegal:/\n/,contains:[e.BACKSLASH_ESCAPE,o,r]}]};r.contains.push(a);const s={className:"meta",begin:"@(?:file|property|field|get|set|receiver|param|setparam|delegate)\\s*:(?:\\s*"+e.UNDERSCORE_IDENT_RE+")?"},c={className:"meta",begin:"@"+e.UNDERSCORE_IDENT_RE,contains:[{begin:/\(/,end:/\)/,contains:[e.inherit(a,{className:"string"})]}]},l=i,u=e.COMMENT("/\\*","\\*/",{contains:[e.C_BLOCK_COMMENT_MODE]}),f={variants:[{className:"type",begin:e.UNDERSCORE_IDENT_RE},{begin:/\(/,end:/\)/,contains:[]}]},d=f;return d.variants[1].contains=[f],f.variants[1].contains=[d],{name:"Kotlin",aliases:["kt","kts"],keywords:t,contains:[e.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"}]}),e.C_LINE_COMMENT_MODE,u,{className:"keyword",begin:/\b(break|continue|return|this)\b/,starts:{contains:[{className:"symbol",begin:/@\w+/}]}},n,s,c,{className:"function",beginKeywords:"fun",end:"[(]|$",returnBegin:!0,excludeEnd:!0,keywords:t,relevance:5,contains:[{begin:e.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,contains:[e.UNDERSCORE_TITLE_MODE]},{className:"type",begin:/</,end:/>/,keywords:"reified",relevance:0},{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:t,relevance:0,contains:[{begin:/:/,end:/[=,\/]/,endsWithParent:!0,contains:[f,e.C_LINE_COMMENT_MODE,u],relevance:0},e.C_LINE_COMMENT_MODE,u,s,c,a,e.C_NUMBER_MODE]},u]},{className:"class",beginKeywords:"class interface trait",end:/[:\{(]|$/,excludeEnd:!0,illegal:"extends implements",contains:[{beginKeywords:"public protected internal private constructor"},e.UNDERSCORE_TITLE_MODE,{className:"type",begin:/</,end:/>/,excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:/[,:]\s*/,end:/[<\(,]|$/,excludeBegin:!0,returnEnd:!0},s,c]},a,{className:"meta",begin:"^#!/usr/bin/env",end:"$",illegal:"\n"},l]}}},function(e,t){e.exports=function(e){const t={keyword:["abstract","as","base","break","case","catch","class","const","continue","do","else","event","explicit","extern","finally","fixed","for","foreach","goto","if","implicit","in","interface","internal","is","lock","namespace","new","operator","out","override","params","private","protected","public","readonly","record","ref","return","sealed","sizeof","stackalloc","static","struct","switch","this","throw","try","typeof","unchecked","unsafe","using","virtual","void","volatile","while"].concat(["add","alias","and","ascending","async","await","by","descending","equals","from","get","global","group","init","into","join","let","nameof","not","notnull","on","or","orderby","partial","remove","select","set","unmanaged","value|0","var","when","where","with","yield"]),built_in:["bool","byte","char","decimal","delegate","double","dynamic","enum","float","int","long","nint","nuint","object","sbyte","short","string","ulong","uint","ushort"],literal:["default","false","null","true"]},n=e.inherit(e.TITLE_MODE,{begin:"[a-zA-Z](\\.?\\w)*"}),r={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},i={className:"string",begin:'@"',end:'"',contains:[{begin:'""'}]},o=e.inherit(i,{illegal:/\n/}),a={className:"subst",begin:/\{/,end:/\}/,keywords:t},s=e.inherit(a,{illegal:/\n/}),c={className:"string",begin:/\$"/,end:'"',illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},e.BACKSLASH_ESCAPE,s]},l={className:"string",begin:/\$@"/,end:'"',contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},a]},u=e.inherit(l,{illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},s]});a.contains=[l,c,i,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,r,e.C_BLOCK_COMMENT_MODE],s.contains=[u,c,o,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,r,e.inherit(e.C_BLOCK_COMMENT_MODE,{illegal:/\n/})];const f={variants:[l,c,i,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},d={begin:"<",end:">",contains:[{beginKeywords:"in out"},n]},h=e.IDENT_RE+"(<"+e.IDENT_RE+"(\\s*,\\s*"+e.IDENT_RE+")*>)?(\\[\\])?",p={begin:"@"+e.IDENT_RE,relevance:0};return{name:"C#",aliases:["cs","c#"],keywords:t,illegal:/::/,contains:[e.COMMENT("///","$",{returnBegin:!0,contains:[{className:"doctag",variants:[{begin:"///",relevance:0},{begin:"\x3c!--|--\x3e"},{begin:"</?",end:">"}]}]}),e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"meta",begin:"#",end:"$",keywords:{keyword:"if else elif endif define undef warning error line region endregion pragma checksum"}},f,r,{beginKeywords:"class interface",relevance:0,end:/[{;=]/,illegal:/[^\s:,]/,contains:[{beginKeywords:"where class"},n,d,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"namespace",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[n,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"record",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[n,d,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{className:"meta",begin:"^\\s*\\[(?=[\\w])",excludeBegin:!0,end:"\\]",excludeEnd:!0,contains:[{className:"string",begin:/"/,end:/"/}]},{beginKeywords:"new return throw await else",relevance:0},{className:"function",begin:"("+h+"\\s+)+"+e.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,end:/\s*[{;=]/,excludeEnd:!0,keywords:t,contains:[{beginKeywords:["public","private","protected","static","internal","protected","abstract","async","extern","override","unsafe","virtual","new","sealed","partial"].join(" "),relevance:0},{begin:e.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,contains:[e.TITLE_MODE,d],relevance:0},{match:/\(\)/},{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:t,relevance:0,contains:[f,r,e.C_BLOCK_COMMENT_MODE]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},p]}}},function(e,t,n){"use strict";var r=n(13),i=n(63);r({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},function(e,t,n){var r=n(8),i=n(105),o=n(51),a=n(16);e.exports=function(e,t){for(var n=i(t),s=a.f,c=o.f,l=0;l<n.length;l++){var u=n[l];r(e,u)||s(e,u,c(t,u))}}},function(e,t,n){var r=n(38),i=n(107),o=n(61),a=n(10);e.exports=r("Reflect","ownKeys")||function(e){var t=i.f(a(e)),n=o.f;return n?t.concat(n(e)):t}},function(e,t,n){var r=n(5);e.exports=r},function(e,t,n){var r=n(60),i=n(39).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(25),i=n(19),o=n(109),a=function(e){return function(t,n,a){var s,c=r(t),l=i(c.length),u=o(a,l);if(e&&n!=n){for(;l>u;)if((s=c[u++])!=s)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===n)return e||u||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},function(e,t,n){var r=n(29),i=Math.max,o=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):o(n,t)}},function(e,t,n){var r=n(9),i=n(111),o=n(7)("species");e.exports=function(e,t){var n;return i(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!i(n.prototype)?r(n)&&null===(n=n[o])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},function(e,t,n){var r=n(27);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(66);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,n){var r=n(5),i=n(68),o=n(63),a=n(12);for(var s in i){var c=r[s],l=c&&c.prototype;if(l&&l.forEach!==o)try{a(l,"forEach",o)}catch(e){l.forEach=o}}},function(e,t,n){"use strict";var r=n(13),i=n(40).filter,o=n(115),a=n(41),s=o("filter"),c=a("filter");r({target:"Array",proto:!0,forced:!s||!c},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var r=n(6),i=n(7),o=n(116),a=i("species");e.exports=function(e){return o>=51||!r((function(){var t=[];return(t.constructor={})[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},function(e,t,n){var r,i,o=n(5),a=n(117),s=o.process,c=s&&s.versions,l=c&&c.v8;l?i=(r=l.split("."))[0]+r[1]:a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(i=r[1]),e.exports=i&&+i},function(e,t,n){var r=n(38);e.exports=r("navigator","userAgent")||""},function(e,t,n){var r=n(7),i=n(70),o=n(16),a=r("unscopables"),s=Array.prototype;null==s[a]&&o.f(s,a,{configurable:!0,value:i(null)}),e.exports=function(e){s[a][e]=!0}},function(e,t,n){var r=n(14),i=n(16),o=n(10),a=n(71);e.exports=r?Object.defineProperties:function(e,t){o(e);for(var n,r=a(t),s=r.length,c=0;s>c;)i.f(e,n=r[c++],t[n]);return e}},function(e,t,n){var r=n(38);e.exports=r("document","documentElement")},function(e,t,n){"use strict";var r=n(73).IteratorPrototype,i=n(70),o=n(33),a=n(42),s=n(23),c=function(){return this};e.exports=function(e,t,n){var l=t+" Iterator";return e.prototype=i(r,{next:o(1,n)}),a(e,l,!1,!0),s[l]=c,e}},function(e,t,n){var r=n(6);e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},function(e,t,n){var r=n(9);e.exports=function(e){if(!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},function(e,t,n){var r=n(13),i=n(125);r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},function(e,t,n){"use strict";var r=n(14),i=n(6),o=n(71),a=n(61),s=n(52),c=n(22),l=n(26),u=Object.assign,f=Object.defineProperty;e.exports=!u||i((function(){if(r&&1!==u({b:1},u(f({},"a",{enumerable:!0,get:function(){f(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol();return e[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=u({},e)[n]||"abcdefghijklmnopqrst"!=o(u({},t)).join("")}))?function(e,t){for(var n=c(e),i=arguments.length,u=1,f=a.f,d=s.f;i>u;)for(var h,p=l(arguments[u++]),v=f?o(p).concat(f(p)):o(p),m=v.length,g=0;m>g;)h=v[g++],r&&!d.call(p,h)||(n[h]=p[h]);return n}:u},function(e,t,n){var r=n(43),i=n(18),o=n(127);r||i(Object.prototype,"toString",o,{unsafe:!0})},function(e,t,n){"use strict";var r=n(43),i=n(76);e.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},function(e,t,n){var r=n(13),i=n(129);r({global:!0,forced:parseInt!=i},{parseInt:i})},function(e,t,n){var r=n(5),i=n(130).trim,o=n(77),a=r.parseInt,s=/^[+-]?0[Xx]/,c=8!==a(o+"08")||22!==a(o+"0x16");e.exports=c?function(e,t){var n=i(String(e));return a(n,t>>>0||(s.test(n)?16:10))}:a},function(e,t,n){var r=n(17),i="["+n(77)+"]",o=RegExp("^"+i+i+"*"),a=RegExp(i+i+"*$"),s=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(o,"")),2&e&&(n=n.replace(a,"")),n}};e.exports={start:s(1),end:s(2),trim:s(3)}},function(e,t,n){"use strict";var r=n(78).charAt,i=n(21),o=n(72),a=i.set,s=i.getterFor("String Iterator");o(String,"String",(function(e){a(this,{type:"String Iterator",string:String(e),index:0})}),(function(){var e,t=s(this),n=t.string,i=t.index;return i>=n.length?{value:void 0,done:!0}:(e=r(n,i),t.index+=e.length,{value:e,done:!1})}))},function(e,t,n){"use strict";var r,i=n(5),o=n(79),a=n(44),s=n(134),c=n(140),l=n(9),u=n(21).enforce,f=n(58),d=!i.ActiveXObject&&"ActiveXObject"in i,h=Object.isExtensible,p=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},v=e.exports=s("WeakMap",p,c);if(f&&d){r=c.getConstructor(p,"WeakMap",!0),a.REQUIRED=!0;var m=v.prototype,g=m.delete,y=m.has,b=m.get,w=m.set;o(m,{delete:function(e){if(l(e)&&!h(e)){var t=u(this);return t.frozen||(t.frozen=new r),g.call(this,e)||t.frozen.delete(e)}return g.call(this,e)},has:function(e){if(l(e)&&!h(e)){var t=u(this);return t.frozen||(t.frozen=new r),y.call(this,e)||t.frozen.has(e)}return y.call(this,e)},get:function(e){if(l(e)&&!h(e)){var t=u(this);return t.frozen||(t.frozen=new r),y.call(this,e)?b.call(this,e):t.frozen.get(e)}return b.call(this,e)},set:function(e,t){if(l(e)&&!h(e)){var n=u(this);n.frozen||(n.frozen=new r),y.call(this,e)?w.call(this,e,t):n.frozen.set(e,t)}else w.call(this,e,t);return this}})}},function(e,t,n){var r=n(6);e.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(e,t,n){"use strict";var r=n(13),i=n(5),o=n(62),a=n(18),s=n(44),c=n(80),l=n(81),u=n(9),f=n(6),d=n(138),h=n(42),p=n(139);e.exports=function(e,t,n){var v=-1!==e.indexOf("Map"),m=-1!==e.indexOf("Weak"),g=v?"set":"add",y=i[e],b=y&&y.prototype,w=y,E={},k=function(e){var t=b[e];a(b,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(m&&!u(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return m&&!u(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(m&&!u(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(o(e,"function"!=typeof y||!(m||b.forEach&&!f((function(){(new y).entries().next()})))))w=n.getConstructor(t,e,v,g),s.REQUIRED=!0;else if(o(e,!0)){var O=new w,_=O[g](m?{}:-0,1)!=O,x=f((function(){O.has(1)})),S=d((function(e){new y(e)})),N=!m&&f((function(){for(var e=new y,t=5;t--;)e[g](t,t);return!e.has(-0)}));S||((w=t((function(t,n){l(t,w,e);var r=p(new y,t,w);return null!=n&&c(n,r[g],r,v),r}))).prototype=b,b.constructor=w),(x||N)&&(k("delete"),k("has"),v&&k("get")),(N||_)&&k(g),m&&b.clear&&delete b.clear}return E[e]=w,r({global:!0,forced:w!=y},E),h(w,e),m||n.setStrong(w,e,v),w}},function(e,t,n){var r=n(7),i=n(23),o=r("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||a[o]===e)}},function(e,t,n){var r=n(76),i=n(23),o=n(7)("iterator");e.exports=function(e){if(null!=e)return e[o]||e["@@iterator"]||i[r(e)]}},function(e,t,n){var r=n(10);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},function(e,t,n){var r=n(7)("iterator"),i=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){i=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o={};o[r]=function(){return{next:function(){return{done:n=!0}}}},e(o)}catch(e){}return n}},function(e,t,n){var r=n(9),i=n(75);e.exports=function(e,t,n){var o,a;return i&&"function"==typeof(o=t.constructor)&&o!==n&&r(a=o.prototype)&&a!==n.prototype&&i(e,a),e}},function(e,t,n){"use strict";var r=n(79),i=n(44).getWeakData,o=n(10),a=n(9),s=n(81),c=n(80),l=n(40),u=n(8),f=n(21),d=f.set,h=f.getterFor,p=l.find,v=l.findIndex,m=0,g=function(e){return e.frozen||(e.frozen=new y)},y=function(){this.entries=[]},b=function(e,t){return p(e.entries,(function(e){return e[0]===t}))};y.prototype={get:function(e){var t=b(this,e);if(t)return t[1]},has:function(e){return!!b(this,e)},set:function(e,t){var n=b(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=v(this.entries,(function(t){return t[0]===e}));return~t&&this.entries.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,l){var f=e((function(e,r){s(e,f,t),d(e,{type:t,id:m++,frozen:void 0}),null!=r&&c(r,e[l],e,n)})),p=h(t),v=function(e,t,n){var r=p(e),a=i(o(t),!0);return!0===a?g(r).set(t,n):a[r.id]=n,e};return r(f.prototype,{delete:function(e){var t=p(this);if(!a(e))return!1;var n=i(e);return!0===n?g(t).delete(e):n&&u(n,t.id)&&delete n[t.id]},has:function(e){var t=p(this);if(!a(e))return!1;var n=i(e);return!0===n?g(t).has(e):n&&u(n,t.id)}}),r(f.prototype,n?{get:function(e){var t=p(this);if(a(e)){var n=i(e);return!0===n?g(t).get(e):n?n[t.id]:void 0}},set:function(e,t){return v(this,e,t)}}:{add:function(e){return v(this,e,!0)}}),f}}},function(e,t,n){var r=n(5),i=n(68),o=n(69),a=n(12),s=n(7),c=s("iterator"),l=s("toStringTag"),u=o.values;for(var f in i){var d=r[f],h=d&&d.prototype;if(h){if(h[c]!==u)try{a(h,c,u)}catch(e){h[c]=u}if(h[l]||a(h,l,f),i[f])for(var p in o)if(h[p]!==o[p])try{a(h,p,o[p])}catch(e){h[p]=o[p]}}}},function(e,t,n){"use strict";var r=n(13),i=n(143).left,o=n(67),a=n(41),s=o("reduce"),c=a("reduce",{1:0});r({target:"Array",proto:!0,forced:!s||!c},{reduce:function(e){return i(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var r=n(65),i=n(22),o=n(26),a=n(19),s=function(e){return function(t,n,s,c){r(n);var l=i(t),u=o(l),f=a(l.length),d=e?f-1:0,h=e?-1:1;if(s<2)for(;;){if(d in u){c=u[d],d+=h;break}if(d+=h,e?d<0:f<=d)throw TypeError("Reduce of empty array with no initial value")}for(;e?d>=0:f>d;d+=h)d in u&&(c=n(c,u[d],d,l));return c}};e.exports={left:s(!1),right:s(!0)}},function(e,t,n){var r=n(14),i=n(16).f,o=Function.prototype,a=o.toString,s=/^\s*function ([^ (]*)/;r&&!("name"in o)&&i(o,"name",{configurable:!0,get:function(){try{return a.call(this).match(s)[1]}catch(e){return""}}})},function(e,t,n){"use strict";var r=n(10);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){"use strict";var r=n(6);function i(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=r((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},function(e,t,n){"use strict";var r=n(83),i=n(10),o=n(19),a=n(17),s=n(84),c=n(85);r("match",1,(function(e,t,n){return[function(t){var n=a(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var a=i(e),l=String(this);if(!a.global)return c(a,l);var u=a.unicode;a.lastIndex=0;for(var f,d=[],h=0;null!==(f=c(a,l));){var p=String(f[0]);d[h]=p,""===p&&(a.lastIndex=s(l,o(a.lastIndex),u)),h++}return 0===h?null:d}]}))},function(e,t,n){"use strict";var r=n(83),i=n(10),o=n(22),a=n(19),s=n(29),c=n(17),l=n(84),u=n(85),f=Math.max,d=Math.min,h=Math.floor,p=/\$([$&'`]|\d\d?|<[^>]*>)/g,v=/\$([$&'`]|\d\d?)/g;r("replace",2,(function(e,t,n,r){var m=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,g=r.REPLACE_KEEPS_$0,y=m?"$":"$0";return[function(n,r){var i=c(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,i,r):t.call(String(i),n,r)},function(e,r){if(!m&&g||"string"==typeof r&&-1===r.indexOf(y)){var o=n(t,e,this,r);if(o.done)return o.value}var c=i(e),h=String(this),p="function"==typeof r;p||(r=String(r));var v=c.global;if(v){var w=c.unicode;c.lastIndex=0}for(var E=[];;){var k=u(c,h);if(null===k)break;if(E.push(k),!v)break;""===String(k[0])&&(c.lastIndex=l(h,a(c.lastIndex),w))}for(var O,_="",x=0,S=0;S<E.length;S++){k=E[S];for(var N=String(k[0]),M=f(d(s(k.index),h.length),0),C=[],A=1;A<k.length;A++)C.push(void 0===(O=k[A])?O:String(O));var T=k.groups;if(p){var D=[N].concat(C,M,h);void 0!==T&&D.push(T);var I=String(r.apply(void 0,D))}else I=b(N,h,M,C,T,r);M>=x&&(_+=h.slice(x,M)+I,x=M+N.length)}return _+h.slice(x)}];function b(e,n,r,i,a,s){var c=r+e.length,l=i.length,u=v;return void 0!==a&&(a=o(a),u=p),t.call(s,u,(function(t,o){var s;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,r);case"'":return n.slice(c);case"<":s=a[o.slice(1,-1)];break;default:var u=+o;if(0===u)return t;if(u>l){var f=h(u/10);return 0===f?t:f<=l?void 0===i[f-1]?o.charAt(1):i[f-1]+o.charAt(1):t}s=i[u-1]}return void 0===s?"":s}))}}))},function(e,t,n){"use strict";n.r(t);var r=n(0);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw o}}}}function s(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){if("undefined"==typeof DOMParser)throw new Error("The native `DOMParser` global which the `Html` serializer uses by default is not present in this environment. You must supply the `options.parseHtml` function instead.");return(new DOMParser).parseFromString(e,"text/html").body||window.document.createElement("body")}var d=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l(this,e),u(this,"deserialize",(function(e){var n=t.parseHtml(e),r=Array.from(n.childNodes);return t.deserializeElements(r)})),u(this,"deserializeElements",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return e.filter(t.cruftNewline).forEach((function(e){var r=t.deserializeElement(e);switch(h(r)){case"array":n=n.concat(r);break;case"object":n.push(r)}})),n})),u(this,"deserializeElement",(function(e){var n;e.tagName||(e.tagName="");var r,i=function(e){switch("[object NodeList]"===Object.prototype.toString.call(e)&&(e=Array.from(e)),h(e)){case"array":return t.deserializeElements(e);case"object":return t.deserializeElement(e);case"null":case"undefined":return;default:throw new Error('The `next` argument was called with invalid children: "'.concat(e,'".'))}},o=a(t.rules);try{for(o.s();!(r=o.n()).done;){var s=r.value;if(s.deserialize){var c=s.deserialize(e,i),l=h(c);if("array"!==l&&"object"!==l&&"null"!==l&&"undefined"!==l)throw new Error('A rule returned an invalid deserialized representation: "'.concat(n,'".'));if(void 0!==c){if(null===c)return null;n=c;break}}}}catch(e){o.e(e)}finally{o.f()}return n||i(e.childNodes)})),u(this,"deserializeMark",(function(e){var n=e.type,r=e.data;return e.nodes.reduce((function(e,i){var o=function e(i){return"mark"===i.object?t.deserializeMark(i):("text"===i.object?(i.marks=i.marks||[],i.marks.push({type:n,data:r})):i.nodes&&(i.nodes=i.nodes.map(e)),i)}(i);return Array.isArray(o)?e.concat(o):(e.push(o),e)}),[])})),u(this,"cruftNewline",(function(e){return!("#text"===e.nodeName&&"\n"===e.nodeValue)}));var r=n.parseHtml,i=void 0===r?f:r,s=n.rules,c=void 0===s?[]:s;this.rules=o(c),this.parseHtml=i};function h(e){switch(toString.call(e)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object String]":return"string"}if("object"===i(e)&&e&&"number"==typeof e.length)try{if("function"==typeof e.callee)return"arguments"}catch(e){if(e instanceof TypeError)return"arguments"}return null===e?"null":void 0===e?"undefined":e&&1===e.nodeType?"element":e===Object(e)?"object":i(e)}var p=function(e){Array.isArray(e)&&(e=e[0]);var t=[];e=(e=(e=e.replace(/(<pre[^>]*>)((.|\n)*?)<\/pre>/g,(function(e,n,r){return t.push(r),"".concat(n,"$$$").concat(t.length-1,"</pre>")}))).replace(/\n/g,"").trim()).replace(/\<[^\>]+\>/g,(function(e){return e.replace(/ +/g," ").replace(/\< /g,"<").replace(/ \>/g,">").replace(/\<\/ /g,"</").replace(/ \/\>/g,"/>")}));var n=["strong","b","a","code","span","i","em","s","u","strike","sub","sup"];return(e=(e=(e=(e=e.replace(/([a-z1-6]+)(\/?\>)( +)/g,(function(e,t,r){return n.indexOf(t)>-1?e:t+r}))).replace(/\&\#xD;/g,"")).replace(/\&\#xA;/g,"")).replace(/( +)(\<\/?)([a-z1-6]+)/g,(function(e,t,r,i){return n.indexOf(i)>-1?e:r+i}))).replace(/(<pre[^>]*>)\$\$\$(\d+)<\/pre>/g,(function(e,n,r){var i=parseInt(r,10);return Number.isInteger(i)?"".concat(n).concat(t[i],"</pre>"):e}))};function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y={p:r.PARAGRAPH,blockquote:r.BLOCK_QUOTE,ul:r.BULLETED_LIST,hr:r.HORIZONTAL_RULE},b={code:r.CODE_INLINE,sup:r.SUP,sub:r.SUB},w={rules:[{deserialize:function(e,t){if(D(e,"center"))return E(r.PARAGRAPH,{align:"center"},t(e.childNodes))}},{deserialize:function(e,t){var n=e.tagName.toLowerCase();return["h1","h2","h3","h4","h5"].indexOf(n)>-1?E(r.HEADING,{level:Number(n.replace("h",""))},t(e.childNodes)):"h6"===n?E(r.PARAGRAPH,null,t(e.childNodes)):void 0}},{deserialize:function(e,t){if(D(e,"a"))return E(r.LINK,{href:e.getAttribute("href")},t(e.childNodes))}},{deserialize:function(e){var t=e.tagName.toLowerCase();if("span"===t&&(e.classList.contains("MathJax_Preview")||e.classList.contains("MathJax")))return null;if("script"===t){var n=e.getAttribute("type")||"";return n.indexOf("math/tex")>-1&&n.indexOf("mode=display")<0?E(r.KATEX_INLINE,{mathString:e.innerHTML}):n.indexOf("mode=display")>-1?E(r.KATEX_BLOCK,{mathString:e.innerHTML}):void 0}}},{deserialize:function(e){if(D(e,"img")){var t=e.getAttribute("title");return E(r.IMAGE,m(m({src:e.getAttribute("src")},t?{title:t}:{}),"unpreview"===e.getAttribute("alt")?{unpreview:!0}:{}))}}},{deserialize:function(e,t){if(D(e,"p")){if(R(e.childNodes))return t(function(e,t){var n=[],r=[];return L(e,(function(e){D(e,"br")?(0===n.length&&(n=[{nodeName:"#text",nodeValue:""}]),r.push({tagName:t,nodeName:t,childNodes:n}),n=[]):n.push(e)})),n.length>0&&r.push({tagName:t,nodeName:t,childNodes:n}),r}(e.childNodes,"p"));if(I(e)){var n=e.childNodes[0].childNodes[0].getAttribute("title");return E(r.IMAGE,m(m({src:e.childNodes[0].childNodes[0].getAttribute("src"),href:e.childNodes[0].getAttribute("href")},n?{title:n}:{}),"unpreview"===e.childNodes[0].childNodes[0].getAttribute("alt")?{unpreview:!0}:{}))}if(e.childNodes.length>0&&(a=e.childNodes,Array.prototype.some.call(a,(function(e){return T(e)}))||function(e){return Array.prototype.some.call(e,(function(e){return A(e)}))}(e.childNodes))){var i=[];return L(e.childNodes,(function(t){if(T(t))D(t,"a")?i.push(x("p",e,[t])):i.push(t);else if(A(t)){var n=t.nodeValue,r=0;n.replace(/\$\$[^\$]+\$\$/g,(function(t,o){if(o>0&&o>r){var a=n.substring(r,o);i.push(x("p",e,[_(a)]))}i.push(x("p",e,[_(t)])),r=o+t.length})),r<n.length&&i.push(x("p",e,[_(n.substring(r))]))}else i[i.length-1]&&"p"===i[i.length-1].nodeName&&!I(i[i.length-1])?i[i.length-1].childNodes.push(t):i.push(x("p",e,[t]))})),t(i)}if(1===e.childNodes.length&&C(e.childNodes[0])){var o=[];return e.childNodes[0].nodeValue.match(/\$\$[^\$]+\$\$/g).forEach((function(e){e=e.replace(/\$/g,"").replace(/&br;/g,"\n"),o.push(E(r.KATEX_BLOCK,{mathString:e}))})),o}}var a}},{deserialize:function(e,t){if(D(e,"li"))return function e(t,n,i,o){i=i||0;var a=[],s=[];return L(t.childNodes,(function(c,l){if(function(e){return["ul","ol"].indexOf(e.nodeName.toLowerCase())>-1}(c))L(c.childNodes,(function(t){a=a.concat(e(t,n,i+1))}));else if(T(c)){var u=null,f=i;if((a.length>0||o)&&(u={listStyle:"none"}),D(c,"p"))if(R(c.childNodes)){var d=x("li",t.parentNode,c.childNodes);a=a.concat(e(d,n,i,a.length>0))}else{var h=null;f>0&&(h={indent:f});var p=E(r.PARAGRAPH,h,n(c.childNodes));a.push(E(r.LIST_ITEM,u,[p]))}else D(c,"pre")||a.push(E(r.LIST_ITEM,u,n([c])))}else{if(D(c,"br"))return;s.push(c);var v=t.childNodes[l+1];if(!v||v&&T(v)||D(v,"br")){var m=null,g=i;(a.length>0||o)&&(m={listStyle:"none"});var y=null;g>0&&(y={indent:g});var b=E(r.PARAGRAPH,y,n(s));a.push(E(r.LIST_ITEM,m,[b])),s=[]}}})),a}(e,t,0)}},{deserialize:function(e){if(D(e,"table"))return E(r.EMBED_COMPONENT,{type:"table",data:{content:e.outerHTML}})}},{deserialize:function(e){if(D(e,"p")&&1===e.childNodes.length&&D(e.childNodes[0],"span")&&e.childNodes[0].outerHTML.match(/data\-component\="vote"/)&&e.childNodes[0].outerHTML.match(/data\-id\="(\d+)"/))return E(r.EMBED_COMPONENT,{type:"vote",data:{id:e.childNodes[0].outerHTML.match(/data-id="(\d+)"/)[1]}})}},{deserialize:function(e){if(D(e,"pre")){var t=e.getAttribute("lang"),n="";if(Array.prototype.some.call(e.childNodes,(function(e){return D(e,"code")}))){n=e.childNodes[0].innerHTML;var i=e.childNodes[0].getAttribute("class");!t&&i&&(t=i.replace("language-","").toLowerCase())}else n=e.innerHTML;return E(r.CODE_BLOCK,t?{lang:t}:null,[k(P(n.replace(/<br>/g,"\n")))])}}},{deserialize:function(e){if(D(e,"video")){var t=e.getAttribute("poster"),n=Array.prototype.map.call(e.childNodes,(function(e){return e.getAttribute("src")})),i=n.find((function(e){return/m3u8$/.test(e)}));return i||(i=n[0]),E(r.EMBED_COMPONENT,{type:"video",data:m(m({},t?{poster:t}:{}),{},{url:i})})}}},{deserialize:function(e){if(D(e,"audio")){var t=Array.prototype.map.call(e.childNodes,(function(e){return e.getAttribute("src")})),n=t.find((function(e){return/mp3$/.test(e)}));return n||(n=t[0]),E(r.EMBED_COMPONENT,{type:"audio",data:{url:n}})}}},{deserialize:function(e,t){if(D(e,"ol")){var n=e.getAttribute("start"),i=null;return n&&(i={start:parseInt(n)}),E(r.NUMBERED_LIST,i,t(e.childNodes))}}},{deserialize:function(e,t){var n=e.tagName.toLowerCase();if(y[n])return E(y[n],null,t(e.childNodes));if(b[n]){if("code"!==n)return E(b[n],null,t(e.childNodes));var i=_(P(e.innerHTML),e);if(i.nodeValue)return E(r.CODE_INLINE,null,t([i]))}}},{deserialize:function(e){if(M(e)&&/\$[^\$]+\$/.test(e.nodeValue)&&function(e,t){return!e||!e.nodeName||e.nodeName.toLowerCase()!==t}(e.parentNode,"code")){var t=[],n=0,i=e.nodeValue;return i.replace(/\$[^\$]+\$/g,(function(e,o){o>n&&t.push(k(i.substring(n,o))),t.push(E(r.KATEX_INLINE,{mathString:e.replace(/\$/g,"")})),n=o+e.length})),n<i.length&&t.push(k(i.substring(n))),t}}},{deserialize:function(e){if("#text"===e.nodeName){if(e.nodeValue&&e.nodeValue.match(/<!--.*?-->/))return;var t=function e(t,n){n=n||[];var r=t.parentNode;if(!r)return n;var i=N[r.nodeName.toLowerCase()];if(i){var o=i(r);o&&n.push(o)}return e(r,n)}(e);return k(e.nodeValue,t)}}}]};function E(e,t,n){var r={type:e};return t&&(r.attrs=t),n&&n[0]&&(r.content=n),r}function k(e,t){if(!e)return null;var n={type:"text",text:e};return t&&t[0]&&(n.marks=t),n}function O(e,t){var n={type:e};return t&&(n.attrs=t),n}function _(e,t){return{nodeName:"#text",nodeValue:e,parentNode:t||{nodeName:"",tagName:""}}}function x(e,t,n,r){return m({nodeName:e,tagName:e,parentNode:t||{nodeName:"",tagName:""},childNodes:n||[]},r||{})}var S,N={i:function(){return O(r.ITALIC)},em:function(){return O(r.ITALIC)},strong:function(){return O(r.STRONG)},b:function(){return O(r.STRONG)},strike:function(){return O(r.DEL)},s:function(){return O(r.DEL)},u:function(){return O(r.UNDERLINE)},span:function(e){var t=e.tagName.toLowerCase();return"span"===t&&e.classList.contains("orange")?O("color",{color:"#fa8919",name:"orange"}):"span"===t&&e.classList.contains("reference")?O("color",{color:"#888",name:"gray"}):void 0}};function M(e){return e&&("#text"===e.nodeName||3===e.nodeType)}function C(e){return M(e)&&/\$\$[^\$]+\$\$/.test(e.nodeValue)}function A(e){return!!C(e)&&e.nodeValue.replace(/\$\$[^\$]+\$\$/g,"").replace(/ /g,"").length>0}function T(e){return!!(D(e,"a")&&e.innerHTML.indexOf("<img")>-1)||["img","p","video","audio","li","ul","ol","pre","blockquote"].indexOf(e.nodeName.toLowerCase())>-1}function D(e,t){return!(!e||!e.nodeName)&&e.nodeName.toLowerCase()===t}function I(e){return!!(D(e,"p")&&1===e.childNodes.length&&e.childNodes[0].tagName&&D(e.childNodes[0],"a")&&e.childNodes[0].childNodes[0]&&e.childNodes[0].childNodes[0].tagName&&D(e.childNodes[0].childNodes[0],"img"))}function R(e){return Array.prototype.some.call(e,(function(e){return D(e,"br")}))}function L(e,t){Array.prototype.forEach.call(e,t)}function P(e){return e.replace(/&quot;/g,'"').replace(/&nbsp;/g," ").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&")}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e){var t=new d(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){$(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},w));e=p(function(e){return function(e){return e.replace(/<p><\/p>/g,"")}(e=function(e){return e.replace(/<object>/g,"&lt;object&gt;")}(e=function(e){return e.replace(/(\<strong[^\>]*\>)((.|\n)*?)(\<\/strong\>)/g,(function(e,t,n){return n.replace(/\<br[^\>]*\>/g,"<br>"),(n=n.split("<br>")).map((function(e){return"<strong>".concat(e,"</strong>")})).join("<br>")}))}(e=function(e){return(e=(e=e.replace(/(\<code[^\>]*\>)((.|\n)*?)(\<\/code\>)/g,(function(e,t,n){return t+(n=(n=(n=(n=n.replace(/\t/g,"  ")).replace(/\<a href="(.+?)"\>.*?\<\/a\>/g,(function(e,t){return"[](".concat(t,")")}))).replace(/\n/g,"<br/>")).replace(/ /g,"&nbsp;"))+"</code>"}))).replace(/(\<pre[^\>]*\>)((.|\n)*?)(\<\/pre\>)/g,(function(e,t,n){return e.indexOf("<code")>-1?e:t+(n=(n=(n=(n=n.replace(/\t/g,"  ")).replace(/\<a href="(.+?)"\>.*?\<\/a\>/g,(function(e,t){return"[](".concat(t,")")}))).replace(/\n/g,"<br/>")).replace(/ /g,"&nbsp;"))+"</pre>"}))).replace("<pre><br/>","<pre>")}(e=function(e){return e.replace(/\$\$[^\$]+\$\$/g,(function(e){return e.replace(/\\?\<br[^\>]*\>/g,"&br;").replace(/&amp;/g,"&")}))}(e=function(e){return(e=e.replace(/\r\n/g,"\n")).replace(/\r/g,"\n")}(e=function(e){return e.replace("\x3c!-- [[[read_end]]] --\x3e","")}(e)))))))}(e));var n=t.deserialize(e),i=[];return n.forEach((function(e,t){var o=!1,a=n[t+1];a&&a.type===r.HEADING&&(o=!0),i.push(e),e.type===r.HEADING||o||i.push({type:r.PARAGRAPH,attrs:{},content:[]})})),{type:"doc",content:i}}function z(e,t){var n=[],i=0;return e.every((function(e){var o=function e(t){var n=0;if(t.type===r.KATEX_BLOCK){var i=t.attrs.mathString||"";return String(i).length}return t.content&&t.content[0]&&t.content.find((function(e){return r.INLINE_TYPES.indexOf(e.type)>-1}))&&t.content.forEach((function(t){if(t.type===r.TEXT){var i=t.text||"";n+=i.length}else if(t.type===r.KATEX_INLINE){var o=t.attrs.mathString||"";n+=String(o).length}else n+=e(t)})),n}(e);if(0===o&&e.content&&e.content[0]){var a=z(e.content,t-i);i+=a.count,e=Object.assign({},e,{content:a.nodes})}else i+=o;return n.push(e),i<t})),{count:i,nodes:n}}function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){U(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var K,W={filter:(S={defaultBlockNode:function(){return{type:r.PARAGRAPH}},defaultInlineNode:function(e){return{type:r.TEXT,text:G(e)}}},U(S,r.TEXT,(function(e){var t=e.marks||[],n={type:r.TEXT,text:e.text};return(t=t.filter((function(e){return[r.STRONG,r.UNDERLINE,r.DEL,r.ITALIC].indexOf(e.type)>-1})))&&t[0]&&(n.marks=t),n})),U(S,r.BLOCK_QUOTE,(function(e,t){return{type:r.BLOCK_QUOTE,content:t(e.content)}})),U(S,r.NUMBERED_LIST,(function(e,t){return H({type:r.NUMBERED_LIST,content:t(e.content)},e.attrs?{attrs:e.attrs}:null)})),U(S,r.BULLETED_LIST,(function(e,t){return{type:r.BULLETED_LIST,content:t(e.content)}})),U(S,r.LIST_ITEM,(function(e,t){var n=t(e.content);return n&&n[0]?H({type:r.LIST_ITEM,content:n},e.attrs?{attrs:e.attrs}:null):null})),U(S,r.PARAGRAPH,(function(e,t){if(((e.attrs||{}).indent||0)>0)return null;var n=t(e.content);return H({type:r.PARAGRAPH},n&&n[0]?{content:n}:null)})),U(S,r.HEADING,(function(e){return{type:r.PARAGRAPH,content:[{type:r.TEXT,text:G(e),marks:[{type:r.STRONG}]}]}})),S)};function V(e,t){return function e(t,n){if(!t||!t[0])return[];var i=[];return t.forEach((function(t){var o=t.type;(t=n.filter[o]?n.filter[o](t,(function(t){return e(t,n)})):r.INLINE_TYPES.indexOf(t.type)>-1?n.filter.defaultInlineNode(t,(function(t){return e(t,n)})):n.filter.defaultBlockNode(t,(function(t){return e(t,n)})))&&i.push(t)})),function(e){var t=!1;return e.filter((function(e){var n=e.content&&e.content[0];if(e.type!==r.PARAGRAPH||n)t=!1;else{if(t)return!1;t=!0}return!0}))}(i)}(e,Object.assign({},W,t||{}))}function G(e){var t="";if(e.type===r.KATEX_BLOCK||e.type===r.KATEX_INLINE){var n=e.attrs.mathString||"";return String(n)}return e.content&&e.content[0]&&e.content.find((function(e){return r.INLINE_TYPES.indexOf(e.type)>-1}))&&e.content.forEach((function(e){if(e.type===r.TEXT){var n=e.text||"";t+=n}else if(e.type===r.KATEX_INLINE){var i=e.attrs.mathString||"";t+=i}else t+=G(e)})),t}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var J=(q(K={},r.BLOCK_QUOTE,(function(e,t){e.wrapBlock("> ",null,t,(function(){return e.renderContent(t)}))})),q(K,r.CODE_BLOCK,(function(e,t){e.write("``` "+(t.attrs.lang||"")+"\n"),e.text(t.content[0].text,!1),e.ensureNewLine(),e.write("```"),e.closeBlock(t)})),q(K,r.KATEX_BLOCK,(function(e,t){e.write("$$"+(t.attrs.mathString||"")+"$$"),e.closeBlock(t)})),q(K,r.KATEX_INLINE,(function(e,t){e.write("$"+(t.attrs.mathString||"")+"$")})),q(K,r.HEADING,(function(e,t){e.write(e.repeat("#",t.attrs.level)+" "),e.renderInline(t),e.closeBlock(t)})),q(K,r.HORIZONTAL_RULE,(function(e,t){e.write("---"),e.closeBlock(t)})),q(K,r.BULLETED_LIST,(function(e,t){e.renderList(t,"",(function(n,r){var i=Y(t,r),o=!(!n.attrs||"none"!==n.attrs.listStyle);return e.repeat(" ",4*i)+(o?"":"* ")}),!0)})),q(K,r.NUMBERED_LIST,(function(e,t){e.renderList(t,"",(function(n,r){var i=Y(t,r),o=function(e,t,n){var r=1;if(0===n&&(r=e.attrs&&e.attrs.start,r=Number(r)||1),0===t)return r;var i=function(e,t,n){var r=[];if(0===t)return[];for(var i=1,o=t-i,a=e.content[o],s=Y(e,o);a&&n<=s;)s===n&&r.push(a),i++,o=t-i,a=e.content[o],s=Y(e,o);return r}(e,t,n);return r+i.length}(t,r,i),a=!(!n.attrs||"none"!==n.attrs.listStyle);return e.repeat(" ",4*i)+(a?"":"".concat(o,". "))}),!0)})),q(K,r.LIST_ITEM,(function(e,t,n,r){var i=n.content[r+1],o=!1;i&&(o=!(!i.attrs||"none"!==i.attrs.listStyle)),e.renderContent(t),o&&e.write("  "),e.closeBlock(t)})),q(K,r.PARAGRAPH,(function(e,t,n,i){e.renderInline(t),n.type!==r.LIST_ITEM&&e.closeBlock(t)})),q(K,r.IMAGE,(function(e,t){e.write("!["+e.esc(t.attrs.alt||"")+"]("+e.esc(t.attrs.src)+(t.attrs.title?" "+e.quote(t.attrs.title):"")+")"),e.closeBlock(t)})),q(K,r.VIDEO,(function(e,t){})),q(K,r.EMBED_COMPONENT,(function(e,t){})),q(K,r.TEXT,(function(e,t){e.text(t.text)})),q(K,r.LINK,(function(e,t){e.write("["+e.esc(function(e){var t=e.content||[],n="";return t.forEach((function(e){e.text&&(n+=e.text)})),n}(t)||"")+"]("+e.esc(t.attrs.href)+(t.attrs.title?" "+e.quote(t.attrs.title):"")+")")})),q(K,r.SUP,(function(e,t){e.renderInline(t)})),q(K,r.SUB,(function(e,t){e.renderInline(t)})),q(K,r.CODE_INLINE,(function(e,t){var n=(t.content||[]).reduce((function(e,t){return e+t.text||""}),"");e.write(X(n,-1)+n+X(n,1))})),K);function X(e,t){var n=/`+/g;e=e||"";for(var r=n.exec(e),i=0;r;)i=Math.max(i,r[0].length),r=n.exec(e);for(var o=i>0&&t>0?" `":"`",a=0;a<i;a++)o+="`";return i>0&&t<0&&(o+=" "),o}var Z,Q=null;function Y(e,t){if(Q&&Q.parent===e)return Q.indentList[t];var n=function(e){var t=0,n=[0];return e.content.forEach((function(e,r){if(r>0){var i=e.content&&e.content[0],o=i&&i.attrs&&i.attrs.indent;o=Number(o)||0,o=Math.min(t+1,o),t=o,n.push(o)}})),n}(e);return Q={parent:e,indentList:n},n[t]}function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var te=(ee(Z={},r.ITALIC,{open:"*",close:"*",mixable:!0,expelEnclosingWhitespace:!0}),ee(Z,r.DEL,{open:"~~",close:"~~",mixable:!0,expelEnclosingWhitespace:!0}),ee(Z,r.STRONG,{open:"**",close:"**",mixable:!0,expelEnclosingWhitespace:!0}),Z);function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ie(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ae,se=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.nodes=t,this.marks=n,this.delim=this.out="",this.closed=!1,this.inTightList=!1,this.options=r||{},void 0===this.options.tightLists&&(this.options.tightLists=!1)}var t,n,r;return t=e,(n=[{key:"flushClose",value:function(e){if(this.closed){if(this.atBlank()||(this.out+="\n"),null==e&&(e=2),e>1){var t=this.delim,n=/\s+$/.exec(t);n&&(t=t.slice(0,t.length-n[0].length));for(var r=1;r<e;r++)this.out+=t+"\n"}this.closed=!1}}},{key:"wrapBlock",value:function(e,t,n,r){var i=this.delim;this.write(t||e),this.delim+=e,r(),this.delim=i,this.closeBlock(n)}},{key:"atBlank",value:function(){return/(^|\n)$/.test(this.out)}},{key:"ensureNewLine",value:function(){this.atBlank()||(this.out+="\n")}},{key:"write",value:function(e){this.flushClose(),this.delim&&this.atBlank()&&(this.out+=this.delim),e&&(this.out+=e)}},{key:"closeBlock",value:function(e){this.closed=e}},{key:"text",value:function(e,t){for(var n=e.split("\n"),r=0;r<n.length;r++){var i=this.atBlank()||this.closed;this.write(),this.out+=!1!==t?this.esc(n[r],i):n[r],r!==n.length-1&&(this.out+="\n")}}},{key:"render",value:function(e,t,n){if("number"==typeof t)throw new Error("!");if(!this.nodes[e.type])throw new Error("Token type `"+e.type+"` not supported by Markdown renderer");this.nodes[e.type](this,e,t,n)}},{key:"renderContent",value:function(e){var t=this;e.content.forEach((function(n,r){return t.render(n,e,r)}))}},{key:"renderInline",value:function(e){var t=this,n=[],r="",i=function(i,o){var a=i&&i.marks||[],s=r;if(r="",i&&i.text&&a.some((function(e){var n=t.marks[e.type];return n&&n.expelEnclosingWhitespace}))){var c=re(/^(\s*)(.*?)(\s*)$/m.exec(i.text),4),l=(c[0],c[1]),u=c[2],f=c[3];s+=l,r=f,(l||f)&&((i=u?i.withText(u):null)||(a=n))}var d=a.length&&a[a.length-1],h=d&&t.marks[d.type]&&!1===t.marks[d.type].escape,p=a.length-(h?1:0);e:for(var v=0;v<p;v++){var m=a[v];if(!t.marks[m.type]||!t.marks[m.type].mixable)break;for(var g=0;g<n.length;g++){var y=n[g];if(!t.marks[y.type]||!t.marks[y.type].mixable)break;if(m.eq(y)){v>g?a=a.slice(0,g).concat(m).concat(a.slice(g,v)).concat(a.slice(v+1,p)):g>v&&(a=a.slice(0,v).concat(a.slice(v+1,g)).concat(m).concat(a.slice(g,p)));continue e}}}for(var b,w,E=0;E<Math.min(n.length,p)&&(b=a[E],w=n[E],b===w||b.type===w.type&&function e(t,n){if(t===n)return!0;if(!t||"object"!==ne(t)||!n||"object"!==ne(n))return!1;var r=Array.isArray(t);if(Array.isArray(n)!==r)return!1;if(r){if(t.length!==n.length)return!1;for(var i=0;i<t.length;i++)if(!e(t[i],n[i]))return!1}else{for(var o in t)if(!(o in n)||!e(t[o],n[o]))return!1;for(var a in n)if(!(a in t))return!1}return!0}(b.attrs,w.attrs));)++E;for(;E<n.length;)t.text(t.markString(n.pop(),!1,e,o),!1);if(s&&t.text(s),i){for(;n.length<p;){var k=a[n.length];n.push(k),t.text(t.markString(k,!0,e,o),!1)}h&&i.text?t.text(t.markString(d,!0,e,o)+i.text+t.markString(d,!1,e,o+1),!1):t.render(i,e,o)}};e.content&&e.content[0]&&(e.content.forEach(i),i(null,e.content.length))}},{key:"renderList",value:function(e,t,n,r){var i=this,o=this.inTightList;e.content.forEach((function(o,a){a&&r&&i.flushClose(1),i.wrapBlock(t,n(o,a),e,(function(){return i.render(o,e,a)}))})),this.inTightList=o}},{key:"esc",value:function(e,t){return e=(e=e?String(e):"").replace(/[`*\\~\[\]]/g,"\\$&"),t&&(e=e.replace(/^[:#\-*+]/,"\\$&").replace(/^(\s*\d+)\./,"$1\\.")),e}},{key:"quote",value:function(e){var t=-1===(e=e?String(e):"").indexOf('"')?'""':-1===e.indexOf("'")?"''":"()";return t[0]+e+t[1]}},{key:"repeat",value:function(e,t){for(var n="",r=0;r<t;r++)n+=e;return n}},{key:"markString",value:function(e,t,n,r){var i=this.marks[e.type];if(!i)return"";var o=t?i.open:i.close;return"string"==typeof o?o:o(this,e,n,r)}},{key:"getEnclosingWhitespace",value:function(e){return{leading:(e.match(/^(\s+)/)||[])[0],trailing:(e.match(/(\s+)$/)||[])[0]}}}])&&oe(t.prototype,n),r&&oe(t,r),e}(),ce=n(3);function le(e){for(var t=e.depth;t>0;){var n=e.node(t);if(n.isBlock)return{depth:t,node:n};t--}}function ue(e,t){var n=e.selection.$cursor,r=le(n),i=t.doc.resolve(n.start(r.depth)),o=i.blockRange(i),a=o&&Object(ce.h)(o);return null==a?t:t.lift(o,a)}function fe(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=t.doc.resolve(n);i.parent.isInline&&(i=t.doc.resolve(i.before()));var o=i.blockRange();return o.startIndex+1===o.endIndex?t.lift(o,r):t}function de(e,t){var n=e.resolve(t),r=le(n);return n.node(r.depth-1)}function he(e,t){for(var n=e.resolve(t),r=[],i=n.depth,o=1;o<i;o++)r.push({node:n.node(o),nodePos:n.before(o)});return r}function pe(e,t,n,r){return"number"!=typeof n&&(n=e.selection.from,r=e.selection.to),function(e,t,n){var r={bottomBlocks:[],hasAtomBlock:!1};return e.nodesBetween(t,n,(function(i,o){if(i.type.spec.isolating&&(r.hasAtomBlock=!0),i.isTextblock){var a=o+i.nodeSize-t,s=n-o;if(t!==n&&(1===s||1===a))return;var c=he(e,o+1);r.bottomBlocks.push({type:i.type.name,nodeType:i.type,node:i,parentsTypeList:c.map((function(e){return e.node.type.name})),parents:c,nodePos:o,distantFrom:a,distantTo:s})}})),r}(t.doc,n,r)}function ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function me(e,t,n){var r=e.curSelection.from,i=e.doc.resolve(r);return function(e,t,n,r){var i=t&&Object(ce.g)(t,n,r);return i?e.wrap(t,i):e}(e,i.blockRange(),t,n)}function ge(e,t,n,r,i){return n.bottomBlocks.forEach((function(n){var o=t.doc.resolve(t.mapping.map(n.nodePos+1)).blockRange(),a=function(e,t,n,r){var i=[];t.forEach((function(e){var t=e.node.type.name,o=e.attrs;n===t||!ye[t]||function(e){return ye[e]&&ye[e].isNestType}(t)||function(e,t){return!!(e&&ye[e]&&ye[e].exclusion&&ye[e].exclusion.indexOf(t)>-1)}(r,t)||i.push({type:t,attrs:o,order:ye[t].order})})),r&&ye[r]&&i.push({type:r,attrs:null,order:ye[r].order});var o=[];return i.forEach((function(e){var t=e.type;ye[t]&&ye[t].innerTypes&&ye[t].innerTypes.forEach((function(e){o.push({type:e,attrs:null,order:ye[e].order})}))})),i=(i=(i=i.concat(o)).sort((function(e,t){return t.order-e.order}))).map((function(t){return{type:e.schema.nodes[t.type],attrs:t.attrs}}))}(e,n.parents,r,i);t=t.wrap(o,a)})),t}var ye=(ve(ae={},r.BLOCK_QUOTE,{order:2,exclusion:[r.HEADING]}),ve(ae,r.NUMBERED_LIST,{order:1,exclusion:[r.BULLETED_LIST],innerTypes:[r.LIST_ITEM]}),ve(ae,r.BULLETED_LIST,{order:1,exclusion:[r.NUMBERED_LIST],innerTypes:[r.LIST_ITEM]}),ve(ae,r.LIST_ITEM,{order:0,isNestType:!0}),ae);function be(e,t,n,r){if(!e.selection.empty)return t;var i=e.schema.nodes[n].create(r),o=t.curSelection.$cursor,a=le(o),s=a.node,c=a.depth,l=s,u=o.before(c),f=o.after(c),d=o.pos;if(c>1){var h=pe(e,t,d,d);d=(t=fe(e,t,d)).mapping.map(f),t=ge(e,t=t.replaceRangeWith(d,d,i),h)}else t=/^\s{0,3}$/.test(l.textContent)&&1===o.depth?t.replaceRangeWith(u,o.end(c),i):t.replaceRangeWith(f,f,i);return t}var we=n(1);function Ee(e,t,n,i){var o;if(i)o=e.doc.resolve(i);else{if(!e.selection.empty)return t;o=t.curSelection.$cursor}var a=le(o);if(!a)return t;var s=a.node,c=a.depth,l=s,u=o.before(c),f=o.after(c);if(i=o.pos,c>1){var d=pe(e,t,i,i);i=(t=fe(e,t,i)).doc.resolve(t.mapping.map(i)).after(),t=ge(e,t=t.replaceRange(i,i,n),d)}else if(/^\s{0,3}$/.test(l.textContent)&&1===o.depth){var h=e.schema.nodes[r.PARAGRAPH].create(),p=we.c.from(h);p=n.content.append(p),n=new we.i(p,0,1),t=t.replaceRange(u,o.end(c),n)}else t=t.replaceRange(f,f,n);return t}var ke,Oe=n(2);function _e(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(e.selection.empty)return t;var o=e.schema.nodes[n],a=e.selection,s=a.from,c=a.to;return e.doc.nodesBetween(s,c,(function(a,l){if(a.type.name===r.PARAGRAPH){var u=Math.max(l+1,s),f=Math.min(l+a.nodeSize-1,c),d=[];e.doc.content.cut(u,f).descendants((function(e){if(e.isText)if(e.marks&&e.marks[0]&&o.spec.marks){var t=e.mark(e.marks.filter((function(e){return o.spec.marks.split("").indexOf(e.type.name)>-1})));d.push(t)}else d.push(e)}));var h=o.createAndFill(i,d);u=t.mapping.map(u),f=t.mapping.map(f);var p=t.doc.resolve(u),v=t.doc.resolve(f),m=0,g=0;p.parent.type.name===n&&(m=1),v.parent.type.name===n&&(g=1);var y=new we.i(we.c.from(h),m,g);t=t.step(new ce.c(u,f,y,!1))}})),t=t.setSelection(Oe.h.create(t.doc,t.mapping.map(s),t.mapping.map(c)))}function xe(e,t,n,i){return e.selection.empty?([r.LINK].indexOf(n)>-1&&(t=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=e.selection.$cursor.pos,o=r.defaultText;if("string"==typeof o&&o.length>0){var a=e.schema.nodes[n],s=a.createAndFill(r,e.schema.text(o));return t.replaceWith(i,i,s)}return t}(e,t,n,i)),[r.KATEX_INLINE].indexOf(n)>-1&&(t=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=e.selection.$cursor.pos,o=e.schema.nodes[n],a=o.create(r);return t.replaceWith(i,i,a)}(e,t,n,i))):t=_e(e,t,n,i),t}function Se(e,t){e.state.plugins.forEach((function(n){n.spec.afterEachTransaction&&(t=n.spec.afterEachTransaction(e.state,t))})),e.dispatch(t)}function Ne(e){return function(t){Se(e,t)}}function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(n),!0).forEach((function(t){De(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ae(e){return function(e){if(Array.isArray(e))return Te(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Te(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function De(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ie,Re=[r.BLOCK_QUOTE,r.NUMBERED_LIST,r.BULLETED_LIST,r.CODE_INLINE],Le=[r.STRONG,r.UNDERLINE,r.ITALIC,r.DEL],Pe=[r.PARAGRAPH,r.HEADING,r.IMAGE,r.VIDEO,r.KATEX_BLOCK,r.CODE_BLOCK,r.HORIZONTAL_RULE,r.EMBED_COMPONENT,r.LINK],Be=[r.SIZE,r.COLOR,r.BG_COLOR],$e=[r.ALIGN,r.INDENT],je=[r.CODE_INLINE],ze=[r.CODE_BLOCK,r.IMAGE,r.VIDEO,r.KATEX_BLOCK,r.EMBED_COMPONENT,r.HORIZONTAL_RULE],Fe=[r.LINK],He=[].concat(Re,Le,Pe,Be,$e),Ue=(De(ke={},r.HEADING,[r.STRONG,r.SIZE,r.LINK,r.CODE_INLINE,r.INDENT]),De(ke,r.BLOCK_QUOTE,[r.ALIGN]),De(ke,r.NUMBERED_LIST,[r.ALIGN]),De(ke,r.BULLETED_LIST,[r.ALIGN]),De(ke,r.CODE_INLINE,[r.LINK]),De(ke,r.LINK,[r.LINK,r.CODE_INLINE]),De(ke,r.KATEX_INLINE,[r.LINK,r.CODE_INLINE]),ke);function Ke(e,t){var n={};if("undefined"!=typeof document&&!document.hasFocus()||t&&!t.hasFocus())return{menuStatus:n=We(He),bottomBlock:null,marks:[]};var i=function(e){if(e.selection.node)return null;var t=e.selection,n=t.from,i=t.to,o=t.$from,a=[],s=null,c=null,l=null,u=0,f=null,d=[],h=[],p=e.doc;p.nodesBetween(n,i,(function(t,n){if(t.isText){var i=p.resolve(n);if(c=i.parent.isInline?Ge([i.parent.type.name],c):Ge(["text"],c),0===t.marks.length)s=Ge(["nomark"],s);else{var o=[];t.marks.forEach((function(e){e.isInSet(h)||h.push(e),o.push(e.type.name)})),s=Ge(o,s)}}else{if([r.PARAGRAPH,r.HEADING,r.CODE_BLOCK].indexOf(t.type.name)>-1&&(f=t,u++,d.push(t)),[r.PARAGRAPH,r.HEADING,r.CODE_INLINE,r.LINK].indexOf(t.type.name)>-1){var v=e.doc.resolve(n+1),m=v.node(1),g=v.node(2),y=m.type.name,b=g?g.type.name:y;l=Ge([y,b],l)}a=function(e,t){return t.indexOf(e)<0&&t.push(e),t}(t.type.name,a)}}));var v=1===u;return c=(c||[]).filter((function(e){return["text"].indexOf(e)<0})),s=(s||[]).filter((function(e){return["nomark"].indexOf(e)<0})),l=(l||[]).filter((function(e){return[r.LIST_ITEM].indexOf(e)<0})),e.selection.empty&&(e.storedMarks||o.marks()||[]).forEach((function(e){e.isInSet(h)||h.push(e),s.indexOf(e.type.name)<0&&s.push(e.type.name)})),{nodes:a,bottomBlocks:d,marks:h,sameMarkTypes:s,sameBlockNodeTypes:l,sameInlineNodeTypes:c,selectionInSameBottomBlock:v,bottomBlock:v?f:null}}(e);return n=Ve(He,"n"),{menuStatus:n=function(e,t){return!!e.selection.node||!!(t&&t.selectionInSameBottomBlock&&[r.CODE_BLOCK].indexOf(t.bottomBlock.type.name)>-1)}(e,i)?We(He):Object.assign(n,function(e){return function(e){return Ve(e,"a")}([].concat(Ae(e.sameBlockNodeTypes.filter((function(e){return Pe.indexOf(e)<0}))),Ae(e.sameInlineNodeTypes.filter((function(e){return Pe.indexOf(e)<0}))),Ae(e.sameMarkTypes.filter((function(e){return Be.indexOf(e)<0})))))}(i),function(e){if(!e.selection.empty||!e.selection.$cursor)return{};var t={},n=e.schema.marks,r=e.selection.$cursor.marks(),i=e.storedMarks;return Le.forEach((function(e){n[e].isInSet(i||r)?t[e]="a":t[e]="n"})),t}(e),function(e){var t={};return e.nodes.forEach((function(e){Ue[e]&&(t=Object.assign(t,We(Ue[e])))})),t}(i),function(e){return e.selection.empty?We(je):{}}(e),function(e){return e.selection.empty?{}:We(ze)}(e),function(e){return e.selectionInSameBottomBlock?{}:We(Fe)}(i)),bottomBlocks:i?i.bottomBlocks:[],bottomBlock:i?i.bottomBlock:null,marks:i?i.marks:[]}}function We(e){return Ve(e,"d")}function Ve(e,t){return e.reduce((function(e,n){return Ce(Ce({},e),{},De({},n,t))}),{})}function Ge(e,t){if(!e||!t)return e||t;var n=[];return e.forEach((function(e){t.indexOf(e)>-1&&n.indexOf(e)<0&&n.push(e)})),n}function qe(e){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Je(e,t,n){n=e.schema.marks[n];var r=e.selection,i=r.empty,o=r.$cursor,a=r.ranges;if(i&&!o||!Ze(e.doc,a,n))return t;if(o)n.isInSet(e.storedMarks||o.marks())&&(t=t.removeStoredMark(n));else{for(var s=!1,c=0;!s&&c<a.length;c++){var l=a[c],u=l.$from,f=l.$to;s=e.doc.rangeHasMark(u.pos,f.pos,n)}for(var d=0;d<a.length;d++){var h=a[d],p=h.$from,v=h.$to;s&&(t=t.removeMark(p.pos,v.pos,n))}}return t}function Xe(e,t,n,r){n=e.schema.marks[n];var i=e.selection,o=i.empty,a=i.$cursor,s=i.ranges;if(o&&!a||!Ze(e.doc,s,n))return t;if(a)t=t.addStoredMark(n.create(r));else for(var c=0;c<s.length;c++){var l=s[c],u=l.$from,f=l.$to;t=t.addMark(u.pos,f.pos,n.create(r))}return t}function Ze(e,t,n){for(var r=function(r){var i=t[r],o=i.$from,a=i.$to,s=0===o.depth&&e.type.allowsMarkType(n);if(e.nodesBetween(o.pos,a.pos,(function(e){if(s)return!1;s=e.inlineContent&&e.type.allowsMarkType(n)})),s)return{v:!0}},i=0;i<t.length;i++){var o=r(i);if("object"===qe(o))return o.v}return!1}function Qe(e,t,n){var i=pe(e,t);return ge(e,t=et(e,t=tt(e,t,i),i,r.PARAGRAPH),i,n,null)}function Ye(e,t,n,i){var o=pe(e,t);if(t=tt(e,t,o),[r.HEADING,r.PARAGRAPH].indexOf(n)>-1&&(t=et(e,t,o,n,i)),[r.BLOCK_QUOTE,r.NUMBERED_LIST,r.BULLETED_LIST].indexOf(n)>-1){var a=n;t=ge(e,t=et(e,t,o,r.PARAGRAPH),o,null,a)}return t}function et(e,t,n,r,i){return n.bottomBlocks.forEach((function(n){var o=t.mapping.map(n.nodePos+1);t=t.setBlockType(o,o,e.schema.nodes[r],i)})),t}function tt(e,t,n){return n.bottomBlocks.forEach((function(n){t=fe(e,t,t.mapping.map(n.nodePos+1))})),t}function nt(e,t){return pe(e,t).bottomBlocks.forEach((function(e){if(e.node.type.name===r.PARAGRAPH){var n=e.node.attrs.indent||0;if((n+=1)<9){var i=e.node.attrs.number||0;t=t.setNodeMarkup(e.nodePos,null,{indent:n,number:i})}}})),t}function rt(e,t){return pe(e,t).bottomBlocks.forEach((function(e){if(e.node.type.name===r.PARAGRAPH){var n=e.node.attrs.indent||0;if((n-=1)>-1){var i=e.node.attrs.number||0;t=t.setNodeMarkup(e.nodePos,null,{indent:n,number:i})}}})),t}function it(e,t,n){return pe(e,t).bottomBlocks.forEach((function(e){if(!([r.PARAGRAPH,r.HEADING].indexOf(e.node.type.name)<0)){var i=Object.assign({},e.node.attrs||{},n||{});t=t.setNodeMarkup(e.nodePos,null,i)}})),t}function ot(e,t,n){var i=e.schema.nodes[r.PARAGRAPH].create(null,""),o=t.doc.resolve(n).nodeAfter;return(t=t.replaceWith(n,n+o.nodeSize,i)).setSelection(Oe.h.create(t.doc,n+1))}function at(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var st=(at(Ie={},r.PARAGRAPH,lt),at(Ie,r.HEADING,lt),at(Ie,r.BLOCK_QUOTE,lt),at(Ie,r.NUMBERED_LIST,lt),at(Ie,r.BULLETED_LIST,lt),at(Ie,r.CODE_BLOCK,ct),at(Ie,r.STRONG,ut),at(Ie,r.ITALIC,ut),at(Ie,r.DEL,ut),at(Ie,r.UNDERLINE,ut),at(Ie,r.COLOR,ut),at(Ie,r.BG_COLOR,ut),at(Ie,r.SIZE,ut),at(Ie,r.HORIZONTAL_RULE,ct),at(Ie,r.CODE_INLINE,(function(e,t,n){var r=e.state,i=r.tr;i=n&&n.remove?function(e,t,n){if(e.selection.empty)return t;var r=e.selection,i=r.from,o=r.to,a=e.schema.nodes[n];e.doc.nodesBetween(i,o,(function(r,s){if(r.type.name===n){var c,l,u,f=!1,d=!1;i-1<=s?c=s:(f=!0,c=i),o+1>=s+r.nodeSize?l=s+r.nodeSize:(d=!0,l=o);var h=[];e.doc.content.cut(c,l).descendants((function(e){e.isText&&h.push(e)}));var p=we.c.fromArray(h),v=a.create(),m=we.c.from(v.copy()),g=we.c.from(v.copy());f||d?f&&d?u=new we.i(m.append(p.append(g)),1,1):f?u=new we.i(m.append(p),1,0):d&&(u=new we.i(p.append(g),0,1)):u=new we.i(p,0,0),c=t.mapping.map(c),l=t.mapping.map(l),t=t.step(new ce.c(c,l,u,!1))}}));var s=t.mapping.map(i),c=t.mapping.map(o);return t=t.setSelection(Oe.h.create(t.doc,s,c))}(r,i,t):_e(r,i,t,n),Se(e,i)})),at(Ie,r.ALIGN,(function(e,t,n){var r=e.state;Se(e,it(r,r.tr,n))})),at(Ie,r.INDENT,(function(e,t,n){var r=e.state,i=r.tr;i=n&&n.remove?rt(r,r.tr):nt(r,r.tr),Se(e,i)})),Ie);function ct(e,t,n){var r=e.state,i=r.tr;Se(e,i=be(r,i,t,n))}function lt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.state;r.tr,Se(e,n.remove?Qe(r,r.tr,t):Ye(r,r.tr,t,n))}function ut(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.state;r.tr,Se(e,n.remove?Je(r,r.tr,t):Xe(r,r.tr,t,n))}function ft(e,t){var n=e.state,r=n.tr;Se(e,r=function(e,t,n){var r=t.doc.nodeAt(n);if(!r||r.isText||!r.isInline)return t;var i=we.c.from(e.schema.text(r.textContent)),o=new we.i(i,0,0),a=(t=t.step(new ce.c(n,n+r.nodeSize,o,!1))).mapping.map(n),s=t.mapping.map(n+r.nodeSize);return t.setSelection(Oe.h.create(t.doc,a,s))}(n,r,t))}function dt(e,t){var n=e.state;Se(e,n.tr.setSelection(Oe.c.create(n.doc,t)))}function ht(e,t,n){var i=e.state,o=i.tr,a=[];if(t&&t[0]){var s=t.length;t.forEach((function(t,c){if(function(e){return/image.*/.test(e.type)}(t)){var l=new FileReader;l.onload=function(t){var l=t.target.result;if(a.push(i.schema.nodes[r.IMAGE].create({src:l,fromPaste:!0})),s===c+1){var u=new we.i(we.c.fromArray(a),0,0);o=Ee(i,o,u,n),Se(e,o)}},l.readAsDataURL(t)}}))}}var pt={NET_ERROR:1,NET_FREQUENT_ERROR:5,TOO_FAR_BEHIND_VERSION:2,CONFLIT_SERVER_VERSION:3,DOCUMENT_TOO_BIG:4},vt={SUCCESS_RESPONSE:101,UNFINISHED_RESPONSE:103,EMPTY_RESPONSE:102},mt="edit",gt="paste";function yt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var bt=function e(t,n,r){yt(this,e),this.step=t,this.inverted=n,this.origin=r},wt=function e(t,n){yt(this,e),this.version=t,this.unconfirmed=n};function Et(e){for(var t=[],n=0;n<e.steps.length;n++){var r=e.steps[n];t.push(new bt(r,r.invert(e.docs[n]),e))}return t}var kt=new Oe.e("collab");function Ot(e,t,n,r){for(var i=kt.getState(e),o=r.version,a=kt.get(e).spec.config.clientID,s=0;s<n.length&&n[s]===a;)++s;var c=i.unconfirmed.slice(s);if(!(t=s?t.slice(s):t).length)return e.tr.setMeta(kt,new wt(o,c));var l=c.length,u=e.tr;if(l)c=function(e,t,n){for(var r=e.length-1;r>=0;r--)n.step(e[r].inverted);for(var i=0;i<t.length;i++)n.step(t[i]);for(var o=[],a=0,s=e.length;a<e.length;a++){var c=e[a].step.map(n.mapping.slice(s));s--,c&&!n.maybeStep(c).failed&&(n.mapping.setMirror(s,n.steps.length-1),o.push(new bt(c,c.invert(n.docs[n.docs.length-1]),e[a].origin)))}return o}(c,t,u);else{for(var f=0;f<t.length;f++)u.step(t[f]);c=[]}var d=new wt(o,c);return r&&r.mapSelectionBackward&&e.selection instanceof Oe.h&&(u.setSelection(Oe.h.between(u.doc.resolve(u.mapping.map(e.selection.anchor,-1)),u.doc.resolve(u.mapping.map(e.selection.head,-1)),-1)),u.updated&=-2),u.setMeta("rebased",l).setMeta("addToHistory",!1).setMeta(kt,d)}function _t(e){return kt.getState(e).version}for(var xt={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},St={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},Nt="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),Mt="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),Ct="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),At="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),Tt="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Dt=Nt&&(At||+Nt[1]<57)||Ct&&At,It=0;It<10;It++)xt[48+It]=xt[96+It]=String(It);for(It=1;It<=24;It++)xt[It+111]="F"+It;for(It=65;It<=90;It++)xt[It]=String.fromCharCode(It+32),St[It]=String.fromCharCode(It);for(var Rt in xt)St.hasOwnProperty(Rt)||(St[Rt]=xt[Rt]);var Lt="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function Pt(e){var t,n,r,i,o=e.split(/-(?!$)/),a=o[o.length-1];"Space"==a&&(a=" ");for(var s=0;s<o.length-1;s++){var c=o[s];if(/^(cmd|meta|m)$/i.test(c))i=!0;else if(/^a(lt)?$/i.test(c))t=!0;else if(/^(c|ctrl|control)$/i.test(c))n=!0;else if(/^s(hift)?$/i.test(c))r=!0;else{if(!/^mod$/i.test(c))throw new Error("Unrecognized modifier name: "+c);Lt?i=!0:n=!0}}return t&&(a="Alt-"+a),n&&(a="Ctrl-"+a),i&&(a="Meta-"+a),r&&(a="Shift-"+a),a}function Bt(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}function $t(e){var t=function(e){var t=Object.create(null);for(var n in e)t[Pt(n)]=e[n];return t}(e);return function(e,n){var r,i=function(e){var t=!(Dt&&(e.ctrlKey||e.altKey||e.metaKey)||(Mt||Tt)&&e.shiftKey&&e.key&&1==e.key.length)&&e.key||(e.shiftKey?St:xt)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(n),o=1==i.length&&" "!=i,a=t[Bt(i,n,!o)];if(a&&a(e.state,e.dispatch,e))return!0;if(o&&(n.shiftKey||n.altKey||n.metaKey||i.charCodeAt(0)>127)&&(r=xt[n.keyCode])&&r!=i){var s=t[Bt(r,n,!0)];if(s&&s(e.state,e.dispatch,e))return!0}else if(o&&n.shiftKey){var c=t[Bt(i,n,!0)];if(c&&c(e.state,e.dispatch,e))return!0}return!1}}var jt=function(){};jt.prototype.append=function(e){return e.length?(e=jt.from(e),!this.length&&e||e.length<200&&this.leafAppend(e)||this.length<200&&e.leafPrepend(this)||this.appendInner(e)):this},jt.prototype.prepend=function(e){return e.length?jt.from(e).append(this):this},jt.prototype.appendInner=function(e){return new Ft(this,e)},jt.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?jt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},jt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},jt.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},jt.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var r=[];return this.forEach((function(t,n){return r.push(e(t,n))}),t,n),r},jt.from=function(e){return e instanceof jt?e:e&&e.length?new zt(e):jt.empty};var zt=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,r){for(var i=t;i<n;i++)if(!1===e(this.values[i],r+i))return!1},t.prototype.forEachInvertedInner=function(e,t,n,r){for(var i=t-1;i>=n;i--)if(!1===e(this.values[i],r+i))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=200)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=200)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(jt);jt.empty=new zt([]);var Ft=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,r){var i=this.left.length;return!(t<i&&!1===this.left.forEachInner(e,t,Math.min(n,i),r))&&!(n>i&&!1===this.right.forEachInner(e,Math.max(t-i,0),Math.min(this.length,n)-i,r+i))&&void 0},t.prototype.forEachInvertedInner=function(e,t,n,r){var i=this.left.length;return!(t>i&&!1===this.right.forEachInvertedInner(e,t-i,Math.max(n,i)-i,r+i))&&!(n<i&&!1===this.left.forEachInvertedInner(e,Math.min(t,i),n,r))&&void 0},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(jt),Ht=jt;function Ut(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wt(e,t,n){return t&&Kt(e.prototype,t),n&&Kt(e,n),e}var Vt=function(){function e(t,n){Ut(this,e),this.items=t,this.eventCount=n}return Wt(e,[{key:"popEvent",value:function(t,n){var r=this;if(0==this.eventCount)return null;for(var i,o,a=this.items.length;;a--)if(this.items.get(a-1).selection){--a;break}n&&(i=this.remapping(a,this.items.length),o=i.maps.length);var s,c,l=t.tr,u=[],f=[];return this.items.forEach((function(t,n){if(!t.step)return i||(i=r.remapping(a,n+1),o=i.maps.length),o--,void f.push(t);if(i){f.push(new Gt(t.map));var d,h=t.step.map(i.slice(o));h&&l.maybeStep(h).doc&&(d=l.mapping.maps[l.mapping.maps.length-1],u.push(new Gt(d,null,null,u.length+f.length))),o--,d&&i.appendMap(d,o)}else l.maybeStep(t.step);return t.selection?(s=i?t.selection.map(i.slice(o)):t.selection,c=new e(r.items.slice(0,a).append(f.reverse().concat(u)),r.eventCount-1),!1):void 0}),this.items.length,0),{remaining:c,transform:l,selection:s}}},{key:"addTransform",value:function(t,n,r,i){for(var o=[],a=this.eventCount,s=this.items,c=!i&&s.length?s.get(s.length-1):null,l=0;l<t.steps.length;l++){var u,f=t.steps[l].invert(t.docs[l]),d=new Gt(t.mapping.maps[l],f,n);(u=c&&c.merge(d))&&(d=u,l?o.pop():s=s.slice(0,s.length-1)),o.push(d),n&&(a++,n=null),i||(c=d)}var h,p,v,m=a-r.depth;return m>Jt&&(p=m,(h=s).forEach((function(e,t){if(e.selection&&0==p--)return v=t,!1})),s=h.slice(v),a-=m),new e(s.append(o),a)}},{key:"remapping",value:function(e,t){var n=new ce.a;return this.items.forEach((function(t,r){var i=null!=t.mirrorOffset&&r-t.mirrorOffset>=e?n.maps.length-t.mirrorOffset:null;n.appendMap(t.map,i)}),e,t),n}},{key:"addMaps",value:function(t){return 0==this.eventCount?this:new e(this.items.append(t.map((function(e){return new Gt(e)}))),this.eventCount)}},{key:"rebased",value:function(t,n){if(!this.eventCount)return this;var r=[],i=Math.max(0,this.items.length-n),o=t.mapping,a=t.steps.length,s=this.eventCount;this.items.forEach((function(e){e.selection&&s--}),i);var c=n;this.items.forEach((function(e){var n=o.getMirror(--c);if(null!=n){a=Math.min(a,n);var i=o.maps[n];if(e.step){var l=t.steps[n].invert(t.docs[n]),u=e.selection&&e.selection.map(o.slice(c+1,n));u&&s++,r.push(new Gt(i,l,u))}else r.push(new Gt(i))}}),i);for(var l=[],u=n;u<a;u++)l.push(new Gt(o.maps[u]));var f=new e(this.items.slice(0,i).append(l).append(r),s);return f.emptyItemCount()>500&&(f=f.compress(this.items.length-r.length)),f}},{key:"emptyItemCount",value:function(){var e=0;return this.items.forEach((function(t){t.step||e++})),e}},{key:"compress",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.items.length,n=this.remapping(0,t),r=n.maps.length,i=[],o=0;return this.items.forEach((function(e,a){if(a>=t)i.push(e),e.selection&&o++;else if(e.step){var s=e.step.map(n.slice(r)),c=s&&s.getMap();if(r--,c&&n.appendMap(c,r),s){var l=e.selection&&e.selection.map(n.slice(r));l&&o++;var u,f=new Gt(c.invert(),s,l),d=i.length-1;(u=i.length&&i[d].merge(f))?i[d]=u:i.push(f)}}else e.map&&r--}),this.items.length,0),new e(Ht.from(i.reverse()),o)}}]),e}();Vt.empty=new Vt(Ht.empty,0);var Gt=function(){function e(t,n,r,i){Ut(this,e),this.map=t,this.step=n,this.selection=r,this.mirrorOffset=i}return Wt(e,[{key:"merge",value:function(t){if(this.step&&t.step&&!t.selection){var n=t.step.merge(this.step);if(n)return new e(n.getMap().invert(),n,this.selection)}}}]),e}(),qt=function e(t,n,r,i){Ut(this,e),this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=i},Jt=20;function Xt(e){var t=[];return e.forEach((function(e,n,r,i){return t.push(r,i)})),t}function Zt(e,t){if(!e)return null;for(var n=[],r=0;r<e.length;r+=2){var i=t.map(e[r],1),o=t.map(e[r+1],-1);i<=o&&n.push(i,o)}return n}function Qt(e,t,n,r){var i=tn(t),o=nn.get(t).spec.config,a=(r?e.undone:e.done).popEvent(t,i);if(a){var s=a.selection.resolve(a.transform.doc),c=(r?e.done:e.undone).addTransform(a.transform,t.selection.getBookmark(),o,i),l=new qt(r?c:a.remaining,r?a.remaining:c,null,0);n(a.transform.setSelection(s).setMeta(nn,{redo:r,historyState:l}).scrollIntoView())}}var Yt=!1,en=null;function tn(e){var t=e.plugins;if(en!=t){Yt=!1,en=t;for(var n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){Yt=!0;break}}return Yt}var nn=new Oe.e("history"),rn=new Oe.e("closeHistory");function on(e){return e={depth:e&&e.depth||100,newGroupDelay:e&&e.newGroupDelay||500},new Oe.d({key:nn,state:{init:function(){return new qt(Vt.empty,Vt.empty,null,0)},apply:function(t,n,r){return function(e,t,n,r){var i,o=n.getMeta(nn);if(o)return o.historyState;n.getMeta(rn)&&(e=new qt(e.done,e.undone,null,0));var a=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(a&&a.getMeta(nn))return a.getMeta(nn).redo?new qt(e.done.addTransform(n,null,r,tn(t)),e.undone,Xt(n.mapping.maps[n.steps.length-1]),e.prevTime):new qt(e.done,e.undone.addTransform(n,null,r,tn(t)),null,e.prevTime);if(!1===n.getMeta("addToHistory")||a&&!1===a.getMeta("addToHistory"))return(i=n.getMeta("rebased"))?new qt(e.done.rebased(n,i),e.undone.rebased(n,i),Zt(e.prevRanges,n.mapping),e.prevTime):new qt(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),Zt(e.prevRanges,n.mapping),e.prevTime);var s=0==e.prevTime||!a&&(e.prevTime<(n.time||0)-r.newGroupDelay||!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;var n=!1;return e.mapping.maps[0].forEach((function(e,r){for(var i=0;i<t.length;i+=2)e<=t[i+1]&&r>=t[i]&&(n=!0)})),n}(n,e.prevRanges)),c=a?Zt(e.prevRanges,n.mapping):Xt(n.mapping.maps[n.steps.length-1]);return new qt(e.done.addTransform(n,s?t.selection.getBookmark():null,r,tn(t)),Vt.empty,c,n.time)}(n,r,t,e)}},config:e})}function an(e,t){var n=nn.getState(e);return!(!n||0==n.done.eventCount)&&(t&&Qt(n,e,t,!1),!0)}function sn(e,t){var n=nn.getState(e);return!(!n||0==n.undone.eventCount)&&(t&&Qt(n,e,t,!0),!0)}var cn=n(11);function ln(e,t){var n=t.curSelection.$cursor,r=le(n),i=function(e,t){var n=t.curSelection.$from,r=le(n).depth,i=n.parentOffset;return r===n.depth?0===i:0===i&&0===n.index(r)}(0,t),o=function(e,t){var n=t.curSelection.$from;if(!n.nodeAfter){if(!n.parent.isInline)return!0;if(!e.doc.resolve(n.after()).nodeAfter)return!0}return!1}(e,t),a=function(e,t){for(var n=t.curSelection.$cursor,r=n.depth;r>0;){if(n.node(r).isBlock)return r>1;r--}return!1}(0,t);if(a)return{node:r.node,parent:n.node(r.depth-1),nodePos:n.before(r.depth),isStartOfBlock:i,isEndOfBlock:o,isEmptyContent:!r.node.textContent.length,isWrapped:a};var s=function(e,t){var n=t.curSelection.$cursor,r=le(n).depth,i=n.before(r);if(i>0){var o=e.doc.resolve(i).nodeBefore,a=i-1;if(!o.isAtom){var s=e.doc.resolve(i-1);a=s.before()}return{node:o,nodePos:a}}return{}}(e,t),c=function(e,t){var n=t.curSelection.$cursor,r=le(n).depth,i=n.after(r);return i<e.doc.content.size?{node:e.doc.resolve(i).nodeAfter,nodePos:i}:{}}(e,t);return{node:r.node,parent:n.node(r.depth-1),nodePos:n.before(r.depth),isStartOfBlock:i,isEndOfBlock:o,isEmptyContent:!r.node.textContent.length,isWrapped:a,hasPrevNode:!!s.node,prevNode:s.node,prevNodePos:s.nodePos,hasNextNode:!!c.node,nextNode:c.node,nextNodePos:c.nodePos}}function un(e,t){e.selection.node?t.selectionIsOnNode&&t.selectionIsOnNode():e.selection.empty?e.selection.$cursor&&t.selectionIsCloseInText&&t.selectionIsCloseInText():t.selectionIsExpandInText&&t.selectionIsExpandInText()}function fn(e,t){return e.selection.empty?t:t.deleteSelection()}var dn={paragraph:function(e,t){var n=t.curSelection.from,i=t.curSelection.$from;i.parent.isInline&&i.end()===n&&(n+=1,i=t.doc.resolve(n),t.setSelection(Oe.h.create(t.doc,n)));var o=le(i),a=o.node,s=de(t.doc,n);if(function(e){return 0===e.textContent.length}(a)){if(a.attrs.indent>0)return rt(e,t);if(s.type.name!==r.DOC)return ue(e,t)}else if(s.type.name===r.LIST_ITEM){for(var c=[],l=i.depth;l>=o.depth-1;){var u=i.node(l);c.unshift({type:u.type,attrs:u.attrs}),l--}return t.split(n,c.length,c)}return t.split(n,1,[{type:e.schema.nodes[r.PARAGRAPH],attrs:a.attrs}])},heading:function(e,t){var n=ln(e,t),i=t.curSelection.$from.pos;return n.isEmptyContent?t.setNodeMarkup(i-1,e.schema.nodes[r.PARAGRAPH]):n.isStartOfBlock?(t=t.split(i,1,[{type:e.schema.nodes[r.HEADING],attrs:n.node.attrs}])).setNodeMarkup(i-1,e.schema.nodes[r.PARAGRAPH]):n.isEndOfBlock?t.split(i,1,[{type:e.schema.nodes[r.PARAGRAPH]}]):t.split(i,1,[{type:e.schema.nodes[r.HEADING],attrs:n.node.attrs}])}},hn="[\\ud800-\\udfff]",pn="[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]",vn="\\ud83c[\\udffb-\\udfff]",mn="[^\\ud800-\\udfff]",gn="(?:\\ud83c[\\udde6-\\uddff]){2}",yn="[\\ud800-\\udbff][\\udc00-\\udfff]",bn="(?:"+pn+"|"+vn+")?",wn="[\\ufe0e\\ufe0f]?"+bn+"(?:\\u200d(?:"+[mn,gn,yn].join("|")+")[\\ufe0e\\ufe0f]?"+bn+")*",En="(?:"+[mn+pn+"?",pn,gn,yn,hn].join("|")+")",kn=RegExp(vn+"(?="+vn+")|"+En+wn,"g");function On(e){return e.match(kn)||[]}function _n(e,t){var n,r=t.doc.resolve(e.selection.from),i=r.pos,o=function e(t,n){var r=t.resolve(n);return r.nodeBefore&&r.nodeBefore.isText?n-function(e){var t=On(e.text);return t.length?t[t.length-1].length:1}(r.nodeBefore):r.parent.isBlock&&!r.nodeBefore?n:(n-=1,0===(n=Math.max(0,n))?n:e(t,n,!0))}(t.doc,i);return function(e){return e.parent.isInline}(r)&&(r.nodeAfter&&!r.nodeBefore&&(i--,t=t.setSelection(Oe.h.create(t.doc,i,i))),r.nodeAfter||r.nodeBefore||i++,!r.nodeAfter&&xn(r.parent)&&(i++,o--)),(n=r.nodeBefore)&&n.isInline&&!n.isText&&xn(r.nodeBefore)&&o--,o===i?t:t.deleteRange(o,i)}function xn(e){return e&&e.textContent&&1===e.textContent.length}function Sn(e,t){return e.isTextblock?{node:e,nodePos:t}:(e.descendants((function(e,i){e.isTextblock&&(n=e,r=i+t+1)})),{node:n,nodePos:r});var n,r}function Nn(e,t){var n=e.selection.$from;if(1===n.depth)return t;var i=0;return n.node(1).type.name===r.NUMBERED_LIST&&(i=2),n.node(2).type.name===r.NUMBERED_LIST&&(i=3),0===i?t:0===n.index(i-1)?t.setNodeMarkup(n.before(i-1),null,{start:1}):t}function Mn(e){return[r.KATEX_BLOCK,r.IMAGE,r.VIDEO,r.CODE_BLOCK,r.HORIZONTAL_RULE].indexOf(e)>-1}function Cn(e){var t={},n=e.curSelection.$from.nodeBefore;if(n)n.isInline&&!n.isText&&(t={node:n,pos:e.curSelection.from-n.nodeSize});else{var r=e.curSelection.$from.before(),i=e.doc.resolve(r).nodeBefore;i&&i.isInline&&!i.isText&&(t={node:i,pos:r-i.nodeSize})}return t}function An(e,t,n){return t.setSelection(Oe.c.create(e.doc,n))}var Tn,Dn={paragraph:function(e,t){t=function(e,t){var n=Cn(t),i=n.node;if(i&&i.type.name===r.ZERO_WIDTH){var o=Oe.f.near(e.doc.resolve(n.pos),-1);return t.setSelection(o)}return t}(e,t);var n=ln(e,t);if(!n.isStartOfBlock){var i=Cn(t),o=i.node;return o&&o.isAtom&&o.type.name!==r.ZERO_WIDTH?An(e,t,i.pos):_n(e,t)}if(n.isWrapped&&n.parent.type.name===r.LIST_ITEM)return ue(e,t=function(e,t,n){return t.setNodeMarkup(n.nodePos,null,{number:0,indent:n.node.attrs.indent})}(0,t=Nn(e,t),n));if(n.node.attrs.indent>0)return t.setNodeMarkup(n.nodePos,null,{indent:n.node.attrs.indent-1});if(n.isWrapped)return ue(e,t);if(n.hasPrevNode&&n.prevNode.type.name===r.CODE_BLOCK)return t.setSelection(Oe.h.create(t.doc,n.prevNodePos+n.prevNode.nodeSize-1));if(n.hasPrevNode&&Mn(n.prevNode.type.name))return An(e,t,n.prevNodePos);if(n.hasPrevNode){var a=Sn(n.prevNode,n.prevNodePos),s=a.node,c=a.nodePos;if(s.type.name===r.HEADING){var l=n.nodePos+1;t.setBlockType(l,l,e.schema.nodes[r.HEADING],{level:5})}return t.delete(c+s.nodeSize-1,n.nodePos+1)}return t},heading:function(e,t){var n=ln(e,t);if(!n.isStartOfBlock)return _n(e,t);if(n.hasPrevNode&&Mn(n.prevNode.type.name))return function(e,t,n){return t.setSelection(Oe.c.create(e.doc,n))}(e,t,n.prevNodePos);if(n.hasPrevNode&&n.prevNode.textContent){var r=Sn(n.prevNode,n.prevNodePos),i=r.node,o=r.nodePos;return t.delete(o+i.nodeSize-1,n.nodePos+1)}if(n.hasPrevNode){var a=Sn(n.prevNode,n.prevNodePos),s=a.node,c=a.nodePos;return t.delete(c,c+s.nodeSize)}return t}};function In(e,t){return un(e,{selectionIsOnNode:function(){sn(e,t)},selectionIsCloseInText:function(){sn(e,t)},selectionIsExpandInText:function(){sn(e,t)}}),!0}function Rn(e,t){return un(e,{selectionIsOnNode:function(){an(e,t)},selectionIsCloseInText:function(){an(e,t)},selectionIsExpandInText:function(){an(e,t)}}),!0}function Ln(e){return function(t,n,r){return e(t,Ne(r),r)}}function Pn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Bn="Ctrl-";"undefined"!=typeof window&&window.navigator.userAgent.indexOf("Macintosh")>-1&&(Bn="Mod-");var $n=Bn+"b",jn=Bn+"i",zn=Bn+"u",Fn=Bn+"Shift-s",Hn=Bn+"Alt-1",Un=Bn+"Alt-2",Kn=Bn+"Alt-3",Wn=Bn+"Alt-4",Vn=Bn+"Alt-5",Gn=Bn+"Alt-0",qn=Bn+"Alt-h",Jn=Bn+"Shift-l",Xn=Bn+"Shift-c",Zn=Bn+"Shift-r",Qn=Bn+"Shift-7",Yn=Bn+"Shift-8",er=(Pn(Tn={},$n,Ln(tr($n))),Pn(Tn,jn,Ln(tr(jn))),Pn(Tn,Fn,Ln(tr(Fn))),Pn(Tn,zn,Ln(tr(zn))),Pn(Tn,Hn,Ln(tr(Hn))),Pn(Tn,Un,Ln(tr(Un))),Pn(Tn,Kn,Ln(tr(Kn))),Pn(Tn,Wn,Ln(tr(Wn))),Pn(Tn,Vn,Ln(tr(Vn))),Pn(Tn,Gn,Ln(tr(Gn))),Pn(Tn,qn,Ln(tr(qn))),Pn(Tn,Jn,Ln(tr(Jn))),Pn(Tn,Xn,Ln(tr(Xn))),Pn(Tn,Zn,Ln(tr(Zn))),Pn(Tn,Qn,Ln(tr(Qn))),Pn(Tn,Yn,Ln(tr(Yn))),Tn);function tr(e){return function(t,n){var i=t.tr,o=Ke(t).menuStatus;if([$n,jn,zn,Fn].indexOf(e)>-1){var a,s=(Pn(a={},$n,r.STRONG),Pn(a,jn,r.ITALIC),Pn(a,Fn,r.DEL),Pn(a,zn,r.UNDERLINE),a)[e];nr(t,s)&&(i=rr(o,s)?Je(t,i,s):Xe(t,i,s))}e===qn&&nr(t,r.COLOR)&&(i=Xe(t,i,r.COLOR,{name:"highlight",color:"#73D13D"}));var c=[Hn,Un,Kn,Wn,Vn];return c.indexOf(e)>-1&&nr(t,r.HEADING)&&(i=Ye(t,i,r.HEADING,{level:c.indexOf(e)+1})),e===Gn&&nr(t,r.PARAGRAPH)&&(i=Ye(t,i,r.PARAGRAPH)),e===Jn&&nr(t,r.ALIGN)&&(i=it(t,i,{align:"left"})),e===Xn&&nr(t,r.ALIGN)&&(i=it(t,i,{align:"center"})),e===Zn&&nr(t,r.ALIGN)&&(i=it(t,i,{align:"right"})),e===Qn&&nr(o,r.NUMBERED_LIST)&&(i=rr(o,r.NUMBERED_LIST)?Ye(t,i,r.PARAGRAPH):Ye(t,i,r.NUMBERED_LIST)),e===Yn&&nr(o,r.BULLETED_LIST)&&(i=rr(o,r.BULLETED_LIST)?Ye(t,i,r.PARAGRAPH):Ye(t,i,r.BULLETED_LIST)),n(i),!0}}function nr(e,t,n){return"d"!==e[t]&&(!n||"a"!==e[t])}function rr(e,t){return"a"===e[t]}function ir(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function or(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ir(Object(n),!0).forEach((function(t){ar(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ir(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ar(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var sr=or(or({Enter:Ln((function(e,t){return un(e,{selectionIsOnNode:function(){var n=e.selection.node,i=e.tr;if(n.isBlock){var o=e.selection.from+n.nodeSize,a=e.schema.nodes[r.PARAGRAPH].create();i=(i=i.replaceRangeWith(o,o,a)).setSelection(Oe.h.create(i.doc,o+1))}else{var s=e.selection.from+n.nodeSize;i=i.setSelection(Oe.h.create(e.doc,s));var c=le(e.doc.resolve(s)).node,l=dn[c.type.name];l&&(i=l(e,i))}t(i)},selectionIsCloseInText:function(){var n=e.tr,r=le(e.selection.$from).node,i=dn[r.type.name];i&&(n=i(e,n),t(n))},selectionIsExpandInText:function(){var n=fn(e,e.tr),r=le(e.selection.$from).node,i=dn[r.type.name];i&&(n=i(e,n)),t(n)}}),!0})),Backspace:Ln((function(e,t){return un(e,{selectionIsOnNode:function(){var n=function(e,t){if(t.curSelection.node.isInline&&(t=t.delete(t.curSelection.from,t.curSelection.from+t.curSelection.node.nodeSize)),t.curSelection.node.isBlock){var n=e.schema.nodes[r.PARAGRAPH].create(null,"");t=(t=t.replaceWith(t.curSelection.from,t.curSelection.from+t.curSelection.node.nodeSize,n)).setSelection(Oe.h.create(t.doc,t.curSelection.from+1))}return t}(e,e.tr);t(n)},selectionIsCloseInText:function(){var n,r,i=(n=e.doc,r=e.selection.from,function(e){for(var t=e.depth;t>0;){var n=e.node(t);if(n.isBlock)return n;t--}return e.parent}(n.resolve(r))),o=Dn[i.type.name];if(o){var a=o(e,e.tr);t(a)}},selectionIsExpandInText:function(){var n=fn(e,e.tr),i=n.curSelection.$from,o=n.curSelection.from,a=i.parent,s=[r.CODE_INLINE,r.LINK];if(a.isBlock){var c=i.nodeBefore,l=i.nodeAfter;l&&s.indexOf(l.type.name)&&0===l.textContent.length&&(n=n.deleteRange(o,o+2)),c&&s.indexOf(c.type.name)&&0===c.textContent.length&&(n=n.deleteRange(o-2,o))}s.indexOf(a.type.name)>-1&&0===a.textContent.length&&(n=n.deleteRange(o-1,o+1)),t(n)}}),!0})),"Shift-Tab":Ln((function(e,t){return un(e,{selectionIsCloseInText:function(){var n=rt(e,e.tr);t(n)},selectionIsExpandInText:function(){var n=rt(e,e.tr);t(n)}}),!0})),Tab:Ln((function(e,t){return un(e,{selectionIsCloseInText:function(){var n=Nn(e,e.tr);n=nt(e,n),t(n)},selectionIsExpandInText:function(){var n=Nn(e,e.tr);n=nt(e,n),t(n)}}),!0})),"Mod-z":Ln(Rn),"Ctrl-z":Ln(Rn),"Shift-Mod-z":Ln(In),"Shift-Ctrl-z":Ln(In),"Mod-y":Ln(In),"Ctrl-y":Ln(In),"Mod-a":Ln(cr),"Ctrl-a":Ln(cr),"Shift-Mod-ArrowLeft":Ln(lr("left")),"Shift-Mod-ArrowRight":Ln(lr("right"))},er),{},{ArrowLeft:Ln(ur("left")),ArrowRight:Ln(ur("right")),ArrowUp:Ln(ur("up")),ArrowDown:Ln(ur("down"))});function cr(e,t){return t(e.tr.setSelection(new Oe.a(e.doc))),!0}function lr(e){return function(t,n){if(t.selection.node)return!1;var r,i=t.selection.$from,o=t.selection.$to;if("left"===e){var a=le(i),s=i.before(a.depth)+1;r=new Oe.h(t.doc.resolve(s),o)}if("right"===e){var c=le(o),l=o.after(c.depth)-1;r=new Oe.h(i,t.doc.resolve(l))}return!!r&&(n(t.tr.setSelection(r)),!0)}}function ur(e){return function(t,n,i){if(t.selection.empty&&i.endOfTextblock(e)){var o="left"===e||"up"===e?-1:1,a=t.selection.$head,s=Oe.f.near(t.doc.resolve(o>0?a.after():a.before()),o);if(s.$head&&s.$head.parent.type.name===r.CODE_BLOCK)return n(t.tr.setSelection(s)),!0}if(t.selection.empty){if("left"===e){var c=Cn(t.tr),l=c.node;if(l&&l.type.name===r.ZERO_WIDTH){var u=Oe.f.near(t.doc.resolve(c.pos-1),-1);return n(t.tr.setSelection(u)),!0}}if("right"===e){var f=function(e){var t={},n=e.curSelection.$from.nodeAfter;if(n)n.isInline&&!n.isText&&(t={node:n,pos:e.curSelection.from});else{var r=e.curSelection.$from.before(),i=e.doc.resolve(r).nodeAfter;i&&i.isInline&&!i.isText&&(t={node:i,pos:r})}return t}(t.tr),d=f.node;if(d&&d.type.name===r.ZERO_WIDTH){var h=Oe.f.near(t.doc.resolve(f.pos+2),1);return n(t.tr.setSelection(h)),!0}}}return!1}}function fr(e,t,n,r){return(t=t.delete(n,r)).setSelection(Oe.h.create(t.doc,n))}function dr(){return{parentTypeWhiteList:[r.PARAGRAPH,r.HEADING],match:function(e,t,n){if([" "," "].indexOf(n)<0)return!1;var r=hr(t,"(",")");if(r<0)return!1;var i=t.substring(r);if(0===(i=(i=i.replace(/^\(/,"").replace(/\)$/,"")).trim()).length)return!1;var o=function(e){var t=e.split(" ");if(1===t.length)return{href:t[0],title:""};var n=null,r=t.slice(1).join(" ");return r=r.trim(),pr.test(r)&&(n=r.replace(/\"/g,"")),vr.test(r)&&(n=r.replace(/\'/g,"")),n?{href:t[0],title:n}:null}(i);if(!o)return!1;var a=hr(t.substring(0,r),"[","]");if(a<0)return!1;var s=t.substring(a,r);return 0!==(s=(s=s.replace(/^\[/,"").replace(/\]$/,"")).trim()).length&&{whole:t.substring(a),text:s,href:o.href,title:o.title}},handle:function(e,t,n){var i=n-t.whole.length,o=n,a=e.schema.text(t.text),s=e.schema.nodes[r.LINK].createAndFill({title:t.title,href:t.href},a);return e.tr.replaceRangeWith(i,o,s)}}}function hr(e,t,n){var r=new RegExp("\\".concat(t,"|\\").concat(n),"g"),i=!1,o=0,a=!1,s=-1,c=[];return e.replace(r,(function(e,t){c.push({label:e,index:t})})),c.length?((c=c.sort((function(){return-1})))[0].index!==e.length-1||c.every((function(e){return n===e.label?i?o++:i=!0:i&&(o>0?o--:i=!1),i||0!==o||(s=e.index,a=!0),!a})),s):s}var pr=/^"[^\"]+"$/,vr=/^'[^\']+'$/;function mr(e){return(mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gr(e,t,n){for(var r=e.selection.$cursor.pos,i=e.doc.resolve(r),o=i.parent.type.name,a=function(a){var s=n[a];if(s.parentTypeWhiteList&&!s.parentTypeWhiteList.some((function(e){return o===e})))return"continue";if(s.wrapBlockBlackList&&he(e.doc,r).some((function(e){return s.wrapBlockBlackList.indexOf(e.node.type.name)>-1})))return"continue";var c=i.nodeBefore,l=function e(t,n){if(n<2)return"";var r=t.resolve(n).nodeBefore;return r&&r.isText?e(t,n-r.text.length)+r.text:""}(e.doc,i.pos),u=!1;c&&c.isText&&i.parentOffset===c.text.length&&(u=!0);var f=s.match(e,l,t,i,u);return f?{v:s.handle(e,f,r,l,t)}:void 0},s=0;s<n.length;s++){var c=a(s);switch(c){case"continue":continue;default:if("object"===mr(c))return c.v}}return null}function yr(e,t,n,r,i){if(!e.composing&&t===n){var o=gr(e.state,r,i);return!!o&&(Se(e,o),!0)}}function br(e,t){var n=0,i=e.schema.nodes[r.PARAGRAPH];return t.doc.forEach((function(e,o,a){var s=i.create(null,"");if(wr(e)&&0===a&&(t=t.replaceWith(o,o,s),n++),n>0){var c=t.mapping.maps.length;o=t.mapping.slice(c-n,c).map(o)}wr(e)&&function(e,t,n){var i=e.nodeAt(n+t.nodeSize);return!i||r.NODE_VIEW_TYPES.indexOf(i.type.name)>-1}(t.doc,e,o)&&(o+=e.nodeSize,t=t.replaceWith(o,o,s),n++)})),t}function wr(e){return r.NODE_VIEW_TYPES.indexOf(e.type.name)>-1}var Er,kr,Or=[r.NUMBERED_LIST,r.BULLETED_LIST,r.BLOCK_QUOTE];function _r(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return n.forEach((function(e){e.list.forEach((function(e,n){if(0!==n){var i=e.nodePos;if(r>0){var o=t.mapping.maps.length;i=t.mapping.slice(o-r,o).map(i)}t=t.join(i),r++}}))})),t}function xr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[],i=null;return e.descendants((function(e,o,a){var s=r[r.length-1];i!==e.type.name&&a.type.name===t&&(i=null),Or.indexOf(e.type.name)<0||a.type.name!==t||(i===e.type.name?s.list.push({node:e,nodePos:o+n}):(i=e.type.name,r.push({type:i,list:[{node:e,nodePos:o+n}]})))})),r.filter((function(e){return e.list.length>1}))}function Sr(e,t){return function e(t,n,i,o){var a=1;return i.descendants((function(s,c,l){var u,f,d=o+c+1;if(l.type.name===i.type.name)if(s.type.name===r.NUMBERED_LIST){var h=s.attrs.start;h>1&&1===a&&(a=h,s.firstChild.firstChild.attrs.indent>0&&(a=1)),s.attrs.normalizeStart!==a&&n.setNodeMarkup(d,null,{normalizeStart:a,start:h}),n=function(e,t,n,i,o){var a=[o-1];return n.descendants((function(e,n){if(e.type.name===r.PARAGRAPH){for(var o=e.attrs.indent||0,s=o+1;s<9;s++)a[s]=0;a[o]?a[o]=a[o]+1:a[o]=1;var c=a[o];e.attrs.number!==c&&(t=t.setNodeMarkup(i+n+1,null,{number:c,indent:o}))}})),t}(0,n,s,d,a),a+=(u=s,f=[],u.descendants((function(e){e.type.name===r.PARAGRAPH&&0===(e.attrs.indent||0)&&f.push(e)})),f).length}else s.type.name===r.PARAGRAPH&&s.attrs.indent>0||(a=1);s.type.name===r.BLOCK_QUOTE&&(n=e(t,n,s,d))})),n}(e,t,t.doc,-1)}function Nr(e,t){if(!((n=navigator.userAgent.toLowerCase()).indexOf("safari")>0&&n.indexOf("chrome")<0))return t;var n,i=0;return t.doc.descendants((function(n,o){if(i>0){var a=t.mapping.maps.length;o=t.mapping.slice(a-i,a).map(o)}var s=t.doc.resolve(o);if(n.type.name===r.PARAGRAPH&&0===n.content.size&&s.depth>1){o+=1;var c=e.schema.nodes[r.ZERO_WIDTH].create({});t=t.replaceWith(o,o,c),i++}})),t}function Mr(){return new Oe.d({afterEachTransaction:function(e,t){var n=t.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();return(t=Nr(e,t=Sr(e,t=function(e,t){var n=xr(t.doc,r.DOC),i=(t=_r(e,t,n)).mapping.maps.length;return t.doc.descendants((function(o,a){if(o.type.name===r.BLOCK_QUOTE){var s=t.mapping.maps.length;n=xr(o,r.BLOCK_QUOTE,a+1),t=_r(e,t,n,s-i)}})),t}(e,t=br(e,t))))).curSelection.$cursor&&t.curSelection.docChanged&&(t=t.scrollIntoView()),n&&(t=t.ensureMarks(n)),t}})}function Cr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ar(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}if("undefined"!=typeof WeakMap){var Tr=new WeakMap;Er=function(e){return Tr.get(e)},kr=function(e,t){return Tr.set(e,t),t}}else{var Dr=[],Ir=0;Er=function(e){for(var t=0;t<Dr.length;t+=2)if(Dr[t]===e)return Dr[t+1]},kr=function(e,t){return 10===Ir&&(Ir=0),Dr[Ir++]=e,Dr[Ir++]=t,t}}var Rr=function e(t,n,r,i){Ar(this,e),this.left=t,this.top=n,this.right=r,this.bottom=i},Lr=function(){function e(t,n,r,i){Ar(this,e),this.width=t,this.height=n,this.map=r,this.problems=i}var t,n,r;return t=e,r=[{key:"get",value:function(e){return Er(e)||kr(e,Pr(e))}}],(n=[{key:"findCell",value:function(e){for(var t=0;t<this.map.length;t++){var n=this.map[t];if(n==e){for(var r=t%this.width,i=t/this.width|0,o=r+1,a=i+1,s=1;o<this.width&&this.map[t+s]==n;s++)o++;for(var c=1;a<this.height&&this.map[t+this.width*c]==n;c++)a++;return new Rr(r,i,o,a)}}throw new RangeError("No cell with offset "+e+" found")}},{key:"colCount",value:function(e){for(var t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw new RangeError("No cell with offset "+e+" found")}},{key:"nextCell",value:function(e,t,n){var r=this.findCell(e),i=r.left,o=r.right,a=r.top,s=r.bottom;return"horiz"==t?(n<0?0==i:o==this.width)?null:this.map[a*this.width+(n<0?i-1:o)]:(n<0?0==a:s==this.height)?null:this.map[i+this.width*(n<0?a-1:s)]}},{key:"rectBetween",value:function(e,t){var n=this.findCell(e),r=n.left,i=n.right,o=n.top,a=n.bottom,s=this.findCell(t),c=s.left,l=s.right,u=s.top,f=s.bottom;return new Rr(Math.min(r,c),Math.min(o,u),Math.max(i,l),Math.max(a,f))}},{key:"cellsInRect",value:function(e){for(var t=[],n={},r=e.top;r<e.bottom;r++)for(var i=e.left;i<e.right;i++){var o=r*this.width+i,a=this.map[o];n[a]||(n[a]=!0,i==e.left&&i&&this.map[o-1]==a||r==e.top&&r&&this.map[o-this.width]==a||t.push(a))}return t}},{key:"positionAt",value:function(e,t,n){for(var r=0,i=0;;r++){var o=i+n.child(r).nodeSize;if(r===e){for(var a=t+e*this.width,s=(e+1)*this.width;a<s&&this.map[a]<i;)a++;return a===s?o-1:this.map[a]}i=o}}}])&&Cr(t.prototype,n),r&&Cr(t,r),e}();function Pr(e){for(var t=function(e){for(var t=-1,n=!1,r=0;r<e.childCount;r++){var i=e.child(r),o=0;if(n)for(var a=0;a<r;a++)for(var s=e.child(a),c=0;c<s.childCount;c++){var l=s.child(c);a+l.attrs.rowspan>r&&(o+=l.attrs.colspan)}for(var u=0;u<i.childCount;u++){var f=i.child(u);o+=f.attrs.colspan,f.attrs.rowspan>1&&(n=!0)}-1===t?t=o:t!==o&&(t=Math.max(t,o))}return t}(e),n=e.childCount,r=[],i=0,o=null,a=0,s=t*n;a<s;a++)r[a]=0;for(var c=0,l=0;c<n;c++){var u=e.child(c);l++;for(var f=0;;f++){for(;i<r.length&&0!==r[i];)i++;if(f===u.childCount)break;for(var d=u.child(f),h=d.attrs,p=h.colspan,v=h.rowspan,m=0;m<v;m++){if(m+c>=n){(o||(o=[])).push({type:"overlong_rowspan",pos:l,n:v-m});break}for(var g=i+m*t,y=0;y<p;y++)0===r[g+y]?r[g+y]=l:(o||(o=[])).push({type:"collision",row:c,pos:l,n:p-y})}i+=p,l+=d.nodeSize}for(var b=(c+1)*t,w=0;i<b;)0===r[i++]&&w++;w&&(o||(o=[])).push({type:"missing",row:c,n:w}),l++}return new Lr(t,n,r,o)}function Br(e){return(Br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zr(e,t,n){return t&&jr(e.prototype,t),n&&jr(e,n),e}function Fr(e,t){return(Fr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Hr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kr(e);if(t){var i=Kr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ur(this,n)}}function Ur(e,t){return!t||"object"!==Br(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Kr(e){return(Kr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Wr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fr(e,t)}(n,e);var t=Hr(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,o=arguments.length>2?arguments[2]:void 0;$r(this,n);var a=e.node(-1),s=Lr.get(a),c=e.start(-1),l=s.rectBetween(e.pos-c,i.pos-c),u=e.node(0),f=s.cellsInRect(l).filter((function(e){return e!=i.pos-c}));f.unshift(i.pos-c);var d=f.map((function(e){var t=a.nodeAt(e),n=e+c+1;return new Oe.g(u.resolve(n),u.resolve(n+t.content.size))}));return(r=t.call(this,d[0].$from,d[0].$to,d)).$anchorCell=e,r.$headCell=i,r.cellMeta=o,r}return zr(n,[{key:"map",value:function(e,t){var r=e.resolve(t.map(this.$anchorCell.pos)),i=e.resolve(t.map(this.$headCell.pos));if(Xr(r)&&Xr(i)&&Zr(r,i)){var o=this.$anchorCell.node(-1)!=r.node(-1);return o&&this.isRowSelection()?n.rowSelection(r,i):o&&this.isColSelection()?n.colSelection(r,i):new n(r,i)}return Oe.h.between(r,i)}},{key:"content",value:function(){for(var e=this.$anchorCell.node(-1),t=Lr.get(e),n=this.$anchorCell.start(-1),r=t.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),i={},o=[],a=r.top;a<r.bottom;a++){for(var s=[],c=a*t.width+r.left,l=r.left;l<r.right;l++,c++){var u=t.map[c];if(!i[u]){i[u]=!0;var f=t.findCell(u),d=e.nodeAt(u),h=r.left-f.left,p=f.right-r.right;if(h>0||p>0){var v=d.attrs;h>0&&(v=Qr(v,h)),p>0&&(v=Qr(v,p)),d=f.left<r.left?d.type.createAndFill(v):d.type.create(v,d.content)}if(f.top<r.top||f.bottom>r.bottom){var m=Jr(d.attrs,"rowspan",Math.min(f.bottom,r.bottom)-Math.max(f.top,r.top));d=f.top<r.top?d.type.createAndFill(m):d.type.create(m,d.content)}s.push(d)}}o.push(e.child(a).copy(we.c.from(s)))}var g=this.isColSelection()&&this.isRowSelection()?e:o;return new we.i(we.c.from(g),1,1)}},{key:"replace",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:we.i.empty,n=e.steps.length,r=this.ranges,i=0;i<r.length;i++){var o=r[i],a=o.$from,s=o.$to,c=e.mapping.slice(n);e.replace(c.map(a.pos),c.map(s.pos),i?we.i.empty:t)}var l=Oe.f.findFrom(e.doc.resolve(e.mapping.slice(n).map(this.to)),-1);l&&e.setSelection(l)}},{key:"replaceWith",value:function(e,t){this.replace(e,new we.i(we.c.from(t),0,0))}},{key:"forEachCell",value:function(e){for(var t=this.$anchorCell.node(-1),n=Lr.get(t),r=this.$anchorCell.start(-1),i=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r)),o=0;o<i.length;o++)e(t.nodeAt(i[o]),r+i[o])}},{key:"isColSelection",value:function(){var e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);if(Math.min(e,t)>0)return!1;var n=e+this.$anchorCell.nodeAfter.attrs.rowspan,r=t+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(n,r)==this.$headCell.node(-1).childCount}},{key:"isRowSelection",value:function(){var e=Lr.get(this.$anchorCell.node(-1)),t=this.$anchorCell.start(-1),n=e.colCount(this.$anchorCell.pos-t),r=e.colCount(this.$headCell.pos-t);if(Math.min(n,r)>0)return!1;var i=n+this.$anchorCell.nodeAfter.attrs.colspan,o=r+this.$headCell.nodeAfter.attrs.colspan;return Math.max(i,o)==e.width}},{key:"eq",value:function(e){return e instanceof n&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}},{key:"toJSON",value:function(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}},{key:"getBookmark",value:function(){return new Vr(this.$anchorCell.pos,this.$headCell.pos)}}],[{key:"colSelection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=Lr.get(e.node(-1)),i=e.start(-1),o=r.findCell(e.pos-i),a=r.findCell(t.pos-i),s=e.node(0);return o.top<=a.top?(o.top>0&&(e=s.resolve(i+r.map[o.left])),a.bottom<r.height&&(t=s.resolve(i+r.map[r.width*(r.height-1)+a.right-1]))):(a.top>0&&(t=s.resolve(i+r.map[a.left])),o.bottom<r.height&&(e=s.resolve(i+r.map[r.width*(r.height-1)+o.right-1]))),new n(e,t)}},{key:"rowSelection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=Lr.get(e.node(-1)),i=e.start(-1),o=r.findCell(e.pos-i),a=r.findCell(t.pos-i),s=e.node(0);return o.left<=a.left?(o.left>0&&(e=s.resolve(i+r.map[o.top*r.width])),a.right<r.width&&(t=s.resolve(i+r.map[r.width*(a.top+1)-1]))):(a.left>0&&(t=s.resolve(i+r.map[a.top*r.width])),o.right<r.width&&(e=s.resolve(i+r.map[r.width*(o.top+1)-1]))),new n(e,t)}},{key:"fromJSON",value:function(e,t){return new n(e.resolve(t.anchor),e.resolve(t.head))}},{key:"create",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;return new n(e.resolve(t),e.resolve(r))}}]),n}(Oe.f);Wr.prototype.visible=!1,Oe.f.jsonID("cell",Wr);var Vr=function(){function e(t,n){$r(this,e),this.anchor=t,this.head=n}return zr(e,[{key:"map",value:function(t){return new e(t.map(this.anchor),t.map(this.head))}},{key:"resolve",value:function(e){var t=e.resolve(this.anchor),n=e.resolve(this.head);return"row"==t.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&t.index()<t.parent.childCount&&n.index()<n.parent.childCount&&Zr(t,n)?new Wr(t,n):Oe.f.near(n,1)}}]),e}(),Gr=new Oe.e("selectingCells");function qr(e,t){var n=t.getAttribute("col");if(["td","th"].indexOf(t.nodeName.toLowerCase())>-1){var r=function(e,t,n,r){var i=Lr.get(t),o=e.posAtDOM(r);o=o-n-2;var a=i.findCell(o);return{left:a.left,right:a.right,top:a.top,bottom:a.bottom,col:a.left,row:a.top,rowspan:a.bottom-a.top,colspan:a.right-a.left}}(e.view,e.node,e.getPos(),t);n=r.col+r.colspan-1}return n}function Jr(e,t,n){var r={};for(var i in e)r[i]=e[i];return r[t]=n,r}function Xr(e){return e.parent.type.name===r.TABLE_ROW&&e.nodeAfter}function Zr(e,t){return e.depth===t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function Qr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Jr(e,"colspan",e.colspan-t)}function Yr(e){for(var t=e.depth-1;t>0;t--)if(e.node(t).type.name===r.TABLE_ROW)return e.node(0).resolve(e.before(t+1));return null}function ei(e,t){for(;t&&t!==e;t=t.parentNode)if("td"===t.nodeName.toLowerCase()||"th"===t.nodeName.toLowerCase())return t}function ti(e,t){var n=e.posAtCoords({left:t.clientX,top:t.clientY});return n&&n?Yr(e.state.doc.resolve(n.pos)):null}function ni(e){var t,n=e.selection,i=function(e){var t=e.selection;return t.$anchorCell?t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell:t.node&&t.node.type.name===r.TABLE_CELL?t.$anchor:Yr(t.$head)||function(e){for(var t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++)if(t.type.name===r.TABLE_CELL)return e.doc.resolve(n);for(var i=e.nodeBefore,o=e.pos;i;i=i.lastChild,o--)if(i.type.name===r.TABLE_CELL)return e.doc.resolve(o-i.nodeSize)}(t.$head)}(e),o=i.node(-1),a=i.start(-1),s=Lr.get(o);return(t=n instanceof Wr?s.rectBetween(n.$anchorCell.pos-a,n.$headCell.pos-a):s.findCell(i.pos-a)).tableStart=a,t.map=s,t.table=o,t}function ri(e){var t=e.content;return 1===t.childCount&&t.firstChild.isTextblock&&0===t.firstChild.childCount}var ii={},oi=ii;if("undefined"!=typeof navigator&&"undefined"!=typeof document){var ai=/Edge\/(\d+)/.exec(navigator.userAgent),si=/MSIE \d/.test(navigator.userAgent),ci=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);ii.mac=/Mac/.test(navigator.platform);var li=ii.ie=!!(si||ci||ai);ii.ie_version=si?document.documentMode||6:ci?+ci[1]:ai?+ai[1]:null,ii.gecko=!li&&/gecko\/(\d+)/i.test(navigator.userAgent),ii.gecko_version=ii.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var ui=!li&&/Chrome\/(\d+)/.exec(navigator.userAgent);ii.chrome=!!ui,ii.chrome_version=ui&&+ui[1],ii.safari=!li&&/Apple Computer/.test(navigator.vendor),ii.ios=ii.safari&&(/Mobile\/\w+/.test(navigator.userAgent)||navigator.maxTouchPoints>2),ii.android=/Android \d/.test(navigator.userAgent),ii.webkit="webkitFontSmoothing"in document.documentElement.style,ii.webkit_version=ii.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var fi=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},di=function(e){var t=e.parentNode;return t&&11==t.nodeType?t.host:t},hi=null,pi=function(e,t,n){var r=hi||(hi=document.createRange());return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},vi=function(e,t,n,r){return n&&(gi(e,t,n,r,-1)||gi(e,t,n,r,1))},mi=/^(img|br|input|textarea|hr)$/i;function gi(e,t,n,r,i){for(;;){if(e==n&&t==r)return!0;if(t==(i<0?0:yi(e))){var o=e.parentNode;if(1!=o.nodeType||bi(e)||mi.test(e.nodeName)||"false"==e.contentEditable)return!1;t=fi(e)+(i<0?0:1),e=o}else{if(1!=e.nodeType)return!1;if("false"==(e=e.childNodes[t+(i<0?-1:0)]).contentEditable)return!1;t=i<0?yi(e):0}}}function yi(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function bi(e){for(var t,n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}var wi=function(e){var t=e.isCollapsed;return t&&oi.chrome&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t};function Ei(e,t){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function ki(e){return{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function Oi(e,t){return"number"==typeof e?e:e[t]}function _i(e){var t=e.getBoundingClientRect();return{left:t.left,right:t.left+e.clientWidth,top:t.top,bottom:t.top+e.clientHeight}}function xi(e,t,n){for(var r=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,o=e.dom.ownerDocument,a=n||e.dom;a;a=di(a))if(1==a.nodeType){var s=a==o.body||1!=a.nodeType,c=s?ki(o):_i(a),l=0,u=0;if(t.top<c.top+Oi(r,"top")?u=-(c.top-t.top+Oi(i,"top")):t.bottom>c.bottom-Oi(r,"bottom")&&(u=t.bottom-c.bottom+Oi(i,"bottom")),t.left<c.left+Oi(r,"left")?l=-(c.left-t.left+Oi(i,"left")):t.right>c.right-Oi(r,"right")&&(l=t.right-c.right+Oi(i,"right")),l||u)if(s)o.defaultView.scrollBy(l,u);else{var f=a.scrollLeft,d=a.scrollTop;u&&(a.scrollTop+=u),l&&(a.scrollLeft+=l);var h=a.scrollLeft-f,p=a.scrollTop-d;t={left:t.left-h,top:t.top-p,right:t.right-h,bottom:t.bottom-p}}if(s)break}}function Si(e){for(var t=[],n=e.ownerDocument;e&&(t.push({dom:e,top:e.scrollTop,left:e.scrollLeft}),e!=n);e=di(e));return t}function Ni(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=r.dom,o=r.top,a=r.left;i.scrollTop!=o+t&&(i.scrollTop=o+t),i.scrollLeft!=a&&(i.scrollLeft=a)}}var Mi=null;function Ci(e,t){for(var n,r,i=2e8,o=0,a=t.top,s=t.top,c=e.firstChild,l=0;c;c=c.nextSibling,l++){var u=void 0;if(1==c.nodeType)u=c.getClientRects();else{if(3!=c.nodeType)continue;u=pi(c).getClientRects()}for(var f=0;f<u.length;f++){var d=u[f];if(d.top<=a&&d.bottom>=s){a=Math.max(d.bottom,a),s=Math.min(d.top,s);var h=d.left>t.left?d.left-t.left:d.right<t.left?t.left-d.right:0;if(h<i){n=c,i=h,r=h&&3==n.nodeType?{left:d.right<t.left?d.right:d.left,top:t.top}:t,1==c.nodeType&&h&&(o=l+(t.left>=(d.left+d.right)/2?1:0));continue}}!n&&(t.left>=d.right&&t.top>=d.top||t.left>=d.left&&t.top>=d.bottom)&&(o=l+1)}}return n&&3==n.nodeType?function(e,t){for(var n=e.nodeValue.length,r=document.createRange(),i=0;i<n;i++){r.setEnd(e,i+1),r.setStart(e,i);var o=Di(r,1);if(o.top!=o.bottom&&Ai(t,o))return{node:e,offset:i+(t.left>=(o.left+o.right)/2?1:0)}}return{node:e,offset:0}}(n,r):!n||i&&1==n.nodeType?{node:e,offset:o}:Ci(n,r)}function Ai(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function Ti(e,t){var n,r,i=e.root;if(i.caretPositionFromPoint)try{var o=i.caretPositionFromPoint(t.left,t.top);o&&(n=o.offsetNode,r=o.offset)}catch(e){}if(!n&&i.caretRangeFromPoint){var a=i.caretRangeFromPoint(t.left,t.top);a&&(n=a.startContainer,r=a.startOffset)}var s,c=i.elementFromPoint(t.left,t.top+1);if(!c||!e.dom.contains(1!=c.nodeType?c.parentNode:c)){var l=e.dom.getBoundingClientRect();if(!Ai(t,l))return null;if(!(c=function e(t,n,r){var i=t.childNodes.length;if(i&&r.top<r.bottom)for(var o=Math.max(0,Math.min(i-1,Math.floor(i*(n.top-r.top)/(r.bottom-r.top))-2)),a=o;;){var s=t.childNodes[a];if(1==s.nodeType)for(var c=s.getClientRects(),l=0;l<c.length;l++){var u=c[l];if(Ai(n,u))return e(s,n,u)}if((a=(a+1)%i)==o)break}return t}(e.dom,t,l)))return null}if(oi.safari&&c.draggable&&(n=r=null),c=function(e,t){var n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}(c,t),n){if(oi.gecko&&1==n.nodeType&&(r=Math.min(r,n.childNodes.length))<n.childNodes.length){var u,f=n.childNodes[r];"IMG"==f.nodeName&&(u=f.getBoundingClientRect()).right<=t.left&&u.bottom>t.top&&r++}n==e.dom&&r==n.childNodes.length-1&&1==n.lastChild.nodeType&&t.top>n.lastChild.getBoundingClientRect().bottom?s=e.state.doc.content.size:0!=r&&1==n.nodeType&&"BR"==n.childNodes[r-1].nodeName||(s=function(e,t,n,r){for(var i=-1,o=t;o!=e.dom;){var a=e.docView.nearestDesc(o,!0);if(!a)return null;if(a.node.isBlock&&a.parent){var s=a.dom.getBoundingClientRect();if(s.left>r.left||s.top>r.top)i=a.posBefore;else{if(!(s.right<r.left||s.bottom<r.top))break;i=a.posAfter}}o=a.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,n)}(e,n,r,t))}null==s&&(s=function(e,t,n){var r=Ci(t,n),i=r.node,o=r.offset,a=-1;if(1==i.nodeType&&!i.firstChild){var s=i.getBoundingClientRect();a=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return e.docView.posFromDOM(i,o,a)}(e,c,t));var d=e.docView.nearestDesc(c,!0);return{pos:s,inside:d?d.posAtStart-d.border:-1}}function Di(e,t){var n=e.getClientRects();return n.length?n[t<0?0:n.length-1]:e.getBoundingClientRect()}var Ii=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Ri(e,t,n){var r=e.docView.domFromPos(t,n<0?-1:1),i=r.node,o=r.offset,a=oi.webkit||oi.gecko;if(3==i.nodeType){if(!a||!Ii.test(i.nodeValue)&&(n<0?o:o!=i.nodeValue.length)){var s=o,c=o,l=n<0?1:-1;return n<0&&!o?(c++,l=-1):n>=0&&o==i.nodeValue.length?(s--,l=1):n<0?s--:c++,Li(Di(pi(i,s,c),l),l<0)}var u=Di(pi(i,o,o),n);if(oi.gecko&&o&&/\s/.test(i.nodeValue[o-1])&&o<i.nodeValue.length){var f=Di(pi(i,o-1,o-1),-1);if(f.top==u.top){var d=Di(pi(i,o,o+1),-1);if(d.top!=u.top)return Li(d,d.left<f.left)}}return u}if(!e.state.doc.resolve(t).parent.inlineContent){if(o&&(n<0||o==yi(i))){var h=i.childNodes[o-1];if(1==h.nodeType)return Pi(h.getBoundingClientRect(),!1)}if(o<yi(i)){var p=i.childNodes[o];if(1==p.nodeType)return Pi(p.getBoundingClientRect(),!0)}return Pi(i.getBoundingClientRect(),n>=0)}if(o&&(n<0||o==yi(i))){var v=i.childNodes[o-1],m=3==v.nodeType?pi(v,yi(v)-(a?0:1)):1!=v.nodeType||"BR"==v.nodeName&&v.nextSibling?null:v;if(m)return Li(Di(m,1),!1)}if(o<yi(i)){var g=i.childNodes[o],y=3==g.nodeType?pi(g,0,a?0:1):1==g.nodeType?g:null;if(y)return Li(Di(y,-1),!0)}return Li(Di(3==i.nodeType?pi(i):i,-n),n>=0)}function Li(e,t){if(0==e.width)return e;var n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function Pi(e,t){if(0==e.height)return e;var n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function Bi(e,t,n){var r=e.state,i=e.root.activeElement;r!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),i!=e.dom&&i&&i.focus()}}var $i=/[\u0590-\u08ac]/,ji=null,zi=null,Fi=!1;function Hi(e,t,n){return ji==t&&zi==n?Fi:(ji=t,zi=n,Fi="up"==n||"down"==n?function(e,t,n){var r=t.selection,i="up"==n?r.$from:r.$to;return Bi(e,t,(function(){for(var t=e.docView.domFromPos(i.pos,"up"==n?-1:1).node;;){var r=e.docView.nearestDesc(t,!0);if(!r)break;if(r.node.isBlock){t=r.dom;break}t=r.dom.parentNode}for(var o=Ri(e,i.pos,1),a=t.firstChild;a;a=a.nextSibling){var s=void 0;if(1==a.nodeType)s=a.getClientRects();else{if(3!=a.nodeType)continue;s=pi(a,0,a.nodeValue.length).getClientRects()}for(var c=0;c<s.length;c++){var l=s[c];if(l.bottom>l.top&&("up"==n?l.bottom<o.top+1:l.top>o.bottom-1))return!1}}return!0}))}(e,t,n):function(e,t,n){var r=t.selection.$head;if(!r.parent.isTextblock)return!1;var i=r.parentOffset,o=!i,a=i==r.parent.content.size,s=getSelection();return $i.test(r.parent.textContent)&&s.modify?Bi(e,t,(function(){var t=s.getRangeAt(0),i=s.focusNode,o=s.focusOffset,a=s.caretBidiLevel;s.modify("move",n,"character");var c=!(r.depth?e.docView.domAfterPos(r.before()):e.dom).contains(1==s.focusNode.nodeType?s.focusNode:s.focusNode.parentNode)||i==s.focusNode&&o==s.focusOffset;return s.removeAllRanges(),s.addRange(t),null!=a&&(s.caretBidiLevel=a),c})):"left"==n||"backward"==n?o:a}(e,t,n))}function Ui(e,t,n){return(Ui="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Xi(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Ki(e){return(Ki="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wi(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vi(e,t)}function Vi(e,t){return(Vi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Xi(e);if(t){var i=Xi(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return qi(this,n)}}function qi(e,t){return!t||"object"!==Ki(t)&&"function"!=typeof t?Ji(e):t}function Ji(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xi(e){return(Xi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yi(e,t,n){return t&&Qi(e.prototype,t),n&&Qi(e,n),e}var eo=function(){function e(t,n,r,i){Zi(this,e),this.parent=t,this.children=n,this.dom=r,r.pmViewDesc=this,this.contentDOM=i,this.dirty=0}return Yi(e,[{key:"matchesWidget",value:function(){return!1}},{key:"matchesMark",value:function(){return!1}},{key:"matchesNode",value:function(){return!1}},{key:"matchesHack",value:function(){return!1}},{key:"parseRule",value:function(){return null}},{key:"stopEvent",value:function(){return!1}},{key:"destroy",value:function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var e=0;e<this.children.length;e++)this.children[e].destroy()}},{key:"posBeforeChild",value:function(e){for(var t=0,n=this.posAtStart;t<this.children.length;t++){var r=this.children[t];if(r==e)return n;n+=r.size}}},{key:"localPosFromDOM",value:function(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){var r,i;if(e==this.contentDOM)r=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;r=e.previousSibling}for(;r&&(!(i=r.pmViewDesc)||i.parent!=this);)r=r.previousSibling;return r?this.posBeforeChild(i)+i.size:this.posAtStart}var o,a;if(e==this.contentDOM)o=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&(!(a=o.pmViewDesc)||a.parent!=this);)o=o.nextSibling;return o?this.posBeforeChild(a):this.posAtEnd}var s;if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(var c=e;;c=c.parentNode){if(c==this.dom){s=!1;break}if(c.parentNode.firstChild!=c)break}if(null==s&&t==e.childNodes.length)for(var l=e;;l=l.parentNode){if(l==this.dom){s=!0;break}if(l.parentNode.lastChild!=l)break}}return(null==s?n>0:s)?this.posAtEnd:this.posAtStart}},{key:"nearestDesc",value:function(e,t){for(var n=!0,r=e;r;r=r.parentNode){var i=this.getDesc(r);if(i&&(!t||i.node)){if(!n||!i.nodeDOM||(1==i.nodeDOM.nodeType?i.nodeDOM.contains(1==e.nodeType?e:e.parentNode):i.nodeDOM==e))return i;n=!1}}}},{key:"getDesc",value:function(e){for(var t=e.pmViewDesc,n=t;n;n=n.parent)if(n==this)return t}},{key:"posFromDOM",value:function(e,t,n){for(var r=e;r;r=r.parentNode){var i=this.getDesc(r);if(i)return i.localPosFromDOM(e,t,n)}return-1}},{key:"descAt",value:function(e){for(var t=0,n=0;t<this.children.length;t++){var r=this.children[t],i=n+r.size;if(n==e&&i!=n){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(e<i)return r.descAt(e-n-r.border);n=i}}},{key:"domFromPos",value:function(e,t){if(!this.contentDOM)return{node:this.dom,offset:0};for(var n=0,r=0,i=!0;;r++,i=!1){for(;r<this.children.length&&(this.children[r].beforePosition||this.children[r].dom.parentNode!=this.contentDOM);)n+=this.children[r++].size;var o=r==this.children.length?null:this.children[r];if(n==e&&(0==t||!o||!o.size||o.border||t<0&&i)||o&&o.domAtom&&e<n+o.size)return{node:this.contentDOM,offset:o?fi(o.dom):this.contentDOM.childNodes.length};if(!o)throw new Error("Invalid position "+e);var a=n+o.size;if(!o.domAtom&&(t<0&&!o.border?a>=e:a>e))return o.domFromPos(e-n-o.border,t);n=a}}},{key:"parseRange",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,i=-1,o=n,a=0;;a++){var s=this.children[a],c=o+s.size;if(-1==r&&e<=c){var l=o+s.border;if(e>=l&&t<=c-s.border&&s.node&&s.contentDOM&&this.contentDOM.contains(s.contentDOM))return s.parseRange(e,t,l);e=o;for(var u=a;u>0;u--){var f=this.children[u-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){r=fi(f.dom)+1;break}e-=f.size}-1==r&&(r=0)}if(r>-1&&(c>t||a==this.children.length-1)){t=c;for(var d=a+1;d<this.children.length;d++){var h=this.children[d];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){i=fi(h.dom);break}t+=h.size}-1==i&&(i=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:i}}},{key:"emptyChildAt",value:function(e){if(this.border||!this.contentDOM||!this.children.length)return!1;var t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)}},{key:"domAfterPos",value:function(e){var t=this.domFromPos(e,0),n=t.node,r=t.offset;if(1!=n.nodeType||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}},{key:"setSelection",value:function(e,t,n,r){for(var i=Math.min(e,t),o=Math.max(e,t),a=0,s=0;a<this.children.length;a++){var c=this.children[a],l=s+c.size;if(i>s&&o<l)return c.setSelection(e-s-c.border,t-s-c.border,n,r);s=l}var u=this.domFromPos(e,e?-1:1),f=t==e?u:this.domFromPos(t,t?-1:1),d=n.getSelection(),h=!1;if((oi.gecko||oi.safari)&&e==t){var p=u,v=p.node,m=p.offset;if(3==v.nodeType)(h=m&&"\n"==v.nodeValue[m-1])&&m==v.nodeValue.length&&v.nextSibling&&"BR"==v.nextSibling.nodeName&&(u=f={node:v.parentNode,offset:fi(v)+1});else{var g=v.childNodes[m-1];h=g&&("BR"==g.nodeName||"false"==g.contentEditable)}}if(r||h&&oi.safari||!vi(u.node,u.offset,d.anchorNode,d.anchorOffset)||!vi(f.node,f.offset,d.focusNode,d.focusOffset)){var y=!1;if((d.extend||e==t)&&!h){d.collapse(u.node,u.offset);try{e!=t&&d.extend(f.node,f.offset),y=!0}catch(e){if(!(e instanceof DOMException))throw e}}if(!y){if(e>t){var b=u;u=f,f=b}var w=document.createRange();w.setEnd(f.node,f.offset),w.setStart(u.node,u.offset),d.removeAllRanges(),d.addRange(w)}}}},{key:"ignoreMutation",value:function(e){return!this.contentDOM&&"selection"!=e.type}},{key:"markDirty",value:function(e,t){for(var n=0,r=0;r<this.children.length;r++){var i=this.children[r],o=n+i.size;if(n==o?e<=o&&t>=n:e<o&&t>n){var a=n+i.border,s=o-i.border;if(e>=a&&t<=s)return this.dirty=e==n||t==o?2:1,void(e!=a||t!=s||!i.contentLost&&i.dom.parentNode==this.contentDOM?i.markDirty(e-a,t-a):i.dirty=3);i.dirty=3}n=o}this.dirty=2}},{key:"markParentsDirty",value:function(){for(var e=1,t=this.parent;t;t=t.parent,e++){var n=1==e?2:1;t.dirty<n&&(t.dirty=n)}}},{key:"beforePosition",get:function(){return!1}},{key:"size",get:function(){for(var e=0,t=0;t<this.children.length;t++)e+=this.children[t].size;return e}},{key:"border",get:function(){return 0}},{key:"posBefore",get:function(){return this.parent.posBeforeChild(this)}},{key:"posAtStart",get:function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}},{key:"posAfter",get:function(){return this.posBefore+this.size}},{key:"posAtEnd",get:function(){return this.posAtStart+this.size-2*this.border}},{key:"contentLost",get:function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}},{key:"domAtom",get:function(){return!1}}]),e}(),to=[],no=function(e){Wi(n,e);var t=Gi(n);function n(e,r,i,o){var a;Zi(this,n);var s,c=r.type.toDOM;if("function"==typeof c&&(c=c(i,(function(){return s?s.parent?s.parent.posBeforeChild(s):void 0:o}))),!r.type.spec.raw){if(1!=c.nodeType){var l=document.createElement("span");l.appendChild(c),c=l}c.contentEditable=!1,c.classList.add("ProseMirror-widget")}return(a=t.call(this,e,to,c,null)).widget=r,s=Ji(a),a}return Yi(n,[{key:"matchesWidget",value:function(e){return 0==this.dirty&&e.type.eq(this.widget.type)}},{key:"parseRule",value:function(){return{ignore:!0}}},{key:"stopEvent",value:function(e){var t=this.widget.spec.stopEvent;return!!t&&t(e)}},{key:"ignoreMutation",value:function(e){return"selection"!=e.type||this.widget.spec.ignoreSelection}},{key:"beforePosition",get:function(){return this.widget.type.side<0}},{key:"domAtom",get:function(){return!0}}]),n}(eo),ro=function(e){Wi(n,e);var t=Gi(n);function n(e,r,i,o){var a;return Zi(this,n),(a=t.call(this,e,to,r,null)).textDOM=i,a.text=o,a}return Yi(n,[{key:"localPosFromDOM",value:function(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}},{key:"domFromPos",value:function(e){return{node:this.textDOM,offset:e}}},{key:"ignoreMutation",value:function(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue}},{key:"size",get:function(){return this.text.length}}]),n}(eo),io=function(e){Wi(n,e);var t=Gi(n);function n(e,r,i,o){var a;return Zi(this,n),(a=t.call(this,e,[],i,o)).mark=r,a}return Yi(n,[{key:"parseRule",value:function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}},{key:"matchesMark",value:function(e){return 3!=this.dirty&&this.mark.eq(e)}},{key:"markDirty",value:function(e,t){if(Ui(Xi(n.prototype),"markDirty",this).call(this,e,t),0!=this.dirty){for(var r=this.parent;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=0}}},{key:"slice",value:function(e,t,r){var i=n.create(this.parent,this.mark,!0,r),o=this.children,a=this.size;t<a&&(o=Eo(o,t,a,r)),e>0&&(o=Eo(o,0,e,r));for(var s=0;s<o.length;s++)o[s].parent=i;return i.children=o,i}}],[{key:"create",value:function(e,t,r,i){var o=i.nodeViews[t.type.name],a=o&&o(t,i,r);return a&&a.dom||(a=we.b.renderSpec(document,t.type.spec.toDOM(t,r))),new n(e,t,a.dom,a.contentDOM||a.dom)}}]),n}(eo),oo=function(e){Wi(n,e);var t=Gi(n);function n(e,r,i,o,a,s,c,l,u){var f;return Zi(this,n),(f=t.call(this,e,r.isLeaf?to:[],a,s)).nodeDOM=c,f.node=r,f.outerDeco=i,f.innerDeco=o,s&&f.updateChildren(l,u),f}return Yi(n,[{key:"parseRule",value:function(){var e=this;if(this.node.type.spec.reparseInView)return null;var t={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(t.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?t.contentElement=this.contentDOM:t.getContent=function(){return e.contentDOM?we.c.empty:e.node.content},t}},{key:"matchesNode",value:function(e,t,n){return 0==this.dirty&&e.eq(this.node)&&go(t,this.outerDeco)&&n.eq(this.innerDeco)}},{key:"updateChildren",value:function(e,t){var n=this,r=this.node.inlineContent,i=t,o=r&&e.composing&&this.localCompositionNode(e,t),a=new bo(this,o&&o.node);!function(e,t,n,r){var i=t.locals(e),o=0;if(0!=i.length)for(var a=0,s=[],c=null,l=0;;){if(a<i.length&&i[a].to==o){for(var u=i[a++],f=void 0;a<i.length&&i[a].to==o;)(f||(f=[u])).push(i[a++]);if(f){f.sort(wo);for(var d=0;d<f.length;d++)n(f[d],l,!!c)}else n(u,l,!!c)}var h=void 0,p=void 0;if(c)p=-1,h=c,c=null;else{if(!(l<e.childCount))break;p=l,h=e.child(l++)}for(var v=0;v<s.length;v++)s[v].to<=o&&s.splice(v--,1);for(;a<i.length&&i[a].from<=o&&i[a].to>o;)s.push(i[a++]);var m=o+h.nodeSize;if(h.isText){var g=m;a<i.length&&i[a].from<g&&(g=i[a].from);for(var y=0;y<s.length;y++)s[y].to<g&&(g=s[y].to);g<m&&(c=h.cut(g-o),h=h.cut(0,g-o),m=g,p=-1)}var b=s.length?h.isInline&&!h.isLeaf?s.filter((function(e){return!e.inline})):s.slice():to;r(h,b,t.forChild(o,h),p),o=m}else for(var w=0;w<e.childCount;w++){var E=e.child(w);r(E,i,t.forChild(o,E),w),o+=E.nodeSize}}(this.node,this.innerDeco,(function(t,o,s){t.spec.marks?a.syncToMarks(t.spec.marks,r,e):t.type.side>=0&&!s&&a.syncToMarks(o==n.node.childCount?we.d.none:n.node.child(o).marks,r,e),a.placeWidget(t,e,i)}),(function(t,n,o,s){a.syncToMarks(t.marks,r,e),a.findNodeMatch(t,n,o,s)||a.updateNextNode(t,n,o,e,s)||a.addNode(t,n,o,e,i),i+=t.nodeSize})),a.syncToMarks(to,r,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||2==this.dirty)&&(o&&this.protectLocalComposition(e,o),function e(t,n,r){for(var i=t.firstChild,o=!1,a=0;a<n.length;a++){var s=n[a],c=s.dom;if(c.parentNode==t){for(;c!=i;)i=yo(i),o=!0;i=i.nextSibling}else o=!0,t.insertBefore(c,i);if(s instanceof io){var l=i?i.previousSibling:t.lastChild;e(s.contentDOM,s.children,r),i=l?l.nextSibling:t.firstChild}}for(;i;)i=yo(i),o=!0;o&&r.trackWrites==t&&(r.trackWrites=null)}(this.contentDOM,this.children,e),oi.ios&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){var t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom))}},{key:"localCompositionNode",value:function(e,t){var n=e.state.selection,r=n.from,i=n.to;if(!(!(e.state.selection instanceof Oe.h)||r<t||i>t+this.node.content.size)){var o=e.root.getSelection(),a=function(e,t){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0){if(e.childNodes.length>t&&3==e.childNodes[t].nodeType)return e.childNodes[t];e=e.childNodes[t-1],t=yi(e)}else{if(!(1==e.nodeType&&t<e.childNodes.length))return null;e=e.childNodes[t],t=0}}}(o.focusNode,o.focusOffset);if(a&&this.dom.contains(a.parentNode)){var s=a.nodeValue,c=function(e,t,n,r){for(var i=0,o=0;i<e.childCount&&o<=r;){var a=e.child(i++),s=o;if(o+=a.nodeSize,a.isText){for(var c=a.text;i<e.childCount;){var l=e.child(i++);if(o+=l.nodeSize,!l.isText)break;c+=l.text}if(o>=n){var u=c.lastIndexOf(t,r-s);if(u>=0&&u+t.length+s>=n)return s+u}}}return-1}(this.node.content,s,r-t,i-t);return c<0?null:{node:a,pos:c,text:s}}}}},{key:"protectLocalComposition",value:function(e,t){var n=t.node,r=t.pos,i=t.text;if(!this.getDesc(n)){for(var o=n;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=null)}var a=new ro(this,o,n,i);e.compositionNodes.push(a),this.children=Eo(this.children,r,r+i.length,e,a)}}},{key:"update",value:function(e,t,n,r){return!(3==this.dirty||!e.sameMarkup(this.node))&&(this.updateInner(e,t,n,r),!0)}},{key:"updateInner",value:function(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0}},{key:"updateOuterDeco",value:function(e){if(!go(e,this.outerDeco)){var t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=po(this.dom,this.nodeDOM,ho(this.outerDeco,this.node,t),ho(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=e}}},{key:"selectNode",value:function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)}},{key:"deselectNode",value:function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")}},{key:"size",get:function(){return this.node.nodeSize}},{key:"border",get:function(){return this.node.isLeaf?0:1}},{key:"domAtom",get:function(){return this.node.isAtom}}],[{key:"create",value:function(e,t,r,i,o,a){var s,c=o.nodeViews[t.type.name],l=c&&c(t,o,(function(){return s?s.parent?s.parent.posBeforeChild(s):void 0:a}),r),u=l&&l.dom,f=l&&l.contentDOM;if(t.isText)if(u){if(3!=u.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else u=document.createTextNode(t.text);else if(!u){var d=we.b.renderSpec(document,t.type.spec.toDOM(t));u=d.dom,f=d.contentDOM}f||t.isText||"BR"==u.nodeName||(u.hasAttribute("contenteditable")||(u.contentEditable=!1),t.type.spec.draggable&&(u.draggable=!0));var h=u;return u=mo(u,r,t),l?s=new lo(e,t,r,i,u,f,h,l,o,a+1):t.isText?new so(e,t,r,i,u,h,o):new n(e,t,r,i,u,f,h,o,a+1)}}]),n}(eo);function ao(e,t,n,r,i){return mo(r,t,e),new oo(null,e,t,n,r,r,r,i,0)}var so=function(e){Wi(n,e);var t=Gi(n);function n(e,r,i,o,a,s,c){return Zi(this,n),t.call(this,e,r,i,o,a,null,s,c)}return Yi(n,[{key:"parseRule",value:function(){for(var e=this.nodeDOM.parentNode;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}},{key:"update",value:function(e,t,n,r){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=0,!0)}},{key:"inParent",value:function(){for(var e=this.parent.contentDOM,t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}},{key:"domFromPos",value:function(e){return{node:this.nodeDOM,offset:e}}},{key:"localPosFromDOM",value:function(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):Ui(Xi(n.prototype),"localPosFromDOM",this).call(this,e,t,r)}},{key:"ignoreMutation",value:function(e){return"characterData"!=e.type&&"selection"!=e.type}},{key:"slice",value:function(e,t,r){var i=this.node.cut(e,t),o=document.createTextNode(i.text);return new n(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}},{key:"domAtom",get:function(){return!1}}]),n}(oo),co=function(e){Wi(n,e);var t=Gi(n);function n(){return Zi(this,n),t.apply(this,arguments)}return Yi(n,[{key:"parseRule",value:function(){return{ignore:!0}}},{key:"matchesHack",value:function(){return 0==this.dirty}},{key:"domAtom",get:function(){return!0}}]),n}(eo),lo=function(e){Wi(n,e);var t=Gi(n);function n(e,r,i,o,a,s,c,l,u,f){var d;return Zi(this,n),(d=t.call(this,e,r,i,o,a,s,c,u,f)).spec=l,d}return Yi(n,[{key:"update",value:function(e,t,r,i){if(3==this.dirty)return!1;if(this.spec.update){var o=this.spec.update(e,t);return o&&this.updateInner(e,t,r,i),o}return!(!this.contentDOM&&!e.isLeaf)&&Ui(Xi(n.prototype),"update",this).call(this,e,t,r,i)}},{key:"selectNode",value:function(){this.spec.selectNode?this.spec.selectNode():Ui(Xi(n.prototype),"selectNode",this).call(this)}},{key:"deselectNode",value:function(){this.spec.deselectNode?this.spec.deselectNode():Ui(Xi(n.prototype),"deselectNode",this).call(this)}},{key:"setSelection",value:function(e,t,r,i){this.spec.setSelection?this.spec.setSelection(e,t,r):Ui(Xi(n.prototype),"setSelection",this).call(this,e,t,r,i)}},{key:"destroy",value:function(){this.spec.destroy&&this.spec.destroy(),Ui(Xi(n.prototype),"destroy",this).call(this)}},{key:"stopEvent",value:function(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)}},{key:"ignoreMutation",value:function(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):Ui(Xi(n.prototype),"ignoreMutation",this).call(this,e)}}]),n}(oo);function uo(e){e&&(this.nodeName=e)}uo.prototype=Object.create(null);var fo=[new uo];function ho(e,t,n){if(0==e.length)return fo;for(var r=n?fo[0]:new uo,i=[r],o=0;o<e.length;o++){var a=e[o].type.attrs;if(a)for(var s in a.nodeName&&i.push(r=new uo(a.nodeName)),a){var c=a[s];null!=c&&(n&&1==i.length&&i.push(r=new uo(t.isInline?"span":"div")),"class"==s?r.class=(r.class?r.class+" ":"")+c:"style"==s?r.style=(r.style?r.style+";":"")+c:"nodeName"!=s&&(r[s]=c))}}return i}function po(e,t,n,r){if(n==fo&&r==fo)return t;for(var i=t,o=0;o<r.length;o++){var a=r[o],s=n[o];if(o){var c=void 0;s&&s.nodeName==a.nodeName&&i!=e&&(c=i.parentNode)&&c.tagName.toLowerCase()==a.nodeName||((c=document.createElement(a.nodeName)).pmIsDeco=!0,c.appendChild(i),s=fo[0]),i=c}vo(i,s||fo[0],a)}return i}function vo(e,t,n){for(var r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(var i in n)"class"!=i&&"style"!=i&&"nodeName"!=i&&n[i]!=t[i]&&e.setAttribute(i,n[i]);if(t.class!=n.class){for(var o=t.class?t.class.split(" "):to,a=n.class?n.class.split(" "):to,s=0;s<o.length;s++)-1==a.indexOf(o[s])&&e.classList.remove(o[s]);for(var c=0;c<a.length;c++)-1==o.indexOf(a[c])&&e.classList.add(a[c])}if(t.style!=n.style){if(t.style)for(var l,u=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;l=u.exec(t.style);)e.style.removeProperty(l[1]);n.style&&(e.style.cssText+=n.style)}}function mo(e,t,n){return po(e,e,fo,ho(t,n,1!=e.nodeType))}function go(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function yo(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}var bo=function(){function e(t,n){Zi(this,e),this.top=t,this.lock=n,this.index=0,this.stack=[],this.changed=!1;var r=function(e,t){for(var n=[],r=e.childCount,i=t.length-1;r>0&&i>=0;i--){var o=t[i],a=o.node;if(a){if(a!=e.child(r-1))break;n.push(o),--r}}return{nodes:n.reverse(),offset:r}}(t.node.content,t.children);this.preMatched=r.nodes,this.preMatchOffset=r.offset}return Yi(e,[{key:"getPreMatch",value:function(e){return e>=this.preMatchOffset?this.preMatched[e-this.preMatchOffset]:null}},{key:"destroyBetween",value:function(e,t){if(e!=t){for(var n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}}},{key:"destroyRest",value:function(){this.destroyBetween(this.index,this.top.children.length)}},{key:"syncToMarks",value:function(e,t,n){for(var r=0,i=this.stack.length>>1,o=Math.min(i,e.length);r<o&&(r==i-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&!1!==e[r].type.spec.spanning;)r++;for(;r<i;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);for(var a=-1,s=this.index;s<Math.min(this.index+3,this.top.children.length);s++)if(this.top.children[s].matchesMark(e[i])){a=s;break}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{var c=io.create(this.top,e[i],t,n);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,i++}}},{key:"findNodeMatch",value:function(e,t,n,r){var i=-1,o=r<0?void 0:this.getPreMatch(r),a=this.top.children;if(o&&o.matchesNode(e,t,n))i=a.indexOf(o);else for(var s=this.index,c=Math.min(a.length,s+5);s<c;s++){var l=a[s];if(l.matchesNode(e,t,n)&&this.preMatched.indexOf(l)<0){i=s;break}}return!(i<0)&&(this.destroyBetween(this.index,i),this.index++,!0)}},{key:"updateNextNode",value:function(e,t,n,r,i){for(var o=this.index;o<this.top.children.length;o++){var a=this.top.children[o];if(a instanceof oo){var s=this.preMatched.indexOf(a);if(s>-1&&s+this.preMatchOffset!=i)return!1;var c=a.dom;if((!this.lock||!(c==this.lock||1==c.nodeType&&c.contains(this.lock.parentNode))||e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&3!=a.dirty&&go(t,a.outerDeco))&&a.update(e,t,n,r))return this.destroyBetween(this.index,o),a.dom!=c&&(this.changed=!0),this.index++,!0;break}}return!1}},{key:"addNode",value:function(e,t,n,r,i){this.top.children.splice(this.index++,0,oo.create(this.top,e,t,n,r,i)),this.changed=!0}},{key:"placeWidget",value:function(e,t,n){var r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(e)||e!=r.widget&&r.widget.type.toDOM.parentNode){var i=new no(this.top,e,t,n);this.top.children.splice(this.index++,0,i),this.changed=!0}else this.index++}},{key:"addTextblockHacks",value:function(){for(var e=this.top.children[this.index-1];e instanceof io;)e=e.children[e.children.length-1];if(!e||!(e instanceof so)||/\n$/.test(e.node.text))if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack())this.index++;else{var t=document.createElement("br");this.top.children.splice(this.index++,0,new co(this.top,to,t,null)),this.changed=!0}}}]),e}();function wo(e,t){return e.type.side-t.type.side}function Eo(e,t,n,r,i){for(var o=[],a=0,s=0;a<e.length;a++){var c=e[a],l=s,u=s+=c.size;l>=n||u<=t?o.push(c):(l<t&&o.push(c.slice(0,t-l,r)),i&&(o.push(i),i=null),u>n&&o.push(c.slice(n-l,c.size,r)))}return o}function ko(e,t){var n=e.root.getSelection(),r=e.state.doc;if(!n.focusNode)return null;var i=e.docView.nearestDesc(n.focusNode),o=i&&0==i.size,a=e.docView.posFromDOM(n.focusNode,n.focusOffset);if(a<0)return null;var s,c,l=r.resolve(a);if(wi(n)){for(s=l;i&&!i.node;)i=i.parent;if(i&&i.node.isAtom&&Oe.c.isSelectable(i.node)&&i.parent&&(!i.node.isInline||!function(e,t,n){for(var r=0==t,i=t==yi(e);r||i;){if(e==n)return!0;var o=fi(e);if(!(e=e.parentNode))return!1;r=r&&0==o,i=i&&o==yi(e)}}(n.focusNode,n.focusOffset,i.dom))){var u=i.posBefore;c=new Oe.c(a==u?l:r.resolve(u))}}else{var f=e.docView.posFromDOM(n.anchorNode,n.anchorOffset);if(f<0)return null;s=r.resolve(f)}return c||(c=To(e,s,l,"pointer"==t||e.state.selection.head<l.pos&&!o?1:-1)),c}function Oo(e){return e.editable?e.hasFocus():Do(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function _o(e,t){var n=e.state.selection;if(Co(e,n),Oo(e)){if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){var t=e.root.getSelection(),n=document.createRange(),r=e.cursorWrapper.dom,i="IMG"==r.nodeName;i?n.setEnd(r.parentNode,fi(r)+1):n.setEnd(r,0),n.collapse(!1),t.removeAllRanges(),t.addRange(n),!i&&!e.state.selection.visible&&oi.ie&&oi.ie_version<=11&&(r.disabled=!0,r.disabled=!1)}(e);else{var r,i,o=n.anchor,a=n.head;!xo||n instanceof Oe.h||(n.$from.parent.inlineContent||(r=So(e,n.from)),n.empty||n.$from.parent.inlineContent||(i=So(e,n.to))),e.docView.setSelection(o,a,e.root,t),xo&&(r&&Mo(r),i&&Mo(i)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){var t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.hideSelectionGuard);var n=e.root.getSelection(),r=n.anchorNode,i=n.anchorOffset;t.addEventListener("selectionchange",e.hideSelectionGuard=function(){n.anchorNode==r&&n.anchorOffset==i||(t.removeEventListener("selectionchange",e.hideSelectionGuard),setTimeout((function(){Oo(e)&&!e.state.selection.visible||e.dom.classList.remove("ProseMirror-hideselection")}),20))})}(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}var xo=oi.safari||oi.chrome&&oi.chrome_version<63;function So(e,t){var n=e.docView.domFromPos(t,0),r=n.node,i=n.offset,o=i<r.childNodes.length?r.childNodes[i]:null,a=i?r.childNodes[i-1]:null;if(oi.safari&&o&&"false"==o.contentEditable)return No(o);if(!(o&&"false"!=o.contentEditable||a&&"false"!=a.contentEditable)){if(o)return No(o);if(a)return No(a)}}function No(e){return e.contentEditable="true",oi.safari&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function Mo(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function Co(e,t){if(t instanceof Oe.c){var n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(Ao(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else Ao(e)}function Ao(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=null)}function To(e,t,n,r){return e.someProp("createSelectionBetween",(function(r){return r(e,t,n)}))||Oe.h.between(t,n,r)}function Do(e){var t=e.root.getSelection();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(e){return!1}}function Io(e,t){var n=e.selection,r=n.$anchor,i=n.$head,o=t>0?r.max(i):r.min(i),a=o.parent.inlineContent?o.depth?e.doc.resolve(t>0?o.after():o.before()):null:o;return a&&Oe.f.findFrom(a,t)}function Ro(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function Lo(e,t,n){var r=e.state.selection;if(!(r instanceof Oe.h)){if(r instanceof Oe.c&&r.node.isInline)return Ro(e,new Oe.h(t>0?r.$to:r.$from));var i=Io(e.state,t);return!!i&&Ro(e,i)}if(!r.empty||n.indexOf("s")>-1)return!1;if(e.endOfTextblock(t>0?"right":"left")){var o=Io(e.state,t);return!!(o&&o instanceof Oe.c)&&Ro(e,o)}if(!(oi.mac&&n.indexOf("m")>-1)){var a,s=r.$head,c=s.textOffset?null:t<0?s.nodeBefore:s.nodeAfter;if(!c||c.isText)return!1;var l=t<0?s.pos-c.nodeSize:s.pos;return!!(c.isAtom||(a=e.docView.descAt(l))&&!a.contentDOM)&&(Oe.c.isSelectable(c)?Ro(e,new Oe.c(t<0?e.state.doc.resolve(s.pos-c.nodeSize):s)):!!oi.webkit&&Ro(e,new Oe.h(e.state.doc.resolve(t<0?l:l+c.nodeSize))))}}function Po(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function Bo(e){var t=e.pmViewDesc;return t&&0==t.size&&(e.nextSibling||"BR"!=e.nodeName)}function $o(e){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n){var i,o,a=!1;for(oi.gecko&&1==n.nodeType&&r<Po(n)&&Bo(n.childNodes[r])&&(a=!0);;)if(r>0){if(1!=n.nodeType)break;var s=n.childNodes[r-1];if(Bo(s))i=n,o=--r;else{if(3!=s.nodeType)break;r=(n=s).nodeValue.length}}else{if(zo(n))break;for(var c=n.previousSibling;c&&Bo(c);)i=n.parentNode,o=fi(c),c=c.previousSibling;if(c)r=Po(n=c);else{if((n=n.parentNode)==e.dom)break;r=0}}a?Fo(e,t,n,r):i&&Fo(e,t,i,o)}}function jo(e){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n){for(var i,o,a=Po(n);;)if(r<a){if(1!=n.nodeType)break;if(!Bo(n.childNodes[r]))break;i=n,o=++r}else{if(zo(n))break;for(var s=n.nextSibling;s&&Bo(s);)i=s.parentNode,o=fi(s)+1,s=s.nextSibling;if(s)r=0,a=Po(n=s);else{if((n=n.parentNode)==e.dom)break;r=a=0}}i&&Fo(e,t,i,o)}}function zo(e){var t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function Fo(e,t,n,r){if(wi(t)){var i=document.createRange();i.setEnd(n,r),i.setStart(n,r),t.removeAllRanges(),t.addRange(i)}else t.extend&&t.extend(n,r);e.domObserver.setCurSelection();var o=e.state;setTimeout((function(){e.state==o&&_o(e)}),50)}function Ho(e,t,n){var r=e.state.selection;if(r instanceof Oe.h&&!r.empty||n.indexOf("s")>-1)return!1;if(oi.mac&&n.indexOf("m")>-1)return!1;var i=r.$from,o=r.$to;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){var a=Io(e.state,t);if(a&&a instanceof Oe.c)return Ro(e,a)}if(!i.parent.inlineContent){var s=t<0?i:o,c=r instanceof Oe.a?Oe.f.near(s,t):Oe.f.findFrom(s,t);return!!c&&Ro(e,c)}return!1}function Uo(e,t){if(!(e.state.selection instanceof Oe.h))return!0;var n=e.state.selection,r=n.$head,i=n.$anchor,o=n.empty;if(!r.sameParent(i))return!0;if(!o)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;var a=!r.textOffset&&(t<0?r.nodeBefore:r.nodeAfter);if(a&&!a.isText){var s=e.state.tr;return t<0?s.delete(r.pos-a.nodeSize,r.pos):s.delete(r.pos,r.pos+a.nodeSize),e.dispatch(s),!0}return!1}function Ko(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function Wo(e,t){var n=t.keyCode,r=function(e){var t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}(t);return 8==n||oi.mac&&72==n&&"c"==r?Uo(e,-1)||$o(e):46==n||oi.mac&&68==n&&"c"==r?Uo(e,1)||jo(e):13==n||27==n||(37==n?Lo(e,-1,r)||$o(e):39==n?Lo(e,1,r)||jo(e):38==n?Ho(e,-1,r)||$o(e):40==n?function(e){if(oi.safari&&!(e.state.selection.$head.parentOffset>0)){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n&&1==n.nodeType&&0==r&&n.firstChild&&"false"==n.firstChild.contentEditable){var i=n.firstChild;Ko(e,i,!0),setTimeout((function(){return Ko(e,i,!1)}),20)}}}(e)||Ho(e,1,r)||jo(e):r==(oi.mac?"m":"c")&&(66==n||73==n||89==n||90==n))}function Vo(e){var t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(oi.safari&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}if(e.parentNode.lastChild==e||oi.safari&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0}}function Go(e,t,n,r,i){if(t<0){var o=e.lastSelectionTime>Date.now()-50?e.lastSelectionOrigin:null,a=ko(e,o);if(a&&!e.state.selection.eq(a)){var s=e.state.tr.setSelection(a);"pointer"==o?s.setMeta("pointer",!0):"key"==o&&s.scrollIntoView(),e.dispatch(s)}}else{var c=e.state.doc.resolve(t),l=c.sharedDepth(n);t=c.before(l+1),n=e.state.doc.resolve(n).after(l+1);var u=e.state.selection,f=function(e,t,n){var r=e.docView.parseRange(t,n),i=r.node,o=r.fromOffset,a=r.toOffset,s=r.from,c=r.to,l=e.root.getSelection(),u=null,f=l.anchorNode;if(f&&e.dom.contains(1==f.nodeType?f:f.parentNode)&&(u=[{node:f,offset:l.anchorOffset}],wi(l)||u.push({node:l.focusNode,offset:l.focusOffset})),oi.chrome&&8===e.lastKeyCode)for(var d=a;d>o;d--){var h=i.childNodes[d-1],p=h.pmViewDesc;if("BR"==h.nodeType&&!p){a=d;break}if(!p||p.size)break}var v=e.state.doc,m=e.someProp("domParser")||we.a.fromSchema(e.state.schema),g=v.resolve(s),y=null,b=m.parse(i,{topNode:g.parent,topMatch:g.parent.contentMatchAt(g.index()),topOpen:!0,from:o,to:a,preserveWhitespace:!g.parent.type.spec.code||"full",editableContent:!0,findPositions:u,ruleFromNode:Vo,context:g});if(u&&null!=u[0].pos){var w=u[0].pos,E=u[1]&&u[1].pos;null==E&&(E=w),y={anchor:w+s,head:E+s}}return{doc:b,sel:y,from:s,to:c}}(e,t,n);if(oi.chrome&&e.cursorWrapper&&f.sel&&f.sel.anchor==e.cursorWrapper.deco.from){var d=e.cursorWrapper.deco.type.toDOM.nextSibling,h=d&&d.nodeValue?d.nodeValue.length:1;f.sel={anchor:f.sel.anchor+h,head:f.sel.anchor+h}}var p,v,m=e.state.doc,g=m.slice(f.from,f.to);8===e.lastKeyCode&&Date.now()-100<e.lastKeyCodeTime?(p=e.state.selection.to,v="end"):(p=e.state.selection.from,v="start"),e.lastKeyCode=null;var y=function(e,t,n,r,i){var o=e.findDiffStart(t,n);if(null==o)return null;var a=e.findDiffEnd(t,n+e.size,n+t.size),s=a.a,c=a.b;if("end"==i){var l=Math.max(0,o-Math.min(s,c));r-=s+l-o}return s<o&&e.size<t.size?(c=(o-=r<=o&&r>=s?o-r:0)+(c-s),s=o):c<o&&(s=(o-=r<=o&&r>=c?o-r:0)+(s-c),c=o),{start:o,endA:s,endB:c}}(g.content,f.doc.content,f.from,p,v);if(!y){if(!(r&&u instanceof Oe.h&&!u.empty&&u.$head.sameParent(u.$anchor))||e.composing||f.sel&&f.sel.anchor!=f.sel.head){if(oi.ios&&e.lastIOSEnter>Date.now()-225&&i.some((function(e){return"DIV"==e.nodeName||"P"==e.nodeName}))&&e.someProp("handleKeyDown",(function(t){return t(e,Ei(13,"Enter"))})))return void(e.lastIOSEnter=0);if(f.sel){var b=qo(e,e.state.doc,f.sel);b&&!b.eq(e.state.selection)&&e.dispatch(e.state.tr.setSelection(b))}return}y={start:u.from,endA:u.to,endB:u.to}}e.domChangeCount++,e.state.selection.from<e.state.selection.to&&y.start==y.endB&&e.state.selection instanceof Oe.h&&(y.start>e.state.selection.from&&y.start<=e.state.selection.from+2?y.start=e.state.selection.from:y.endA<e.state.selection.to&&y.endA>=e.state.selection.to-2&&(y.endB+=e.state.selection.to-y.endA,y.endA=e.state.selection.to)),oi.ie&&oi.ie_version<=11&&y.endB==y.start+1&&y.endA==y.start&&y.start>f.from&&"  "==f.doc.textBetween(y.start-f.from-1,y.start-f.from+1)&&(y.start--,y.endA--,y.endB--);var w,E=f.doc.resolveNoCache(y.start-f.from),k=f.doc.resolveNoCache(y.endB-f.from),O=E.sameParent(k)&&E.parent.inlineContent;if((oi.ios&&e.lastIOSEnter>Date.now()-225&&(!O||i.some((function(e){return"DIV"==e.nodeName||"P"==e.nodeName})))||!O&&E.pos<f.doc.content.size&&(w=Oe.f.findFrom(f.doc.resolve(E.pos+1),1,!0))&&w.head==k.pos)&&e.someProp("handleKeyDown",(function(t){return t(e,Ei(13,"Enter"))})))e.lastIOSEnter=0;else if(e.state.selection.anchor>y.start&&function(e,t,n,r,i){if(!r.parent.isTextblock||n-t<=i.pos-r.pos||Jo(r,!0,!1)<i.pos)return!1;var o=e.resolve(t);if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;var a=e.resolve(Jo(o,!0,!0));return!(!a.parent.isTextblock||a.pos>n||Jo(a,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(a.parent.content)}(m,y.start,y.endA,E,k)&&e.someProp("handleKeyDown",(function(t){return t(e,Ei(8,"Backspace"))})))oi.android&&oi.chrome&&e.domObserver.suppressSelectionUpdates();else{oi.android&&!O&&E.start()!=k.start()&&0==k.parentOffset&&E.depth==k.depth&&f.sel&&f.sel.anchor==f.sel.head&&f.sel.head==y.endA&&(y.endB-=2,k=f.doc.resolveNoCache(y.endB-f.from),setTimeout((function(){e.someProp("handleKeyDown",(function(t){return t(e,Ei(13,"Enter"))}))}),20));var _,x,S,N,M=y.start,C=y.endA;if(O)if(E.pos==k.pos)oi.ie&&oi.ie_version<=11&&0==E.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout((function(){return _o(e)}),20)),_=e.state.tr.delete(M,C),x=m.resolve(y.start).marksAcross(m.resolve(y.endA));else if(y.endA==y.endB&&(N=m.resolve(y.start))&&(S=function(e,t){for(var n,r,i,o=e.firstChild.marks,a=t.firstChild.marks,s=o,c=a,l=0;l<a.length;l++)s=a[l].removeFromSet(s);for(var u=0;u<o.length;u++)c=o[u].removeFromSet(c);if(1==s.length&&0==c.length)r=s[0],n="add",i=function(e){return e.mark(r.addToSet(e.marks))};else{if(0!=s.length||1!=c.length)return null;r=c[0],n="remove",i=function(e){return e.mark(r.removeFromSet(e.marks))}}for(var f=[],d=0;d<t.childCount;d++)f.push(i(t.child(d)));if(we.c.from(f).eq(e))return{mark:r,type:n}}(E.parent.content.cut(E.parentOffset,k.parentOffset),N.parent.content.cut(N.parentOffset,y.endA-N.start()))))_=e.state.tr,"add"==S.type?_.addMark(M,C,S.mark):_.removeMark(M,C,S.mark);else if(E.parent.child(E.index()).isText&&E.index()==k.index()-(k.textOffset?0:1)){var A=E.parent.textBetween(E.parentOffset,k.parentOffset);if(e.someProp("handleTextInput",(function(t){return t(e,M,C,A)})))return;_=e.state.tr.insertText(A,M,C)}if(_||(_=e.state.tr.replace(M,C,f.doc.slice(y.start-f.from,y.endB-f.from))),f.sel){var T=qo(e,_.doc,f.sel);T&&!(oi.chrome&&oi.android&&e.composing&&T.empty&&(T.head==M||T.head==_.mapping.map(C)-1)||oi.ie&&T.empty&&T.head==M)&&_.setSelection(T)}x&&_.ensureMarks(x),e.dispatch(_.scrollIntoView())}}}function qo(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:To(e,t.resolve(n.anchor),t.resolve(n.head))}function Jo(e,t,n){for(var r=e.depth,i=t?e.end():e.pos;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,i++,t=!1;if(n)for(var o=e.node(r).maybeChild(e.indexAfter(r));o&&!o.isLeaf;)o=o.firstChild,i++;return i}function Xo(e){return(Xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zo(e,t){for(var n=[],r=t.content,i=t.openStart,o=t.openEnd;i>1&&o>1&&1==r.childCount&&1==r.firstChild.childCount;){i--,o--;var a=r.firstChild;n.push(a.type.name,a.attrs!=a.type.defaultAttrs?a.attrs:null),r=a.content}var s=e.someProp("clipboardSerializer")||we.b.fromSchema(e.state.schema),c=ra(),l=c.createElement("div");l.appendChild(s.serializeFragment(r,{document:c}));for(var u,f=l.firstChild;f&&1==f.nodeType&&(u=ta[f.nodeName.toLowerCase()]);){for(var d=u.length-1;d>=0;d--){for(var h=c.createElement(u[d]);l.firstChild;)h.appendChild(l.firstChild);l.appendChild(h)}f=l.firstChild}return f&&1==f.nodeType&&f.setAttribute("data-pm-slice","".concat(i," ").concat(o," ").concat(JSON.stringify(n))),{dom:l,text:e.someProp("clipboardTextSerializer",(function(e){return e(t)}))||t.content.textBetween(0,t.content.size,"\n\n")}}function Qo(e,t,n,r,i){var o,a,s=i.parent.type.spec.code;if(!n&&!t)return null;var c=t&&(r||s||!n);if(c){if(e.someProp("transformPastedText",(function(e){t=e(t,s||r)})),s)return new we.i(we.c.from(e.state.schema.text(t)),0,0);var l=e.someProp("clipboardTextParser",(function(e){return e(t,i,r)}));l?a=l:(o=document.createElement("div"),t.trim().split(/(?:\r\n?|\n)+/).forEach((function(e){o.appendChild(document.createElement("p")).textContent=e})))}else e.someProp("transformPastedHTML",(function(e){n=e(n)})),o=function(e){var t=/(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var n,r=ra().createElement("div"),i=/(?:<meta [^>]*>)*<([a-z][^>\s]+)/i.exec(e),o=0;(n=i&&ta[i[1].toLowerCase()])&&(e=n.map((function(e){return"<"+e+">"})).join("")+e+n.map((function(e){return"</"+e+">"})).reverse().join(""),o=n.length),r.innerHTML=e;for(var a=0;a<o;a++)r=r.firstChild;return r}(n);var u=o&&o.querySelector("[data-pm-slice]"),f=u&&/^(\d+) (\d+) (.*)/.exec(u.getAttribute("data-pm-slice"));if(!a){var d=e.someProp("clipboardParser")||e.someProp("domParser")||we.a.fromSchema(e.state.schema);a=d.parseSlice(o,{preserveWhitespace:!(!c&&!f),context:i})}return a=f?function(e,t){if(!e.size)return e;var n,r=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(t){return e}for(var i=e.content,o=e.openStart,a=e.openEnd,s=n.length-2;s>=0;s-=2){var c=r.nodes[n[s]];if(!c||c.hasRequiredAttrs())break;i=we.c.from(c.create(n[s+1],i)),o++,a++}return new we.i(i,o,a)}(function(e,t,n){return t<e.openStart&&(e=new we.i(ea(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new we.i(ea(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}(a,+f[1],+f[2]),f[3]):we.i.maxOpen(function(e,t){if(e.childCount<2)return e;for(var n=function(n){var r=t.node(n).contentMatchAt(t.index(n)),i=void 0,o=[];if(e.forEach((function(e){if(o){var t,n=r.findWrapping(e.type);if(!n)return o=null;if(t=o.length&&i.length&&function e(t,n,r,i,o){if(o<t.length&&o<n.length&&t[o]==n[o]){var a=e(t,n,r,i.lastChild,o+1);if(a)return i.copy(i.content.replaceChild(i.childCount-1,a));if(i.contentMatchAt(i.childCount).matchType(o==t.length-1?r.type:t[o+1]))return i.copy(i.content.append(we.c.from(Yo(r,t,o+1))))}}(n,i,e,o[o.length-1],0))o[o.length-1]=t;else{o.length&&(o[o.length-1]=function e(t,n){if(0==n)return t;var r=t.content.replaceChild(t.childCount-1,e(t.lastChild,n-1)),i=t.contentMatchAt(t.childCount).fillBefore(we.c.empty,!0);return t.copy(r.append(i))}(o[o.length-1],i.length));var a=Yo(e,n);o.push(a),r=r.matchType(a.type,a.attrs),i=n}}})),o)return{v:we.c.from(o)}},r=t.depth;r>=0;r--){var i=n(r);if("object"===Xo(i))return i.v}return e}(a.content,i),!1),e.someProp("transformPasted",(function(e){a=e(a)})),a}function Yo(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t.length-1;r>=n;r--)e=t[r].create(null,we.c.from(e));return e}function ea(e,t,n,r,i,o){var a=t<0?e.firstChild:e.lastChild,s=a.content;return i<r-1&&(s=ea(s,t,n,r,i+1,o)),i>=n&&(s=t<0?a.contentMatchAt(0).fillBefore(s,e.childCount>1||o<=i).append(s):s.append(a.contentMatchAt(a.childCount).fillBefore(we.c.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,a.copy(s))}var ta={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},na=null;function ra(){return na||(na=document.implementation.createHTMLDocument("title"))}function ia(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return oa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oa(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function aa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ca(e,t,n){return t&&sa(e.prototype,t),n&&sa(e,n),e}var la={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},ua=oi.ie&&oi.ie_version<=11,fa=function(){function e(){aa(this,e),this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null}return ca(e,[{key:"set",value:function(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}},{key:"eq",value:function(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}]),e}(),da=function(){function e(t,n){var r=this;aa(this,e),this.view=t,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver((function(e){for(var t=0;t<e.length;t++)r.queue.push(e[t]);oi.ie&&oi.ie_version<=11&&e.some((function(e){return"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length}))?r.flushSoon():r.flush()})),this.currentSelection=new fa,ua&&(this.onCharData=function(e){r.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),r.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1}return ca(e,[{key:"flushSoon",value:function(){var e=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){e.flushingSoon=-1,e.flush()}),20))}},{key:"forceFlush",value:function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}},{key:"start",value:function(){this.observer&&this.observer.observe(this.view.dom,la),ua&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}},{key:"stop",value:function(){var e=this;if(this.observer){var t=this.observer.takeRecords();if(t.length){for(var n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout((function(){return e.flush()}),20)}this.observer.disconnect()}ua&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}},{key:"connectSelection",value:function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}},{key:"disconnectSelection",value:function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}},{key:"suppressSelectionUpdates",value:function(){var e=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return e.suppressingSelectionUpdates=!1}),50)}},{key:"onSelectionChange",value:function(){if((!(e=this.view).editable||e.root.activeElement==e.dom)&&Do(e)){var e;if(this.suppressingSelectionUpdates)return _o(this.view);if(oi.ie&&oi.ie_version<=11&&!this.view.state.selection.empty){var t=this.view.root.getSelection();if(t.focusNode&&vi(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}},{key:"setCurSelection",value:function(){this.currentSelection.set(this.view.root.getSelection())}},{key:"ignoreSelectionChange",value:function(e){if(0==e.rangeCount)return!0;var t=e.getRangeAt(0).commonAncestorContainer,n=this.view.docView.nearestDesc(t);return n&&n.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0}},{key:"flush",value:function(){if(this.view.docView&&!(this.flushingSoon>-1)){var e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);var t=this.view.root.getSelection(),n=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(t)&&Do(this.view)&&!this.ignoreSelectionChange(t),r=-1,i=-1,o=!1,a=[];if(this.view.editable)for(var s=0;s<e.length;s++){var c=this.registerMutation(e[s],a);c&&(r=r<0?c.from:Math.min(c.from,r),i=i<0?c.to:Math.max(c.to,i),c.typeOver&&(o=!0))}if(oi.gecko&&a.length>1){var l=a.filter((function(e){return"BR"==e.nodeName}));if(2==l.length){var u=ia(l,2),f=u[0],d=u[1];f.parentNode&&f.parentNode.parentNode==d.parentNode?d.remove():f.remove()}}(r>-1||n)&&(r>-1&&(this.view.docView.markDirty(r,i),function(e){ha||(ha=!0,getComputedStyle(e.dom).whiteSpace)}(this.view)),this.handleDOMChange(r,i,o,a),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(t)||_o(this.view),this.currentSelection.set(t))}}},{key:"registerMutation",value:function(e,t){if(t.indexOf(e.target)>-1)return null;var n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(e))return null;if("childList"==e.type){var r=e.previousSibling,i=e.nextSibling;if(oi.ie&&oi.ie_version<=11&&e.addedNodes.length)for(var o=0;o<e.addedNodes.length;o++){var a=e.addedNodes[o],s=a.previousSibling,c=a.nextSibling;(!s||Array.prototype.indexOf.call(e.addedNodes,s)<0)&&(r=s),(!c||Array.prototype.indexOf.call(e.addedNodes,c)<0)&&(i=c)}for(var l=r&&r.parentNode==e.target?fi(r)+1:0,u=n.localPosFromDOM(e.target,l,-1),f=i&&i.parentNode==e.target?fi(i):e.target.childNodes.length,d=0;d<e.addedNodes.length;d++)t.push(e.addedNodes[d]);return{from:u,to:n.localPosFromDOM(e.target,f,1)}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}]),e}(),ha=!1;function pa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function va(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ma(e){return(ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ga={},ya={};function ba(e,t){e.lastSelectionOrigin=t,e.lastSelectionTime=Date.now()}function wa(e){e.someProp("handleDOMEvents",(function(t){for(var n in t)e.eventHandlers[n]||e.dom.addEventListener(n,e.eventHandlers[n]=function(t){return Ea(e,t)})}))}function Ea(e,t){return e.someProp("handleDOMEvents",(function(n){var r=n[t.type];return!!r&&(r(e,t)||t.defaultPrevented)}))}function ka(e){return{left:e.clientX,top:e.clientY}}function Oa(e,t,n,r,i){if(-1==r)return!1;for(var o=e.state.doc.resolve(r),a=function(r){if(e.someProp(t,(function(t){return r>o.depth?t(e,n,o.nodeAfter,o.before(r),i,!0):t(e,n,o.node(r),o.before(r),i,!1)})))return{v:!0}},s=o.depth+1;s>0;s--){var c=a(s);if("object"===ma(c))return c.v}return!1}function _a(e,t,n){e.focused||e.focus();var r=e.state.tr.setSelection(t);"pointer"==n&&r.setMeta("pointer",!0),e.dispatch(r)}function xa(e,t,n,r,i){return Oa(e,"handleClickOn",t,n,r)||e.someProp("handleClick",(function(n){return n(e,t,r)}))||(i?function(e,t){if(-1==t)return!1;var n,r,i=e.state.selection;i instanceof Oe.c&&(n=i.node);for(var o=e.state.doc.resolve(t),a=o.depth+1;a>0;a--){var s=a>o.depth?o.nodeAfter:o.node(a);if(Oe.c.isSelectable(s)){r=n&&i.$from.depth>0&&a>=i.$from.depth&&o.before(i.$from.depth+1)==i.$from.pos?o.before(i.$from.depth):o.before(a);break}}return null!=r&&(_a(e,Oe.c.create(e.state.doc,r),"pointer"),!0)}(e,n):function(e,t){if(-1==t)return!1;var n=e.state.doc.resolve(t),r=n.nodeAfter;return!!(r&&r.isAtom&&Oe.c.isSelectable(r))&&(_a(e,new Oe.c(n),"pointer"),!0)}(e,n))}function Sa(e,t,n,r){return Oa(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",(function(n){return n(e,t,r)}))}function Na(e,t,n,r){return Oa(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",(function(n){return n(e,t,r)}))||function(e,t){var n=e.state.doc;if(-1==t)return!!n.inlineContent&&(_a(e,Oe.h.create(n,0,n.content.size),"pointer"),!0);for(var r=n.resolve(t),i=r.depth+1;i>0;i--){var o=i>r.depth?r.nodeAfter:r.node(i),a=r.before(i);if(o.inlineContent)_a(e,Oe.h.create(n,a+1,a+1+o.content.size),"pointer");else{if(!Oe.c.isSelectable(o))continue;_a(e,Oe.c.create(n,a),"pointer")}return!0}}(e,n)}function Ma(e){return La(e)}ya.keydown=function(e,t){if(e.shiftKey=16==t.keyCode||t.shiftKey,!Ta(e,t))if(e.domObserver.forceFlush(),e.lastKeyCode=t.keyCode,e.lastKeyCodeTime=Date.now(),!oi.ios||13!=t.keyCode||t.ctrlKey||t.altKey||t.metaKey)e.someProp("handleKeyDown",(function(n){return n(e,t)}))||Wo(e,t)?t.preventDefault():ba(e,"key");else{var n=Date.now();e.lastIOSEnter=n,e.lastIOSEnterFallbackTimeout=setTimeout((function(){e.lastIOSEnter==n&&(e.someProp("handleKeyDown",(function(t){return t(e,Ei(13,"Enter"))})),e.lastIOSEnter=0)}),200)}},ya.keyup=function(e,t){16==t.keyCode&&(e.shiftKey=!1)},ya.keypress=function(e,t){if(!(Ta(e,t)||!t.charCode||t.ctrlKey&&!t.altKey||oi.mac&&t.metaKey))if(e.someProp("handleKeyPress",(function(n){return n(e,t)})))t.preventDefault();else{var n=e.state.selection;if(!(n instanceof Oe.h&&n.$from.sameParent(n.$to))){var r=String.fromCharCode(t.charCode);e.someProp("handleTextInput",(function(t){return t(e,n.$from.pos,n.$to.pos,r)}))||e.dispatch(e.state.tr.insertText(r).scrollIntoView()),t.preventDefault()}}};var Ca=oi.mac?"metaKey":"ctrlKey";ga.mousedown=function(e,t){e.shiftKey=t.shiftKey;var n=Ma(e),r=Date.now(),i="singleClick";r-e.lastClick.time<500&&function(e,t){var n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}(t,e.lastClick)&&!t[Ca]&&("singleClick"==e.lastClick.type?i="doubleClick":"doubleClick"==e.lastClick.type&&(i="tripleClick")),e.lastClick={time:r,x:t.clientX,y:t.clientY,type:i};var o=e.posAtCoords(ka(t));o&&("singleClick"==i?e.mouseDown=new Aa(e,o,t,n):("doubleClick"==i?Sa:Na)(e,o.pos,o.inside,t)?t.preventDefault():ba(e,"pointer"))};var Aa=function(){function e(t,n,r,i){var o,a,s=this;if(pa(this,e),this.view=t,this.startDoc=t.state.doc,this.pos=n,this.event=r,this.flushed=i,this.selectNode=r[Ca],this.allowDefault=r.shiftKey,n.inside>-1)o=t.state.doc.nodeAt(n.inside),a=n.inside;else{var c=t.state.doc.resolve(n.pos);o=c.parent,a=c.depth?c.before():0}this.mightDrag=null;var l=i?null:r.target,u=l?t.docView.nearestDesc(l,!0):null;this.target=u?u.dom:null,(o.type.spec.draggable&&!1!==o.type.spec.selectable||t.state.selection instanceof Oe.c&&a==t.state.selection.from)&&(this.mightDrag={node:o,pos:a,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&oi.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){return s.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),ba(t,"pointer")}var t,n,r;return t=e,(n=[{key:"done",value:function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null}},{key:"up",value:function(e){if(this.done(),this.view.dom.contains(3==e.target.nodeType?e.target.parentNode:e.target)){var t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(ka(e))),this.allowDefault||!t?ba(this.view,"pointer"):xa(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():this.flushed||oi.safari&&this.mightDrag&&!this.mightDrag.node.isAtom||oi.chrome&&!(this.view.state.selection instanceof Oe.h)&&(t.pos==this.view.state.selection.from||t.pos==this.view.state.selection.to)?(_a(this.view,Oe.f.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):ba(this.view,"pointer")}}},{key:"move",value:function(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0),ba(this.view,"pointer")}}])&&va(t.prototype,n),r&&va(t,r),e}();function Ta(e,t){return!!e.composing||!!(oi.safari&&Math.abs(t.timeStamp-e.compositionEndedAt)<500)&&(e.compositionEndedAt=-2e8,!0)}ga.touchdown=function(e){Ma(e),ba(e,"pointer")},ga.contextmenu=function(e){return Ma(e)};var Da=oi.android?5e3:-1;function Ia(e,t){clearTimeout(e.composingTimeout),t>-1&&(e.composingTimeout=setTimeout((function(){return La(e)}),t))}function Ra(e){for(e.composing=!1;e.compositionNodes.length>0;)e.compositionNodes.pop().markParentsDirty()}function La(e,t){if(e.domObserver.forceFlush(),Ra(e),t||e.docView.dirty){var n=ko(e);return n&&!n.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(n)):e.updateState(e.state),!0}return!1}ya.compositionstart=ya.compositionupdate=function(e){if(!e.composing){e.domObserver.flush();var t=e.state,n=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((function(e){return!1===e.type.spec.inclusive}))))e.markCursor=e.state.storedMarks||n.marks(),La(e,!0),e.markCursor=null;else if(La(e),oi.gecko&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var r=e.root.getSelection(),i=r.focusNode,o=r.focusOffset;i&&1==i.nodeType&&0!=o;){var a=o<0?i.lastChild:i.childNodes[o-1];if(!a)break;if(3==a.nodeType){r.collapse(a,a.nodeValue.length);break}i=a,o=-1}e.composing=!0}Ia(e,Da)},ya.compositionend=function(e,t){e.composing&&(e.composing=!1,e.compositionEndedAt=t.timeStamp,Ia(e,20))};var Pa=oi.ie&&oi.ie_version<15||oi.ios&&oi.webkit_version<604;function Ba(e,t,n,r){var i=Qo(e,t,n,e.shiftKey,e.state.selection.$from);if(e.someProp("handlePaste",(function(t){return t(e,r,i||we.i.empty)})))return!0;if(!i)return!1;var o=function(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(i),a=o?e.state.tr.replaceSelectionWith(o,e.shiftKey):e.state.tr.replaceSelection(i);return e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}ga.copy=ya.cut=function(e,t){var n=e.state.selection,r="cut"==t.type;if(!n.empty){var i=Pa?null:t.clipboardData,o=Zo(e,n.content()),a=o.dom,s=o.text;i?(t.preventDefault(),i.clearData(),i.setData("text/html",a.innerHTML),i.setData("text/plain",s)):function(e,t){if(e.dom.parentNode){var n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";var r=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout((function(){n.parentNode&&n.parentNode.removeChild(n),e.focus()}),50)}}(e,a),r&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},ya.paste=function(e,t){var n=Pa?null:t.clipboardData;n&&Ba(e,n.getData("text/plain"),n.getData("text/html"),t)?t.preventDefault():function(e,t){if(e.dom.parentNode){var n=e.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout((function(){e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Ba(e,r.value,null,t):Ba(e,r.textContent,r.innerHTML,t)}),50)}}(e,t)};var $a=function e(t,n){pa(this,e),this.slice=t,this.move=n},ja=oi.mac?"altKey":"ctrlKey";for(var za in ga.dragstart=function(e,t){var n=e.mouseDown;if(n&&n.done(),t.dataTransfer){var r=e.state.selection,i=r.empty?null:e.posAtCoords(ka(t));if(i&&i.pos>=r.from&&i.pos<=(r instanceof Oe.c?r.to-1:r.to));else if(n&&n.mightDrag)e.dispatch(e.state.tr.setSelection(Oe.c.create(e.state.doc,n.mightDrag.pos)));else if(t.target&&1==t.target.nodeType){var o=e.docView.nearestDesc(t.target,!0);if(!o||!o.node.type.spec.draggable||o==e.docView)return;e.dispatch(e.state.tr.setSelection(Oe.c.create(e.state.doc,o.posBefore)))}var a=e.state.selection.content(),s=Zo(e,a),c=s.dom,l=s.text;t.dataTransfer.clearData(),t.dataTransfer.setData(Pa?"Text":"text/html",c.innerHTML),Pa||t.dataTransfer.setData("text/plain",l),e.dragging=new $a(a,!t[ja])}},ga.dragend=function(e){var t=e.dragging;window.setTimeout((function(){e.dragging==t&&(e.dragging=null)}),50)},ya.dragover=ya.dragenter=function(e,t){return t.preventDefault()},ya.drop=function(e,t){var n=e.dragging;if(e.dragging=null,t.dataTransfer){var r=e.posAtCoords(ka(t));if(r){var i=e.state.doc.resolve(r.pos);if(i){var o=n&&n.slice||Qo(e,t.dataTransfer.getData(Pa?"Text":"text/plain"),Pa?null:t.dataTransfer.getData("text/html"),!1,i),a=n&&!t[ja];if(e.someProp("handleDrop",(function(n){return n(e,t,o||we.i.empty,a)})))t.preventDefault();else if(o){t.preventDefault();var s=o?Object(ce.f)(e.state.doc,i.pos,o):i.pos;null==s&&(s=i.pos);var c=e.state.tr;a&&c.deleteSelection();var l=c.mapping.map(s),u=0==o.openStart&&0==o.openEnd&&1==o.content.childCount,f=c.doc;if(u?c.replaceRangeWith(l,l,o.content.firstChild):c.replaceRange(l,l,o),!c.doc.eq(f)){var d=c.doc.resolve(l);if(u&&Oe.c.isSelectable(o.content.firstChild)&&d.nodeAfter&&d.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new Oe.c(d));else{var h=c.mapping.map(s);c.mapping.maps[c.mapping.maps.length-1].forEach((function(e,t,n,r){return h=r})),c.setSelection(To(e,d,c.doc.resolve(h)))}e.focus(),e.dispatch(c.setMeta("uiEvent","drop"))}}}}}},ga.focus=function(e){e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout((function(){e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.root.getSelection())&&_o(e)}),20))},ga.blur=function(e){e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),e.domObserver.currentSelection.set({}),e.focused=!1)},ga.beforeinput=function(e,t){if(oi.chrome&&oi.android&&"deleteContentBackward"==t.inputType){var n=e.domChangeCount;setTimeout((function(){if(e.domChangeCount==n&&(e.dom.blur(),e.focus(),!e.someProp("handleKeyDown",(function(t){return t(e,Ei(8,"Backspace"))})))){var t=e.state.selection.$cursor;t&&t.pos>0&&e.dispatch(e.state.tr.delete(t.pos-1,t.pos).scrollIntoView())}}),50)}},ya)ga[za]=ya[za];function Fa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ha(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ua(e,t,n){return t&&Ha(e.prototype,t),n&&Ha(e,n),e}function Ka(e,t){if(e==t)return!0;for(var n in e)if(e[n]!==t[n])return!1;for(var r in t)if(!(r in e))return!1;return!0}var Wa=function(){function e(t,n){Fa(this,e),this.spec=n||Xa,this.side=this.spec.side||0,this.toDOM=t}return Ua(e,[{key:"map",value:function(e,t,n,r){var i=e.mapResult(t.from+r,this.side<0?-1:1),o=i.pos;return i.deleted?null:new qa(o-n,o-n,this)}},{key:"valid",value:function(){return!0}},{key:"eq",value:function(t){return this==t||t instanceof e&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&Ka(this.spec,t.spec))}}]),e}(),Va=function(){function e(t,n){Fa(this,e),this.spec=n||Xa,this.attrs=t}return Ua(e,[{key:"map",value:function(e,t,n,r){var i=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,o=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return i>=o?null:new qa(i,o,this)}},{key:"valid",value:function(e,t){return t.from<t.to}},{key:"eq",value:function(t){return this==t||t instanceof e&&Ka(this.attrs,t.attrs)&&Ka(this.spec,t.spec)}}],[{key:"is",value:function(t){return t.type instanceof e}}]),e}(),Ga=function(){function e(t,n){Fa(this,e),this.spec=n||Xa,this.attrs=t}return Ua(e,[{key:"map",value:function(e,t,n,r){var i=e.mapResult(t.from+r,1);if(i.deleted)return null;var o=e.mapResult(t.to+r,-1);return o.deleted||o.pos<=i.pos?null:new qa(i.pos-n,o.pos-n,this)}},{key:"valid",value:function(e,t){var n=e.content.findIndex(t.from),r=n.index,i=n.offset;return i==t.from&&i+e.child(r).nodeSize==t.to}},{key:"eq",value:function(t){return this==t||t instanceof e&&Ka(this.attrs,t.attrs)&&Ka(this.spec,t.spec)}}]),e}(),qa=function(){function e(t,n,r){Fa(this,e),this.from=t,this.to=n,this.type=r}return Ua(e,[{key:"copy",value:function(t,n){return new e(t,n,this.type)}},{key:"eq",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}},{key:"map",value:function(e,t,n){return this.type.map(e,this,t,n)}},{key:"spec",get:function(){return this.type.spec}},{key:"inline",get:function(){return this.type instanceof Va}}],[{key:"widget",value:function(t,n,r){return new e(t,t,new Wa(n,r))}},{key:"inline",value:function(t,n,r,i){return new e(t,n,new Va(r,i))}},{key:"node",value:function(t,n,r,i){return new e(t,n,new Ga(r,i))}}]),e}(),Ja=[],Xa={},Za=function(){function e(t,n){Fa(this,e),this.local=t&&t.length?t:Ja,this.children=n&&n.length?n:Ja}return Ua(e,[{key:"find",value:function(e,t,n){var r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r}},{key:"findInner",value:function(e,t,n,r,i){for(var o=0;o<this.local.length;o++){var a=this.local[o];a.from<=t&&a.to>=e&&(!i||i(a.spec))&&n.push(a.copy(a.from+r,a.to+r))}for(var s=0;s<this.children.length;s+=3)if(this.children[s]<t&&this.children[s+1]>e){var c=this.children[s]+1;this.children[s+2].findInner(e-c,t-c,n,r+c,i)}}},{key:"map",value:function(e,t,n){return this==Qa||0==e.maps.length?this:this.mapInner(e,t,0,0,n||Xa)}},{key:"mapInner",value:function(t,n,r,i,o){for(var a,s=0;s<this.local.length;s++){var c=this.local[s].map(t,r,i);c&&c.type.valid(n,c)?(a||(a=[])).push(c):o.onRemove&&o.onRemove(this.local[s].spec)}return this.children.length?es(this.children,a,t,n,r,i,o):a?new e(a.sort(os)):Qa}},{key:"add",value:function(t,n){return n.length?this==Qa?e.create(t,n):this.addInner(t,n,0):this}},{key:"addInner",value:function(t,n,r){var i,o=this,a=0;t.forEach((function(e,t){var s,c=t+r;if(s=ns(n,e,c)){for(i||(i=o.children.slice());a<i.length&&i[a]<t;)a+=3;i[a]==t?i[a+2]=i[a+2].addInner(e,s,c+1):i.splice(a,0,t,t+e.nodeSize,is(s,e,c+1,Xa)),a+=3}}));for(var s=ts(a?rs(n):n,-r),c=0;c<s.length;c++)s[c].type.valid(t,s[c])||s.splice(c--,1);return new e(s.length?this.local.concat(s).sort(os):this.local,i||this.children)}},{key:"remove",value:function(e){return 0==e.length||this==Qa?this:this.removeInner(e,0)}},{key:"removeInner",value:function(t,n){for(var r=this.children,i=this.local,o=0;o<r.length;o+=3){for(var a,s=void 0,c=r[o]+n,l=r[o+1]+n,u=0;u<t.length;u++)(a=t[u])&&a.from>c&&a.to<l&&(t[u]=null,(s||(s=[])).push(a));if(s){r==this.children&&(r=this.children.slice());var f=r[o+2].removeInner(s,c+1);f!=Qa?r[o+2]=f:(r.splice(o,3),o-=3)}}if(i.length)for(var d,h=0;h<t.length;h++)if(d=t[h])for(var p=0;p<i.length;p++)i[p].eq(d,n)&&(i==this.local&&(i=this.local.slice()),i.splice(p--,1));return r==this.children&&i==this.local?this:i.length||r.length?new e(i,r):Qa}},{key:"forChild",value:function(t,n){if(this==Qa)return this;if(n.isLeaf)return e.empty;for(var r,i,o=0;o<this.children.length;o+=3)if(this.children[o]>=t){this.children[o]==t&&(r=this.children[o+2]);break}for(var a=t+1,s=a+n.content.size,c=0;c<this.local.length;c++){var l=this.local[c];if(l.from<s&&l.to>a&&l.type instanceof Va){var u=Math.max(a,l.from)-a,f=Math.min(s,l.to)-a;u<f&&(i||(i=[])).push(l.copy(u,f))}}if(i){var d=new e(i.sort(os));return r?new Ya([d,r]):d}return r||Qa}},{key:"eq",value:function(t){if(this==t)return!0;if(!(t instanceof e)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(var n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(var r=0;r<this.children.length;r+=3)if(this.children[r]!=t.children[r]||this.children[r+1]!=t.children[r+1]||!this.children[r+2].eq(t.children[r+2]))return!1;return!0}},{key:"locals",value:function(e){return as(this.localsInner(e))}},{key:"localsInner",value:function(e){if(this==Qa)return Ja;if(e.inlineContent||!this.local.some(Va.is))return this.local;for(var t=[],n=0;n<this.local.length;n++)this.local[n].type instanceof Va||t.push(this.local[n]);return t}}],[{key:"create",value:function(e,t){return t.length?is(t,e,0,Xa):Qa}}]),e}(),Qa=new Za;Za.empty=Qa,Za.removeOverlap=as;var Ya=function(){function e(t){Fa(this,e),this.members=t}return Ua(e,[{key:"forChild",value:function(t,n){if(n.isLeaf)return Za.empty;for(var r=[],i=0;i<this.members.length;i++){var o=this.members[i].forChild(t,n);o!=Qa&&(o instanceof e?r=r.concat(o.members):r.push(o))}return e.from(r)}},{key:"eq",value:function(t){if(!(t instanceof e)||t.members.length!=this.members.length)return!1;for(var n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0}},{key:"locals",value:function(e){for(var t,n=!0,r=0;r<this.members.length;r++){var i=this.members[r].localsInner(e);if(i.length)if(t){n&&(t=t.slice(),n=!1);for(var o=0;o<i.length;o++)t.push(i[o])}else t=i}return t?as(n?t:t.sort(os)):Ja}}],[{key:"from",value:function(t){switch(t.length){case 0:return Qa;case 1:return t[0];default:return new e(t)}}}]),e}();function es(e,t,n,r,i,o,a){for(var s=e.slice(),c=function(e,t,n,r){for(var a=0;a<s.length;a+=3){var c=s[a+1],l=void 0;-1==c||e>c+o||(t>=s[a]+o?s[a+1]=-1:n>=i&&(l=r-n-(t-e))&&(s[a]+=l,s[a+1]+=l))}},l=0;l<n.maps.length;l++)n.maps[l].forEach(c);for(var u=!1,f=0;f<s.length;f+=3)if(-1==s[f+1]){var d=n.map(e[f]+o),h=d-i;if(h<0||h>=r.content.size){u=!0;continue}var p=n.map(e[f+1]+o,-1)-i,v=r.content.findIndex(h),m=v.index,g=v.offset,y=r.maybeChild(m);if(y&&g==h&&g+y.nodeSize==p){var b=s[f+2].mapInner(n,y,d+1,e[f]+o+1,a);b!=Qa?(s[f]=h,s[f+1]=p,s[f+2]=b):(s[f+1]=-2,u=!0)}else u=!0}if(u){var w=is(function(e,t,n,r,i,o,a){function s(e,t){for(var o=0;o<e.local.length;o++){var c=e.local[o].map(r,i,t);c?n.push(c):a.onRemove&&a.onRemove(e.local[o].spec)}for(var l=0;l<e.children.length;l+=3)s(e.children[l+2],e.children[l]+t+1)}for(var c=0;c<e.length;c+=3)-1==e[c+1]&&s(e[c+2],t[c]+o+1);return n}(s,e,t||[],n,i,o,a),r,0,a);t=w.local;for(var E=0;E<s.length;E+=3)s[E+1]<0&&(s.splice(E,3),E-=3);for(var k=0,O=0;k<w.children.length;k+=3){for(var _=w.children[k];O<s.length&&s[O]<_;)O+=3;s.splice(O,0,w.children[k],w.children[k+1],w.children[k+2])}}return new Za(t&&t.sort(os),s)}function ts(e,t){if(!t||!e.length)return e;for(var n=[],r=0;r<e.length;r++){var i=e[r];n.push(new qa(i.from+t,i.to+t,i.type))}return n}function ns(e,t,n){if(t.isLeaf)return null;for(var r,i=n+t.nodeSize,o=null,a=0;a<e.length;a++)(r=e[a])&&r.from>n&&r.to<i&&((o||(o=[])).push(r),e[a]=null);return o}function rs(e){for(var t=[],n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function is(e,t,n,r){var i=[],o=!1;t.forEach((function(t,a){var s=ns(e,t,a+n);if(s){o=!0;var c=is(s,t,n+a+1,r);c!=Qa&&i.push(a,a+t.nodeSize,c)}}));for(var a=ts(o?rs(e):e,-n).sort(os),s=0;s<a.length;s++)a[s].type.valid(t,a[s])||(r.onRemove&&r.onRemove(a[s].spec),a.splice(s--,1));return a.length||i.length?new Za(a,i):Qa}function os(e,t){return e.from-t.from||e.to-t.to}function as(e){for(var t=e,n=0;n<t.length-1;n++){var r=t[n];if(r.from!=r.to)for(var i=n+1;i<t.length;i++){var o=t[i];if(o.from!=r.from){o.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,o.from),ss(t,i,r.copy(o.from,r.to)));break}o.to!=r.to&&(t==e&&(t=e.slice()),t[i]=o.copy(o.from,r.to),ss(t,i+1,o.copy(r.to,o.to)))}}return t}function ss(e,t,n){for(;t<e.length&&os(n,e[t])>0;)t++;e.splice(t,0,n)}function cs(e){var t=[];return e.someProp("decorations",(function(n){var r=n(e.state);r&&r!=Qa&&t.push(r)})),e.cursorWrapper&&t.push(Za.create(e.state.doc,[e.cursorWrapper.deco])),Ya.from(t)}function ls(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var us,fs=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._props=n,this.state=n.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.trackWrites=null,this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):t.apply?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=ps(this),this.markCursor=null,this.cursorWrapper=null,hs(this),this.nodeViews=vs(this),this.docView=ao(this.state.doc,ds(this),cs(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,function(e){e.shiftKey=!1,e.mouseDown=null,e.lastKeyCode=null,e.lastKeyCodeTime=0,e.lastClick={time:0,x:0,y:0,type:""},e.lastSelectionOrigin=null,e.lastSelectionTime=0,e.lastIOSEnter=0,e.lastIOSEnterFallbackTimeout=null,e.composing=!1,e.composingTimeout=null,e.compositionNodes=[],e.compositionEndedAt=-2e8,e.domObserver=new da(e,(function(t,n,r,i){return Go(e,t,n,r,i)})),e.domObserver.start(),e.domChangeCount=0,e.eventHandlers=Object.create(null);var t=function(t){var n=ga[t];e.dom.addEventListener(t,e.eventHandlers[t]=function(t){!function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}(e,t)||Ea(e,t)||!e.editable&&t.type in ya||n(e,t)})};for(var n in ga)t(n);oi.safari&&e.dom.addEventListener("input",(function(){return null})),wa(e)}(this),this.pluginViews=[],this.updatePluginViews()}var t,n,r;return t=e,(n=[{key:"update",value:function(e){e.handleDOMEvents!=this._props.handleDOMEvents&&wa(this),this._props=e,this.updateStateInner(e.state,!0)}},{key:"setProps",value:function(e){var t={};for(var n in this._props)t[n]=this._props[n];for(var r in t.state=this.state,e)t[r]=e[r];this.update(t)}},{key:"updateState",value:function(e){this.updateStateInner(e,this.state.plugins!=e.plugins)}},{key:"updateStateInner",value:function(e,t){var n=this,r=this.state,i=!1,o=!1;if(e.storedMarks&&this.composing&&(Ra(this),o=!0),this.state=e,t){var a=vs(this);(function(e,t){var n=0,r=0;for(var i in e){if(e[i]!=t[i])return!0;n++}for(var o in t)r++;return n!=r})(a,this.nodeViews)&&(this.nodeViews=a,i=!0),wa(this)}this.editable=ps(this),hs(this);var s=cs(this),c=ds(this),l=t?"reset":e.scrollToSelection>r.scrollToSelection?"to selection":"preserve",u=i||!this.docView.matchesNode(e.doc,c,s);!u&&e.selection.eq(r.selection)||(o=!0);var f,d,h,p,v,m,g,y,b,w,E,k="preserve"==l&&o&&null==this.dom.style.overflowAnchor&&function(e){for(var t,n,r=e.dom.getBoundingClientRect(),i=Math.max(0,r.top),o=(r.left+r.right)/2,a=i+1;a<Math.min(innerHeight,r.bottom);a+=5){var s=e.root.elementFromPoint(o,a);if(s!=e.dom&&e.dom.contains(s)){var c=s.getBoundingClientRect();if(c.top>=i-20){t=s,n=c.top;break}}}return{refDOM:t,refTop:n,stack:Si(e.dom)}}(this);if(o){this.domObserver.stop();var O=u&&(oi.ie||oi.chrome)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&(p=r.selection,v=e.selection,m=Math.min(p.$anchor.sharedDepth(p.head),v.$anchor.sharedDepth(v.head)),p.$anchor.start(m)!=v.$anchor.start(m));if(u){var _=oi.chrome?this.trackWrites=this.root.getSelection().focusNode:null;!i&&this.docView.update(e.doc,c,s,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=ao(e.doc,c,s,this.dom,this)),_&&!this.trackWrites&&(O=!0)}O||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&(f=this,d=f.docView.domFromPos(f.state.selection.anchor,0),h=f.root.getSelection(),vi(d.node,d.offset,h.anchorNode,h.anchorOffset)))?_o(this,O):(Co(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(r),"reset"==l)this.dom.scrollTop=0;else if("to selection"==l){var x=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(e){return e(n)}))||(e.selection instanceof Oe.c?xi(this,this.docView.domAfterPos(e.selection.from).getBoundingClientRect(),x):xi(this,this.coordsAtPos(e.selection.head,1),x))}else k&&(y=(g=k).refDOM,b=g.refTop,w=g.stack,E=y?y.getBoundingClientRect().top:0,Ni(w,0==E?0:E-b))}},{key:"destroyPluginViews",value:function(){for(var e;e=this.pluginViews.pop();)e.destroy&&e.destroy()}},{key:"updatePluginViews",value:function(e){if(e&&e.plugins==this.state.plugins)for(var t=0;t<this.pluginViews.length;t++){var n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.destroyPluginViews();for(var r=0;r<this.state.plugins.length;r++){var i=this.state.plugins[r];i.spec.view&&this.pluginViews.push(i.spec.view(this))}}}},{key:"someProp",value:function(e,t){var n,r=this._props&&this._props[e];if(null!=r&&(n=t?t(r):r))return n;var i=this.state.plugins;if(i)for(var o=0;o<i.length;o++){var a=i[o].props[e];if(null!=a&&(n=t?t(a):a))return n}}},{key:"hasFocus",value:function(){return this.root.activeElement==this.dom}},{key:"focus",value:function(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(Mi)return e.focus(Mi);var t=Si(e);e.focus(null==Mi?{get preventScroll(){return Mi={preventScroll:!0},!0}}:void 0),Mi||(Mi=!1,Ni(t,0))}(this.dom),_o(this),this.domObserver.start()}},{key:"posAtCoords",value:function(e){return Ti(this,e)}},{key:"coordsAtPos",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Ri(this,e,t)}},{key:"domAtPos",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.docView.domFromPos(e,t)}},{key:"nodeDOM",value:function(e){var t=this.docView.descAt(e);return t?t.nodeDOM:null}},{key:"posAtDOM",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=this.docView.posFromDOM(e,t,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r}},{key:"endOfTextblock",value:function(e,t){return Hi(this,t||this.state,e)}},{key:"destroy",value:function(){this.docView&&(function(e){for(var t in e.domObserver.stop(),e.eventHandlers)e.dom.removeEventListener(t,e.eventHandlers[t]);clearTimeout(e.composingTimeout),clearTimeout(e.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],cs(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}},{key:"dispatchEvent",value:function(e){return function(e,t){Ea(e,t)||!ga[t.type]||!e.editable&&t.type in ya||ga[t.type](e,t)}(this,e)}},{key:"dispatch",value:function(e){var t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}},{key:"props",get:function(){if(this._props.state!=this.state){var e=this._props;for(var t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props}},{key:"root",get:function(){var e=this._root;if(null==e)for(var t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=function(){return document.getSelection()}),this._root=t;return e||document}}])&&ls(t.prototype,n),r&&ls(t,r),e}();function ds(e){var t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",(function(n){if("function"==typeof n&&(n=n(e.state)),n)for(var r in n)"class"==r?t.class+=" "+n[r]:t[r]||"contenteditable"==r||"nodeName"==r||(t[r]=String(n[r]))})),[qa.node(0,e.state.doc.content.size,t)]}function hs(e){if(e.markCursor){var t=document.createElement("img");t.setAttribute("mark-placeholder","true"),e.cursorWrapper={dom:t,deco:qa.widget(e.state.selection.head,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function ps(e){return!e.someProp("editable",(function(t){return!1===t(e.state)}))}function vs(e){var t={};return e.someProp("nodeViews",(function(e){for(var n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])})),t}function ms(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.allowTableNodeSelection,new Oe.d({key:Gr,state:{init:function(){return null},apply:function(e,t){var n=e.getMeta(Gr);if(null!=n)return-1===n?null:n;if(null==t||!e.docChanged)return t;var r=e.mapping.mapResult(t),i=r.deleted,o=r.pos;return i?null:o}},props:{decorations:gs,createSelectionBetween:function(e){if(null!=Gr.getState(e.state))return e.state.selection}},appendTransaction:function(e,t,n){}})}function gs(e){var t=e.selection,n=t.$anchor.node(1),i=t.$head.node(1);if(n.type.name===r.TABLE&&n.eq(i)){var o=[],a=t.$anchor.before(1);return o.push(qa.node(a,a+n.nodeSize,{"data-table-focus":""})),Za.create(e.doc,o)}}function ys(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bs(e){return ks(e.content)}var ws=ys({},r.LINK,{normalize:function(e){"string"!=typeof e.attrs.href&&(e.attrs.href="#")}}),Es=(ys(us={},r.SIZE,{normalize:function(e){"number"!=typeof e.attrs.size&&(e.attrs.size=11)}}),ys(us,r.COLOR,{normalize:function(e){var t=e.attrs.color,n=e.attrs.name;"string"!=typeof t&&(e.attrs.color="#353535"),"string"!=typeof n&&(e.attrs.name="string"!=typeof t?"none":"user")}}),ys(us,r.BG_COLOR,{normalize:function(e){var t=e.attrs.color,n=e.attrs.name;"string"!=typeof t&&(e.attrs.color="#ffffff"),"string"!=typeof n&&(e.attrs.name="string"!=typeof t?"none":"user")}}),us);function ks(e){e&&e[0]&&e.forEach((function(e){!function(e){if(e.attrs||(e.attrs={}),"text"===e.type){if(e.marks&&e.marks.length>0)return t=e.marks,e.text,void t.forEach((function(e){var t;(t=e).attrs||(t.attrs={}),Es[t.type]&&Es[t.type].normalize(t)}))}else ws[e.type]&&ws[e.type].normalize(e),e.content&&ks(e.content);var t}(e)}))}var Os=Object(cn.a)();function _s(e){bs(e.doc);var t,n,i,o=we.f.fromJSON(Os,e.doc),a=[on({preserveItems:!0}),(i=sr,new Oe.d({props:{handleKeyDown:$t(i)}})),(n=[{parentTypeWhiteList:[r.HEADING,r.PARAGRAPH],wrapBlockBlackList:[r.BULLETED_LIST,r.NUMBERED_LIST,r.BLOCK_QUOTE],match:function(e,t,n,i,o){if(!o)return!1;if([" "," "].indexOf(n)<0)return!1;var a=t.match(/^\s*(#{1,5})$/);return!!a&&{match:a,type:e.schema.nodes[r.HEADING],attr:{level:a[1].length}}},handle:function(e,t,n,r){var i=n-r.length,o=n,a=e.tr.delete(i,o);return a.setBlockType(i,i,t.type,{level:t.attr.level})}},{parentTypeWhiteList:[r.PARAGRAPH],wrapBlockBlackList:[r.BULLETED_LIST,r.NUMBERED_LIST,r.BLOCK_QUOTE],match:function(e,t,n,i,o){if(!o)return!1;if([" "," "].indexOf(n)<0)return!1;var a=t.match(/^\s*([-+*])$/);return a?{type:e.schema.nodes[r.BULLETED_LIST]}:!!(a=t.match(/^\s*(\d+)\.$/))&&{attrs:{start:Number(a[1])},type:e.schema.nodes[r.NUMBERED_LIST]}},handle:function(e,t,n,i){var o=n-i.length,a=e.tr,s=de((a=fr(0,a,o,n)).doc,o);return s.type.name===r.DOC||s.type.name===r.BLOCK_QUOTE?me(a,t.type,t.attrs):me(a=ue(e,a),t.type,t.attrs)}},{parentTypeWhiteList:[r.PARAGRAPH],wrapBlockBlackList:[r.BULLETED_LIST,r.NUMBERED_LIST,r.BLOCK_QUOTE],match:function(e,t,n,i){if(i.nodeAfter&&i.nodeAfter.isText)return!1;if([" "," "].indexOf(n)<0)return!1;var o=t.match(/^\s*(---)$/);return!!(o=(o=o||t.match(/^\s*(\*\*\*)$/))||t.match(/^\s*(\_\_\_)$/))&&{match:o,type:e.schema.nodes[r.HORIZONTAL_RULE]}},handle:function(e,t,n){var r=e.doc.resolve(n),i=t.type.create();return e.tr.replaceRangeWith(r.before(),r.end(),i)}},{parentTypeWhiteList:[r.PARAGRAPH,r.HEADING],match:function(e,t,n){if([" "," "].indexOf(n)<0)return!1;var i=t.match(/\_([^\_]+)\_$/);return!!(i=i||t.match(/\*([^\*]+)\*$/))&&{whole:i[0],text:i[1],type:r.ITALIC}},handle:function(e,t,n){var r=n-t.whole.length,i=n,o=e.schema.marks[t.type].create(),a=e.tr;return(a=(a=(a=a.addMark(r,i,o)).delete(r,r+1)).delete(i-2,i-1)).insert(i-2,e.schema.text(" "))}},{parentTypeWhiteList:[r.PARAGRAPH,r.HEADING],match:function(e,t,n){if([" "," "].indexOf(n)<0)return!1;var i=t.match(/\~\~([^\~]+)\~\~$/);return!!i&&{whole:i[0],text:i[1],type:r.DEL}},handle:function(e,t,n){var r=n-t.whole.length,i=n,o=e.schema.marks[t.type].create(),a=e.tr;return(a=(a=(a=a.addMark(r,i,o)).delete(r,r+2)).delete(i-4,i-2)).insert(i-4,e.schema.text(" "))}},{parentTypeWhiteList:[r.PARAGRAPH],match:function(e,t,n){if([" "," "].indexOf(n)<0)return!1;var i=t.match(/\*\*([^\*]+)\*\*$/);return!!(i=i||t.match(/\_\_([^\_]+)\_\_$/))&&{whole:i[0],text:i[1],type:r.STRONG}},handle:function(e,t,n){var r=n-t.whole.length,i=n,o=e.schema.marks[t.type].create(),a=e.tr;return(a=(a=(a=a.addMark(r,i,o)).delete(r,r+2)).delete(i-4,i-2)).insert(i-4,e.schema.text(" "))}},{parentTypeWhiteList:[r.PARAGRAPH],match:function(e,t,n){if([" "," "].indexOf(n)<0)return!1;var i=t.match(/\`[^\`]+\`$/);return!!i&&{text:i[0],type:e.schema.nodes[r.CODE_INLINE]}},handle:function(e,t,n){var i=t.text.replace(/\`/g,""),o=n-t.text.length,a=n,s=e.schema.text(i),c=e.schema.nodes[r.CODE_INLINE].createAndFill(null,s);return e.tr.replaceRangeWith(o,a,c)}},dr(),{parentTypeWhiteList:[r.PARAGRAPH],wrapBlockBlackList:[r.BULLETED_LIST,r.NUMBERED_LIST,r.BLOCK_QUOTE],match:function(e,t,n,i,o){if(!o)return!1;if([" "," "].indexOf(n)<0)return!1;var a=t.match(/^\s*(>)$/);return!!a&&{match:a,type:e.schema.nodes[r.BLOCK_QUOTE]}},handle:function(e,t,n,r){var i=n-r.length,o=n,a=e.tr;return de((a=fr(0,a,i,o)).doc,i).type.name===e.schema.nodes.doc.name?me(a,t.type,t.attrs):me(a=ue(e,a),t.type,t.attrs)}},{parentTypeWhiteList:[r.PARAGRAPH],wrapBlockBlackList:[r.BULLETED_LIST,r.NUMBERED_LIST,r.BLOCK_QUOTE],match:function(e,t,n,i,o){if(!o)return!1;if([" "," "].indexOf(n)<0)return!1;var a=t.match(/^\s*(```)$/);return!!a&&{match:a,type:e.schema.nodes[r.CODE_BLOCK]}},handle:function(e,t,n,r){var i=n-r.length,o=n,a=e.tr.delete(i,o);return a.setBlockType(i,i,t.type)}},{parentTypeWhiteList:[r.PARAGRAPH],wrapBlockBlackList:[r.BULLETED_LIST,r.NUMBERED_LIST,r.BLOCK_QUOTE],match:function(e,t,n,i,o){if(!o)return!1;if(i.nodeAfter&&i.nodeAfter.isText)return!1;if([" "," "].indexOf(n)<0)return!1;var a=t.match(/^\s*(\$\$[^\$]+\$\$)$/);return!!a&&{text:a[1],type:e.schema.nodes[r.KATEX_BLOCK]}},handle:function(e,t,n){var r=t.type.create({mathString:t.text.replace(/\$/g,"")}),i=e.doc.resolve(n);return e.tr.replaceRangeWith(i.before(),i.end(),r)}},{parentTypeWhiteList:[r.PARAGRAPH],match:function(e,t,n){if([" "," "].indexOf(n)<0)return!1;var i=t.match(/\$[^\$]+\$$/);return!!i&&{text:i[0],type:e.schema.nodes[r.KATEX_INLINE]}},handle:function(e,t,n){var i=n-t.text.length,o=n,a=e.schema.nodes[r.KATEX_INLINE].create({mathString:t.text.replace(/\$/g,"")});return e.tr.replaceRangeWith(i,o,a)}}],new Oe.d({props:{handleTextInput:function(e,t,r,i){return yr(e,t,r,i,n)},handleDOMEvents:{compositionend:function(e){setTimeout((function(){var t=e.state.selection.$cursor;t&&yr(e,t.pos,t.pos,"",n)}))}}},isInputRules:!0})),ms(),(t=function(t){e.stateUpdate(t)},new Oe.d({view:function(){return{update:function(e){t&&t(e)}}}})),Mr()];return e.collab&&a.push(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e={version:e.version||0,clientID:null==e.clientID?Math.floor(4294967295*Math.random()):e.clientID},new Oe.d({key:kt,state:{init:function(){return new wt(e.version,[])},apply:function(e,t){var n=e.getMeta(kt);return n||(e.docChanged?new wt(t.version,t.unconfirmed.concat(Et(e))):t)}},config:e,historyPreserveItems:!0})}({version:e.collab.version,clientID:e.collab.clientID})),Oe.b.create({doc:o,plugins:a})}function xs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ss(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ns="start",Ms="restart",Cs="recover",As="transaction",Ts="poll",Ds="send",Is=function(){function e(t,n,r){xs(this,e),this.collabDoc={},this.mounted=r||function(){},this.backOff=0,this.config={dom:null,clientID:Math.floor(4294967295*Math.random()),recoverIntervalBaseTime:200,dispatchUpdate:function(){},update:function(){},error:function(){},start:function(){},send:function(){},poll:function(){}},this.allSavedHandle=null,this.config=Object.assign({},this.config,t),this.config.createEditorView=n,this.dom=this.config.dom,this.start()}var t,n,i;return t=e,(n=[{key:"getDoc",value:function(){return{version:this.collabDoc.version,doc:this.collabDoc.doc.toJSON()}}},{key:"getData",value:function(e){var t=this.sendable(e);return t?{version:_t(e),steps:t.steps.map((function(e){return e.toJSON()})),clientID:t.clientID}:null}},{key:"hasUnconfirmedSteps",value:function(){var e=this.state.edit;return!!this.sendable(e)}},{key:"addAllSavedHandle",value:function(e){this.allSavedHandle=e}},{key:"dispatch",value:function(e){var t=this;this.config.dispatchUpdate(e);var n,r=null;if(e.type===Ns){var i=this.createEditorState({version:e.version,clientID:this.config.clientID,doc:e.doc});this.collabDoc={version:e.version,doc:i.doc},this.state=new Rs(i,"poll"),this.poll()}else if(e.type===Ms)this.state=new Rs(null,"start"),this.start();else if(e.type===Ts)this.state=new Rs(this.state.edit,"poll"),this.poll();else if(e.type===Ds&&"poll"===this.state.comm){var o=this.sendable(this.state.edit);o?(this.state=new Rs(this.state.edit,"send"),this.send(this.state.edit,o)):(this.state=new Rs(this.state.edit,"poll"),this.poll())}else e.type===Cs?(this.state=new Rs(this.state.edit,"recover"),this.recover()):e.type===As&&(r=this.state.edit.apply(e.tr));if(r)if(e.requestDone){var a=this.sendable(r);e.needPoll?(this.state=new Rs(r,"poll"),this.poll({isUrgent:e.isUrgent})):a?(this.state=new Rs(r,"send"),this.send(r,a)):(this.state=new Rs(r,"poll"),this.poll())}else this.state=new Rs(r,this.state.comm);if(this.view){if(this.state.edit&&this.view.state!==this.state.edit){this.updateState(this.state.edit);var s=(n=this.state.edit,kt.getState(n));0===s.unconfirmed.length&&(this.collabDoc={version:s.version,doc:this.view.state.doc},this.allSavedHandle&&this.allSavedHandle(),this.allSavedHandle=null)}}else this.state.edit&&(this.view=this.createEditorView(this.dom,this.state.edit,(function(e){t.dispatch({type:As,tr:e})})),this.mounted())}},{key:"start",value:function(){var e=this;this.config.start().then((function(t){e.backOff=0,e.dispatch({type:Ns,doc:t.doc,version:t.version})}))}},{key:"send",value:function(e,t){var n=this,r=this.getData(e);r?this.config.send(r).then((function(e){if(e.status===vt.SUCCESS_RESPONSE){n.backOff=0;var r=Ls(t.clientID,t.steps.length),i=n.state.edit.tr;t&&(i=n.receiveTransaction(n.state.edit,t.steps,r,e.version)),n.dispatch({type:As,tr:i,requestDone:!0})}else n.dispatch({type:Ts})})).catch((function(e){e.status===pt.CONFLIT_SERVER_VERSION?(n.backOff=0,n.dispatch({type:Ts})):e.status===pt.NET_ERROR?n.dispatch({type:Cs,error:e}):n.dispatch({type:Cs})})):this.dispatch({type:Ts})}},{key:"poll",value:function(e){var t=this,n={isUrgent:!1};Object.assign(n,e||{});var r=this.state.edit,i={isUrgent:!!n.isUrgent,version:_t(r)},o=r.schema;this.config.poll(i).then((function(e){if(t.backOff=0,e&&e.list&&e.list.length){var n=e.version,i=[],a=[];e.list.forEach((function(e){a=a.concat(Ls(e.clientID,e.steps.length)),i=i.concat(e.steps.map((function(e){return ce.d.fromJSON(o,e)})))}));var s=t.receiveTransaction(r,i,a,n);e.status===vt.UNFINISHED_RESPONSE?t.dispatch({type:As,tr:s,requestDone:!0,needPoll:!0,isUrgent:!0}):t.dispatch({type:As,tr:s,requestDone:!0})}else t.dispatch({type:Ds,tr:null,requestDone:!0})}),(function(e){e.status===pt.TOO_FAR_BEHIND_VERSION?t.dispatch({type:Ms}):(e.status,t.dispatch({type:Cs}))}))}},{key:"recover",value:function(){var e=this,t=this.backOff?Math.min(2*this.backOff,3e4):this.config.recoverIntervalBaseTime;t>1e3&&this.backOff<1e3&&this.error(pt.NET_FREQUENT_ERROR),this.backOff=t,setTimeout((function(){"recover"===e.state.comm&&e.dispatch({type:Ts})}),this.backOff)}},{key:"sendable",value:function(e){return t=e,0===(n=kt.getState(t)).unconfirmed.length?null:{version:n.version,steps:n.unconfirmed.map((function(e){return e.step})),clientID:kt.get(t).spec.config.clientID,get origins(){return this._origins||(this._origins=n.unconfirmed.map((function(e){return e.origin})))}};var t,n}},{key:"createEditorState",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={type:r.DOC,content:[{type:r.PARAGRAPH,nodes:[]}]};return _s({collab:{version:t.version,clientID:t.clientID},doc:t.doc||n,stateUpdate:function(){e.config.update()}})}},{key:"createEditorView",value:function(e,t,n){return this.config.unitTest?{state:t}:this.config.createEditorView(e,t,n)}},{key:"updateState",value:function(e){if(this.config.unitTest)return e;this.view.updateState(e)}},{key:"receiveTransaction",value:function(e,t,n,r){return Ot(e,t,n,{version:r})}},{key:"error",value:function(e){this.config.error(e)}}])&&Ss(t.prototype,n),i&&Ss(t,i),e}(),Rs=function e(t,n){xs(this,e),this.edit=t,this.comm=n};function Ls(e,t){for(var n=[],r=0;r<t;r++)n.push(e);return n}function Ps(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Bs=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.view=null,this.mounted=r||function(){},this.dom=t.dom,this.config={doc:null,dom:null,update:function(){}},Object.assign(this.config,t),this.config.createEditorView=n,this.config.doc&&this.setDoc(this.config.doc)}var t,n,i;return t=e,(n=[{key:"setDoc",value:function(e){var t=this.createEditorState(e);this.view?this.view.updateState(t):this.createEditorView(t)}},{key:"createEditorView",value:function(e){this.view=this.config.createEditorView(this.dom,e),this.mounted()}},{key:"createEditorState",value:function(e){var t=this,n={type:r.DOC,content:[{type:r.PARAGRAPH,nodes:[]}]};return _s({doc:e||n,stateUpdate:function(){t.config.update()}})}}])&&Ps(t.prototype,n),i&&Ps(t,i),e}(),$s=n(4),js=n.n($s),zs=n(31),Fs=n.n(zs),Hs={main:"ewAHQnkq",btns:"_1QDKlxfV",emptyChar:"_314BQAa9",center:"_1ywKB5zQ",btn:"TZBEPzll",node:"_3C0zKJ2b",on:"_1sd45Sm0"};function Us(e,t,n,r,i,o,a,s){var c,l="function"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),a?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},l._ssrRegister=c):i&&(c=s?function(){i.call(this,this.$root.$options.shadowRoot)}:i),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var f=l.beforeCreate;l.beforeCreate=f?[].concat(f,c):[c]}return{exports:e,options:l}}var Ks=Us({props:["getInfo","conf"],data:function(){return{status:"blur",config:{canEdit:!1,center:!1,btns:[]},id:""}},computed:{focusClass:function(){return"focus"===this.status?this.$style.on:""}},created:function(){this.setConfig(this.conf)},mounted:function(){var e=this.getInfo();this.id=e.node.type.name+e.nodePos+String((new Date).getTime()).slice(-4)},methods:{focus:function(){this.status="focus"},blur:function(){this.status="blur"},edit:function(){if(this.getInfo().config.editNode){var e=this.getInfo();e.config.editNode(e.node.type.name,this.id,e.node.attrs,mt)}},remove:function(){var e=this.getInfo(),t=Ne(e.view),n=e.view.state;t(ot(n,n.tr,e.nodePos))},setConfig:function(e){this.config=Object.assign({},this.config,e||{}),this.config.btns||(this.config.btns=[])}}},(function(){var e,t=this,n=t.$createElement,r=t._self._c||n;return r("div",{class:[t.$style.main],attrs:{"data-id":t.id,"data-block-view":""},on:{mousedown:function(e){e.preventDefault()}}},[r("span",{class:t.$style.emptyChar},[t._v("​")]),t._v(" "),r("div",{class:[t.$style.node,t.focusClass],attrs:{"data-view-wrap":""}},[r("div",{class:[t.$style.btns,(e={},e[t.$style.center]=t.config.center,e)],attrs:{"data-view-btns":""}},[t.config.canEdit?r("span",{class:[t.$style.btn],attrs:{"data-view-btn":""},on:{click:function(e){return t.edit()}}},[t._v("编辑")]):t._e(),r("span",{class:[t.$style.btn],attrs:{"data-view-btn":""},on:{click:function(e){return t.remove()}}},[t._v("删除")]),t._l(t.config.btns,(function(e){return r("span",{key:e.name,class:[t.$style.btn],attrs:{"data-view-btn":""},on:{click:function(t){return e.onclick()}}},[t._v(t._s(e.name))])}))],2),t._v(" "),t._t("default")],2),t._v(" "),t._t("other")],2)}),[],!1,(function(e){this.$style=Hs.locals||Hs}),null,null).exports;function Ws(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function Vs(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var Gs=["text/plain","text/html"],qs=function(){(console.warn||console.log).call(arguments)}.bind(console,"[clipboard-polyfill]"),Js=!0,Xs=function(){function e(){this.m={}}return e.prototype.setData=function(e,t){Js&&-1===Gs.indexOf(e)&&qs("Unknown data type: "+e,"Call clipboard.suppressWarnings() to suppress this warning."),this.m[e]=t},e.prototype.getData=function(e){return this.m[e]},e.prototype.forEach=function(e){for(var t in this.m)e(this.m[t],t)},e}(),Zs=function(e){},Qs=!0,Ys=function(){(console.warn||console.log).apply(console,arguments)}.bind("[clipboard-polyfill]");function ec(e){return Ws(this,void 0,void 0,(function(){var t;return Vs(this,(function(n){if(Qs&&!e.getData("text/plain")&&Ys("clipboard.write() was called without a `text/plain` data type. On some platforms, this may result in an empty clipboard. Call clipboard.suppressWarnings() to suppress this warning."),ac()){if(function(e){var t=e.getData("text/plain");if(void 0!==t)return window.clipboardData.setData("Text",t);throw new Error("No `text/plain` value was specified.")}(e))return[2];throw new Error("Copying failed, possibly because the user rejected it.")}if(nc(e))return Zs("regular execCopy worked"),[2];if(navigator.userAgent.indexOf("Edge")>-1)return Zs('UA "Edge" => assuming success'),[2];if(rc(document.body,e))return Zs("copyUsingTempSelection worked"),[2];if(function(e){var t=document.createElement("div");t.setAttribute("style","-webkit-user-select: text !important"),t.textContent="temporary element",document.body.appendChild(t);var n=rc(t,e);return document.body.removeChild(t),n}(e))return Zs("copyUsingTempElem worked"),[2];if(void 0!==(t=e.getData("text/plain"))&&function(e){Zs("copyTextUsingDOM");var t=document.createElement("div");t.setAttribute("style","-webkit-user-select: text !important");var n=t;t.attachShadow&&(Zs("Using shadow DOM."),n=t.attachShadow({mode:"open"}));var r=document.createElement("span");r.innerText=e,n.appendChild(r),document.body.appendChild(t),ic(r);var i=document.execCommand("copy");return oc(),document.body.removeChild(t),i}(t))return Zs("copyTextUsingDOM worked"),[2];throw new Error("Copy command failed.")}))}))}var tc=function(){this.success=!1};function nc(e){var t=new tc,n=function(e,t,n){Zs("listener called"),e.success=!0,t.forEach((function(t,r){var i=n.clipboardData;i.setData(r,t),"text/plain"===r&&i.getData(r)!==t&&(Zs("setting text/plain failed"),e.success=!1)})),n.preventDefault()}.bind(this,t,e);document.addEventListener("copy",n);try{document.execCommand("copy")}finally{document.removeEventListener("copy",n)}return t.success}function rc(e,t){ic(e);var n=nc(t);return oc(),n}function ic(e){var t=document.getSelection();if(t){var n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}}function oc(){var e=document.getSelection();e&&e.removeAllRanges()}function ac(){return"undefined"==typeof ClipboardEvent&&void 0!==window.clipboardData&&void 0!==window.clipboardData.setData}function sc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var cc=[{name:"Plain Text",lang:"text",attrLang:"text"}];function lc(e,t){if(e===t)return null;for(var n=0,r=e.length,i=t.length;n<r&&e.charCodeAt(n)===t.charCodeAt(n);)++n;for(;r>n&&i>n&&e.charCodeAt(r-1)===t.charCodeAt(i-1);)r--,i--;return{from:n,to:r,text:t.slice(n,i)}}var uc={main:"_3aWaq2T7",selected:"_12XeGTHc",codemirror:"_4PBtdVk4",btns:"_3GPPXY0m",lang:"CvR5NcCW",selector:"_11g5bSiB",list:"_1FSUXkGV",item:"_4vZlzcfw",icon:"_247SSKPm",blink:"_2qjs-l6C"},fc=Us({name:"codeBlock",components:{NodeView:Ks},props:["pnode","view","getPos","config"],data:function(){return{incomingChanges:!1,updating:!1,cm:null,node:null,curOption:cc[0],options:cc,afterMounted:function(){},viewConfig:{},showList:!1}},created:function(){if(this.node=this.pnode,this.config.nodeViews){var e=this.config.nodeViews[r.CODE_BLOCK]||{},t=e.options;Array.isArray(t)&&(this.options=cc.concat(t));var n=e.afterMounted;"function"==typeof n&&(this.afterMounted=n)}var i=this.node.attrs.lang;if(i){var o=this.options.find((function(e){return e.attrLang===i||!!(e.alias&&e.alias[0]&&e.alias.indexOf(i.toLowerCase())>-1)||void 0}));o&&(this.curOption=o)}},mounted:function(){var e=this;document.addEventListener("click",this.outSideClick.bind(this),!1),this.cm=new Fs.a(this.$refs.codemiror,{mode:this.curOption.lang||"text",value:this.node.textContent,lineNumbers:!0,tabSize:2,scrollbarStyle:"native",inputStyle:"contenteditable",extraKeys:this.codeMirrorKeymap()}),setTimeout((function(){e.cm.refresh(),e.node.textContent||e.focus(),e.afterMounted(e.node,e.cm,e.$refs.codemiror)}),20),this.updating=!1,this.cm.on("beforeChange",(function(){e.incomingChanges=!0})),this.cm.on("changes",(function(){if(!e.updating){var t=e.codeMirrorChanged();e.dispatch(t)}e.incomingChanges=!1})),this.cm.on("focus",(function(){return e.forwardSelection()})),this.cm.on("blur",(function(){return e.$refs.view.blur()}))},methods:{focus:function(){this.$refs.view.focus(),this.cm.focus()},blur:function(){this.$refs.view.blur(),this.cm.blur()},codeMirrorKeymap:function(){var e,t=this,n=this.view,i=/Mac/.test(navigator.platform)?"Cmd":"Ctrl";return Fs.a.normalizeKeyMap((sc(e={Up:function(){return t.maybeEscape("line",-1)},Left:function(){return t.maybeEscape("char",-1)},Down:function(){return t.maybeEscape("line",1)},Right:function(){return t.maybeEscape("char",1)}},"".concat(i,"-Z"),(function(){return an(n.state,n.dispatch)})),sc(e,"Shift-".concat(i,"-Z"),(function(){return sn(n.state,n.dispatch)})),sc(e,"".concat(i,"-Y"),(function(){return sn(n.state,n.dispatch)})),sc(e,"".concat(i,"-Enter"),(function(){var e=function(e,t){var n=t.curSelection,i=n.$head,o=n.$anchor;if(!i.sameParent(o))return!1;var a=i.after();return(t=t.replaceWith(a,a,e.schema.nodes[r.PARAGRAPH].createAndFill())).setSelection(Oe.f.near(t.doc.resolve(a),1))}(n.state,n.state.tr);n.dispatch(e),n.focus()})),sc(e,"".concat(i,"-C"),(function(){var e,n,r,i;e=t,n=new Xs,r=e.cm.getSelection("\n"),i=r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),i='<pre lang="'.concat(e.curOption.attrLang,'">').concat(i,"</pre>"),n.setData("text/plain",r),n.setData("text/html",i),ec(n)})),e))},maybeEscape:function(e,t){var n=this.cm.getCursor();if(this.cm.somethingSelected()||n.line!==(t<0?this.cm.firstLine():this.cm.lastLine())||"char"===e&&n.ch!==(t<0?0:this.cm.getLine(n.line).length))return Fs.a.Pass;this.view.focus()},forwardSelection:function(e){if(this.cm.hasFocus()){var t=this.view.state.selection,n=this.asProseMirrorSelection(this.view.state.doc);if(e&&(t=e.curSelection,n=this.asProseMirrorSelection(e.doc)),!n.eq(t)){if(e)return e.setSelection(n);this.dispatch(this.view.state.tr.setSelection(n))}}},asProseMirrorSelection:function(e){var t=this.getPos()+1,n=this.cm.indexFromPos(this.cm.getCursor("anchor"))+t,r=this.cm.indexFromPos(this.cm.getCursor("head"))+t;return Oe.h.create(e,n,r)},codeMirrorChanged:function(){var e=lc(this.node.textContent,this.cm.getValue());if(e){var t=this.view.state.schema,n=this.getPos()+1;return this.view.state.tr.replaceWith(n+e.from,n+e.to,e.text?t.text(e.text):null)}return this.view.state.tr},viewUpdate:function(e){this.node=e;var t=lc(this.cm.getValue(),e.textContent);t&&(this.updating=!0,this.cm.replaceRange(t.text,this.cm.posFromIndex(t.from),this.cm.posFromIndex(t.to)),this.updating=!1)},viewSetSelection:function(e,t){this.cm.focus(),this.updating=!0,this.cm.setSelection(this.cm.posFromIndex(e),this.cm.posFromIndex(t)),this.updating=!1},dispatch:function(e){this.view.dispatch(e)},getInfo:function(){return{node:this.pnode,view:this.view,nodePos:this.getPos(),config:this.config}},toggleListHandle:function(){this.showList=!this.showList},hideList:function(){this.showList=!1},optionClickHandle:function(e){this.incomingChanges=!0,this.curOption=e,this.cm.setOption("mode",e.lang),this.cm.hasFocus()||this.cm.focus(),this.hideList(),this.changeNodeAttr(e),this.incomingChanges=!1},changeNodeAttr:function(e){var t=this.view.state.tr,n=this.getPos(),r=Object.assign({},this.node.attrs,{lang:e.attrLang});t=t.setNodeMarkup(n,null,r),this.dispatch(t)},outSideClick:function(e){this.$refs.lang&&!this.$refs.lang.contains(e.target)&&this.hideList()}}},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("NodeView",{ref:"view",attrs:{getInfo:e.getInfo}},[n("div",{class:e.$style.main,attrs:{"data-type-codeblock":""},on:{click:function(e){e.stopPropagation()}}},[n("div",{class:e.$style.btns,attrs:{"data-btns":""}},[n("div",{ref:"lang",class:e.$style.lang,attrs:{"data-lang":""}},[n("div",{class:e.$style.selector,attrs:{"data-selector":""},on:{click:e.toggleListHandle}},[n("span",[e._v(e._s(e.curOption.name))])]),e._v(" "),e.showList?n("div",{class:e.$style.list,attrs:{"data-list":""}},e._l(e.options,(function(t){var r;return n("div",{key:t.lang,class:[e.$style.item,(r={},r[e.$style.on]=e.curOption.lang===t.lang,r)],attrs:{"data-item":""},on:{click:function(n){return e.optionClickHandle(t)}}},[n("span",[e._v(e._s(t.name))])])})),0):e._e()])]),e._v(" "),n("div",{ref:"codemiror",class:e.$style.codemirror,attrs:{"data-codemirror":""}})])])}),[],!1,(function(e){this.$style=uc.locals||uc}),null,null).exports;function dc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var hc=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.node=t,this.dom=document.createElement("div");var o=document.createElement("div");this.dom.appendChild(o),this.vueNode=new js.a({el:o,render:function(e){return e(fc,{ref:"main",props:{pnode:t,view:n,getPos:r,config:i}})}})}var t,n,r;return t=e,(n=[{key:"setSelection",value:function(e,t){this.vueNode.$refs.main.viewSetSelection(e,t)}},{key:"update",value:function(e){return e.type===this.node.type&&(this.node=e,this.vueNode.$refs.main.viewUpdate(e),!0)}},{key:"selectNode",value:function(){this.vueNode.$refs.main.focus()}},{key:"stopEvent",value:function(){return!0}}])&&dc(t.prototype,n),r&&dc(t,r),e}(),pc=Us({components:{NodeView:Ks},props:["pnode","view","getPos","config"],data:function(){return{node:null,viewConfig:{canEdit:!1}}},methods:{focus:function(){this.$refs.view.focus()},blur:function(){this.$refs.view.blur()},getInfo:function(){return{node:this.pnode,view:this.view,nodePos:this.getPos(),config:this.config}}}},(function(){var e=this.$createElement,t=this._self._c||e;return t("NodeView",{ref:"view",attrs:{getInfo:this.getInfo,conf:this.viewConfig}},[t("hr")])}),[],!1,null,null,null).exports;function vc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var mc=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.node=t,this.view=n,this.getPos=r,this.config=i,this.dom=document.createElement("div");var o=document.createElement("div");this.dom.appendChild(o),this.vueNode=new js.a({el:o,render:function(e){return e(pc,{ref:"main",props:{pnode:t,view:n,getPos:r,config:i}})}})}var t,n,r;return t=e,(n=[{key:"update",value:function(e){return!1}},{key:"selectNode",value:function(){this.vueNode.$refs.main.focus()}},{key:"deselectNode",value:function(){this.vueNode.$refs.main.blur()}},{key:"stopEvent",value:function(){return!0}}])&&vc(t.prototype,n),r&&vc(t,r),e}(),gc={main:"_15-LPGLf",title:"_3kQMHLDw",placeholder:"_1JhJpBXj"},yc=Us({components:{NodeView:Ks},props:["pnode","view","getPos","config"],data:function(){return{node:null,href:null,success:!1,placeholder:"图片加载中...",viewConfig:{canEdit:!0},src:null,title:null,attrs:[]}},created:function(){this.node=this.pnode,this.initData(),this.loadImage()},mounted:function(){var e=this;this.$nextTick((function(){e.node.attrs.fromPaste&&!e.node.attrs.pastePass&&e.config.editNode&&e.config.editNode(e.node.type.name,e.$refs.view.id,e.node.attrs,gt)}))},methods:{update:function(e){var t=!1;e.attrs.src!==this.src&&(t=!0),this.node=e,this.initData(),t&&this.loadImage()},initData:function(){if(this.node.attrs.src!==this.src&&(this.src=this.node.attrs.src),"string"!=typeof this.src||0===this.src.length)return this.success=!1,void(this.placeholder="未发现图片链接，可尝试重新编辑");this.title=this.node.attrs.title||null,this.href=this.node.attrs.href||null;var e=[],t=this.node.attrs.style;t&&t[0]&&t.forEach((function(t){var n,r,i;t&&"string"==typeof t.key&&t.value&&e.push((n={},r="data-style-".concat(t.key),i=String(t.value),r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n))})),this.attrs=e},loadImage:function(){var e=this;if("string"==typeof this.src&&0!==this.src.length){this.placeholder="图片加载中...";var t=new Image;t.addEventListener("load",(function(){e.success=!0,e.$refs.view.setConfig({btns:[]})})),t.addEventListener("error",(function(){e.success=!1,e.node.attrs.fromPaste?e.node.attrs.pastePass&&setTimeout((function(){e.placeholder="图片加载失败，可重试"}),1e3):setTimeout((function(){e.placeholder="图片加载失败，可重试"}),1e3),e.$refs.view.setConfig({btns:[{name:"重试",onclick:function(){e.loadImage()}}]})})),t.src=this.src}},focus:function(){this.$refs.view.focus()},blur:function(){this.$refs.view.blur()},getInfo:function(){return{node:this.pnode,view:this.view,nodePos:this.getPos(),config:this.config}},clickWrap:function(){dt(this.view,this.getPos())}}},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("NodeView",{ref:"view",attrs:{getInfo:e.getInfo,conf:e.viewConfig}},[e.href?[n("div",e._b({class:e.$style.main,attrs:{"data-type-img":"","data-type-link":""},on:{click:e.clickWrap}},"div",e.attrs,!1),[e.success?n("img",{attrs:{src:e.src}}):n("div",{class:e.$style.placeholder,attrs:{"data-placeholder":""}},[e._v(e._s(e.placeholder))])])]:[n("div",e._b({class:e.$style.main,attrs:{"data-type-img":""},on:{click:e.clickWrap}},"div",e.attrs,!1),[e.success?n("img",{attrs:{src:e.src}}):n("div",{class:e.$style.placeholder,attrs:{"data-placeholder":""}},[e._v(e._s(e.placeholder))])])],e._v(" "),e.title?n("div",{class:e.$style.title,attrs:{slot:"other","data-title":""},slot:"other"},[e._v(e._s(e.title))]):e._e()],2)}),[],!1,(function(e){this.$style=gc.locals||gc}),null,null).exports;function bc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var wc=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.node=t,this.view=n,this.getPos=r,this.config=i,this.dom=document.createElement("div");var o=document.createElement("div");this.dom.appendChild(o),this.vueNode=new js.a({el:o,render:function(e){return e(yc,{ref:"main",props:{pnode:t,view:n,getPos:r,config:i}})}})}var t,n,r;return t=e,(n=[{key:"update",value:function(e){return e.type===this.node.type&&(this.node=e,this.vueNode.$refs.main&&this.vueNode.$refs.main.update&&this.vueNode.$refs.main.update(e),!0)}},{key:"selectNode",value:function(){this.vueNode.$refs.main.focus()}},{key:"deselectNode",value:function(){this.vueNode.$refs.main.blur()}},{key:"stopEvent",value:function(){return!0}},{key:"ignoreMutation",value:function(){return!0}}])&&bc(t.prototype,n),r&&bc(t,r),e}(),Ec={main:"_1sOtPf0d",content:"_2lRDlbrr"},kc=Us({components:{NodeView:Ks},props:["pnode","view","getPos","config"],data:function(){return{viewConfig:{canEdit:!0},videoHTML:""}},created:function(){this.node=this.pnode,this.videoHTML=this.node.attrs.videoHTML},mounted:function(){},methods:{focus:function(){this.$refs.view.focus()},blur:function(){this.$refs.view.blur()},refresh:function(){var e=this.$refs.main.offsetWidth,t=this.$refs.main.querySelector("iframe"),n=Math.floor(e/16*9),r=t.getAttribute("width"),i=t.getAttribute("height");if(/^\d+$/.test(r)&&/^\d+$/.test(i)){var o=Number(r),a=Number(i);n=Math.floor(e/o*a)}t.style.height=n+"px",t.style.width=e+"px"},getInfo:function(){return{node:this.pnode,view:this.view,nodePos:this.getPos(),config:this.config}}}},(function(){var e=this.$createElement,t=this._self._c||e;return t("NodeView",{ref:"view",attrs:{getInfo:this.getInfo,conf:this.viewConfig}},[t("div",{ref:"main",class:this.$style.main,attrs:{"data-type-video":""}},[t("div",{class:this.$style.content,domProps:{innerHTML:this._s(this.videoHTML)}})])])}),[],!1,(function(e){this.$style=Ec.locals||Ec}),null,null).exports;function Oc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _c=function(){function e(t,n,r,i){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.node=t,this.view=n,this.getPos=r,this.dom=document.createElement("div");var a=document.createElement("div");this.dom.appendChild(a),this.videoNode=new js.a({el:a,render:function(e){return e(kc,{ref:"main",props:{pnode:t,view:n,getPos:r,config:i}})}}),setTimeout((function(){o.videoNode.$refs.main.refresh()}),100)}var t,n,r;return t=e,(n=[{key:"update",value:function(e){return!1}},{key:"selectNode",value:function(){this.videoNode.$refs.main.focus()}},{key:"deselectNode",value:function(){this.videoNode.$refs.main.blur()}},{key:"stopEvent",value:function(){return!0}}])&&Oc(t.prototype,n),r&&Oc(t,r),e}(),xc=Us({components:{NodeView:Ks},props:["pnode","view","getPos","config"],data:function(){return{viewConfig:{canEdit:!0}}},created:function(){if(this.config.nodeViews&&this.config.nodeViews[r.EMBED_COMPONENT]){var e=this.config.nodeViews[r.EMBED_COMPONENT].componentOptions;if(e&&this.pnode.attrs.type){var t=e[this.pnode.attrs.type]||{};Object.assign(this.viewConfig,t)}}},mounted:function(){this.postMessage({dom:this.$refs.main,type:"componentCreate",attrs:this.pnode.attrs})},methods:{focus:function(){this.$refs.view.focus()},blur:function(){this.$refs.view.blur()},update:function(e){this.postMessage({dom:this.$refs.main,type:"componentCreate",attrs:e.attrs})},postMessage:function(e){this.config&&this.config.postMessage&&this.config.postMessage(e)},clickWrap:function(){dt(this.view,this.getPos())},getInfo:function(){return{node:this.pnode,view:this.view,nodePos:this.getPos(),config:this.config}}}},(function(){var e=this.$createElement,t=this._self._c||e;return t("NodeView",{ref:"view",attrs:{getInfo:this.getInfo,conf:this.viewConfig}},[t("div",{ref:"main",attrs:{"data-type-embedcomp":""},on:{click:this.clickWrap}})])}),[],!1,null,null,null).exports;function Sc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Nc=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.node=t,this.view=n,this.getPos=r,this.dom=document.createElement("div");var o=document.createElement("div");this.dom.appendChild(o),this.vueNode=new js.a({el:o,render:function(e){return e(xc,{ref:"main",props:{pnode:t,view:n,getPos:r,config:i}})}})}var t,n,r;return t=e,(n=[{key:"update",value:function(e){return e.type===this.node.type&&(this.node=e,this.vueNode.$refs.main&&this.vueNode.$refs.main.update&&this.vueNode.$refs.main.update(e),!0)}},{key:"selectNode",value:function(){this.vueNode.$refs.main.focus()}},{key:"deselectNode",value:function(){this.vueNode.$refs.main.blur()}},{key:"stopEvent",value:function(){return!0}},{key:"ignoreMutation",value:function(){return!0}}])&&Sc(t.prototype,n),r&&Sc(t,r),e}(),Mc=(n(103),n(113),n(32)),Cc=n.n(Mc),Ac=(n(114),n(69),n(124),n(126),n(128),n(131),n(132),n(141),n(46)),Tc=n.n(Ac),Dc=n(47),Ic=n.n(Dc),Rc=n(86),Lc=n.n(Rc),Pc=n(87),Bc=(n(142),n(144),n(82),n(147),n(148),null),$c=null;function jc(){if(null===Bc){if("undefined"==typeof document)return Bc=0;var e=document.body,t=document.createElement("div");t.classList.add("simplebar-hide-scrollbar"),e.appendChild(t);var n=t.getBoundingClientRect().right;e.removeChild(t),Bc=n}return Bc}Cc.a&&window.addEventListener("resize",(function(){$c!==window.devicePixelRatio&&($c=window.devicePixelRatio,Bc=null)}));var zc=function(e){return Array.prototype.reduce.call(e,(function(e,t){var n=t.name.match(/data-simplebar-(.+)/);if(n){var r=n[1].replace(/\W+(.)/g,(function(e,t){return t.toUpperCase()}));switch(t.value){case"true":e[r]=!0;break;case"false":e[r]=!1;break;case void 0:e[r]=!0;break;default:e[r]=t.value}}return e}),{})};function Fc(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window}function Hc(e){return e&&e.ownerDocument?e.ownerDocument:document}var Uc=function(){function e(t,n){var r=this;this.onScroll=function(){var e=Fc(r.el);r.scrollXTicking||(e.requestAnimationFrame(r.scrollX),r.scrollXTicking=!0),r.scrollYTicking||(e.requestAnimationFrame(r.scrollY),r.scrollYTicking=!0)},this.scrollX=function(){r.axis.x.isOverflowing&&(r.showScrollbar("x"),r.positionScrollbar("x")),r.scrollXTicking=!1},this.scrollY=function(){r.axis.y.isOverflowing&&(r.showScrollbar("y"),r.positionScrollbar("y")),r.scrollYTicking=!1},this.onMouseEnter=function(){r.showScrollbar("x"),r.showScrollbar("y")},this.onMouseMove=function(e){r.mouseX=e.clientX,r.mouseY=e.clientY,(r.axis.x.isOverflowing||r.axis.x.forceVisible)&&r.onMouseMoveForAxis("x"),(r.axis.y.isOverflowing||r.axis.y.forceVisible)&&r.onMouseMoveForAxis("y")},this.onMouseLeave=function(){r.onMouseMove.cancel(),(r.axis.x.isOverflowing||r.axis.x.forceVisible)&&r.onMouseLeaveForAxis("x"),(r.axis.y.isOverflowing||r.axis.y.forceVisible)&&r.onMouseLeaveForAxis("y"),r.mouseX=-1,r.mouseY=-1},this.onWindowResize=function(){r.scrollbarWidth=r.getScrollbarWidth(),r.hideNativeScrollbar()},this.hideScrollbars=function(){r.axis.x.track.rect=r.axis.x.track.el.getBoundingClientRect(),r.axis.y.track.rect=r.axis.y.track.el.getBoundingClientRect(),r.isWithinBounds(r.axis.y.track.rect)||(r.axis.y.scrollbar.el.classList.remove(r.classNames.visible),r.axis.y.isVisible=!1),r.isWithinBounds(r.axis.x.track.rect)||(r.axis.x.scrollbar.el.classList.remove(r.classNames.visible),r.axis.x.isVisible=!1)},this.onPointerEvent=function(e){var t,n;r.axis.x.track.rect=r.axis.x.track.el.getBoundingClientRect(),r.axis.y.track.rect=r.axis.y.track.el.getBoundingClientRect(),(r.axis.x.isOverflowing||r.axis.x.forceVisible)&&(t=r.isWithinBounds(r.axis.x.track.rect)),(r.axis.y.isOverflowing||r.axis.y.forceVisible)&&(n=r.isWithinBounds(r.axis.y.track.rect)),(t||n)&&(e.preventDefault(),e.stopPropagation(),"mousedown"===e.type&&(t&&(r.axis.x.scrollbar.rect=r.axis.x.scrollbar.el.getBoundingClientRect(),r.isWithinBounds(r.axis.x.scrollbar.rect)?r.onDragStart(e,"x"):r.onTrackClick(e,"x")),n&&(r.axis.y.scrollbar.rect=r.axis.y.scrollbar.el.getBoundingClientRect(),r.isWithinBounds(r.axis.y.scrollbar.rect)?r.onDragStart(e,"y"):r.onTrackClick(e,"y"))))},this.drag=function(t){var n=r.axis[r.draggedAxis].track,i=n.rect[r.axis[r.draggedAxis].sizeAttr],o=r.axis[r.draggedAxis].scrollbar,a=r.contentWrapperEl[r.axis[r.draggedAxis].scrollSizeAttr],s=parseInt(r.elStyles[r.axis[r.draggedAxis].sizeAttr],10);t.preventDefault(),t.stopPropagation();var c=(("y"===r.draggedAxis?t.pageY:t.pageX)-n.rect[r.axis[r.draggedAxis].offsetAttr]-r.axis[r.draggedAxis].dragOffset)/(i-o.size)*(a-s);"x"===r.draggedAxis&&(c=r.isRtl&&e.getRtlHelpers().isRtlScrollbarInverted?c-(i+o.size):c,c=r.isRtl&&e.getRtlHelpers().isRtlScrollingInverted?-c:c),r.contentWrapperEl[r.axis[r.draggedAxis].scrollOffsetAttr]=c},this.onEndDrag=function(e){var t=Hc(r.el),n=Fc(r.el);e.preventDefault(),e.stopPropagation(),r.el.classList.remove(r.classNames.dragging),t.removeEventListener("mousemove",r.drag,!0),t.removeEventListener("mouseup",r.onEndDrag,!0),r.removePreventClickId=n.setTimeout((function(){t.removeEventListener("click",r.preventClick,!0),t.removeEventListener("dblclick",r.preventClick,!0),r.removePreventClickId=null}))},this.preventClick=function(e){e.preventDefault(),e.stopPropagation()},this.el=t,this.minScrollbarWidth=20,this.options=Object.assign({},e.defaultOptions,{},n),this.classNames=Object.assign({},e.defaultOptions.classNames,{},this.options.classNames),this.axis={x:{scrollOffsetAttr:"scrollLeft",sizeAttr:"width",scrollSizeAttr:"scrollWidth",offsetSizeAttr:"offsetWidth",offsetAttr:"left",overflowAttr:"overflowX",dragOffset:0,isOverflowing:!0,isVisible:!1,forceVisible:!1,track:{},scrollbar:{}},y:{scrollOffsetAttr:"scrollTop",sizeAttr:"height",scrollSizeAttr:"scrollHeight",offsetSizeAttr:"offsetHeight",offsetAttr:"top",overflowAttr:"overflowY",dragOffset:0,isOverflowing:!0,isVisible:!1,forceVisible:!1,track:{},scrollbar:{}}},this.removePreventClickId=null,e.instances.has(this.el)||(this.recalculate=Tc()(this.recalculate.bind(this),64),this.onMouseMove=Tc()(this.onMouseMove.bind(this),64),this.hideScrollbars=Ic()(this.hideScrollbars.bind(this),this.options.timeout),this.onWindowResize=Ic()(this.onWindowResize.bind(this),64,{leading:!0}),e.getRtlHelpers=Lc()(e.getRtlHelpers),this.init())}e.getRtlHelpers=function(){var t=document.createElement("div");t.innerHTML='<div class="hs-dummy-scrollbar-size"><div style="height: 200%; width: 200%; margin: 10px 0;"></div></div>';var n=t.firstElementChild;document.body.appendChild(n);var r=n.firstElementChild;n.scrollLeft=0;var i=e.getOffset(n),o=e.getOffset(r);n.scrollLeft=999;var a=e.getOffset(r);return{isRtlScrollingInverted:i.left!==o.left&&o.left-a.left!=0,isRtlScrollbarInverted:i.left!==o.left}},e.getOffset=function(e){var t=e.getBoundingClientRect(),n=Hc(e),r=Fc(e);return{top:t.top+(r.pageYOffset||n.documentElement.scrollTop),left:t.left+(r.pageXOffset||n.documentElement.scrollLeft)}};var t=e.prototype;return t.init=function(){e.instances.set(this.el,this),Cc.a&&(this.initDOM(),this.scrollbarWidth=this.getScrollbarWidth(),this.recalculate(),this.initListeners())},t.initDOM=function(){var e=this;if(Array.prototype.filter.call(this.el.children,(function(t){return t.classList.contains(e.classNames.wrapper)})).length)this.wrapperEl=this.el.querySelector("."+this.classNames.wrapper),this.contentWrapperEl=this.options.scrollableNode||this.el.querySelector("."+this.classNames.contentWrapper),this.contentEl=this.options.contentNode||this.el.querySelector("."+this.classNames.contentEl),this.offsetEl=this.el.querySelector("."+this.classNames.offset),this.maskEl=this.el.querySelector("."+this.classNames.mask),this.placeholderEl=this.findChild(this.wrapperEl,"."+this.classNames.placeholder),this.heightAutoObserverWrapperEl=this.el.querySelector("."+this.classNames.heightAutoObserverWrapperEl),this.heightAutoObserverEl=this.el.querySelector("."+this.classNames.heightAutoObserverEl),this.axis.x.track.el=this.findChild(this.el,"."+this.classNames.track+"."+this.classNames.horizontal),this.axis.y.track.el=this.findChild(this.el,"."+this.classNames.track+"."+this.classNames.vertical);else{for(this.wrapperEl=document.createElement("div"),this.contentWrapperEl=document.createElement("div"),this.offsetEl=document.createElement("div"),this.maskEl=document.createElement("div"),this.contentEl=document.createElement("div"),this.placeholderEl=document.createElement("div"),this.heightAutoObserverWrapperEl=document.createElement("div"),this.heightAutoObserverEl=document.createElement("div"),this.wrapperEl.classList.add(this.classNames.wrapper),this.contentWrapperEl.classList.add(this.classNames.contentWrapper),this.offsetEl.classList.add(this.classNames.offset),this.maskEl.classList.add(this.classNames.mask),this.contentEl.classList.add(this.classNames.contentEl),this.placeholderEl.classList.add(this.classNames.placeholder),this.heightAutoObserverWrapperEl.classList.add(this.classNames.heightAutoObserverWrapperEl),this.heightAutoObserverEl.classList.add(this.classNames.heightAutoObserverEl);this.el.firstChild;)this.contentEl.appendChild(this.el.firstChild);this.contentWrapperEl.appendChild(this.contentEl),this.offsetEl.appendChild(this.contentWrapperEl),this.maskEl.appendChild(this.offsetEl),this.heightAutoObserverWrapperEl.appendChild(this.heightAutoObserverEl),this.wrapperEl.appendChild(this.heightAutoObserverWrapperEl),this.wrapperEl.appendChild(this.maskEl),this.wrapperEl.appendChild(this.placeholderEl),this.el.appendChild(this.wrapperEl)}if(!this.axis.x.track.el||!this.axis.y.track.el){var t=document.createElement("div"),n=document.createElement("div");t.classList.add(this.classNames.track),n.classList.add(this.classNames.scrollbar),t.appendChild(n),this.axis.x.track.el=t.cloneNode(!0),this.axis.x.track.el.classList.add(this.classNames.horizontal),this.axis.y.track.el=t.cloneNode(!0),this.axis.y.track.el.classList.add(this.classNames.vertical),this.el.appendChild(this.axis.x.track.el),this.el.appendChild(this.axis.y.track.el)}this.axis.x.scrollbar.el=this.axis.x.track.el.querySelector("."+this.classNames.scrollbar),this.axis.y.scrollbar.el=this.axis.y.track.el.querySelector("."+this.classNames.scrollbar),this.options.autoHide||(this.axis.x.scrollbar.el.classList.add(this.classNames.visible),this.axis.y.scrollbar.el.classList.add(this.classNames.visible)),this.el.setAttribute("data-simplebar","init")},t.initListeners=function(){var e=this,t=Fc(this.el);this.options.autoHide&&this.el.addEventListener("mouseenter",this.onMouseEnter),["mousedown","click","dblclick"].forEach((function(t){e.el.addEventListener(t,e.onPointerEvent,!0)})),["touchstart","touchend","touchmove"].forEach((function(t){e.el.addEventListener(t,e.onPointerEvent,{capture:!0,passive:!0})})),this.el.addEventListener("mousemove",this.onMouseMove),this.el.addEventListener("mouseleave",this.onMouseLeave),this.contentWrapperEl.addEventListener("scroll",this.onScroll),t.addEventListener("resize",this.onWindowResize);var n=!1,r=t.ResizeObserver||Pc.a;this.resizeObserver=new r((function(){n&&e.recalculate()})),this.resizeObserver.observe(this.el),this.resizeObserver.observe(this.contentEl),t.requestAnimationFrame((function(){n=!0})),this.mutationObserver=new t.MutationObserver(this.recalculate),this.mutationObserver.observe(this.contentEl,{childList:!0,subtree:!0,characterData:!0})},t.recalculate=function(){var e=Fc(this.el);this.elStyles=e.getComputedStyle(this.el),this.isRtl="rtl"===this.elStyles.direction;var t=this.contentEl.offsetWidth,n=this.heightAutoObserverEl.offsetHeight<=1,r=this.heightAutoObserverEl.offsetWidth<=1||t>0,i=this.contentWrapperEl.offsetWidth,o=this.elStyles.overflowX,a=this.elStyles.overflowY;this.contentEl.style.padding=this.elStyles.paddingTop+" "+this.elStyles.paddingRight+" "+this.elStyles.paddingBottom+" "+this.elStyles.paddingLeft,this.wrapperEl.style.margin="-"+this.elStyles.paddingTop+" -"+this.elStyles.paddingRight+" -"+this.elStyles.paddingBottom+" -"+this.elStyles.paddingLeft;var s=this.contentEl.scrollHeight,c=this.contentEl.scrollWidth;this.contentWrapperEl.style.height=n?"auto":"100%",this.placeholderEl.style.width=r?(t||c)+"px":"auto",this.placeholderEl.style.height=s+"px";var l=this.contentWrapperEl.offsetHeight;this.axis.x.isOverflowing=0!==t&&c>t,this.axis.y.isOverflowing=s>l,this.axis.x.isOverflowing="hidden"!==o&&this.axis.x.isOverflowing,this.axis.y.isOverflowing="hidden"!==a&&this.axis.y.isOverflowing,this.axis.x.forceVisible="x"===this.options.forceVisible||!0===this.options.forceVisible,this.axis.y.forceVisible="y"===this.options.forceVisible||!0===this.options.forceVisible,this.hideNativeScrollbar();var u=this.axis.x.isOverflowing?this.scrollbarWidth:0,f=this.axis.y.isOverflowing?this.scrollbarWidth:0;this.axis.x.isOverflowing=this.axis.x.isOverflowing&&c>i-f,this.axis.y.isOverflowing=this.axis.y.isOverflowing&&s>l-u,this.axis.x.scrollbar.size=this.getScrollbarSize("x"),this.axis.y.scrollbar.size=this.getScrollbarSize("y"),this.axis.x.scrollbar.el.style.width=this.axis.x.scrollbar.size+"px",this.axis.y.scrollbar.el.style.height=this.axis.y.scrollbar.size+"px",this.positionScrollbar("x"),this.positionScrollbar("y"),this.toggleTrackVisibility("x"),this.toggleTrackVisibility("y")},t.getScrollbarSize=function(e){if(void 0===e&&(e="y"),!this.axis[e].isOverflowing)return 0;var t,n=this.contentEl[this.axis[e].scrollSizeAttr],r=this.axis[e].track.el[this.axis[e].offsetSizeAttr],i=r/n;return t=Math.max(~~(i*r),this.options.scrollbarMinSize),this.options.scrollbarMaxSize&&(t=Math.min(t,this.options.scrollbarMaxSize)),t},t.positionScrollbar=function(t){if(void 0===t&&(t="y"),this.axis[t].isOverflowing){var n=this.contentWrapperEl[this.axis[t].scrollSizeAttr],r=this.axis[t].track.el[this.axis[t].offsetSizeAttr],i=parseInt(this.elStyles[this.axis[t].sizeAttr],10),o=this.axis[t].scrollbar,a=this.contentWrapperEl[this.axis[t].scrollOffsetAttr],s=(a="x"===t&&this.isRtl&&e.getRtlHelpers().isRtlScrollingInverted?-a:a)/(n-i),c=~~((r-o.size)*s);c="x"===t&&this.isRtl&&e.getRtlHelpers().isRtlScrollbarInverted?c+(r-o.size):c,o.el.style.transform="x"===t?"translate3d("+c+"px, 0, 0)":"translate3d(0, "+c+"px, 0)"}},t.toggleTrackVisibility=function(e){void 0===e&&(e="y");var t=this.axis[e].track.el,n=this.axis[e].scrollbar.el;this.axis[e].isOverflowing||this.axis[e].forceVisible?(t.style.visibility="visible",this.contentWrapperEl.style[this.axis[e].overflowAttr]="scroll"):(t.style.visibility="hidden",this.contentWrapperEl.style[this.axis[e].overflowAttr]="hidden"),this.axis[e].isOverflowing?n.style.display="block":n.style.display="none"},t.hideNativeScrollbar=function(){this.offsetEl.style[this.isRtl?"left":"right"]=this.axis.y.isOverflowing||this.axis.y.forceVisible?"-"+this.scrollbarWidth+"px":0,this.offsetEl.style.bottom=this.axis.x.isOverflowing||this.axis.x.forceVisible?"-"+this.scrollbarWidth+"px":0},t.onMouseMoveForAxis=function(e){void 0===e&&(e="y"),this.axis[e].track.rect=this.axis[e].track.el.getBoundingClientRect(),this.axis[e].scrollbar.rect=this.axis[e].scrollbar.el.getBoundingClientRect(),this.isWithinBounds(this.axis[e].scrollbar.rect)?this.axis[e].scrollbar.el.classList.add(this.classNames.hover):this.axis[e].scrollbar.el.classList.remove(this.classNames.hover),this.isWithinBounds(this.axis[e].track.rect)?(this.showScrollbar(e),this.axis[e].track.el.classList.add(this.classNames.hover)):this.axis[e].track.el.classList.remove(this.classNames.hover)},t.onMouseLeaveForAxis=function(e){void 0===e&&(e="y"),this.axis[e].track.el.classList.remove(this.classNames.hover),this.axis[e].scrollbar.el.classList.remove(this.classNames.hover)},t.showScrollbar=function(e){void 0===e&&(e="y");var t=this.axis[e].scrollbar.el;this.axis[e].isVisible||(t.classList.add(this.classNames.visible),this.axis[e].isVisible=!0),this.options.autoHide&&this.hideScrollbars()},t.onDragStart=function(e,t){void 0===t&&(t="y");var n=Hc(this.el),r=Fc(this.el),i=this.axis[t].scrollbar,o="y"===t?e.pageY:e.pageX;this.axis[t].dragOffset=o-i.rect[this.axis[t].offsetAttr],this.draggedAxis=t,this.el.classList.add(this.classNames.dragging),n.addEventListener("mousemove",this.drag,!0),n.addEventListener("mouseup",this.onEndDrag,!0),null===this.removePreventClickId?(n.addEventListener("click",this.preventClick,!0),n.addEventListener("dblclick",this.preventClick,!0)):(r.clearTimeout(this.removePreventClickId),this.removePreventClickId=null)},t.onTrackClick=function(e,t){var n=this;if(void 0===t&&(t="y"),this.options.clickOnTrack){var r=Fc(this.el);this.axis[t].scrollbar.rect=this.axis[t].scrollbar.el.getBoundingClientRect();var i=this.axis[t].scrollbar.rect[this.axis[t].offsetAttr],o=parseInt(this.elStyles[this.axis[t].sizeAttr],10),a=this.contentWrapperEl[this.axis[t].scrollOffsetAttr],s=("y"===t?this.mouseY-i:this.mouseX-i)<0?-1:1,c=-1===s?a-o:a+o;!function e(){var i,o;-1===s?a>c&&(a-=40,n.contentWrapperEl.scrollTo(((i={})[n.axis[t].offsetAttr]=a,i)),r.requestAnimationFrame(e)):a<c&&(a+=40,n.contentWrapperEl.scrollTo(((o={})[n.axis[t].offsetAttr]=a,o)),r.requestAnimationFrame(e))}()}},t.getContentElement=function(){return this.contentEl},t.getScrollElement=function(){return this.contentWrapperEl},t.getScrollbarWidth=function(){try{return"none"===getComputedStyle(this.contentWrapperEl,"::-webkit-scrollbar").display||"scrollbarWidth"in document.documentElement.style||"-ms-overflow-style"in document.documentElement.style?0:jc()}catch(e){return jc()}},t.removeListeners=function(){var e=this,t=Fc(this.el);this.options.autoHide&&this.el.removeEventListener("mouseenter",this.onMouseEnter),["mousedown","click","dblclick"].forEach((function(t){e.el.removeEventListener(t,e.onPointerEvent,!0)})),["touchstart","touchend","touchmove"].forEach((function(t){e.el.removeEventListener(t,e.onPointerEvent,{capture:!0,passive:!0})})),this.el.removeEventListener("mousemove",this.onMouseMove),this.el.removeEventListener("mouseleave",this.onMouseLeave),this.contentWrapperEl.removeEventListener("scroll",this.onScroll),t.removeEventListener("resize",this.onWindowResize),this.mutationObserver.disconnect(),this.resizeObserver.disconnect(),this.recalculate.cancel(),this.onMouseMove.cancel(),this.hideScrollbars.cancel(),this.onWindowResize.cancel()},t.unMount=function(){this.removeListeners(),e.instances.delete(this.el)},t.isWithinBounds=function(e){return this.mouseX>=e.left&&this.mouseX<=e.left+e.width&&this.mouseY>=e.top&&this.mouseY<=e.top+e.height},t.findChild=function(e,t){var n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;return Array.prototype.filter.call(e.children,(function(e){return n.call(e,t)}))[0]},e}();Uc.defaultOptions={autoHide:!0,forceVisible:!1,clickOnTrack:!0,classNames:{contentEl:"simplebar-content",contentWrapper:"simplebar-content-wrapper",offset:"simplebar-offset",mask:"simplebar-mask",wrapper:"simplebar-wrapper",placeholder:"simplebar-placeholder",scrollbar:"simplebar-scrollbar",track:"simplebar-track",heightAutoObserverWrapperEl:"simplebar-height-auto-observer-wrapper",heightAutoObserverEl:"simplebar-height-auto-observer",visible:"simplebar-visible",horizontal:"simplebar-horizontal",vertical:"simplebar-vertical",hover:"simplebar-hover",dragging:"simplebar-dragging"},scrollbarMinSize:25,scrollbarMaxSize:0,timeout:1e3},Uc.instances=new WeakMap,Uc.initDOMLoadedElements=function(){document.removeEventListener("DOMContentLoaded",this.initDOMLoadedElements),window.removeEventListener("load",this.initDOMLoadedElements),Array.prototype.forEach.call(document.querySelectorAll('[data-simplebar]:not([data-simplebar="init"])'),(function(e){Uc.instances.has(e)||new Uc(e,zc(e.attributes))}))},Uc.removeObserver=function(){this.globalObserver.disconnect()},Uc.initHtmlApi=function(){this.initDOMLoadedElements=this.initDOMLoadedElements.bind(this),"undefined"!=typeof MutationObserver&&(this.globalObserver=new MutationObserver(Uc.handleMutations),this.globalObserver.observe(document,{childList:!0,subtree:!0})),"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?window.setTimeout(this.initDOMLoadedElements):(document.addEventListener("DOMContentLoaded",this.initDOMLoadedElements),window.addEventListener("load",this.initDOMLoadedElements))},Uc.handleMutations=function(e){e.forEach((function(e){Array.prototype.forEach.call(e.addedNodes,(function(e){1===e.nodeType&&(e.hasAttribute("data-simplebar")?!Uc.instances.has(e)&&new Uc(e,zc(e.attributes)):Array.prototype.forEach.call(e.querySelectorAll('[data-simplebar]:not([data-simplebar="init"])'),(function(e){!Uc.instances.has(e)&&new Uc(e,zc(e.attributes))})))})),Array.prototype.forEach.call(e.removedNodes,(function(e){1===e.nodeType&&(e.hasAttribute('[data-simplebar="init"]')?Uc.instances.has(e)&&Uc.instances.get(e).unMount():Array.prototype.forEach.call(e.querySelectorAll('[data-simplebar="init"]'),(function(e){Uc.instances.has(e)&&Uc.instances.get(e).unMount()})))}))}))},Uc.getOptions=zc,Cc.a&&Uc.initHtmlApi();var Kc=Uc,Wc=Us({data:function(){return{events:{}}},mounted:function(){var e=this;this.SimpleBar=new Kc(this.$refs.element,{forceVisible:"y",autoHide:!1}),this.trigger("inited",this.SimpleBar);var t=this.$refs.scrollElement,n=this.$refs.contentElement;t.addEventListener("scroll",(function(r){t.scrollTop===n.offsetHeight-t.offsetHeight&&e.trigger("reach-end",{event:r}),e.trigger("scroll",{event:r})}))},methods:{type:function(e){return["inited","scroll","reach-end"].indexOf(e)>-1},getScrollElement:function(){return this.$refs.scrollElement},on:function(e,t){this.type(e)&&"function"==typeof t&&(this.events[e]||(this.events[e]=[]),this.events[e].push(t))},trigger:function(e,t){if(this.events[e]&&this.events[e].length)for(var n=0;n<this.events[e].length;n++)this.events[e][n](t)},recalculate:function(){this.SimpleBar.recalculate()}}},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"element",staticClass:"simplebar"},[n("div",{staticClass:"simplebar-wrapper"},[e._m(0),e._v(" "),n("div",{staticClass:"simplebar-mask"},[n("div",{staticClass:"simplebar-offset"},[n("div",{ref:"scrollElement",staticClass:"simplebar-content-wrapper"},[n("div",{ref:"contentElement",staticClass:"simplebar-content"},[e._t("default")],2)])])]),e._v(" "),n("div",{staticClass:"simplebar-placeholder"})]),e._v(" "),e._m(1),e._v(" "),e._m(2)])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"simplebar-height-auto-observer-wrapper"},[t("div",{staticClass:"simplebar-height-auto-observer"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"simplebar-track simplebar-horizontal"},[t("div",{staticClass:"simplebar-scrollbar"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"simplebar-track simplebar-vertical"},[t("div",{staticClass:"simplebar-scrollbar"})])}],!1,null,null,null).exports,Vc=n(15),Gc=n.n(Vc),qc={main:"cvOfxyzb",content:"_2k7-6WJ9"},Jc=Us({components:{NodeView:Ks,Simplebar:Wc},props:["pnode","view","getPos","config"],data:function(){return{mathString:"",katexHTML:"",viewConfig:{canEdit:!0,center:!0}}},created:function(){this.node=this.pnode;var e=this.node.attrs.mathString;"string"==typeof e&&0!==e.length||(e="katex\\_no\\_found"),this.mathString=e},mounted:function(){var e=Gc.a.renderToString(this.mathString,{throwOnError:!1,displayMode:!0});e=e.replace(/\n/g,"").replace(/\<span class="katex-mathml">.+?<\/span>/,""),this.katexHTML=e},methods:{focus:function(){this.$refs.view.focus()},blur:function(){this.$refs.view.blur()},clickWrap:function(){dt(this.view,this.getPos())},getInfo:function(){return{node:this.pnode,view:this.view,nodePos:this.getPos(),config:this.config}}}},(function(){var e=this.$createElement,t=this._self._c||e;return t("NodeView",{ref:"view",attrs:{getInfo:this.getInfo,conf:this.viewConfig}},[t("div",{class:this.$style.main,attrs:{"data-type-katexblock":""},on:{click:this.clickWrap}},[t("Simplebar",{ref:"simplebar"},[t("div",{class:this.$style.content,domProps:{innerHTML:this._s(this.katexHTML)}})])],1)])}),[],!1,(function(e){this.$style=qc.locals||qc}),null,null).exports;function Xc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Zc=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.node=t,this.view=n,this.getPos=r,this.dom=document.createElement("div");var o=document.createElement("div");this.dom.appendChild(o),this.vueNode=new js.a({el:o,render:function(e){return e(Jc,{ref:"main",props:{pnode:t,view:n,getPos:r,config:i}})}})}var t,n,r;return t=e,(n=[{key:"selectNode",value:function(){this.vueNode.$refs.main.focus()}},{key:"deselectNode",value:function(){this.vueNode.$refs.main.blur()}},{key:"stopEvent",value:function(){return!0}}])&&Xc(t.prototype,n),r&&Xc(t,r),e}(),Qc={main:"_1hXuUPcV",btns:"_37ZanZsq",btn:"_2mFjt23v",on:"_2RJvEdyN"},Yc=Us({props:["getInfo","conf"],data:function(){return{status:"blur",config:{canEdit:!1},id:""}},computed:{focusClass:function(){return"focus"===this.status?this.$style.on:""}},created:function(){this.config=Object.assign({},this.config,this.conf||{})},mounted:function(){var e=this.getInfo();this.id=e.node.type.name+e.nodePos+String((new Date).getTime()).slice(-4)},methods:{focus:function(){this.status="focus"},blur:function(){this.status="blur"},edit:function(){var e=this.getInfo();e.config.editNode&&e.config.editNode(e.node.type.name,this.id,e.node.attrs,mt)},remove:function(){var e=this.getInfo(),t=Ne(e.view),n=e.view.state,r=e.nodePos,i=e.node;t(fr(0,n.tr,r,r+i.nodeSize))}}},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{class:[e.$style.main,e.focusClass],attrs:{"data-id":e.id,"data-inline-view":""},on:{mousedown:function(e){e.preventDefault()}}},[n("span",{class:e.$style.btns,attrs:{"data-view-btns":""}},[e.config.canEdit?n("span",{class:[e.$style.btn],attrs:{"data-view-btn":""},on:{click:function(t){return e.edit()}}},[e._v("编辑")]):e._e(),e._v(" "),n("span",{class:[e.$style.btn],attrs:{"data-view-btn":""},on:{click:function(t){return e.remove()}}},[e._v("删除")])]),e._t("default")],2)}),[],!1,(function(e){this.$style=Qc.locals||Qc}),null,null).exports,el={main:"_2jAWMnVw"},tl=Us({components:{InlineNodeView:Yc},props:["pnode","view","getPos","config"],data:function(){return{viewConfig:{canEdit:!0},katexHTML:""}},created:function(){this.node=this.pnode;var e=this.node.attrs.mathString;"string"==typeof e&&0!==e.length||(e="katex\\_no\\_found"),this.mathString=e},mounted:function(){var e=Gc.a.renderToString(this.mathString,{throwOnError:!1,displayMode:!1});e=e.replace(/\n/g,"").replace(/\<span class="katex-mathml">.+?<\/span>/,""),this.katexHTML=e},methods:{focus:function(){this.$refs.view.focus()},blur:function(){this.$refs.view.blur()},clickWrap:function(){dt(this.view,this.getPos())},getInfo:function(){return{node:this.pnode,view:this.view,nodePos:this.getPos(),config:this.config}}}},(function(){var e=this.$createElement,t=this._self._c||e;return t("InlineNodeView",{ref:"view",attrs:{getInfo:this.getInfo,conf:this.viewConfig}},[t("span",{class:this.$style.main,attrs:{"data-type-katexinline":""},domProps:{innerHTML:this._s(this.katexHTML)},on:{click:this.clickWrap}})])}),[],!1,(function(e){this.$style=el.locals||el}),null,null).exports;function nl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var rl=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.node=t,this.view=n,this.getPos=r,this.dom=document.createElement("span");var o=document.createElement("span");this.dom.appendChild(o),this.vueNode=new js.a({el:o,render:function(e){return e(tl,{ref:"main",props:{pnode:t,view:n,getPos:r,config:i}})}})}var t,n,r;return t=e,(n=[{key:"update",value:function(e){return!1}},{key:"selectNode",value:function(){this.vueNode.$refs.main.focus()}},{key:"deselectNode",value:function(){this.vueNode.$refs.main.blur()}},{key:"stopEvent",value:function(){return!0}}])&&nl(t.prototype,n),r&&nl(t,r),e}();function il(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ol=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dom=document.createElement("span"),this.dom.innerText="‍",this.dom.setAttribute("data-type","zerowidth")}var t,n,r;return t=e,(n=[{key:"stopEvent",value:function(){return!0}}])&&il(t.prototype,n),r&&il(t,r),e}();function al(e,t,n){var r=ti(e,n),i=null==Gr.getState(e.state);if(!r||!Zr(t,r)){if(!i)return;r=t}var o=new Wr(t,r);if(i||!e.state.selection.eq(o)){var a=e.state.tr.setSelection(o);i&&a.setMeta(Gr,t.pos),Se(e,a)}}function sl(e){var t,n,i=e.state,o=i.selection;if(o instanceof Wr){if(o.$anchorCell.pos!==o.$headCell.pos)return;t=o.$anchorCell.nodeAfter,n=o.$anchorCell.pos}else{if(!(t=function(e){for(var t=e.depth;t>0;t--)if(e.node(t).type.name===r.TABLE_CELL)return e.node(t);return null}(o.$from)))return;n=Yr(o.$from).pos}if(1!==t.attrs.colspan||1!==t.attrs.rowspan){var a=t.attrs,s=[];a.rowspan>1&&(a=Jr(a,"rowspan",1)),a.colspan>1&&(a=Jr(a,"colspan",1));for(var c,l=ni(i),u=i.tr,f=l.top;f<l.bottom;f++){var d=l.map.positionAt(f,l.left,l.table);f===l.top&&(d+=t.nodeSize);for(var h=l.left,p=0;h<l.right;h++,p++)h===l.left&&f===l.top||u.insert(c=u.mapping.map(d+l.tableStart,1),i.schema.nodes[r.TABLE_CELL].createAndFill(s[p]))}if(u.setNodeMarkup(n,null,a),o instanceof Wr){var v=u.doc.resolve(o.$anchorCell.pos),m=c&&u.doc.resolve(c);u.setSelection(new Wr(v,m))}Se(e,u)}}function cl(e,t){var n=e.offsetTop||0,r=e.offsetParent;for(t=t||"body";r&&r.closest(t);)n+=r.offsetTop,r=r.offsetParent;return n}function ll(e){for(var t={left:e.offsetLeft||0,top:e.offsetTop||0},n=e.offsetParent;n;)t.left+=n.offsetLeft,t.top+=n.offsetTop,n=n.offsetParent;return t.right=t.left+e.clientWidth,t.bottom=t.top+e.clientHeight,t}function ul(e,t,n){return t===n?0:e.slice(t,n).map((function(e){return e.size})).reduce((function(e,t){return e+t}),0)}var fl={tableWrap:"_2ewQx-Sm",tableCornerHandle:"_1tuoauHy",tableRowHandle:"_3-wnXjXs",tableColHandle:"oTCL9yuh",tableColHandleWrap:"_2pWTLo1V",tableRowHandleWrap:"AA41QwmK",tableInner:"_21UMiRMZ",mask:"_10mKFVWm",tableActiveBorder:"_14shNuIh",on:"qVabBuX_",hide:"HtWfiaav",colMenu:"_3t3qWDyu",rowMenu:"TkiEow5E",item:"-Fjuf16M",contextMenu:"LudkylA1"},dl=Us({components:{NodeView:Ks,Simplebar:Wc},props:["pnode","view","getPos","config","contentDOM"],data:function(){return{state:{selecting:!1,selectedCells:[],menuType:null,focus:!1,activeRows:[],activeCols:[],hoverDOM:null,resizing:!1,contextMenuState:{}},activeBorder:{left:0,top:12,width:10,height:10},menuRect:{left:0,top:0},contextMenuRect:{left:0,top:0},maskRect:{left:0,top:12,width:10,height:10},cols:[],rows:[]}},computed:{tableWidth:function(){return this.cols.reduce((function(e,t){return t.size+e}),0)},activeBorderStyle:function(){return{left:this.activeBorder.left+"px",top:this.activeBorder.top+"px",height:this.activeBorder.height+"px",width:this.activeBorder.width+"px"}},maskStyle:function(){return{left:this.maskRect.left+"px",top:this.maskRect.top+"px",height:this.maskRect.height+1+"px",width:this.maskRect.width+1+"px"}},menuStyle:function(){return{left:this.menuRect.left+"px",top:this.menuRect.top+"px",height:this.menuRect.height+1+"px",width:this.menuRect.width+1+"px"}},contextMenuStyle:function(){return{left:this.contextMenuRect.left+"px",top:this.contextMenuRect.top+"px"}}},created:function(){this.update(this.pnode)},mounted:function(){var e=this;this.$refs.main&&this.$refs.main.appendChild(this.contentDOM),this.$nextTick((function(){e.$refs.simpleBar&&e.$refs.simpleBar.recalculate(),e.refreshRowsHandler()}))},methods:{focus:function(){},blur:function(){this.clearResizer()},mousedownWrap:function(e){this.$refs.main.contains(e.target)||e.preventDefault()},contextmenuHandler:function(e){e.preventDefault();var t=this;document.addEventListener("mousedown",(function e(){t.state.contextMenuState.show=!1,document.removeEventListener("mousedown",e)})),t.state.contextMenuState.show=!0,t.state.contextMenuState.merge=!0,t.state.contextMenuState.split=!0,this.contextMenuRect={top:e.offsetY-15,left:e.offsetX}},mousedownHandler:function(e,t){"table"===e&&function(e,t){if(!t.ctrlKey&&!t.metaKey){var n=e.view,r=n.state.selection,i=e.$refs.main,o=ei(i,r.anchorNode),a=ei(i,t.target),s=ti(n,t);if(t.shiftKey&&r instanceof Wr)return al(n,r.$anchorCell,t),void t.preventDefault();if(t.shiftKey&&a&&o&&o!==a)return al(n,s,t),void t.preventDefault();a&&(e.state.selecting=!0,document.addEventListener("mouseup",l),document.addEventListener("mousemove",c))}function c(e){var r,i=Gr.getState(n.state);if(null!=i)r=n.state.doc.resolve(i);else if(ei(n,e.target)!==a&&!(r=ti(n,t)))return l();r&&al(n,r,e)}function l(){e.state.selecting=!1,null!=Gr.getState(n.state)&&setTimeout((function(){n.dispatch(n.state.tr.setMeta(Gr,-1))})),document.removeEventListener("mouseup",l),document.removeEventListener("mousemove",c)}}(this,t),"resizeLeft"!==e&&"resizeRight"!==e||function(e,t,n){var r=t.pageX;if(t.preventDefault(),e.state.resizing=!0,e.state.hoverDOM){var i=qr(e,e.state.hoverDOM);if("resizeLeft"===n&&(i-=1),!(i<0)){var o=e.cols[i].size,a=e.activeBorder.width,s=e.activeBorder.left;document.addEventListener("mouseup",(function t(){document.removeEventListener("mouseup",t),document.removeEventListener("mousemove",c),e.state.resizing=!1})),document.addEventListener("mousemove",c)}}function c(t){var c=t.pageX-r,l=Math.max(100,o+c);e.cols[i].size=l,e.activeBorder="resizeLeft"===n?Object.assign({},e.activeBorder,{left:s+l-o}):Object.assign({},e.activeBorder,{width:a+l-o}),e.updateSelection(),e.$refs.simplebar&&e.$refs.simplebar.recalculate(),t.preventDefault()}}(this,t,e)},refreshRowsHandler:function(){var e=this;this.$nextTick((function(){var t=function(e){var t=e.querySelectorAll("tr"),n=[];return t.forEach((function(e){n.push(e.offsetHeight)})),n}(e.$refs.main);e.rows=t.map((function(e){return{size:e}}))}))},hoverCell:function(e){if(!this.state.resizing&&!this.state.selecting){var t=e.target,n=t.closest("[data-col]"),r=t.closest("td")||t.closest("th")||n;if(r){this.state.hoverDOM=r;var i=cl(r,"[data-table-inner]");this.activeBorder={left:r.offsetLeft,top:i,width:r.offsetWidth+1,height:r.offsetHeight+1}}else this.clearResizer()}},deleteCell:function(){"col"===this.state.menuType&&(function(e,t,n,r){for(var i=Lr.get(n),o=r+1,a=e.state.tr,s=a.mapping.maps.length,c=0;c<i.height;){var l=c*i.width+t,u=i.map[l],f=n.nodeAt(u);if(t>0&&i.map[l-1]===u||t<i.width-1&&i.map[l+1]===u){var d=a.mapping.slice(s).map(o+u),h=Jr(f.attrs,"colspan",f.attrs.colspan-1);a.setNodeMarkup(d,null,h)}else{var p=a.mapping.slice(s).map(o+u);a.delete(p,p+f.nodeSize)}c+=f.attrs.rowspan}Se(e,a)}(this.view,this.state.menuIndex,this.node,this.getPos()),this.cols.splice(this.state.menuIndex,1),(void 0)(this.view,this.cols,this.node,this.getPos())),"row"===this.state.menuType&&function(e,t,n,r){for(var i=Lr.get(n),o=r+1,a=e.state.tr,s=a.mapping.maps.length,c=0,l=0;l<t;l++)c+=n.child(l).nodeSize;var u=c+n.child(t).nodeSize;a.delete(c+o,u+o);for(var f=0,d=t*i.width;f<i.width;f++,d++){var h=i.map[d];if(t>0&&h===i.map[d-i.width]){var p=n.nodeAt(h).attrs;a.setNodeMarkup(a.mapping.slice(s).map(h+o),null,Jr(p,"rowspan",p.rowspan-1)),f+=p.colspan-1}else if(t<i.width&&h===i.map[d+i.width]){var v=n.nodeAt(h),m=v.type.create(Jr(v.attrs,"rowspan",v.attrs.rowspan-1),v.content),g=i.positionAt(t+1,f,n);a.insert(a.mapping.slice(s).map(o+g),m),f+=v.attrs.colspan-1}}Se(e,a)}(this.view,this.state.menuIndex,this.node,this.getPos()),this.clearMenu(),this.clearSelection()},addCell:function(){"col"===this.state.menuType&&(function(e,t,n,i){for(var o=Lr.get(n),a=i+1,s=e.state,c=s.tr,l=0;l<o.height;l++){var u=l*o.width+t;if(t>0&&t<o.width&&o.map[u-1]===o.map[u]){var f=o.map[u],d=n.nodeAt(f),h=c.mapping.map(a+f),p=Jr(d.attrs,"colspan",d.attrs.colspan+1);c.setNodeMarkup(h,null,p),l+=d.attrs.rowspan-1}else{var v=s.schema.nodes[r.TABLE_CELL],m=o.positionAt(l,t,n),g=s.schema.nodes[r.PARAGRAPH].createAndFill();c.insert(c.mapping.map(a+m),v.createAndFill(null,g))}}Se(e,c)}(this.view,this.state.menuIndex+1,this.node,this.getPos()),this.cols.splice(this.state.menuIndex+1,0,{size:100}),(void 0)(this.view,this.cols,this.node,this.getPos())),"row"===this.state.menuType&&function(e,t,n,i){for(var o=Lr.get(n),a=i+1,s=e.state,c=s.tr,l=a,u=0;u<t;u++)l+=n.child(u).nodeSize;for(var f=[],d=0,h=o.width*t;d<o.width;d++,h++)if(t>0&&t<o.height&&o.map[h]===o.map[h-o.width]){var p=o.map[h],v=n.nodeAt(p).attrs;c.setNodeMarkup(a+p,null,Jr(v,"rowspan",v.rowspan+1)),d+=v.colspan-1}else{var m=s.schema.nodes[r.TABLE_CELL],g=s.schema.nodes[r.PARAGRAPH].createAndFill();f.push(m.createAndFill(null,g))}var y=s.schema.nodes[r.TABLE_ROW];c.insert(l,y.create(null,f)),Se(e,c)}(this.view,this.state.menuIndex+1,this.node,this.getPos()),this.clearMenu(),this.clearSelection()},mergeCell:function(){!function(e){var t=e.state,n=t.selection;if(!(n instanceof Wr)||n.$anchorCell.pos===n.$headCell.pos)return!1;var r=ni(t),i=r.map;if(function(e,t){for(var n=e.width,r=e.height,i=e.map,o=t.top*n+t.left,a=o,s=(t.bottom-1)*n+t.left,c=o+(t.right-t.left-1),l=t.top;l<t.bottom;l++){if(t.left>0&&i[a]==i[a-1]||t.right<n&&i[c]==i[c+1])return!0;a+=n,c+=n}for(var u=t.left;u<t.right;u++){if(t.top>0&&i[o]==i[o-n]||t.bottom<r&&i[s]==i[s+n])return!0;o++,s++}return!1}(i,r))return!1;for(var o,a,s=t.tr,c={},l=we.c.empty,u=r.top;u<r.bottom;u++)for(var f=r.left;f<r.right;f++){var d=i.map[u*i.width+f],h=r.table.nodeAt(d);if(!c[d])if(c[d]=!0,null==o)o=d,a=h;else{ri(h)||(l=l.append(h.content));var p=s.mapping.map(d+r.tableStart);s.delete(p,p+h.nodeSize)}}var v=Jr(a.attrs,"colspan",r.right-r.left);if(v=Jr(v,"rowspan",r.bottom-r.top),s.setNodeMarkup(o+r.tableStart,null,v),l.size){var m=o+1+a.content.size,g=ri(a)?o+1:m;s.replaceWith(g+r.tableStart,m+r.tableStart,l)}s.setSelection(new Wr(s.doc.resolve(o+r.tableStart))),Se(e,s)}(this.view)},splitCell:function(){sl(this.view)},clearResizer:function(){this.state.hoverDOM=null,this.activeBorder={left:0,top:0,width:0,height:0}},selectRow:function(e,t){if(!t.ctrlKey&&!t.metaKey){var n,r,i,o,a,s,c,l,u=this.state.activeRows;if(t.shiftKey&&u.length>0){var f=u[0],d=u[1]||f;u[0]=Math.min(f,e),u[1]=Math.max(d,e)}else u=[e];this.state.activeRows=u,n=this.view,r=this.node,i=this.getPos(),o=u,a=i+1,s=n.state.tr,c=Lr.get(r).map[0],l=s.doc.resolve(a+c),s.setSelection(new Wr(l,l,{rows:o})),s.setMeta(Gr,-1),Se(n,s),this.state.menuType="row",this.state.menuIndex=e,this.menuRect={top:this.rows.slice(0,e+1).map((function(e){return e.size})).reduce((function(e,t){return e+t}),0),left:0}}},selectCol:function(e,t){if(!t.ctrlKey&&!t.metaKey){var n,r,i,o,a,s,c,l,u=this.state.activeCols;if(t.shiftKey&&u.length>0){var f=u[0],d=u[1]||f;u[0]=Math.min(f,e),u[1]=Math.max(d,e)}else u=[e];this.state.activeCols=u,n=this.view,r=this.node,i=this.getPos(),o=u,a=i+1,s=n.state.tr,c=Lr.get(r).map[0],l=s.doc.resolve(a+c),s.setSelection(new Wr(l,l,{cols:o})),s.setMeta(Gr,-1),Se(n,s),this.state.menuType="col",this.state.menuIndex=e,this.menuRect={left:this.cols.slice(0,e+1).map((function(e){return e.size})).reduce((function(e,t){return e+t}),0),top:0}}},setSelection:function(e,t,n){if(n){if(n.cols){var r=n.cols,i=r[0],o=r[r.length-1],a=this.cols.slice(0,i).map((function(e){return e.size})).reduce((function(e,t){return e+t}),0),s=this.cols.slice(i,o+1).map((function(e){return e.size})).reduce((function(e,t){return e+t}),0);this.maskRect={left:a,top:12,width:s,height:this.rows.map((function(e){return e.size})).reduce((function(e,t){return e+t}),0)}}else if(n.rows){var c=n.rows,l=c[0],u=c[c.length-1],f=this.rows.slice(0,l).map((function(e){return e.size})).reduce((function(e,t){return e+t}),0),d=this.rows.slice(l,u+1).map((function(e){return e.size})).reduce((function(e,t){return e+t}),0);this.maskRect={left:0,top:f+12,width:this.cols.map((function(e){return e.size})).reduce((function(e,t){return e+t}),0),height:d}}}else{var h=Math.min(e.left,t.left),p=Math.max(e.right,t.right),v=Math.min(e.top,t.top),m=Math.max(e.bottom,t.bottom);this.maskRect={startRect:e,endRect:t,left:ul(this.cols,0,h),top:ul(this.rows,0,v)+12,width:ul(this.cols,h,p),height:ul(this.rows,v,m)}}},updateSelection:function(){this.maskRect.startRect&&this.setSelection(this.maskRect.startRect,this.maskRect.endRect)},clearSelection:function(){this.state.activeRows=[],this.state.activeCols=[],this.maskRect={left:-20,top:0,width:0,height:0}},clearMenu:function(){this.state.menuType=null,this.state.menuIndex=0,this.menuRect={top:0,left:0}},getInfo:function(){return{node:this.pnode,view:this.view,nodePos:this.getPos(),config:this.config}},update:function(e){this.node=e;var t=e.attrs||{};if(t.colWidth&&t.colWidth[0])this.cols=t.colWidth.map((function(e){return{size:e}}));else if(!this.cols||!this.cols[0]){var n=Lr.get(this.node),r=800/n.width;this.cols=Array(n.width).fill(null).map((function(){return{size:r}}))}this.refreshRowsHandler()}}},(function(){var e,t,n,r,i,o=this,a=o.$createElement,s=o._self._c||a;return s("div",{ref:"wrap",class:[o.$style.tableWrap],on:{mousedown:o.mousedownWrap}},[s("div",{class:o.$style.tableCornerHandle,attrs:{"data-ignore":""}}),o._v(" "),s("div",{class:[o.$style.rowMenu,(e={},e[o.$style.on]="row"===o.state.menuType,e)],style:o.menuStyle,attrs:{"data-ignore":""}},[s("div",{class:[o.$style.item,o.$style.delete],attrs:{"data-ignore":""},on:{click:o.deleteCell}},[o._v("删")]),o._v(" "),s("div",{class:[o.$style.item,o.$style.add],attrs:{"data-ignore":""},on:{click:o.addCell}},[o._v("加")])]),o._v(" "),s("div",{class:[o.$style.contextMenu,(t={},t[o.$style.on]=o.state.contextMenuState.show,t)],style:o.contextMenuStyle,attrs:{"data-ignore":""},on:{mousedown:function(e){e.stopPropagation()}}},[o.state.contextMenuState.merge?s("div",{class:[o.$style.item],attrs:{"data-ignore":""},on:{click:o.mergeCell}},[o._v("合并单元格")]):o._e(),o._v(" "),o.state.contextMenuState.split?s("div",{class:[o.$style.item],attrs:{"data-ignore":""},on:{click:o.splitCell}},[o._v("拆分单元格")]):o._e()]),o._v(" "),s("div",{ref:"rowHandleWrap",class:o.$style.tableRowHandleWrap,on:{mouseover:o.hoverCell}},o._l(o.rows,(function(e,t){return s("div",{key:t,class:o.$style.tableRowHandle,style:{height:e.size+"px"},attrs:{"data-ignore":"","data-row":"",row:t},on:{mousedown:function(e){return o.selectRow(t,e)}}})})),0),o._v(" "),s("Simplebar",{ref:"simplebar"},[s("div",{class:o.$style.tableInner,style:{width:o.tableWidth+"px"},attrs:{"data-ignore":"","data-table-inner":""}},[s("div",{ref:"colHandleWrap",class:o.$style.tableColHandleWrap,attrs:{"data-ignore":""},on:{mouseover:o.hoverCell}},o._l(o.cols,(function(e,t){return s("div",{key:t,class:o.$style.tableColHandle,style:{width:e.size+"px"},attrs:{"data-ignore":"","data-col":"",col:t},on:{mousedown:function(e){return o.selectCol(t,e)}}})})),0),o._v(" "),s("div",{class:[o.$style.colMenu,(n={},n[o.$style.on]="col"===o.state.menuType,n)],style:o.menuStyle,attrs:{"data-ignore":""}},[s("div",{class:[o.$style.item,o.$style.delete],attrs:{"data-ignore":""},on:{click:o.deleteCell}},[o._v("删")]),o._v(" "),s("div",{class:[o.$style.item,o.$style.add],attrs:{"data-ignore":""},on:{click:o.addCell}},[o._v("加")])]),o._v(" "),s("div",{class:[o.$style.tableActiveBorder,(r={},r[o.$style.on]=o.state.resizing,r),(i={},i[o.$style.hide]=o.state.selecting,i)],style:o.activeBorderStyle,attrs:{"data-ignore":""}},[s("div",{style:{height:o.activeBorder.height+"px"},attrs:{"data-ignore":"","data-l":""},on:{mousedown:function(e){return o.mousedownHandler("resizeLeft",e)}}}),o._v(" "),s("div",{style:{height:o.activeBorder.height+"px"},attrs:{"data-ignore":"","data-r":""},on:{mousedown:function(e){return o.mousedownHandler("resizeRight",e)}}}),o._v(" "),s("div",{style:{width:o.activeBorder.width+"px"},attrs:{"data-ignore":"","data-b":""}}),o._v(" "),s("div",{style:{width:o.activeBorder.width+"px"},attrs:{"data-ignore":"","data-t":""}})]),o._v(" "),s("div",{class:o.$style.mask,style:o.maskStyle,attrs:{"data-ignore":""}}),o._v(" "),s("table",{ref:"main",style:{width:o.tableWidth+"px"},on:{mouseover:o.hoverCell,contextmenu:o.contextmenuHandler,mousedown:function(e){return o.mousedownHandler("table",e)}}},[s("colgroup",o._l(o.cols,(function(e){return s("col",{key:e.id,style:{width:e.size+"px"},attrs:{"data-ignore":""}})})),0)])])])],1)}),[],!1,(function(e){this.$style=fl.locals||fl}),null,null).exports;function hl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var pl=function(){function e(t,n,r,i){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.node=t,this.view=n,this.getPos=r,this.dom=document.createElement("div");var a=document.createElement("div");this.dom.appendChild(a),this.contentDOM=document.createElement("tbody"),this.contentDOM.setAttribute("data-ignore",""),this.vueNode=new js.a({el:a,render:function(e){return e(dl,{ref:"main",props:{pnode:t,view:n,getPos:r,config:i,contentDOM:o.contentDOM}})}})}var t,n,r;return t=e,(n=[{key:"setSelection",value:function(){var e=this.view.state.selection,t=this.getPos()+1,n=this.vueNode.$refs.main;if(e instanceof Wr){var r=e.$anchorCell.pos-t,i=e.$headCell.pos-t,o=Lr.get(this.node),a=o.findCell(r),s=o.findCell(i);this.selected=!0,n&&n.setSelection(a,s,e.cellMeta)}else this.selected&&(this.selected=!1,n&&n.clearSelection())}},{key:"update",value:function(e){return e.type===this.node.type&&(this.node=e,this.vueNode.$refs.main&&this.vueNode.$refs.main.update&&this.vueNode.$refs.main.update(e),!0)}},{key:"ignoreMutation",value:function(e){var t=e.target,n=t.className,r=!1;return"attributes"===e.type&&(r=t===this.vueNode.$el||n.indexOf("simplebar")>-1||t.hasAttribute("data-ignore")||"table"===t.nodeName.toLowerCase()&&"style"===e.attributeName),"selection"===e.type&&(r=t.hasAttribute("data-ignore")),r}}])&&hl(t.prototype,n),r&&hl(t,r),e}(),vl=n(30),ml=n.n(vl);function gl(e){return(gl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var yl=new ml.a;function bl(e){var t,n,r,i,o=e.view,a=e.content,s=o.state.selection.$from,c=e.isInCode,l=we.a.fromSchema(o.state.schema),u=e.parseType,f=e.contentType;if(u===f.TEXT){if(c)return new we.i(we.c.from(o.state.schema.text(a)),0,0);t=document.createElement("div"),a.trim().split(/(?:\r\n?|\n)+/).forEach((function(e){t.appendChild(document.createElement("p")).textContent=e})),n=l.parseSlice(t,{preserveWhitespace:!0,context:s})}else if(u===f.MARKDOWN){var d=j(yl.render(a)),h=we.f.fromJSON(o.state.schema,d);n=new we.i(h.content,0,0)}else u===f.HTML&&((r=(t=function(e){var t=/(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var n,r=(Ol||(Ol=document.implementation.createHTMLDocument("title"))).createElement("div"),i=/(?:<meta [^>]*>)*<([a-z][^>\s]+)/i.exec(e),o=0;(n=i&&kl[i[1].toLowerCase()])&&(e=n.map((function(e){return"<"+e+">"})).join("")+e+n.map((function(e){return"</"+e+">"})).reverse().join(""),o=n.length),r.innerHTML=e;for(var a=0;a<o;a++)r=r.firstChild;return r}(a))&&t.querySelector("[data-pm-slice]"))?(i=/^(\d+) (\d+) (.*)/.exec(r.getAttribute("data-pm-slice")),n=l.parseSlice(t,{preserveWhitespace:!0,context:s})):n=l.parseSlice(t,{preserveWhitespace:!1,context:s}));return i?function(e,t){if(!e.size)return e;var n,r=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(t){return e}for(var i=e.content,o=e.openStart,a=e.openEnd,s=n.length-2;s>=0;s-=2){var c=r.nodes[n[s]];if(!c||c.hasRequiredAttrs())break;i=we.c.from(c.create(n[s+1],i)),o++,a++}return new we.i(i,o,a)}(function(e,t,n){return t<e.openStart&&(e=new we.i(El(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new we.i(El(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}(n,+i[1],+i[2]),i[3]):we.i.maxOpen(function(e,t){if(e.childCount<2)return e;for(var n=function(n){var r=t.node(n).contentMatchAt(t.index(n)),i=void 0,o=[];if(e.forEach((function(e){if(o){var t,n=r.findWrapping(e.type);if(!n)return o=null;if(t=o.length&&i.length&&function e(t,n,r,i,o){if(o<t.length&&o<n.length&&t[o]==n[o]){var a=e(t,n,r,i.lastChild,o+1);if(a)return i.copy(i.content.replaceChild(i.childCount-1,a));if(i.contentMatchAt(i.childCount).matchType(o==t.length-1?r.type:t[o+1]))return i.copy(i.content.append(we.c.from(wl(r,t,o+1))))}}(n,i,e,o[o.length-1],0))o[o.length-1]=t;else{o.length&&(o[o.length-1]=function e(t,n){if(0==n)return t;var r=t.content.replaceChild(t.childCount-1,e(t.lastChild,n-1)),i=t.contentMatchAt(t.childCount).fillBefore(we.c.empty,!0);return t.copy(r.append(i))}(o[o.length-1],i.length));var a=wl(e,n);o.push(a),r=r.matchType(a.type,a.attrs),i=n}}})),o)return{v:we.c.from(o)}},r=t.depth;r>=0;r--){var i=n(r);if("object"===gl(i))return i.v}return e}(n.content,s),!1)}function wl(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t.length-1;r>=n;r--)e=t[r].create(null,we.c.from(e));return e}function El(e,t,n,r,i,o){var a=t<0?e.firstChild:e.lastChild,s=a.content;return i<r-1&&(s=El(s,t,n,r,i+1,o)),i>=n&&(s=t<0?a.contentMatchAt(0).fillBefore(s,e.childCount>1||o<=i).append(s):s.append(a.contentMatchAt(a.childCount).fillBefore(we.c.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,a.copy(s))}var kl={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Ol=null;function _l(e){return function e(t){var n=document.createElement("body");n.innerHTML=t,t=n.innerHTML;var r=n.querySelectorAll("img");if(!r.length)return t;for(var i,o=[],a=0;!o.length&&(i=r[a]);)o=xl(i),a++;if(!o.length)return t;var s=o[o.length-1].outerHTML,c=function(e,t){for(var n="",r="",i=e.length,o=0;o<i;o++)n+="</",n+=e[o].nodeName.toLowerCase(),n+=">";for(var a=i-1;a>=0;a--)r+=e[a].outerHTML.match(/<[^>]+>/)[0];return n+t+r}(o,i.outerHTML),l=s.replace(i.outerHTML,c);return e(t.replace(s,l))}(e=function(e){return/(<p|<div|<section|<pre)/i.test(e)||(e="<p>"+e+"</p>"),e}(e=p(e)))}function xl(e){for(var t=[];e;){var n=e.parentNode;if(!(n&&["body","html","#document"].indexOf(n.nodeName.toLowerCase())<0))break;t.push(n),e=n}return t}function Sl(e){var t=e.slice,n=e.isInEmptyParagraph,i=function(e){var t=we.c.empty,n=e.content.length;return e.forEach((function(i,o,a){if(i.type.name===r.IMAGE){var s=Object.assign({},i.attrs);s.fromPaste=!0,i=i.type.create(s)}if(i.type.name===r.PARAGRAPH&&"br"===i.attrs.origin){var c=a-1,l=null;if(c>=0&&(l=e.child(c)),l&&"br"!==l.attrs.origin)return}(n!==a+1||i.type.name!==r.PARAGRAPH||i.textContent)&&(t=t.append(we.c.from(i)))})),t}(t.content);if(n)return new we.i(i,0,0);if(t.openStart>1&&t.openEnd===t.openStart&&1===i.childCount&&1===i.firstChild.childCount&&i.firstChild.firstChild.isInline){var o=t.openStart-1;return new we.i(i,o,o)}return new we.i(i,t.openStart,t.openEnd)}var Nl=new ml.a;function Ml(e,t,n){n=n||Al;var r=!1,i=(e=(e=e.replace(/\r\n/g,"\n")).replace(/\r/g,"\n")).split("\n");return!t&&(r=function(e,t){var n=[],r=null;return e.every((function(e){return r&&e&&(0===n.length&&n.push(r),n.push(e)),r=e,!(n.length>0&&!e)})),!(n.length>0)||function(e,t){var n=t("div");return n.innerHTML=Nl.render(e.join("\n")),function e(t){var n="";if(3===t.nodeType)n=t.nodeValue.replace(/\s+/g,"");else{for(var r=0,i=t.childNodes.length;r<i;r++)n+=e(t.childNodes[r]);var o=t.tagName.toLowerCase().replace(/\d/,"");["br","hr","div","li","p","tr","th","h"].indexOf(o)>-1&&(n+="\n")}return n.replace(/\n+/g,"\n")}(n).split("\n").length>e.length}(n,t)}(i,n))?r:r=function(e,t){var n=t("div");n.innerHTML=Nl.render(e);var r=0;return Cl.forEach((function(e){n.querySelector(e[0])&&(r+=e[1])})),r>2}(e,n)}var Cl=[["h1",1],["h2",1],["h3",1],["h4",1],["h5",1],["ol",1],["ul",1],["dl",1],["blockquote",1],["pre",3],["table",1],["hr",1],["img",3],["a",3],["em",1],["code",1],["s",1],["strong",1]];function Al(e){return document.createElement(e)}function Tl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Dl={TEXT:1,HTML:2,FILES:3,NULL:4,MARKDOWN:5};function Il(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Rl=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"init",value:function(e,t,n){this.view=e,this.event=t,n=n||{},this.viewConfig=n,this.config=Object.assign({parseContentType:null,transformContent:null},n.pasteOptions||{}),this.isInEmptyParagraph=function(e){var t=e.selection;if(t.empty){var n=t.$from.depth,i=t.$from.parent;if(i.type.name===r.PARAGRAPH&&/^\s{0,3}$/.test(i.textContent)&&1===n)return!0}return!1}(e.state),this.isInCode=e.state.selection.$from.parent.type.spec.code,this.contentType=Dl}},{key:"doPaste",value:function(){return this.setFiles(),this.html&&!this.text&&this.htmlToText(),this.html||this.text||this.files?(this.parseType=this.parseContentType(),this.config.parseContentType&&(this.parseType=this.config.parseContentType(this)),this.parseType===Dl.NULL?null:(this.parseType===Dl.MARKDOWN&&this.clearMarkdown(),this.setContent(),this.parseType!==Dl.FILES&&(this.transformContent(),this.slice=bl(this),this.slice=Sl(this)),this.dispatch(),void this.clear())):null}},{key:"parseContentType",value:function(){return this.files&&this.files.length>0?Dl.FILES:this.text&&(this.view.shiftKey||this.isInCode||!this.html)?Ml(this.text)&&!this.isInCode&&this.isInEmptyParagraph?Dl.MARKDOWN:Dl.TEXT:this.html?Ml(this.text,!0)&&this.isInEmptyParagraph?Dl.MARKDOWN:Dl.HTML:Dl.NULL}},{key:"transformContent",value:function(){var e=this.content.indexOf("data-pm-slice")>-1;this.config.transformContent&&!e&&(this.content=this.config.transformContent(this,this.content)),this.parseType===Dl.TEXT&&(this.content=this.content),this.parseType!==Dl.HTML||e||(this.content=_l(this.content))}},{key:"parseContentToSlice",value:function(){this.slice=bl(this),this.slice=Sl(this)}},{key:"dispatch",value:function(){var e,t,n,i,o,a,s;this.parseType===Dl.FILES?this.viewConfig.insertFileFromPasteAndDrag&&ht(this.view,this.content):this.isInEmptyParagraph?(e=this.view,t=this.slice,n=e.state.tr,i=n.curSelection.$cursor,o=i.before(),a=i.after(),s=0,t.content.descendants((function(e,t){e.type.name===r.TEXT&&(s=t+e.text.length)})),n=n.replaceRange(o,a,t),s>0&&(n=n.setSelection(Oe.h.create(n.doc,o+s))),Se(e,n)):this.defaultDispatch()}},{key:"defaultDispatch",value:function(){var e,t=0===(e=this.slice).openStart&&0===e.openEnd&&1===e.content.childCount?e.content.firstChild:null,n=this.view.state.tr;n=(n=t?n.replaceSelectionWith(t,this.view.shiftKey):n.replaceSelection(this.slice)).scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste"),Se(this.view,n)}},{key:"setContent",value:function(){switch(this.parseType){case Dl.TEXT:case Dl.MARKDOWN:this.content=this.text;break;case Dl.NULL:this.content="";break;case Dl.HTML:this.content=this.html;break;case Dl.FILES:this.content=this.files}}},{key:"setText",value:function(e){this.text=e}},{key:"setHTML",value:function(e){this.html=e}},{key:"htmlToText",value:function(){var e=this.event.clipboardData,t=e&&e.getData("text/plain");if(e&&t)this.text=t;else{var n=this.view.dom.parentNode.appendChild(document.createElement("div"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.innerHTML=this.html,this.text=n.innerText}}},{key:"setFiles",value:function(){var e=this.event.clipboardData.files,t=this.event.clipboardData.types;e.length>0&&!/html/i.test(t.join(","))&&(this.files=e)}},{key:"clearMarkdown",value:function(){this.text=this.text.replace(/^\s+```/gm,"```")}},{key:"clear",value:function(){this.content=null,this.parseType=null,this.text=null,this.html=null,this.files=null}}])&&Tl(t.prototype,n),i&&Tl(t,i),e}()),Ll=Il({},r.CODE_INLINE,{toDOM:function(){return["code",0]}}),Pl=new we.h({nodes:Object.assign({},cn.c,Ll),marks:cn.b});function Bl(e,t,n,i){var o;return new fs(e,{state:t,dispatchTransaction:n,nodeViews:(o={},Il(o,r.HORIZONTAL_RULE,(function(e,t,n){return new mc(e,t,n,i)})),Il(o,r.VIDEO,(function(e,t,n){return new _c(e,t,n,i)})),Il(o,r.EMBED_COMPONENT,(function(e,t,n){return new Nc(e,t,n,i)})),Il(o,r.IMAGE,(function(e,t,n){return new wc(e,t,n,i)})),Il(o,r.CODE_BLOCK,(function(e,t,n){return new hc(e,t,n,i)})),Il(o,r.KATEX_BLOCK,(function(e,t,n){return new Zc(e,t,n,i)})),Il(o,r.KATEX_INLINE,(function(e,t,n){return new rl(e,t,n,i)})),Il(o,r.ZERO_WIDTH,(function(e,t,n){return new ol(e,t,n,i)})),Il(o,r.TABLE,(function(e,t,n){return new pl(e,t,n,i)})),o),handlePaste:function(e,t){return Rl.init(e,t,i),Rl.doPaste(),!0},transformPastedHTML:function(e){return Rl.setHTML(e),e},transformPastedText:function(e){return Rl.setText(e),e},clipboardTextSerializer:function(e){var t=e.content;if(1===t.content.length){var n=t.content[0];if(n.type.spec.transformCopyDom&&n.type.spec.transformCopyDom(n),n.type.spec.toText)return n.type.spec.toText(n)}},clipboardSerializer:we.b.fromSchema(Pl)})}var $l={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},jl=null;function zl(e){var t=/(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var n,r=(jl||(jl=document.implementation.createHTMLDocument("title"))).createElement("div"),i=/(?:<meta [^>]*>)*<([a-z][^>\s]+)/i.exec(e),o=0;(n=i&&$l[i[1].toLowerCase()])&&(e=n.map((function(e){return"<"+e+">"})).join("")+e+n.map((function(e){return"</"+e+">"})).reverse().join(""),o=n.length),r.innerHTML=e;for(var a=0;a<o;a++)r=r.firstChild;return r}function Fl(e){return 55296<=e&&e<=56319}function Hl(e){return 56320<=e&&e<=57343}function Ul(e){if("string"!=typeof e)return 0;var t=0,n=/[\u0000-\u007E]/g,r=/[\uFF00-\uFFFF\u4E00-\u9FA5\u3000-\u3012]/g,i=e.match(n)||[],o=e.match(r)||[];return function(e,t){for(var n,r,i=e.length,o=[],a=0;a<i;){if(Fl(n=e.charCodeAt(a++))){if(a===i){t("invalid",n);continue}if(!Hl(r=e.charCodeAt(a++))){a-=1;continue}n=r-56320+(n-55296<<10)+65536}var s=[];n<128?s.push(n):n<2048?(s.push(192|n>>6),s.push(128|63&n)):n<65536?(s.push(224|n>>12),s.push(128|n>>6&63),s.push(128|63&n)):(s.push(240|n>>18),s.push(128|n>>12&63),s.push(128|n>>6&63),s.push(128|63&n)),o=o.concat(s),t("valid",s)}}(e=(e=e.replace(n,"")).replace(r,""),(function(e,n){"valid"===e&&n&&n.length>1?t+=1:t+=.5})),Math.ceil(t+i.length/2+o.length)}function Kl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kl(Object(n),!0).forEach((function(t){Vl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ql=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mounted=r||function(){},this.menuStatusUpdateHandles=[],this.dom=t,this.$node=n,this.editor=null,this.config={collab:null,pasteOptions:null,insertFileFromPasteAndDrag:!0,nodeViews:{},editNode:function(){},postMessage:function(){},update:function(){}}}var t,n,i;return t=e,(n=[{key:"init",value:function(e){var t=this;this.config=Object.assign(this.config,e);var n=Object.assign({},this.config);n.editNode=function(e,n,r,i){r=Object.assign({},r||{}),t.config.editNode(e,n,r,i)},this.config.collab?this.editor=new Is(Wl(Wl({},this.config.collab),{},{dom:this.dom,update:this._update.bind(this)}),(function(e,t,r){return Bl(e,t,r,n)}),(function(){t.mounted()})):this.editor=new Bs({doc:this.config.doc,dom:this.dom,update:this._update.bind(this)},(function(e,t,r){return Bl(e,t,r,n)}),(function(){t.mounted()}))}},{key:"setDoc",value:function(e){this.config.collab||this.editor.setDoc(e)}},{key:"getDoc",value:function(){return this.editor.view.state.doc.toJSON()}},{key:"getCollabDoc",value:function(){if(this.config.collab)return this.editor.getDoc()}},{key:"hasUnconfirmedSteps",value:function(){if(this.config.collab)return this.editor.hasUnconfirmedSteps()}},{key:"addCollabAllSavedHandle",value:function(e){this.config.collab&&"function"==typeof e&&(this.hasUnconfirmedSteps()?this.editor.addAllSavedHandle(e):e())}},{key:"hasContent",value:function(){var e=this.getTextString();if((e=e.replace(/[\s\u3000]/g,"")).length>0)return!0;var t=!1;return this.editor.view.state.doc.descendants((function(e){[r.IMAGE,r.VIDEO].indexOf(e.type.name)>-1&&(t=!0)})),t}},{key:"getTextContentLength",value:function(){return Ul(this.getTextString())}},{key:"getTextString",value:function(){var e="";return this.editor.view.state.doc.descendants((function(t){t.type.name===r.TEXT&&(e+=t.text),t.type.name!==r.KATEX_BLOCK&&t.type.name!==r.KATEX_INLINE||(e+=t.attrs.mathString)})),e}},{key:"getAllImages",value:function(){var e=this,t=[];return this.editor.view.state.doc.forEach((function(n,i){if(n.type.name===r.IMAGE){var o=e.editor.view.domAtPos(i);if(o&&o.node){var a=o.node.children[o.offset];a=a.querySelector("[data-block-view]"),t.push({pos:a.getAttribute("data-id"),attrs:n.attrs})}}})),t}},{key:"getTextContent",value:function(){var e=[];return this.editor.view.state.doc.descendants((function(t){t.type.name!==r.HEADING&&t.type.name!==r.PARAGRAPH||e.push({type:t.type.name,text:t.textContent||""})})),e}},{key:"insertNode",value:function(e){var t=this.editor.view.state;if(t.schema.nodes[e.type].isBlock){var n=be(t,t.tr,e.type,e.attrs);Se(this.editor.view,n)}if(t.schema.nodes[e.type].isInline){var r=xe(t,t.tr,e.type,e.attrs);Se(this.editor.view,r)}}},{key:"insertBlocks",value:function(e){var t=this.editor.view.state;if(e&&e[0]){var n=[];e.forEach((function(e){var r=t.schema.nodes[e.type];r&&r.isBlock&&n.push(t.schema.nodes[e.type].create(e.attrs))}));var r=new we.i(we.c.fromArray(n),0,0),i=Ee(t,t.tr,r,t.tr.curSelection.to);Se(this.editor.view,i)}}},{key:"updateNode",value:function(e){var t=document.querySelector("[data-id=".concat(e.pos,"]"));if(t){var n=this.editor.view.posAtDOM(t,0);n&&(e.type===r.LINK&&(n-=1),function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=e.state,a=o.selection,s=o.tr;s=s.setNodeMarkup(t,null,i),a.node&&a.from===t&&a.node.isInline&&(s=s.setSelection(Oe.c.create(s.doc,t)));var c=s.doc.nodeAt(t);if(n===r.LINK&&c&&c.type.name===r.LINK){var l=c.textContent,u=i.defaultText;if(u||l!==i.href||(u=i.href),u&&u!==l){var f=l.length,d=t+1;s=s.replaceWith(d,d+f,o.schema.text(u))}}Se(e,s)}(this.editor.view,n,e.type,e.attrs))}}},{key:"deleteNode",value:function(e){var t=document.querySelector("[data-id=".concat(e.pos,"]"));if(t){var n,i,o,a,s=this.editor.view.posAtDOM(t,0);s&&(e.type===r.LINK&&(s-=1),n=this.editor.view,i=s,o=n.state,a=o.tr,Se(n,a=ot(o,a,i)))}}},{key:"focus",value:function(){this.editor.view.focus()}},{key:"focusHead",value:function(){var e,t,n,r,i;e=this.editor.view,n=e.state,r=n.tr,(i=n.doc.nodeSize-2)>10&&(i=10),n.doc.nodesBetween(0,i,(function(e,n){!e.isTextblock||e.textContent||t||(t=n+1),e.isText&&!t&&(t=n)})),Se(e,r=r.setSelection(Oe.h.create(n.doc,t))),e.focus()}},{key:"focusFoot",value:function(){var e,t,n,r,i;e=this.editor.view,n=e.state,r=n.tr,i=n.doc.nodeSize,n.doc.nodesBetween(i-10,i-2,(function(e,n){e.isText&&(t=n+e.text.length),e.isTextblock&&!e.textContent&&(t=n+1)})),Se(e,r=r.setSelection(Oe.h.create(n.doc,t))),e.focus()}},{key:"getSchemaTypes",value:function(){return r}},{key:"getErrorStatus",value:function(){return pt}},{key:"getNormalStatus",value:function(){return vt}},{key:"getHeadingList",value:function(){var e=[];return this.editor.view.state.doc.descendants((function(t,n){t.type.name===r.HEADING&&e.push({pos:n,text:t.textContent,level:t.attrs.level})})),e}},{key:"scrollToNode",value:function(e){this.$node.scrollToNode(e)}},{key:"getDomByPos",value:function(e){return this.$node.getDomByPos(e)}},{key:"toggelMenu",value:function(e){var t,n,r;t=this.editor.view,n=e.type,r=e.attrs,st[n]&&st[n](t,n,r)}},{key:"addMenuStatusUpdateHandle",value:function(e){"function"==typeof e&&this.menuStatusUpdateHandles.push(e)}},{key:"parseHTML",value:function(e){return function(e){var t=Object(cn.a)(),n=zl(e);return we.a.fromSchema(t).parse(n)}(e)}},{key:"_update",value:function(){this.editor.view&&(this.config.update&&this.config.update(this.editor.view),this._triggerMenuStatusUpdateListener())}},{key:"_triggerMenuStatusUpdateListener",value:function(){var e=Ke(this.editor.view.state,this.editor.view),t=e.menuStatus;this.menuStatusUpdateHandles.forEach((function(n){n((function(n){return{bottomBlock:e.bottomBlock,bottomBlocks:e.bottomBlocks,marks:e.marks,isActive:"a"===t[n],isDisabled:"d"===t[n]}}))}))}}])&&Gl(t.prototype,n),i&&Gl(t,i),e}(),Jl={menu:"YLUYWGeV",btn:"_3DSA44lQ"},Xl=Us({data:function(){return{menuParams:{},menuStyle:{},menuList:[]}},mounted:function(){this.init(),document.addEventListener("dragover",this.handlerFunction.bind(this),!1),document.addEventListener("drop",this.handlerFunction.bind(this),!1)},destroyed:function(){document.removeEventListener("dragover",this.handlerFunction),document.removeEventListener("drop",this.handlerFunction)},methods:{init:function(){var e=this;this.editorAPI=new ql(this.$refs.editor,this,(function(){e.editorAPI._update();var t=e.$refs.editor.querySelector(".ProseMirror");t.onblur=function(){e.editorAPI._update()},t.onfocus=function(){e.editorAPI._update()}})),this.$emit("inited",this.editorAPI)},scrollHandle:function(){},nodeMouseoutHandle:function(e){e.target.getAttribute("data-type")===r.LINK&&this.hideInlineMenu()},nodeMouseoverHandle:function(e){var t=e.target;if(t.getAttribute("data-type")===r.LINK){var n=this.editorAPI.editor.view.posAtDOM(t,0);if(!n)return;n-=1;var i=this.editorAPI.editor.view.state.doc.nodeAt(n),o=t.getAttribute("data-id");this.setInlineMenu(o,i,t,n),this.showInlineMenu(t)}},menuMouseoverHandle:function(){this.hideInlineMenuTime&&clearTimeout(this.hideInlineMenuTime)},menuMouseoutHandle:function(){this.hideInlineMenu()},clickHandle:function(){},setInlineMenu:function(e,t,n,i){var o=this;this.menuParams={id:e,node:t,dom:n,pos:i},t.type.name===r.LINK&&(this.menuList=[{index:1,text:"取消链接",fn:function(){o.menuParams.pos&&ft(o.editorAPI.editor.view,o.menuParams.pos),o.clearMenu()}},{index:2,text:"访问链接",fn:function(){window.open(o.menuParams.node.attrs.href),o.clearMenu()}}])},showInlineMenu:function(e){this.hideInlineMenuTime&&clearTimeout(this.hideInlineMenuTime);var t=ll(this.$refs.main),n=ll(e),r=n.top-t.top-30,i=n.left-t.left-0;this.menuStyle={top:r+"px",left:i+"px"}},hideInlineMenu:function(){var e=this;this.hideInlineMenuTime&&clearTimeout(this.hideInlineMenuTime),this.hideInlineMenuTime=setTimeout((function(){e.clearMenu()}),300)},clearMenu:function(){this.menuParams={},this.menuStyle={top:"0px",left:"-3000px"}},menuEdit:function(){this.editorAPI.config.editNode&&this.menuParams.id&&(this.editorAPI.config.editNode(this.menuParams.node.type.name,this.menuParams.id,this.menuParams.node.attrs,mt),this.clearMenu())},scrollToNode:function(e){var t=cl(this.getDomByPos(e)),n=window.innerHeight/2;this.scrollTop(t-n)},getDomByPos:function(e){var t=this.editorAPI.editor.view.state.doc.resolve(e);return t.depth>0?e=t.before():t.nodeAfter||(e=this.editorAPI.editor.view.state.doc.resolve(e-1).before()),this.editorAPI.editor.view.nodeDOM(e)},scrollTop:function(e){setTimeout((function(){document.documentElement.scrollTop=document.body.scrollTop=e}),100)},handlerFunction:function(e){if(this.editorAPI.config.insertFileFromPasteAndDrag&&(e.preventDefault(),"drop"===e.type)){var t=e.dataTransfer.files;if(t&&t[0]){var n,i=this.editorAPI.editor.view,o=i.posAtCoords({left:(n=e).clientX,top:n.clientY}),a=i.state.doc;if(o&&o.pos!==a.nodeSize-2&&a.resolve(o.pos))return void ht(i,t,o.pos);if(a.lastChild.type.name===r.PARAGRAPH||a.lastChild.type.name===r.HEADING){var s=a.nodeSize-3;ht(i,t,s),this.scrollToNode(s)}}}}}},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"main",attrs:{"data-type":"editor"}},[n("div",{ref:"editor",attrs:{"data-type":"doc"},on:{mouseover:e.nodeMouseoverHandle,mouseout:e.nodeMouseoutHandle,click:e.clickHandle}}),e._v(" "),n("div",{ref:"menu",class:e.$style.menu,style:e.menuStyle,on:{mouseover:e.menuMouseoverHandle,mouseout:e.menuMouseoutHandle}},[n("div",{class:[e.$style.btn],on:{click:function(t){return e.menuEdit()}}},[e._v("编辑")]),e._v(" "),e._l(e.menuList,(function(t){return n("div",{key:t.index,class:[e.$style.btn],on:{click:function(e){return t.fn()}}},[e._v(e._s(t.text))])}))],2)])}),[],!1,(function(e){this.$style=Jl.locals||Jl}),null,null).exports,Zl=Us({components:{Simplebar:Wc},props:["pnode","view","getPos","config","contentDOM"],data:function(){return{numbers:[]}},created:function(){this.numbers=new Array(this.pnode.childCount).fill().map((function(e,t){return t+1}))},mounted:function(){var e=this;this.$refs.codes&&this.$refs.codes.appendChild(this.contentDOM),this.$nextTick((function(){e.$refs.simpleBar&&e.$refs.simpleBar.recalculate()}))},methods:{copyCode:function(){var e=new Xs,t="";this.pnode.forEach((function(e,n){0!==n&&(t+="\n"),t+=e.textContent}));var n=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");n='<pre lang="'.concat(this.lang,'">').concat(n,"</pre>"),e.setData("text/plain",t),e.setData("text/html",n),ec(e),this.postMessage({type:"toastCreate",attrs:{text:"复制成功"}})},postMessage:function(e){this.config&&this.config.postMessage&&this.config.postMessage(e)}}},(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{"data-codeblock-wrap":""}},[t("div",{attrs:{"data-codeblock-codes":""}},[t("Simplebar",{ref:"simpleBar"},[t("div",{ref:"codes"})])],1),this._v(" "),t("div",{attrs:{"data-codeblock-copy":""},on:{click:this.copyCode}},[this._v("复制代码")]),this._v(" "),t("div",{attrs:{"data-codeblock-index":""}},this._l(this.numbers,(function(e){return t("div",{key:e,attrs:{"data-codeblock-number":e}})})),0)])}),[],!1,null,null,null).exports,Ql=function e(t,n,i,o){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.node=t,this.config=o,this.contentDOM=document.createElement("pre"),this.contentDOM.setAttribute("data-origin","pm_code_preview"),this.contentDOM.setAttribute("lang",t.attrs.lang);var s=document.createElement("div");this.dom=document.createElement("div"),this.dom.setAttribute("data-type",r.CODE_BLOCK),this.dom.appendChild(s),this.vueNode=new js.a({el:s,render:function(e){return e(Zl,{ref:"main",props:{pnode:t,view:n,getPos:i,config:o,contentDOM:a.contentDOM}})}})},Yl=Us({props:["pnode","view","getPos","config"],data:function(){return{node:null,href:null,src:null,title:null,attrs:[]}},created:function(){this.node=this.pnode,this.src=this.node.attrs.src,this.title=this.node.attrs.title||null,this.href=this.node.attrs.href||null;var e=[],t=this.node.attrs.style;t&&t[0]&&t.forEach((function(t){var n,r,i;t&&"string"==typeof t.key&&t.value&&e.push((n={},r="data-style-".concat(t.key),i=String(t.value),r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n))})),this.attrs=e},methods:{clickHandler:function(){var e={src:this.src,dom:this.$refs.img};this.href&&(e.href=this.href),this.postMessage({type:this.href?"linkClick":"imageClick",attrs:e})},postMessage:function(e){this.config&&this.config.postMessage&&this.config.postMessage(e)}}},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._b({attrs:{"data-content":""},on:{click:e.clickHandler,touchend:e.clickHandler}},"div",e.attrs,!1),[e.href?[n("a",{attrs:{href:e.href}},[n("img",{ref:"img",attrs:{src:e.src}})])]:[n("img",{ref:"img",attrs:{src:e.src}})],e._v(" "),e.title?n("div",{attrs:{"data-title":""}},[e._v(e._s(e.title))]):e._e()],2)}),[],!1,null,null,null).exports,eu=function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dom=document.createElement("div"),this.dom.setAttribute("data-type","image");var o=document.createElement("div");this.dom.appendChild(o),this.contentDOM=document.createElement("div"),this.vueNode=new js.a({el:o,render:function(e){return e(Yl,{ref:"main",props:{pnode:t,view:n,getPos:r,config:i}})}})};function tu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var nu=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dom=document.createElement("div"),this.dom.setAttribute("data-type",r.VIDEO);var i=t.attrs.videoHTML;!function(e,t){t=t.replace(/\n/g,"").replace(/^\s+/,"").replace(/\s+$/,"");var n=t.match(/^<iframe[^>]*src=(['"]?(https?:)?\/\/(\w+.)?\b(youku|iqiyi|qq|bilibili)\b.com\/\S+(['"])?)[^>]*>.*?<\/iframe>$/);if(function(e){return e=(e=e.replace(/<iframe/i,"")).replace(/<\/iframe/i,""),!/</.test(e)&&!/script/.test(e)}(t)&&n&&n[1]){var r=n[1].replace(/^['"]*|['"]*$/g,"");r=r.replace(/^https?/,"https"),e.innerHTML='<iframe src="'.concat(r,'" autoPlay="false" frameborder="0" framespacing="0" allowFullScreen="true" scrolling="no"></iframe>')}else e.innerText=t}(this.dom,i),setTimeout((function(){!function(e){var t=e.offsetWidth,n=e.querySelector("iframe"),r=Math.floor(t/16*9),i=n.getAttribute("width"),o=n.getAttribute("height");if(/^\d+$/.test(i)&&/^\d+$/.test(o)){var a=Number(i),s=Number(o);r=Math.floor(t/a*s)}n.style.height=r+"px",n.style.width=t+"px"}(n.dom)}),100)}var t,n,i;return t=e,(n=[{key:"selectNode",value:function(){}},{key:"deselectNode",value:function(){}}])&&tu(t.prototype,n),i&&tu(t,i),e}();function ru(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var iu=function(){function e(t,n,i,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.node=t,this.view=n,this.config=o,this.dom=document.createElement("div"),this.contentDOM=document.createElement("div"),this.dom.setAttribute("data-type",r.EMBED_COMPONENT);var a=document.createElement("div");this.dom.appendChild(a),this.postMessage({dom:a,type:"componentCreate",attrs:this.node.attrs})}var t,n,i;return t=e,(n=[{key:"postMessage",value:function(e){this.config&&this.config.postMessage&&this.config.postMessage(e)}}])&&ru(t.prototype,n),i&&ru(t,i),e}(),ou=Us({components:{Simplebar:Wc},props:["pnode"],data:function(){return{katexHTML:""}},created:function(){var e=this.pnode.attrs.mathString;if("string"==typeof e&&0!==e.length){var t=Gc.a.renderToString(e,{throwOnError:!1,displayMode:!0});this.katexHTML=t.replace(/\n/g,"").replace(/\<span class="katex-mathml">.+?<\/span>/,"")}}},(function(){var e=this.$createElement,t=this._self._c||e;return t("Simplebar",{ref:"simplebar"},[t("div",{attrs:{"data-content":""},domProps:{innerHTML:this._s(this.katexHTML)}})])}),[],!1,null,null,null).exports,au=function e(t,n,i,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dom=document.createElement("div"),this.dom.setAttribute("data-math",t.attrs.mathString),this.dom.setAttribute("data-type",r.KATEX_BLOCK);var a=document.createElement("div");this.dom.appendChild(a),this.contentDOM=document.createElement("div"),this.vueNode=new js.a({el:a,render:function(e){return e(ou,{ref:"main",props:{pnode:t,view:n,getPos:i,config:o}})}})};function su(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var cu,lu,uu=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=t.attrs.mathString;if(this.node=t,this.dom=document.createElement("span"),this.dom.setAttribute("data-type","katexinline"),this.dom.setAttribute("data-math",r),"string"==typeof r&&0!==r.length){var i=Gc.a.renderToString(r,{throwOnError:!1,displayMode:!1});this.dom.innerHTML=i.replace(/\n/g,"").replace(/\<span class="katex-mathml">.+?<\/span>/,"")}}var t,n,r;return t=e,(n=[{key:"addDecoration",value:function(e){}}])&&su(t.prototype,n),r&&su(t,r),e}();function fu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function du(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hu=(du(cu={},r.DOC,{content:"block+"}),du(cu,r.PARAGRAPH,{content:"inline*",group:"block",attrs:{indent:{default:0},number:{default:0},align:{default:null}},isBase:!0,toDOM:function(e){var t=e.attrs,n=t.indent,i=t.number,o=t.align,a={};return"number"==typeof n&&n>0&&n<9&&(a["data-indent-".concat(n)]=""),"number"==typeof i&&i>0&&(a["data-number"]=i),["center","right"].indexOf(o)>-1&&(a["data-align-".concat(o)]=""),a["data-type"]=r.PARAGRAPH,["p",a,0]}}),du(cu,r.BLOCK_QUOTE,{content:"block+",group:"block",toDOM:function(){var e={};return e["data-type"]=r.BLOCK_QUOTE,["blockquote",e,0]}}),du(cu,r.HORIZONTAL_RULE,{group:"block",toDOM:function(){var e={};return e["data-type"]=r.HORIZONTAL_RULE,["hr",e,0]}}),du(cu,r.HEADING,{attrs:{align:{default:null},level:{default:1},id:{default:null}},content:"inline*",group:"block",toDOM:function(e){var t={},n=e.attrs.align,i=e.attrs.id,o=e.attrs.level;return[1,2,3,4,5].indexOf(o)<0&&(o=5),["center","right"].indexOf(n)>-1&&(t["data-align-".concat(n)]=""),i&&(t["data-id"]=i),t["data-type"]=r.HEADING,["h"+o,t,0]}}),du(cu,r.CODE_BLOCK,{attrs:{lang:{default:"text"}},content:"text*",group:"block",toDOM:function(){return["pre",["code",0]]}}),du(cu,r.CODE_BLOCK_PREVIEW,{attrs:{lang:{default:"text"}},content:"block+",group:"block",draggable:!1,selectable:!1,toDOM:function(){return["pre",0]}}),du(cu,r.CODE_BLOCK_PREVIEW_LINE,{content:"text*",group:"block",toDOM:function(){var e={};return e["data-type"]=r.CODE_BLOCK_PREVIEW_LINE,["code",e,0]}}),du(cu,r.KATEX_BLOCK,{attrs:{mathString:{default:null}},group:"block",draggable:!1,selectable:!1,toDOM:function(){return["div",0]}}),du(cu,r.KATEX_INLINE,{attrs:{mathString:{default:null}},content:"text*",group:"inline",draggable:!1,selectable:!1,inline:!0,toDOM:function(){return["span"]}}),du(cu,r.TEXT,{group:"inline"}),du(cu,r.IMAGE,{attrs:{src:{default:null},alt:{default:null},title:{default:null},style:{default:null},href:{default:null}},draggable:!1,selectable:!1,group:"block",toDOM:function(e){var t={};return t.src=e.attrs.src,["img",t]}}),du(cu,r.VIDEO,{attrs:{videoHTML:{default:null}},group:"block",toDOM:function(){return["div"]}}),du(cu,r.EMBED_COMPONENT,{attrs:{type:{default:""},data:{default:null}},group:"block",atom:!0,draggable:!1,selectable:!1,toDOM:function(){return["div"]}}),du(cu,r.LINK,{inline:!0,content:"text*",group:"inline",attrs:{href:{},title:{default:""}},toDOM:function(e){var t={};return t.href=e.attrs.href,t.title=e.attrs.title||"",t["data-type"]=r.LINK,["a",t,0]}}),du(cu,r.CODE_INLINE,{inline:!0,content:"text*",group:"inline",toDOM:function(){var e={};return e["data-type"]=r.CODE_INLINE,["code",e,0]}}),du(cu,r.SUP,{inline:!0,content:"text*",group:"inline",toDOM:function(){var e={};return e["data-type"]=r.SUP,["sup",e,0]}}),du(cu,r.SUB,{inline:!0,content:"text*",group:"inline",toDOM:function(){var e={};return e["data-type"]=r.SUB,["sub",e,0]}}),du(cu,r.ZERO_WIDTH,{marks:"",group:"inline",selectable:!1,inline:!0,atom:!0,toDOM:function(){return["span",0]}}),cu),pu=(du(lu={},r.MARK_CLASS,{attrs:{className:{}},toDOM:function(e){var t={};return t["data-type"]=r.MARK_CLASS,t.class=e.attrs.className,["span",t,0]}}),du(lu,r.ITALIC,{toDOM:function(){var e={};return e["data-type"]=r.ITALIC,["i",e,0]}}),du(lu,r.DEL,{toDOM:function(){var e={};return e["data-type"]=r.DEL,["s",e,0]}}),du(lu,r.UNDERLINE,{toDOM:function(){var e={};return e["data-type"]=r.UNDERLINE,["u",e,0]}}),du(lu,r.SIZE,{attrs:{size:{}},toDOM:function(e){var t={},n=e.attrs.size;return"number"==typeof n&&n>8&&n<99&&(t["data-size"]=n),t["data-type"]=r.SIZE,["span",t,0]}}),du(lu,r.COLOR,{attrs:{color:{},name:{}},toDOM:function(e){var t={},n=e.attrs.color,i=e.attrs.name;return/^#[a-f0-9]{6}$/i.test(n)&&/^[a-z_]{1,20}$/i.test(i)&&(t["data-name"]=i,t.style="color: ".concat(n)),t["data-type"]=r.COLOR,["span",t,0]}}),du(lu,r.BG_COLOR,{attrs:{color:{},name:{}},toDOM:function(e){var t={},n=e.attrs.color,i=e.attrs.name;return/^#[a-f0-9]{6}$/i.test(n)&&/^[a-z_]{1,20}$/i.test(i)&&(t["data-name"]=i,t.style="background: ".concat(n)),t["data-type"]=r.BG_COLOR,["span",t,0]}}),du(lu,r.STRONG,{toDOM:function(){var e={};return e["data-type"]=r.STRONG,["strong",e,0]}}),lu);function vu(e){var t=[],n=!0;e.content.forEach((function(e){!function(e){if(!e)return!1;if([r.PARAGRAPH,r.HEADING].indexOf(e.type)<0)return!1;var t=function e(t){var n="";return t.content&&t.content[0]?(t.content.forEach((function(t){"text"===t.type?n+=t.text:n+=e(t)})),n):n}(e);return!!/^\s{0,5}$/.test(t)}(e)?(n=!1,t.push(e)):(n||t.push(e),n=!0)})),e.content=t}function mu(e){var t=function e(t){var n=[];return t.forEach((function(t){gu.indexOf(t.type)>-1?n=n.concat(function(e){var t=[];if(e.content&&e.content[0]){var n={text:"",nodes:[]},r=e.content.length;e.content.forEach((function(i,o){"text"===i.type?(n.nodes.push(i),n.text+=i.text,n.rightStart=r-o-1,n.parent=e):(n.text&&t.push(n),n={text:"",nodes:[]})})),n.text&&t.push(n)}return t}(t)):t.content&&t.content[0]&&(n=n.concat(e(t.content)))})),n}(e.content);return vu(e),function(e){e.forEach((function(e){var t=e.text,n=[];t.replace(/[\u4E00-\u9FA5][a-z0-9@#&\$\%]/gi,(function(e,t){n.push(t+1)})),t.replace(/[a-z0-9][\u4E00-\u9FA5]/gi,(function(e,t){n.push(t+1)})),n.sort((function(e,t){return e-t}));var r=0;e.nodes.forEach((function(e){var t=e.text.length,i=0;n.forEach((function(n){if(r+t>=n&&n>r){var o=n-r+i,a=e.text.substring(0,o);a+=" ",a+=e.text.substring(o,t+i),i++,e.text=a}})),r+=t}))}))}(t),e}hu[r.NUMBERED_LIST]={content:"".concat(r.LIST_ITEM,"+"),group:"block",attrs:{start:{default:1},normalizeStart:{default:1}},toDOM:function(e){var t=e.attrs.start,n={};return"number"==typeof t&&t>1&&(n.start=t),n["data-type"]=r.NUMBERED_LIST,["ol",n,0]}},hu[r.BULLETED_LIST]={content:"".concat(r.LIST_ITEM,"+"),group:"block",toDOM:function(){var e={};return e["data-type"]=r.BULLETED_LIST,["ul",e,0]}},hu[r.LIST_ITEM]={content:"".concat(r.PARAGRAPH," ").concat(r.IMAGE),group:"block",attrs:{listStyle:{default:null}},toDOM:function(){return r.LIST_ITEM,["li",0]}};var gu=[r.PARAGRAPH,r.HEADING],yu=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/g,bu=[r.PARAGRAPH];function wu(e){e.content.forEach((function(e){if(bu.indexOf(e.type)>-1&&e.content&&e.content[0]){var t=[],n=!1;e.content.forEach((function(e){if("text"===e.type){var i=e.text;if(yu.test(i))return n=!0,void(t=t.concat(function(e,t){var n=e.length,i=[],o=0;if(Eu(e).forEach((function(n){var a=n.start,s=a+n.text.length;if(o<a){var c=e.substring(o,a);i.push(ku(t,c)),o=a}if(o>=a&&o<s){var l=e.substring(a,s);i.push(function(e,t){return{type:r.LINK,attrs:{href:e.text,title:""},content:[t]}}(n,ku(t,l))),o=s}})),o<n){var a=e.substring(o,n);i.push(ku(t,a))}return i}(i,e)))}t.push(e)})),n&&(e.content=t)}}))}function Eu(e){var t=[];return e.replace(yu,(function(e){t.push({text:e,start:arguments[arguments.length-2]})})),t}function ku(e,t){var n={type:"text",text:t};return e.marks&&(n.marks=e.marks),n}function Ou(e){return function e(t){var n=[];return t.content.forEach((function(t){t.type===r.KATEX_INLINE&&n.push(t),t.content&&t.content[0]&&(n=n.concat(e(t)))})),n}(e).forEach((function(e){!function(e){var t=e.attrs.mathString;e.content=[{type:"text",text:t}]}(e)})),e}var _u=n(24),xu=n(88),Su=n.n(xu),Nu=n(89),Mu=n.n(Nu),Cu=n(90),Au=n.n(Cu),Tu=n(91),Du=n.n(Tu),Iu=n(92),Ru=n.n(Iu),Lu=n(93),Pu=n.n(Lu),Bu=n(48),$u=n.n(Bu),ju=n(94),zu=n.n(ju),Fu=n(95),Hu=n.n(Fu),Uu=n(96),Ku=n.n(Uu),Wu=n(97),Vu=n.n(Wu),Gu=n(98),qu=n.n(Gu),Ju=n(99),Xu=n.n(Ju),Zu=n(100),Qu=n.n(Zu),Yu=n(49),ef=n.n(Yu),tf=n(101),nf=n.n(tf),rf=n(50),of=n.n(rf),af=n(102),sf=n.n(af),cf={javascript:Su.a,kotlin:nf.a,"c-like":of.a,c:of.a,csharp:sf.a,python:Au.a,java:Du.a,sql:Ru.a,cpp:Mu.a,bash:$u.a,shell:$u.a,typescript:Pu.a,objectivec:zu.a,go:Hu.a,lua:Ku.a,php:Vu.a,rust:qu.a,swift:Xu.a,ruby:Qu.a,xml:ef.a,html:ef.a};Object.keys(cf).forEach((function(e){Object(_u.registerLanguage)(e,cf[e])}));var lf=function(e){return Object(_u.highlightAuto)(e)},uf=function(e,t){return Object(_u.highlight)(e,t)},ff=function(e){return Object(_u.getLanguage)(e)};function df(e,t){return t=t||{},function(e){var t=[];return e.content.forEach((function(e){e.type===r.CODE_BLOCK&&t.push(e)})),t}(e).forEach((function(e){!function(e,t){var n=" ";e.content&&e.content[0]&&(n=e.content[0].text||" ");var i=e.attrs.lang;if(e.type=r.CODE_BLOCK_PREVIEW,"text"===i||t.disableHighlightCode)e.content=function(e){var t=[];return e.split("\n").forEach((function(e){e?t.push({type:r.CODE_BLOCK_PREVIEW_LINE,attrs:{},content:[{type:r.TEXT,text:e}]}):t.push({type:r.CODE_BLOCK_PREVIEW_LINE,attrs:{}})})),t}(n);else if(ff(i)){var o=uf(i,n,!0);e.content=hf(o)}else{var a=lf(n);e.content=hf(a),e.attrs.lang=a.language}}(e,t)})),e}function hf(e){var t=e.value.split("\n"),n=[];return t.forEach((function(e){var t=document.createElement("div");t.innerHTML=e;var i=function e(t){var n=[];return function(e,t){Array.prototype.forEach.call(e,t)}(t.childNodes,(function(t){3===t.nodeType?n.push(t):t.childNodes&&t.childNodes.length>0&&(n=n.concat(e(t)))})),n}(t),o=[];i.forEach((function(e){var t=function(e){var t=[];return e.forEach((function(e){t.push({type:r.MARK_CLASS,attrs:{className:e.getAttribute("class")}})})),t.sort((function(){return-1}))}(function(e){for(var t=[],n=e.parentNode;"span"===n.nodeName.toLowerCase();)t.push(n),n=n.parentNode;return t}(e));o.push({type:r.TEXT,text:e.textContent,marks:t})})),n.push({type:r.CODE_BLOCK_PREVIEW_LINE,attrs:{},content:o})})),n}function pf(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function vf(e,t,n,r,i,o){return pf((a=pf(pf(t,e),pf(r,o)))<<(s=i)|a>>>32-s,n);var a,s}function mf(e,t,n,r,i,o,a){return vf(t&n|~t&r,e,t,i,o,a)}function gf(e,t,n,r,i,o,a){return vf(t&r|n&~r,e,t,i,o,a)}function yf(e,t,n,r,i,o,a){return vf(t^n^r,e,t,i,o,a)}function bf(e,t,n,r,i,o,a){return vf(n^(t|~r),e,t,i,o,a)}function wf(e,t){var n,r,i,o,a;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var s=1732584193,c=-271733879,l=-1732584194,u=271733878;for(n=0;n<e.length;n+=16)r=s,i=c,o=l,a=u,s=mf(s,c,l,u,e[n],7,-680876936),u=mf(u,s,c,l,e[n+1],12,-389564586),l=mf(l,u,s,c,e[n+2],17,606105819),c=mf(c,l,u,s,e[n+3],22,-1044525330),s=mf(s,c,l,u,e[n+4],7,-176418897),u=mf(u,s,c,l,e[n+5],12,1200080426),l=mf(l,u,s,c,e[n+6],17,-1473231341),c=mf(c,l,u,s,e[n+7],22,-45705983),s=mf(s,c,l,u,e[n+8],7,1770035416),u=mf(u,s,c,l,e[n+9],12,-1958414417),l=mf(l,u,s,c,e[n+10],17,-42063),c=mf(c,l,u,s,e[n+11],22,-1990404162),s=mf(s,c,l,u,e[n+12],7,1804603682),u=mf(u,s,c,l,e[n+13],12,-40341101),l=mf(l,u,s,c,e[n+14],17,-1502002290),s=gf(s,c=mf(c,l,u,s,e[n+15],22,1236535329),l,u,e[n+1],5,-165796510),u=gf(u,s,c,l,e[n+6],9,-1069501632),l=gf(l,u,s,c,e[n+11],14,643717713),c=gf(c,l,u,s,e[n],20,-373897302),s=gf(s,c,l,u,e[n+5],5,-701558691),u=gf(u,s,c,l,e[n+10],9,38016083),l=gf(l,u,s,c,e[n+15],14,-660478335),c=gf(c,l,u,s,e[n+4],20,-405537848),s=gf(s,c,l,u,e[n+9],5,568446438),u=gf(u,s,c,l,e[n+14],9,-1019803690),l=gf(l,u,s,c,e[n+3],14,-187363961),c=gf(c,l,u,s,e[n+8],20,1163531501),s=gf(s,c,l,u,e[n+13],5,-1444681467),u=gf(u,s,c,l,e[n+2],9,-51403784),l=gf(l,u,s,c,e[n+7],14,1735328473),s=yf(s,c=gf(c,l,u,s,e[n+12],20,-1926607734),l,u,e[n+5],4,-378558),u=yf(u,s,c,l,e[n+8],11,-2022574463),l=yf(l,u,s,c,e[n+11],16,1839030562),c=yf(c,l,u,s,e[n+14],23,-35309556),s=yf(s,c,l,u,e[n+1],4,-1530992060),u=yf(u,s,c,l,e[n+4],11,1272893353),l=yf(l,u,s,c,e[n+7],16,-155497632),c=yf(c,l,u,s,e[n+10],23,-1094730640),s=yf(s,c,l,u,e[n+13],4,681279174),u=yf(u,s,c,l,e[n],11,-358537222),l=yf(l,u,s,c,e[n+3],16,-722521979),c=yf(c,l,u,s,e[n+6],23,76029189),s=yf(s,c,l,u,e[n+9],4,-640364487),u=yf(u,s,c,l,e[n+12],11,-421815835),l=yf(l,u,s,c,e[n+15],16,530742520),s=bf(s,c=yf(c,l,u,s,e[n+2],23,-995338651),l,u,e[n],6,-198630844),u=bf(u,s,c,l,e[n+7],10,1126891415),l=bf(l,u,s,c,e[n+14],15,-1416354905),c=bf(c,l,u,s,e[n+5],21,-57434055),s=bf(s,c,l,u,e[n+12],6,1700485571),u=bf(u,s,c,l,e[n+3],10,-1894986606),l=bf(l,u,s,c,e[n+10],15,-1051523),c=bf(c,l,u,s,e[n+1],21,-2054922799),s=bf(s,c,l,u,e[n+8],6,1873313359),u=bf(u,s,c,l,e[n+15],10,-30611744),l=bf(l,u,s,c,e[n+6],15,-1560198380),c=bf(c,l,u,s,e[n+13],21,1309151649),s=bf(s,c,l,u,e[n+4],6,-145523070),u=bf(u,s,c,l,e[n+11],10,-1120210379),l=bf(l,u,s,c,e[n+2],15,718787259),c=bf(c,l,u,s,e[n+9],21,-343485551),s=pf(s,r),c=pf(c,i),l=pf(l,o),u=pf(u,a);return[s,c,l,u]}function Ef(e){var t,n="",r=32*e.length;for(t=0;t<r;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function kf(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var r=8*e.length;for(t=0;t<r;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function Of(e){var t,n,r="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),r+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return r}function _f(e){return unescape(encodeURIComponent(e))}function xf(e){return function(e){return Ef(wf(kf(e),8*e.length))}(_f(e))}function Sf(e,t){return function(e,t){var n,r,i=kf(e),o=[],a=[];for(o[15]=a[15]=void 0,i.length>16&&(i=wf(i,8*e.length)),n=0;n<16;n+=1)o[n]=909522486^i[n],a[n]=1549556828^i[n];return r=wf(o.concat(kf(t)),512+8*t.length),Ef(wf(a.concat(r),640))}(_f(e),_f(t))}function Nf(e,t,n){return t?n?Sf(t,e):function(e,t){return Of(Sf(e,t))}(t,e):n?xf(e):Of(xf(e))}function Mf(e,t){var n=e.state.doc,r=n.resolve(t);return function e(t,n,r){if(!n)return r;var i=n.pos,o=n.nodeBefore;return o?(o.isText?(r=o.text+r,n.parent.isInline?i=i-o.nodeSize-1:i-=o.nodeSize):o.isInline&&(r=o.textContent+r,i-=o.nodeSize),i===n.pos?r:(n=t.resolve(i),e(t,n,r))):n.parent.isInline?(n=t.resolve(n.pos-1),e(t,n,r)):r}(n,r,"").length}function Cf(e,t){var n=e.pos,r=null,i=0;return e.node.descendants((function(e,o){if(e.isText&&"number"!=typeof r){var a=e.text.length;t<=i+a?r=n+o+(t-i)+1:i+=a}})),r}function Af(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tf(e,t,n,r,i){i=String(i);var o=[];return n.forEach((function(n){var a=function(e,t,n,r,i){var o=t[n.blockIndex];if(n.isMarkedAllBlock){var a=o.node.textContent;if(Rf(a,n.originMarkContent)/a.length>=.85)return function(e,t,n,r){return Df(e,r,t.pos,t.pos+t.node.nodeSize,n)}(e,o,r,i)}var s=Lf(o,n);return s<.85&&(o=t[n.blockIndex-1],(s=Lf(o,n))<.85&&(o=t[n.blockIndex+1],(s=Lf(o,n))<.85&&(o=t[n.blockIndex-2],(s=Lf(o,n))<.85&&(o=t[n.blockIndex+2],s=Lf(o,n))))),s>=.85?function(e,t,n,r,i){var o=Cf(t,n.startInBlock),a=Cf(t,n.endInBlock);return Df(e,i,o,a,r)}(e,o,n,r,i):[]}(e,t,n,r,i);o=o.concat(a)})),o}function Df(e,t,n,i,o){var a=[];return e.state.doc.nodesBetween(n,i,(function(e,s){e.isText&&a.push(If(t,Math.max(n,s),Math.min(i,s+e.text.length),o)),e.type.name===r.KATEX_INLINE&&a.push(If(t,s,s+e.nodeSize,o,!0))})),a}function If(e,t,n,i,o){var a;return{id:e,attrs:(a={},Af(a,"".concat(r.D_DECO,"-").concat(i),""),Af(a,"".concat(i,"-").concat(e),""),a),from:t,to:n,type:o?"node":"inline"}}function Rf(e,t){var n=0;return e=e.split(""),t.split("").forEach((function(t){var r=e.indexOf(t);r>-1&&(n+=1,e.splice(r,1))})),n}function Lf(e,t){if(!e.node.textContent)return 0;var n=t.originMarkContent,r=Rf(e.node.textContent.substring(t.startInBlock,t.endInBlock),n),i=1;return n.length>8&&(i=1.3),r/n.length*i}var Pf=new Oe.e("decoration");function Bf(e,t){var n=[],r=e.state;t.forEach((function(e){"node"===e.type?n.push(qa.node(e.from,e.to,e.attrs)):n.push(qa.inline(e.from,e.to,e.attrs))}));var i=Za.create(r.doc,n),o=r.tr.setMeta(Pf,{decorationSet:i});e.dispatch(o)}var $f=null;function jf(e,t,n){if(0===t.length)return[];var r=t.filter((function(e){return e.id!==n}));return r.length!==t.length&&Bf(e,t=r),t}function zf(e,t){var n=function(e,t){for(3===e.nodeType&&(e=e.parentNode);e&&e.getAttribute;){var n=e.getAttribute(t);if(n)return{dom:e,attrVal:n};e=e.parentNode}return null}(e,"data-type");if(n.dom&&n.attrVal===r.KATEX_INLINE)return"start"===t?{container:n.dom,offset:0}:{container:n.dom,offset:n.dom.childNodes.length}}function Ff(e){return 3===e.nodeType&&(e=e.parentNode),e.closest('[data-type="doc"]')}function Hf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Uf=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.doc=t,this.index=0,this.setView(n),this.currentDecorations=[],this._insertDomInfoToDoc()}var t,n,i;return t=e,(n=[{key:"setView",value:function(e){e&&(this.view=e,this.allLeafBlocks=function(e){var t=[];return e.state.doc.descendants((function(e,n,i){if(r.LEAF_BLOCK_TYPES.indexOf(e.type.name)>-1){var o=t.length;t.push({node:e,pos:n,parent:i,index:o})}})),t}(e))}},{key:"getClickDoms",value:function(e){var t=e.target,n=Vf(t,r.D_MARK),i=Vf(t,r.D_NOTE),o=function(e,t,n){for(var r=null;t&&t.getAttribute&&!r;){if(t.getAttribute("data-type")===n)for(var i=e.posAtDOM(focus.dom,0),o=e.state.doc.resolve(i),a=o.depth;a&&a>0&&!r;){var s=o.node(a);s&&s.type===n&&(r=s),a--}t=t.parentNode}return r}(this.view,t,r.LINK);return{markDoms:n.map((function(e){return{doms:document.querySelectorAll("[".concat(r.D_MARK,"-").concat(e,"]")),id:e}})),noteDoms:i.map((function(e){return{doms:document.querySelectorAll("[".concat(r.D_NOTE,"-").concat(e,"]")),id:e}})),link:o}}},{key:"getBlockRangeList",value:function(e){if(!qf(e))return null;if(!(e=function(e){var t=e.endContainer,n=e.startContainer;if(!Ff(t)||!Ff(n))return null;var r=zf(n,"start"),i=zf(t,"end");return r&&e.setStart(r.container,r.offset),i&&e.setEnd(i.container,i.offset),e}(e)))return null;var t=e,n=t.startContainer,i=t.startOffset,o=t.endContainer,a=t.endOffset,s=this.view.posAtDOM(n,i),c=this.view.posAtDOM(o,a);return function(e,t,n,i){var o=[],a=function(e,t,n){var i=[];return e.state.doc.nodesBetween(t,n,(function(e,t,n){r.LEAF_BLOCK_TYPES.indexOf(e.type.name)>-1&&i.push({node:e,pos:t,parent:n})})),i}(e,n,i),s=a.length;return a.forEach((function(r,a){var c=r.node.textContent.length,l=t.find((function(e){return e.pos===r.pos})).index,u=0,f=0;if(0===a||a===s-1?1===s?(u=Mf(e,n),f=Mf(e,i)):0===a?(u=Mf(e,n),f=c):(u=0,f=Mf(e,i)):(u=0,f=c),f>u){var d=f-u===c,h=r.node.textContent,p=h.substring(u,f);o.push(function(e,t,n,r,i,o,a){return{blockIndex:o,blockLength:e,blockContent:t,blockContentMD5:Nf((s=t,c=On(s).filter((function(e){if(Kf.test(e)||Wf.test(e))return!0;try{encodeURIComponent(e)}catch(e){return!1}return!0})).join(""),c)).substring(0,8),startInBlock:r,endInBlock:i,isMarkedAllBlock:a?1:0,originMarkContent:n};var s,c}(c,h,p,u,f,l,d))}})),o}(this.view,this.allLeafBlocks,s,c)}},{key:"findSimilarMarkIds",value:function(e){if(!qf(e))return[];var t=e.endContainer,n=e.startContainer;return Gf(Vf(t,r.D_MARK),Vf(n,r.D_MARK))}},{key:"findSimilarNoteIds",value:function(e){if(!qf(e))return[];var t=e.endContainer,n=e.startContainer;return Gf(Vf(t,r.D_NOTE),Vf(n,r.D_NOTE))}},{key:"getHeadingList",value:function(){var e=[];return this.doc.content.forEach((function(t){if(t.type===r.HEADING){var n=t.content&&t.content[0]&&t.content.reduce((function(e,t){return e+t.text}),"");n&&e.push({id:t.attrs.id,text:n,level:t.attrs.level})}})),e}},{key:"showMark",value:function(e,t){this.showDecorations(e,r.D_MARK,t)}},{key:"showNote",value:function(e,t){this.showDecorations(e,r.D_NOTE,t)}},{key:"showPublic",value:function(e,t){this.showDecorations(e,r.D_PUBLIC,t)}},{key:"showDecorations",value:function(e,t,n){var r=Tf(this.view,this.allLeafBlocks,e,t,n);this.currentDecorations=function(e,t,n){if(n&&n[0]){var r=n.filter((function(e){return!t.find((function(t){return t.id===e.id}))}));t=t.concat(r),$f&&clearTimeout($f),$f=setTimeout((function(){Bf(e,t)}),10)}return t}(this.view,this.currentDecorations,r)}},{key:"removeMarkById",value:function(e){this.currentDecorations=jf(this.view,this.currentDecorations,e)}},{key:"removeNoteById",value:function(e){this.currentDecorations=jf(this.view,this.currentDecorations,e)}},{key:"_insertDomInfoToDoc",value:function(){var e=this;this.doc.content.forEach((function(t){t.type===r.HEADING&&(t.attrs.id=r.HEADING+e.index,e.index++)}))}}])&&Hf(t.prototype,n),i&&Hf(t,i),e}(),Kf=/[\u0000-\u007E]/g,Wf=/[\uFF00-\uFFFF\u4E00-\u9FA5\u3000-\u3012]/g;function Vf(e,t){var n=[];for(3===e.nodeType&&(e=e.parentNode);e&&e.getAttributeNames&&"div"!==e.nodeName.toLowerCase();){if((n=e.getAttributeNames().filter((function(e){return e.indexOf("".concat(t,"-"))>-1})).map((function(e){return e.replace("".concat(t,"-"),"")})))&&n[0])return n;e=e.parentNode}return n}function Gf(e,t){var n=[];return e.forEach((function(e){t.indexOf(e)>-1&&n.push(e)})),n}function qf(e){return e&&e.startContainer}var Jf,Xf=Us({props:["config"],mounted:function(){this.init()},methods:{init:function(){if(this.config||this.config.content){this.previewAPI=new Uf(this.config.content);var e=this.createEditorView(this.previewAPI.doc);this.previewAPI.setView(e),this.$emit("inited",this.previewAPI)}},createEditorView:function(e){var t=this,n=this.createEditorState(e),i={postMessage:function(e){t.$emit("postMessage",e)}},o=function(e,t,n,i){var o,a=new fs(e,{state:t,dispatchTransaction:n,nodeViews:(o={},fu(o,r.VIDEO,(function(e,t,n){return new nu(e,t,n,i)})),fu(o,r.EMBED_COMPONENT,(function(e,t,n){return new iu(e,t,n,i)})),fu(o,r.IMAGE,(function(e,t,n){return new eu(e,t,n,i)})),fu(o,r.CODE_BLOCK_PREVIEW,(function(e,t,n){return new Ql(e,t,n,i)})),fu(o,r.KATEX_BLOCK,(function(e,t,n){return new au(e,t,n,i)})),fu(o,r.KATEX_INLINE,(function(e,t,n,r){return new uu(e,r)})),o),editable:function(){return!1}});for(var s in a.eventHandlers)a.dom.removeEventListener(s,a.eventHandlers[s]);return a}(this.$refs.editor,n,(function(e){o.updateState(o.state.apply(e)),o.domObserver.stop()}),i);return o},createEditorState:function(e){var t={type:r.DOC,content:[{type:r.PARAGRAPH,nodes:[]}]};this.schemaForPreview=new we.h({nodes:hu,marks:pu});var n,i=e||t;return bs(i),wu(i),mu(i),df(i,this.config),Ou(i),Oe.b.create({doc:we.f.fromJSON(this.schemaForPreview,i),plugins:[(n=new Oe.d({key:Pf,state:{init:function(){return null},apply:function(e,t){var n=e.getMeta(Pf);return n&&n.decorationSet?n.decorationSet:t}},props:{decorations:function(e){return n.getState(e)}}}),n)]})}}},(function(){var e=this.$createElement;return(this._self._c||e)("div",{ref:"editor",attrs:{"data-type":"doc"}})}),[],!1,null,null,null).exports;function Zf(e){return(Zf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ed=(Yf(Jf={defaultNode:{toDOM:function(e){return["div",{"data-type":e.type,"data-attrs":JSON.stringify(e.attrs)},0]}},defaultMark:{toDOM:function(e){return["span",{"data-type":e.type,"data-attrs":JSON.stringify(e.attrs)},0]}}},r.PARAGRAPH,{toDOM:function(e){var t=e.attrs,n=t.indent,r=t.number,i=t.align,o={};return"number"==typeof n&&n>0&&n<9&&(o["data-indent-".concat(n)]=""),"number"==typeof r&&r>0&&(o["data-number"]=r),["center","right"].indexOf(i)>-1&&(o["data-align-".concat(i)]=""),["p",o,0]}}),Yf(Jf,r.BLOCK_QUOTE,{toDOM:function(){return["blockquote",0]}}),Yf(Jf,r.HORIZONTAL_RULE,{toDOM:function(){return["hr"]}}),Yf(Jf,r.HEADING,{toDOM:function(e){var t={},n=e.attrs.align,r=e.attrs.level;return[1,2,3,4,5].indexOf(r)<0&&(r=5),["center","right"].indexOf(n)>-1&&(t["data-align-".concat(n)]=""),["h"+r,t,0]}}),Yf(Jf,r.CODE_BLOCK,{toDOM:function(){return["pre",["code",0]]}}),Yf(Jf,r.KATEX_BLOCK,{toDOM:function(){return["div",0]}}),Yf(Jf,r.KATEX_INLINE,{toDOM:function(){return["span",0]}}),Yf(Jf,r.IMAGE,{toDOM:function(e){var t=e.attrs,n=t.src,r=t.alt;return["img",{src:n,alt:void 0===r?"":r}]}}),Yf(Jf,r.LINK,{toDOM:function(e){var t=e.attrs;return["a",{href:t.href,title:t.title},0]}}),Yf(Jf,r.CODE_INLINE,{toDOM:function(){return["code",0]}}),Yf(Jf,r.SUP,{toDOM:function(){return["sup",0]}}),Yf(Jf,r.SUB,{toDOM:function(){return["sub",0]}}),Yf(Jf,r.NUMBERED_LIST,{toDOM:function(e){var t=e.attrs.start,n={};return"number"==typeof t&&t>1&&(n.start=t),["ol",n,0]}}),Yf(Jf,r.BULLETED_LIST,{toDOM:function(){return["ul",0]}}),Yf(Jf,r.LIST_ITEM,{toDOM:function(){return["li",0]}}),Yf(Jf,r.ITALIC,{toDOM:function(){return["i",0]}}),Yf(Jf,r.DEL,{toDOM:function(){return["s",0]}}),Yf(Jf,r.UNDERLINE,{toDOM:function(){return["u",0]}}),Yf(Jf,r.SIZE,{toDOM:function(e){var t=e.attrs.size;return"number"==typeof t&&t>8&&t<99?["span",{style:"font-size: ".concat(t,"px")},0]:["span",0]}}),Yf(Jf,r.COLOR,{toDOM:function(e){var t=e.attrs.color;return/^#[a-f0-9]{6}$/i.test(t)?["span",{style:"color: ".concat(t)},0]:["span",0]}}),Yf(Jf,r.BG_COLOR,{toDOM:function(e){var t=e.attrs.color;return/^#[a-f0-9]{6}$/i.test(t)?["span",{style:"background: ".concat(t)},0]:["span",0]}}),Yf(Jf,r.STRONG,{toDOM:function(){return["strong",0]}}),Jf),td=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.serializeConfig=Object.assign({},ed,t||{})}var t,n,r;return t=e,(n=[{key:"toHTML",value:function(e){return this.convertNodes(e.content)}},{key:"convertNodes",value:function(e){var t=this,n="";return(e=e||[]).forEach((function(e){n+=t.convertNode(e)})),n}},{key:"convertNode",value:function(e){if(e.attrs||(e.attrs={}),"text"===e.type)return e.marks&&e.marks.length>0?this.convertMarks(e.marks,e.text):e.text;var t=this.serializeConfig[e.type],n=this.convertNodes(e.content);if(!t){var r=this.serializeConfig.defaultNode;return r.toHTML?r.toHTML(e,n):r.toDOM?nd(r.toDOM(e),n):""}return t.toHTML?t.toHTML(e,n):t.toDOM?nd(t.toDOM(e),n):void 0}},{key:"convertMarks",value:function(e,t){var n=this,r=t;return e.forEach((function(e){r=n.convertMark(e,r)})),r}},{key:"convertMark",value:function(e,t){e.attrs||(e.attrs={});var n=this.serializeConfig[e.type];if(!n){var r=this.serializeConfig.defaultMark;return r.toHTML?r.toHTML(e,t):r.toDOM?nd(r.toDOM(e),t):""}return n.toHTML?n.toHTML(e,t):n.toDOM?nd(n.toDOM(e),t):void 0}}])&&Qf(t.prototype,n),r&&Qf(t,r),e}();function nd(e,t){var n=!1,r=e[0],i=e[e.length-1],o={};return 0===i&&(n=!0),Array.isArray(i)&&(n=!0,t=nd(e[1],t)),Array.isArray(e[1])||"object"!==Zf(e[1])||(o=e[1]),n?"<$tag$attrs>$children</$tag>".replace(/\$tag/g,r).replace("$attrs",rd(o)).replace("$children",t):"<$tag$attrs/>".replace(/\$tag/g,r).replace("$attrs",rd(o))}function rd(e){var t="";return Object.keys(e).forEach((function(n){var r=e[n];t+=r?" ".concat(n,'="').concat(r,'"'):" ".concat(n," ")})),t}n.d(t,"SchemaType",(function(){return id})),n.d(t,"html2json",(function(){return od})),n.d(t,"toMarkdown",(function(){return ad})),n.d(t,"cutDoc",(function(){return sd})),n.d(t,"filterDoc",(function(){return cd})),n.d(t,"Editor",(function(){return Xl})),n.d(t,"Preview",(function(){return Xf})),n.d(t,"Serializer",(function(){return td}));var id=r,od=j,ad=function(e){var t=new se(J,te);return t.renderContent(e),t.out};function sd(e,t){if(!ld(e))return null;if("number"!=typeof t)return null;var n=z(e.content,t);return{type:r.DOC,content:n.nodes}}function cd(e,t){if(!ld(e))return null;var n=V(e.content,t||{});return{type:r.DOC,content:n}}function ld(e){return e&&e.content&&e.content[0]}}])}))},a3ce:function(e,t,n){}}]);