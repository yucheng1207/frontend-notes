
<!-- saved from url=(0054)https://xie.infoq.cn/article/5d36d123bfd1c56688e125ad3 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- <geektime>1602033137169</geektime> -->
    
    <title>Chrome浏览器架构 - InfoQ 写作平台</title>
    <meta name="keywords" content="前端,其他,Google,浏览器,文章,栏目,做为,Chrome,架构,篇文章,收录,技术,页面,显示,常见,整体,介绍" id="metakeywords">
    <meta name="description" content="背景这篇文章被收录在我的前端技术系列文章中浏览器工作原理栏目中，做为这个栏目的第一篇文章，先从页面是如何在浏览器中被显示出来这一最常见的问题做为开始，整体介绍浏览器的工作原理。这篇文章取材于Mariko Kosaka在2018年9月发表在Chrome开发者文档中的Inside look at modern web browser系列文章，同时结合我自己的理解。如果你对浏览器如何将代码转化成页面，这" id="metadesc">
    <meta property="og:image" content="https://static001.infoq.cn/static/write/img/write-favicon.jpg">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    
        <link rel="icon" type="image/png" sizes="32x32" href="https://static001.infoq.cn/static/write/img/write-favicon.jpg">
        <link rel="icon" type="image/png" sizes="16x16" href="https://static001.infoq.cn/static/write/img/write-favicon.jpg">
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="format-detection" content="telephone=no">
    <meta name="applicable-device" content="pc,mobile">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <link rel="canonical" href="https://xie.infoq.cn/article/5d36d123bfd1c56688e125ad3">
    <meta property="og:title" content="Chrome浏览器架构">
    <meta property="og:url" content="https://xie.infoq.cn/article/5d36d123bfd1c56688e125ad3">
    <meta property="og:description" content="背景这篇文章被收录在我的前端技术系列文章中浏览器工作原理栏目中，做为这个栏目的第一篇文章，先从页面是如何在浏览器中被显示出来这一最常见的问题做为开始，整体介绍浏览器的工作原理。这篇文章取材于Mariko Kosaka在2018年9月发表在Chrome开发者文档中的Inside look at modern web browser系列文章，同时结合我自己的理解。如果你对浏览器如何将代码转化成页面，这">

    <script async="" src="./Chrome浏览器架构 - InfoQ 写作平台_files/sensorsdata.min.js" charset="UTF-8"></script><script src="https://hm.baidu.com/hm.js?c53c258392315152cda6662d99774537"></script><script src="https://hm.baidu.com/hm.js?094d2af1d9a57fd9249b3fa259428445"></script><script async="" src="https://www.google-analytics.com/analytics.js"></script><script src="https://zz.bdstatic.com/linksubmit/push.js"></script><script type="text/javascript" src="./Chrome浏览器架构 - InfoQ 写作平台_files/jweixin-1.4.0.js"></script>
    <script type="text/javascript" src="./Chrome浏览器架构 - InfoQ 写作平台_files/bufferLogger.1.0.8.min.js"></script>
    <script src="./Chrome浏览器架构 - InfoQ 写作平台_files/dingtalk.open.js"></script>
    
        <script type="text/javascript" src="./Chrome浏览器架构 - InfoQ 写作平台_files/aliplayer-min.js"></script>
        <script type="text/javascript" src="./Chrome浏览器架构 - InfoQ 写作平台_files/hls.8361666e7e2690d988ff5fe775b62bbe.js"></script>
    
    <script type="text/javascript">
        if (!('flex' in document.documentElement.style) && !navigator.userAgent.match(/spider|googlebot|bingbot|geekbang|yahoo! Slurp/i)) {
            window.location.href = '//static001.geekbang.org/static/common/browser_update/index.html'
        }
    </script>
    <script>
        (function(){
            var bp = document.createElement('script');
            var curProtocol = window.location.protocol.split(':')[0];
            if (curProtocol === 'https'){
                bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
            }
            else{
                bp.src = 'http://push.zhanzhang.baidu.com/push.js';
            }
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(bp, s);
        })();
    </script>
<link href="./Chrome浏览器架构 - InfoQ 写作平台_files/app.b741e1f0.css" rel="stylesheet"><link rel="stylesheet" type="text/css" href="./Chrome浏览器架构 - InfoQ 写作平台_files/chunk-katex.26fbacea.css"><script charset="utf-8" src="./Chrome浏览器架构 - InfoQ 写作平台_files/chunk-katex.a956ad4c.js"></script><link rel="stylesheet" type="text/css" href="./Chrome浏览器架构 - InfoQ 写作平台_files/chunk-geek-editor.7856a2e0.css"><script charset="utf-8" src="./Chrome浏览器架构 - InfoQ 写作平台_files/chunk-geek-editor.a380be16.js"></script><script charset="utf-8" src="./Chrome浏览器架构 - InfoQ 写作平台_files/chunk-codemirror.89176e94.js"></script><link rel="stylesheet" type="text/css" href="./Chrome浏览器架构 - InfoQ 写作平台_files/chunk-cb2c05d0.db5ead0d.css"><script charset="utf-8" src="./Chrome浏览器架构 - InfoQ 写作平台_files/chunk-cb2c05d0.7561c990.js"></script><link rel="stylesheet" type="text/css" href="./Chrome浏览器架构 - InfoQ 写作平台_files/PageArticle.6456e2c8.css"><script charset="utf-8" src="./Chrome浏览器架构 - InfoQ 写作平台_files/PageArticle.a5bad400.js"></script></head>

<body>
<div data-v-44530c6c="" data-v-5f47010e="" id="layout" layout="" class="page-article-layout ready skin-base size-base" style="padding-bottom: 0px;"><div data-v-44530c6c="" layout-header-wrap="" class="layout-header-wrap"><div data-v-92f4caea="" data-v-44530c6c="" class="common-header-pc"><div data-v-92f4caea="" class="shim"></div><div data-v-92f4caea="" class="header"><div data-v-92f4caea="" class="wrap"><div data-v-92f4caea="" class="layout-content header-content"><div data-v-92f4caea="" class="logo"><a data-v-92f4caea="" href="https://www.infoq.cn/" class="main-logo"><img data-v-92f4caea="" src="./Chrome浏览器架构 - InfoQ 写作平台_files/logo.b51e49df.png" alt="logo"></a><a data-v-92f4caea="" href="https://xie.infoq.cn/" class="sub-logo"><img data-v-92f4caea="" src="./Chrome浏览器架构 - InfoQ 写作平台_files/sub-logo.60023501.png" alt="logo"></a></div><div data-v-92f4caea="" class="header-middle"><div data-v-92f4caea="" class="nav"><ul data-v-92f4caea=""><li data-v-92f4caea=""><a data-v-92f4caea="" href="https://xie.infoq.cn/" class="">首页</a></li><li data-v-92f4caea=""><!----><a data-v-92f4caea="" href="https://xie.infoq.cn/tag/3" target="_blank" rel="" class=""> Java </a></li><li data-v-92f4caea=""><!----><a data-v-92f4caea="" href="https://xie.infoq.cn/tag/211" target="_blank" rel="" class=""> 开源 </a></li><li data-v-92f4caea=""><!----><a data-v-92f4caea="" href="https://xie.infoq.cn/tag/238" target="_blank" rel="" class=""> 架构 </a></li><li data-v-92f4caea=""><!----><a data-v-92f4caea="" href="https://xie.infoq.cn/tag/92" target="_blank" rel="" class=""> 数据库 </a></li><li data-v-92f4caea=""><!----><a data-v-92f4caea="" href="https://xie.infoq.cn/tag/9434" target="_blank" rel="" class=""> OpenHarmony </a></li><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></ul><div data-v-92f4caea="" class="more"> 全部标签 <i data-v-92f4caea="" class="iconfont"></i></div></div><div data-v-92f4caea="" class="search-container"><div data-v-92f4caea="" class="search-wrap"><input data-v-92f4caea="" type="text" placeholder="搜索" class="search-input"><span data-v-92f4caea="" class="search-btn iconfont"></span></div></div><!----><div data-v-92f4caea="" class="write-btn-warp"><div data-v-92f4caea="" gk-button="" gkbtn-color="green" gkbtn-size="small" class="write-btn Button_button_3onsJ"> 写点什么 </div><div data-v-92f4caea="" class="scene" style="display: none;"><h4 data-v-92f4caea=""><i data-v-92f4caea="" class="iconfont"></i>创作场景</h4><div data-v-92f4caea="" class="close"><i data-v-92f4caea="" class="iconfont"></i></div><ul data-v-92f4caea=""><li data-v-92f4caea="">记录自己日常工作的实践、心得</li><li data-v-92f4caea="">发表对生活和职场的感悟</li><li data-v-92f4caea="">针对感兴趣的事件发表随笔或者杂谈</li><li data-v-92f4caea="">从0到1详细介绍你掌握的一门语言、一个技术，或者一个兴趣、爱好</li><li data-v-92f4caea="">或者，就直接把你的个人博客、公众号直接搬到这里</li></ul></div></div></div><div data-v-92f4caea="" class="account"><span data-v-92f4caea="" class="route">登录</span><span data-v-92f4caea="" class="line"></span><span data-v-92f4caea="" class="route">注册</span></div></div></div><div data-v-92f4caea="" class="more-tags"><div data-v-92f4caea="" class="inner-content"><div data-v-4300d745="" data-v-92f4caea="" class="com-label-list"><a data-v-4426e0e8="" data-v-4300d745="" href="https://xie.infoq.cn/tag/84" com-label-title="" class="com-label-title">MySQL</a><a data-v-4426e0e8="" data-v-4300d745="" href="https://xie.infoq.cn/tag/130" com-label-title="" class="com-label-title">云计算</a><a data-v-4426e0e8="" data-v-4300d745="" href="https://xie.infoq.cn/tag/232" com-label-title="" class="com-label-title">程序员</a><a data-v-4426e0e8="" data-v-4300d745="" href="https://xie.infoq.cn/tag/1178" com-label-title="" class="com-label-title">行业资讯</a><a data-v-4426e0e8="" data-v-4300d745="" href="https://xie.infoq.cn/tag/189" com-label-title="" class="com-label-title">学习</a><a data-v-4426e0e8="" data-v-4300d745="" href="https://xie.infoq.cn/tag/303" com-label-title="" class="com-label-title">算法</a><a data-v-4426e0e8="" data-v-4300d745="" href="https://xie.infoq.cn/tag/8" com-label-title="" class="com-label-title">Python</a><a data-v-4426e0e8="" data-v-4300d745="" href="https://xie.infoq.cn/tag/60" com-label-title="" class="com-label-title">人工智能</a><a data-v-4426e0e8="" data-v-4300d745="" href="https://xie.infoq.cn/tag/55" com-label-title="" class="com-label-title">区块链</a><a data-v-4426e0e8="" data-v-4300d745="" href="https://xie.infoq.cn/tag/182" com-label-title="" class="com-label-title">Linux</a><a data-v-4426e0e8="" data-v-4300d745="" href="https://xie.infoq.cn/tag/371" com-label-title="" class="com-label-title">前端</a><a data-v-4426e0e8="" data-v-4300d745="" href="https://xie.infoq.cn/tag/264" com-label-title="" class="com-label-title">个人成长</a><a data-v-4426e0e8="" data-v-4300d745="" href="https://xie.infoq.cn/tag/283" com-label-title="" class="com-label-title">面试</a><a data-v-4426e0e8="" data-v-4300d745="" href="https://xie.infoq.cn/tag/1502" com-label-title="" class="com-label-title">架构师</a><a data-v-4426e0e8="" data-v-4300d745="" href="https://xie.infoq.cn/tag/222" com-label-title="" class="com-label-title">编程</a><a data-v-4426e0e8="" data-v-4300d745="" href="https://xie.infoq.cn/tag/4909" com-label-title="" class="com-label-title">企业动态</a><a data-v-4426e0e8="" data-v-4300d745="" href="https://xie.infoq.cn/tag/1937" com-label-title="" class="com-label-title">新基建</a><a data-v-4426e0e8="" data-v-4300d745="" href="https://xie.infoq.cn/tag/361" com-label-title="" class="com-label-title">敏捷</a><a data-v-4426e0e8="" data-v-4300d745="" href="https://xie.infoq.cn/tag/497" com-label-title="" class="com-label-title">安全</a><a data-v-4426e0e8="" data-v-4300d745="" href="https://xie.infoq.cn/tag/201" com-label-title="" class="com-label-title">读书笔记</a><a data-v-4426e0e8="" data-v-4300d745="" href="https://xie.infoq.cn/tag/203" com-label-title="" class="com-label-title">高效工作</a><a data-v-4426e0e8="" data-v-4300d745="" href="https://xie.infoq.cn/tag/204" com-label-title="" class="com-label-title">团队管理</a><a data-v-4426e0e8="" data-v-4300d745="" href="https://xie.infoq.cn/tag/192" com-label-title="" class="com-label-title">创业</a><a data-v-4426e0e8="" data-v-4300d745="" href="https://xie.infoq.cn/tag/4837" com-label-title="" class="com-label-title">活动专区</a><a data-v-4426e0e8="" data-v-4300d745="" href="https://xie.infoq.cn/tag/207" com-label-title="" class="com-label-title">生涯规划</a><a data-v-4426e0e8="" data-v-4300d745="" href="https://xie.infoq.cn/tag/492" com-label-title="" class="com-label-title">知识管理</a><a data-v-4426e0e8="" data-v-4300d745="" href="https://xie.infoq.cn/tag/317" com-label-title="" class="com-label-title">运维</a><a data-v-4426e0e8="" data-v-4300d745="" href="https://xie.infoq.cn/tag/400" com-label-title="" class="com-label-title">产品经理</a><a data-v-92f4caea="" data-v-4300d745="" href="https://xie.infoq.cn/tag" target="_blank" class="more-tag com-label-title"> 查看更多 <i data-v-92f4caea="" data-v-4300d745="" class="iconfont"></i></a></div></div></div></div></div></div><div data-v-44530c6c="" inner-content="" class="inner-content"><!----><!----><!----><div data-v-5f47010e="" data-v-44530c6c="" class="layout-content article-content"><div data-v-5f47010e="" class="article-fixed-wrap" data-v-44530c6c="" style="width: 150px;"><div data-v-5f47010e="" class="side-operation" style="top: 91px;"><div data-v-7fad60de="" data-v-5f47010e="" class="widget-operation side" authorinfo="[object Object]"><div data-v-7fad60de="" class="toggle-menu btn"><i data-v-7fad60de="" class="iconfont"></i></div><div data-v-7fad60de="" class="like btn"><i data-v-7fad60de="" class="iconfont"></i><i data-v-7fad60de="" class="like-num">43</i></div><div data-v-7fad60de="" class="favorite btn"><i data-v-7fad60de="" class="iconfont"></i></div><div data-v-7fad60de="" class="comment btn"><i data-v-7fad60de="" class="iconfont"></i></div><div data-v-7fad60de="" class="weixin btn"><i data-v-7fad60de="" class="iconfont"></i></div><div data-v-7fad60de="" class="weibo btn"><i data-v-7fad60de="" class="iconfont"></i></div><div data-v-7fad60de="" class="horde btn"><i data-v-7fad60de="" class="iconfont"></i></div><!----></div></div></div><div data-v-5f47010e="" data-v-44530c6c="" class="main"><!----><!----><h1 data-v-5f47010e="" data-v-44530c6c="" class="article-title">Chrome 浏览器架构</h1><div data-v-5f47010e="" data-v-44530c6c="" class="author-information"><div data-v-5f47010e="" data-v-44530c6c="" class="row"><div data-v-5f47010e="" data-v-44530c6c="" class="author-name"> 作者：<a data-v-d8d4e5b0="" data-v-6281d13f="" data-v-5f47010e="" rel="nofollow" com-author-name="" class="com-author-name" data-v-44530c6c="">曲迪</a></div></div><div data-v-5f47010e="" data-v-44530c6c="" class="row article-head"><ul data-v-5f47010e="" data-v-44530c6c="" class="read-time"><li data-v-5f47010e="" data-v-44530c6c="">2020 年 10 月 06 日</li><li data-v-5f47010e="" data-v-44530c6c=""><p data-v-5f47010e="" data-v-44530c6c="" class="time-style">本文字数：8773 字 </p><!----><p data-v-5f47010e="" data-v-44530c6c="" class="time-style">阅读完需：约 29 分钟</p></li></ul></div></div><div data-v-5f47010e="" data-v-44530c6c="" class="article-cover"><img data-v-5f47010e="" data-v-44530c6c="" src="./Chrome浏览器架构 - InfoQ 写作平台_files/cf17ec9b84b6d86cfa8e5674c67ac554.jpeg" alt="Chrome浏览器架构"></div><div data-v-5f47010e="" data-v-44530c6c="" class="article-detaile"><div data-v-61f0fa32="" data-v-5f47010e="" class="article-preview-content size-base" data-v-44530c6c=""><div data-v-61f0fa32="" data-type="doc" class="article-preview"><div contenteditable="false" class="ProseMirror"><h1 data-id="heading0" data-type="heading" top="211">背景</h1><p data-type="paragraph"><br></p><p data-type="paragraph">这篇文章被收录在我的前端技术系列文章中浏览器工作原理栏目中，做为这个栏目的第一篇文章，先从页面是如何在浏览器中被显示出来这一最常见的问题做为开始，整体介绍浏览器的工作原理。这篇文章取材于<a href="https://developers.google.com/web/resources/contributors/kosamari" title="" data-type="link">Mariko Kosaka</a>在 2018 年 9 月发表在 Chrome 开发者文档中的<a href="https://developers.google.com/web/updates/2018/09/inside-browser-part1" title="" data-type="link">Inside look at modern web browser</a>系列文章，同时结合我自己的理解。如果你对浏览器如何将代码转化成页面，这正适合于你。</p><p data-type="paragraph"><br></p><h1 data-id="heading1" data-type="heading" top="470">CPU 与 GPU</h1><p data-type="paragraph"><br></p><p data-type="paragraph">CPU 和 GPU 作为计算机中最重要的两个计算单元直接决定了计算性能。</p><p data-type="paragraph"><br></p><h2 data-id="heading2" data-type="heading" top="638">CPU</h2><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/9407812940681a84a4b4661b551da819.png"> <div data-title="">CPU.png</div></div></div><p data-type="paragraph">CPU 是计算机的大脑，负责处理各种不同的任务。在过去，大多数 CPU 是单芯片的，核心被安置在同一个芯片上。更新的 CPU 可以支持多核心，运算能力大大加强。而最新的的 cpu 已经达到 10 核心 20 线程数的能力了。</p><p data-type="paragraph"><br></p><h2 data-id="heading3" data-type="heading" top="859">GPU</h2><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/8fc555c4a70f7f844dbb34edec74cf1f.png"> <div data-title="">GPU.png</div></div></div><p data-type="paragraph">GPU 是另一个计算机的组成部分，与 CPU 不同，GPU 更擅长利用多核心同时处理单一的任务。像命名那样，GPU 最初被用于处理图像。这就是为什么使用 GPU 可以更快、更顺畅的渲染页面内容。随着 GPU 的发展，越来越多的计算任务也可以使用 GPU 来处理。甚至有人说 GPU 是人工智能的大功臣，可见 GPU 已经不再仅用于图像处理上了。</p><p data-type="paragraph"><br></p><h1 data-id="heading4" data-type="heading" top="1110">计算机架构</h1><p data-type="paragraph"><br></p><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/2af38ddf296b92cd6bbbf97322774c33.png"> <div data-title="">hw-os-app.png</div></div></div><p data-type="paragraph">我们可以把计算机自下而上分成三层：硬件、操作系统和应用。有了操作系统的存在，上层运行的应用可以使用操作系统提供的能力使用硬件资源而不会直接访问硬件资源。</p><p data-type="paragraph"><br></p><h1 data-id="heading5" data-type="heading" top="1365">进程与线程</h1><p data-type="paragraph"><br></p><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/97afac83d32e43397ea484653bb6b1ec.png"> <div data-title="">process-thread.png</div></div></div><p data-type="paragraph">一个进程是应用正在运行的程序。而线程是进程中更小的一部分。当应用被启动，进程就被创建出来。程序可以创建线程来帮助其工作。操作系统会为进程分配私有的内存空间以供使用，当关闭程序时，这段私有的内存也会被释放。其实还有比线程更小的存在就是<strong data-type="strong">协程，而协成是运行在线程中更小的单位。async/await 就是基于协程实现的。</strong></p><p data-type="paragraph"><br></p><h1 data-id="heading6" data-type="heading" top="1650.5">进程间通信（IPC）</h1><p data-type="paragraph"><br></p><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/b8306ca61a00c7ccfa68476e61a0b105.png"> <!----></div></div><p data-type="paragraph"><br></p><p data-type="paragraph">一个进程可以让操作系统开启另一个进程处理不同的任务。当两个进程需要通信时，可以时用 IPC(Inter Process Communication)。</p><p data-type="paragraph"><br></p><p data-type="paragraph">多数程序被设计成使用 IPC 来进行进程间的通信，好处在于当一个进程给另一个进程发消息而没有回应时，并不影响当前的进程继续工作。</p><p data-type="paragraph"><br></p><h1 data-id="heading7" data-type="heading" top="1987.5">浏览器架构</h1><p data-type="paragraph"><br></p><p data-type="paragraph">借助进程和线程，浏览器可以被设计成单进程、多线程架构，或者利用 IPC 实现多进程、多线程架构。</p><p data-type="paragraph"><br></p><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/23162955642bb163b16a5d08bdbb3288.png"> <div data-title="">browser-arch.png</div></div></div><p data-type="paragraph">这里我们以 Chrome 多进程架构介绍，在 Chrome 中存在这不同种类型的进程，它们各司其职。</p><p data-type="paragraph"><br></p><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/898bb4e5c529e5d3280b6787a7d261a3.png"> <div data-title="">browser-arch2.png</div></div></div><p data-type="paragraph">浏览器进程做为 Chrome 中最核心的进程管理着 Chrome 中的其他进程，而 Renderer 则负责渲染不同的站点。</p><p data-type="paragraph"><br></p><h2 data-id="heading8" data-type="heading" top="2389.5">进程工作内容</h2><p data-type="paragraph"><br></p><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/7bc84e5abe039f836a0af8002d4a63fd.png"> <div data-title="">browserui.png</div></div></div><p data-type="paragraph"><br></p><h3 data-id="heading9" data-type="heading" top="2580.5">浏览器进程（Browser process）</h3><p data-type="paragraph">浏览器进程负责管理 Chrome 应用本身，包括地址栏、书签、前进和后退按钮。同时也负责可不见的功能，比如网络请求、文件按访问等，也负责其他进程的调度。</p><p data-type="paragraph"><br></p><h3 data-id="heading10" data-type="heading" top="2740.5">渲染进程（Renderer process）</h3><p data-type="paragraph">渲染进程负责站点的渲染，其中也包括 JavaScript 代码的运行，web worker 的管理等。</p><p data-type="paragraph"><br></p><h3 data-id="heading11" data-type="heading" top="2870.5">插件进程（Plugin process）</h3><p data-type="paragraph">插件进程负责为浏览器提供各种额外的插件功能，例如 flash。</p><p data-type="paragraph"><br></p><h3 data-id="heading12" data-type="heading" top="3000.5">GPU 进程（GPU process）</h3><p data-type="paragraph">GPU 进程负责提供成像的功能。</p><p data-type="paragraph"><br></p><p data-type="paragraph">当然还有其他像扩展进程或工具进程等其他进程，可以在 Chrome 的 Task Manager 面板中查看，面板中列出了运行的进程和其占用的 CPU、内存情况。</p><p data-type="paragraph"><br></p><h2 data-id="heading13" data-type="heading" top="3220.5">多进程架构的好处</h2><p data-type="paragraph"><br></p><p data-type="paragraph">当我们访问一个站点时，渲染进程会负责运行站点的代码，渲染站点的页面，同时响应用户的交互动作，当我们在 Chrome 中打开三个页签同时访问三个站点时，如果其中一个没有响应，我们可以关闭它然后使用其他的页签，这是因为 Chrome 为每个站点创建一个独立的渲染进程，专门处理当前站点的渲染工作。如果所有的页面运行在同一个进程中，当有一个页面没有响应时，所有的页面就都卡住了。</p><p data-type="paragraph"><br></p><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/0e8966939127660cee3f7aa05303721b.png"> <div data-title="">tabs.png</div></div></div><p data-type="paragraph">另一个好处是，借助操作系统对进程安全的控制，浏览器可以将页面放置在沙箱中，站点的代码可以运行在隔离的环境中，保证核心进程的安全。</p><p data-type="paragraph"><br></p><p data-type="paragraph">虽然多进程的架构优于单进程架构，但由于进程独享自己的私有内存，以渲染进程为例，虽然渲染的站点不同，但工作内容大体相似，为了完成渲染工作它们会在自己的内存中包含相同的功能，例如 V8 引擎（用于解析和运行 Javascript），这意味着这部分相同的功能需要占用每个进程的内存空间。为了节省内存，Chrome 限制了最大进程数，最大进程数取决于硬件的能力，同时<strong data-type="strong">当使用多个页签访问相同的站点时浏览器不会创建新的渲染进程</strong>。</p><p data-type="paragraph"><br></p><h2 data-id="heading14" data-type="heading" top="3772">面向服务的架构</h2><p data-type="paragraph"><br></p><p data-type="paragraph">Chrome 将架构从多进程模型转变成面向服务。浏览器将功能以服务的方式提供，以解决多进程架构中的问题。</p><p data-type="paragraph"><br></p><p data-type="paragraph">当 Chrome 运行在拥有强大硬件的计算机上时，会将一个服务以多个进程的方式实现，提高稳定性，当计算机硬件资源紧张时，则可以将多个服务放在一个进程中节省资源。</p><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/72ab917eee34ffd4b8bb1352a8f73ad6.png"> <div data-title="">servicfication.png</div></div></div><p data-type="paragraph"><br></p><h2 data-id="heading15" data-type="heading" top="4083">基于站点隔离的渲染进程</h2><p data-type="paragraph"><br></p><p data-type="paragraph">利用 iframe 我们可以在同一个页面访问不同站点的资源，但从安全的角度考虑，同源策略不允许一个站点在未得到同意的情况下访问其他站点的资源，所以从 Chrome 67 开始每个站点由独立的渲染进程处理被默认启用。</p><p data-type="paragraph"><br></p><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/fa70a857e645bec8876257580a935282.png"> <div data-title="">isolation.png</div></div></div><p data-type="paragraph"><br></p><h2 data-id="heading16" data-type="heading" top="4364">浏览器进程</h2><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/4006973a23f68ec28402353d48f91a57.png"> <div data-title="">browserprocesses.png</div></div></div><p data-type="paragraph">浏览器进程负责处理除了渲染外的大部分工作，浏览器进程包括几个线程：</p><ul data-type="bulletedlist"><li><p data-type="paragraph">UI 线程负责绘制工具栏中的按钮、地址栏等。</p></li><li><p data-type="paragraph">网络线程负责从网络中获取数据。</p></li><li><p data-type="paragraph">存储线程负责文件等功能。</p></li></ul><p data-type="paragraph"><br></p><p data-type="paragraph">当我们在地址栏中输入一个地址时，浏览器进程中的 UI 线程最先得知这个动作，并开始处理。</p><p data-type="paragraph"><br></p><h1 data-id="heading17" data-type="heading" top="4705">一次访问</h1><p data-type="paragraph"><br></p><p data-type="paragraph">下面我们就从一次常见的访问入手，逐步了解浏览器是如何展示页面的。</p><h2 data-id="heading18" data-type="heading" top="4843">Step 1：输入处理</h2><p data-type="paragraph"><br></p><p data-type="paragraph">当我们在地址栏中输入时，UI 线程会先判断我们输入的内容是要搜索的内容还是要访问一个站点，因为地址栏同时也是一个搜索框。</p><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/d619ac67749e633ae020812aa0b09bdd.png"> <div data-title="">input.png</div></div></div><p data-type="paragraph"><br></p><h2 data-id="heading19" data-type="heading" top="5094">Step 2：访问开始</h2><p data-type="paragraph"><br></p><p data-type="paragraph">当我们按下回车开始访问时，UI 线程将借助网络线程访问站点资源. 浏览器页签的标题上会出现加载中的图标，同时网络线程会根据适当的网络协议，例如 DNS lookup 和 TLS 为这次请求建立连接。</p><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/749ccda4aca068ed34465407973dc3f9.png"> <div data-title="">navstart.png</div></div></div><p data-type="paragraph">当服务器返回给浏览器重定向请求时，网络线程会通知 UI 线程需要重定向，然后会以新的地址做开始请求资源。</p><p data-type="paragraph"><br></p><h2 data-id="heading20" data-type="heading" top="5375">Step 3：处理响应数据</h2><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/a049bd54e903004676c6f75ec11d373b.png"> <div data-title="">response.png</div></div></div><p data-type="paragraph"><br></p><p data-type="paragraph">当网络线程收到来自服务器的数据时，会试图从数据中的前面的一些字节中得到数据的类型（<strong data-type="strong">Content-Type</strong>），以试图了解数据的格式。</p><p data-type="paragraph"><br></p><p data-type="paragraph">当返回的数据类型是 HTML 时，会将数据传递给渲染进程做进一步的渲染工作。但是如果数据类型是 zip 文件或者其他文件格式时，会将数据传递给下载管理器做进一步的文件预览或者下载工作。</p><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/b4797a3b5023a9de4ac03ad174e9bd3f.png"> <div data-title="">sniff.png</div></div></div><p data-type="paragraph">在开始渲染之前，网络线程要先检查数据的安全性，这里也是浏览器保证安全的地方。如果返回的数据来自一些恶意的站点，网络线程会显示警告的页面。同时，Cross Origin Read Blocking(CORB)策略也会确保跨域的敏感数据不会被传递给渲染进程。</p><p data-type="paragraph"><br></p><h2 data-id="heading21" data-type="heading" top="5863.5">Step 3：渲染过程</h2><p data-type="paragraph"><br></p><p data-type="paragraph">当所有的检查结束后，网络线程确信浏览器可以访问站点时，网络线程通知 UI 线程数据已经准备好了。UI 线程会根据当前的站点找到一个渲染进程完成接下来的渲染工作。</p><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/320ebdce97d9fb29329fd47c0c5f0c07.png"> <div data-title="">findrenderer.png</div></div></div><p data-type="paragraph">在第二步，UI 线程将请求地址传递给网络线程时，UI 线程就已经知道了要访问的站点。此时 UI 线程就可以开始查找或启动一个渲染进程，这个动作与让网络线程下载数据是同时的。如果网络线程按照预期获取到数据，则渲染进程就已经可以开始渲染了，这个动作减少了从网络线程开始请求数据到渲染进程可以开始渲染页面的时间。当然，如果出现重定向的请求时，提前初始化的渲染进程可能就不会被使用了，但相比正常访问站点的场景，重定向往往是少数，在实际工作中，也需要根据特定的场景给出特定的方案，不必追求完美的方案。</p><p data-type="paragraph"><br></p><h2 data-id="heading22" data-type="heading" top="6264.5">Step 4：提交访问</h2><p data-type="paragraph"><br></p><p data-type="paragraph">经历前面的步骤，数据和渲染进程都已经准备好了。浏览器进程会通过 IPC 向渲染进程提交这次访问，同时也会保证渲染进程可以通过网络线程继续获取数据。一旦浏览器进程收到来自渲染进程的确认完毕的消息，就意味着访问的过程结束了，文档渲染的过程就开始了。</p><p data-type="paragraph"><br></p><p data-type="paragraph">这时，地址栏显示出表明安全的图标，同时显示出站点的信息。访问历史中也会加入当前的站点信息。为了能恢复访问历史信息，当页签或窗口被关闭时，访问历史的信息会被存储在硬盘中。</p><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/b9882cfdfbc700b2698116669bf40d4e.png"> <div data-title="">commit.png</div></div></div><h2 data-id="heading23" data-type="heading" top="6605.5">Extra Step：加载完毕</h2><p data-type="paragraph"><br></p><p data-type="paragraph">当访问被提交给渲染进程，渲染进程会继续加载页面资源并且渲染页面。当渲染进程"结束"渲染工作，会给浏览器进程发送消息，这个消息会在页面中所有子页面（frame）结束加载后发出，也就是 onLoad 事件触发后发送。当收到"结束"消息后，UI 线程会隐藏页签标题上的加载状态图标，表明页面加载完毕。</p><p data-type="paragraph"><br></p><p data-type="paragraph">但这里"结束"并不意味着所有的加载工作都结束了，因为可能还有 JavaScript 在加载额外的资源或者渲染新的视图。</p><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/b93f199ad2138be6e445d1ceb4416033.png"> <div data-title="">loaded.png</div></div></div><p data-type="paragraph"><br></p><h1 data-id="heading24" data-type="heading" top="6946.5">访问不同的站点</h1><p data-type="paragraph"><br></p><p data-type="paragraph">一次普通的访问到此就结束了。当我们输入另外一个地址时，浏览器进程会重复上面的过程。但是在开始新的访问前，会确认当前的站点是否关心<code data-type="codeinline">beforeunload</code>事件。</p><p data-type="paragraph"><br></p><p data-type="paragraph"><code data-type="codeinline">beforeunload</code>事件可以提醒用户是否要访问新的站点或者关闭页签，如果用户拒绝则新的访问或关闭会被阻止。</p><p data-type="paragraph"><br></p><p data-type="paragraph">由于所有的包括渲染、运行 Javascript 的工作都发生在渲染进程中，浏览器进程需要在新的访问开始前与渲染进程确认当前的站点是否关心<code data-type="codeinline">unload</code>。</p><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/71402d5b3a3f7d5629a242727e606079.png"> <div data-title="">beforeunload.png</div></div></div><p data-type="paragraph">如果一次访问是从一个渲染进程中发起的，例如用户点击一个链接或者运行 JavaScript 代码<code data-type="codeinline">location = 'http://newsite.com'</code>时，渲染进程首先检查<code data-type="codeinline">beforeunload</code>。然后再执行和浏览器进程初始化访问同样的步骤，只不过区别在于这样的访问请求是由渲染进程向浏览器进程发起的。</p><p data-type="paragraph"><br></p><p data-type="paragraph">当新的站点请求被创建时，一个独立的渲染进程将被用于处理这个请求。为了支持像<code data-type="codeinline">unload</code>的事件触发，老的渲染进程需要保持住当前的状态。更详细的生命周期介绍可以参考<a href="https://developers.google.com/web/updates/2018/07/page-lifecycle-api#overview_of_page_lifecycle_states_and_events" title="" data-type="link">Page lifecycle</a>。</p><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/e074926b6b24cae624f6c1c906c16616.png"> <div data-title="">unload.png</div></div></div><p data-type="paragraph"><br></p><h1 data-id="heading25" data-type="heading" top="7589">Service worker</h1><p data-type="paragraph"><br></p><p data-type="paragraph">Service worker 是一种可以 web 开发者控制缓存的技术。如果 Service worker 被实现成从本地存储获取数据时，那么原本的请求就不会被浏览器发送给服务器了。</p><p data-type="paragraph"><br></p><p data-type="paragraph">值得注意的是，Service worker 中的代码是运行在渲染进程中的。当访问开始时，网络线程会根据域名检查是否有 Service worker 会处理当前地址的请求，如果有，则 UI 线程会找到对应的渲染进程去执行 Service worker 的代码，而 Service worker 可以让开发者决定这个请求是从本地存储还是从网络中获取数据。</p><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/8c45c55d238b901239d0eb4bd40f2892.png"> <div data-title="">scope_lookup.png</div></div></div><p data-type="paragraph"><br></p><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/fdeaee16c665e81bc59f42122080916f.png"> <div data-title="">serviceworker.png</div></div></div><p data-type="paragraph"><br></p><h1 data-id="heading26" data-type="heading" top="8051">访问预加载</h1><p data-type="paragraph"><br></p><p data-type="paragraph">如果 Service worker 最终决定要从网络中获取数据时，我们会发现这种跨进程的通信会造成一些延迟。<a href="https://developers.google.com/web/updates/2017/02/navigation-preload" title="" data-type="link">Navigation Preload</a>是一种可以在 Service worker 启动的同时加载资源的优化机制。借助特殊的请求头，服务器可以决定返回什么样的内容给浏览器。</p><p data-type="paragraph"><br></p><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/212631fa2520d730f17b0461ddae71d6.png"> <div data-title="">navpreload.png</div></div></div><p data-type="paragraph"><br></p><h2 data-id="heading27" data-type="heading" top="8366.5">渲染进程负责页面的内容</h2><p data-type="paragraph"><br></p><p data-type="paragraph">渲染进程负责所有发生在浏览器页签中的事情。在一个渲染进程中，主线程负责解析，编译或运行代码等工作，当我们使用 Worker 时，Worker 线程会负责运行一部分代码。合成线程和光栅线程是也是运行在渲染进程中的，负责更高效和顺畅的渲染页面。</p><p data-type="paragraph"><br></p><p data-type="paragraph">渲染进程最重要的工作就是将 HTML、CSS 和 Javascript 代码转换成一个可以与用户产生交互的页面。</p><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/bdfa66a4ef1fbd2805797bc4cd90f8d8.png"> <div data-title="">renderer.png</div></div></div><h2 data-id="heading28" data-type="heading" top="8677.5">解析过程</h2><p data-type="paragraph"><br></p><p data-type="paragraph">下面的章节主要介绍渲染进程如何将从网络线程中获取的文本转化成图像的过程。</p><p data-type="paragraph"><br></p><h3 data-id="heading29" data-type="heading" top="8841.5">DOM 的创建</h3><p data-type="paragraph"><br></p><p data-type="paragraph">当渲染进程接收到来自浏览器进程提交访问的消息后就开始接受 HTML 数据，主线程开始解析 HTML 文本字符串，并且将其转化成 <strong data-type="strong">Document Object Model（DOM）</strong>。</p><p data-type="paragraph"><br></p><p data-type="paragraph">DOM 是一种浏览器内部用于表达页面结构的数据，同时也为 Web 开发者提供了操作页面元素的接口，让 web 开发者可以在 Javascript 代码中获取和操作页面中的元素。</p><p data-type="paragraph"><br></p><p data-type="paragraph">将 HTML 文本转化成 DOM 的标准被<a href="https://html.spec.whatwg.org/" title="" data-type="link">HTML Standard</a>定义。我们会发现在转化过程中浏览器从来不会抛出异常，类似关闭标签的丢失，开始、关闭标签匹配错误等等。这是因为 HTML 标准中定义了要静默的处理这些错误，如果对此感兴趣可以阅读<a href="https://html.spec.whatwg.org/multipage/parsing.html#an-introduction-to-error-handling-and-strange-cases-in-the-parser" title="" data-type="link">An introduction to error handling and strange cases in the parser</a>。</p><p data-type="paragraph"><br></p><h4 data-id="heading30" data-type="heading" top="9243">额外资源的加载</h4><p data-type="paragraph"><br></p><p data-type="paragraph">一个网站通常还会使用类似图片，样式文件和 JavaScript 代码等额外的资源。这些资源也需要从网络或缓存中获取。主线程在转化 HTML 的过程中理应挨个加载它们，但是为了提高效率，预加载扫描（Preload Scanner）与转换过程会同时运行着。当预加载扫描在分析器分析 HTML 过程中发现了类似 img 或 link 这样的标签时，就会发送请求给浏览器进程的网络线程，而主线程会根据这些额外资源是否会阻塞转化过程而决定是否等待资源加载完毕。</p><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/fa689d6a31b8687522c58774c8d9d064.png"> <div data-title="">dom.png</div></div></div><p data-type="paragraph"><br></p><h4 data-id="heading31" data-type="heading" top="9546">JavaScript 会阻塞转化过程</h4><p data-type="paragraph"><br></p><p data-type="paragraph">当 HTML 分析器发现<code data-type="codeinline">&lt;script&gt;</code>标签时，会暂停接下来的 HTML 转化工作，然后加载、解析并且运行 Javascript 代码。因为在 Javascript 代码中可能会使用类似<code data-type="codeinline">document.write</code>这样的 API 去改变 DOM 的结构。这就是为什么 HTML 分析器必须等待 Javascript 代码运行结束才能继续分析的原因。</p><p data-type="paragraph"><br></p><h4 data-id="heading32" data-type="heading" top="9762">告诉浏览器要如何加载资源</h4><p data-type="paragraph"><br></p><p data-type="paragraph">如果我们的 Javascript 代码并不需要改变 DOM，可以为<code data-type="codeinline">&lt;script&gt;</code>标签添加<code data-type="codeinline">async</code>或<code data-type="codeinline">defer</code>属性，这样浏览器就会异步的加载这些资源并且不会阻塞 HTML 转化过程。<strong data-type="strong">如果 script 标签是由 JavaScript 代码创建的，标签的 async 属性会默认为 true。</strong>同时我们也可以使用一些预加载技术，比如<code data-type="codeinline">&lt;link ref="preload"&gt;</code>来通知浏览器这些资源需要越快下载越好。</p><p data-type="paragraph"><br></p><h3 data-id="heading33" data-type="heading" top="10009">样式计算（Style calculation）</h3><p data-type="paragraph"><br></p><p data-type="paragraph">对于展示一个页面，光有 DOM 是不够的，因为我们还需要样式来让页面变得更美观。主线程会解析样式（CSS）并决定每个 DOM 元素的样式。这些样式取决于 CSS 选择器的范围，在浏览器开发者工具中我们可以看到这些信息。</p><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/fb7d195814a04c6ed98eab8dbda477c6.png"> <div data-title="">computedstyle.png</div></div></div><p data-type="paragraph">即使我们没有给 DOM 指定任何的样式，<code data-type="codeinline">&lt;h1&gt;</code>标签也会比<code data-type="codeinline">&lt;h2&gt;</code>标签显示的大。这是因为浏览器为不同的标签内置了不同的样式。可以通过<a href="https://source.chromium.org/chromium/chromium/src/+/master:third_party/blink/renderer/core/html/resources/html.css" title="" data-type="link">Chromium源代码</a>得到这些默认样式。</p><p data-type="paragraph"><br></p><h3 data-id="heading34" data-type="heading" top="10316.5">布局（layout）</h3><p data-type="paragraph"><br></p><p data-type="paragraph">完成了样式计算工作后，渲染进程已经知道了 DOM 的结构和每个节点的样式，但是依然不足以渲染一个页面。想象一下，让你在电话中向朋友描述一张图：“图中有一个大红色圆和一个小的、蓝色的方块”是不足以让朋友知道这张图到底是什么样的。</p><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/0658494542e14f7db66b913c02c03202.png"> <div data-title="">tellgame.png</div></div></div><p data-type="paragraph">布局是为元素指定几何信息的过程。主线程遍历 DOM 结构中的元素及其样式，同时创建出带有坐标和元素尺寸信息的布局树（Layout tree）。布局树的结构与 DOM 树的结构十分相似，但只包含将会在页面中显示的元素。<strong data-type="strong">当一个元素的样式被设置成 display: none 时，元素就不会出现在布局树中，但那些样式被设置成 visiblility：hidden 的元素会出现在布局树中。</strong>相似的，当我们使用一个包含内容的伪元素（例如<code data-type="codeinline">p::before { content: 'Hi!' }</code>）时，元素会出现在布局树中即使这个元素不存在于 DOM 树中，这也是为什么我们<strong data-type="strong">使用 DOM 提供的 API 无法获取伪元素</strong>的原因。</p><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/0c1de85206f0d177f93a70931a0f8272.png"> <div data-title="">layout.png</div></div></div><p data-type="paragraph">描述页面布局信息是一项具有挑战性的工作，即使在只有块元素的页面中也必须要考虑字体的大小和在哪里换行，因为在计算下一个元素的位置时需要知道上一个元素的尺寸和形状。</p><p data-type="paragraph"><br></p><p data-type="paragraph">CSS 可以让元素浮动、可以让元素在父元素中溢出，可以改变文字的方向。可以想象，在布局这个阶段是多么繁重的工作。在 Chrome 中，有一整个团队在维护布局工作，更详细的信息可以观看<a href="https://www.youtube.com/watch?v=Y5Xa4H2wtVA" title="" data-type="link">视频</a>。</p><p data-type="paragraph"><br></p><h3 data-id="heading35" data-type="heading" top="10952.5">绘制（Paint）</h3><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/d8fe81b968531c8b3d4767006ea9725d.png"> <div data-title="">drawgame.png</div></div></div><p data-type="paragraph">有了 DOM、样式和布局还是无法完成渲染工作。试想，当我们试图复制一张图画。我们知道图画中元素的尺寸、形状和位置，我们还需要知道绘制这些元素的顺序。</p><p data-type="paragraph"><br></p><p data-type="paragraph">例如，当一个元素 z-index 属性被设置后，绘制的顺序会导致渲染成错误的结果。</p><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/116fb1ec64e618a7562788911bca8d75.png"> <div data-title="">zindex.png</div></div></div><p data-type="paragraph">在这个阶段，主线程遍历布局树并创建绘制记录，绘制记录是一系列由绘制步骤组成的流程，例如先绘制背景，然后是文字，然后是形状。</p><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/a68fd128fc59b9b2bed3511fcf223c94.png"> <div data-title="">paint.png</div></div></div><p data-type="paragraph"><br></p><h3 data-id="heading36" data-type="heading" top="11403.5">渲染过程是昂贵的</h3><p data-type="paragraph"><br></p><p data-type="paragraph">在渲染过程中，任何一个步骤中产生的数据变化都会引起后续一系列的的变化。例如，当布局树改变时，绘制需要重构页面中变化的部分。</p><p data-type="paragraph"><br></p><p data-type="paragraph">当一些元素有动画发生时，浏览器需要在每一帧中绘制这些元素。当无法保证每一帧绘制的连续性时，用户就会感觉到卡顿。</p><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/54a9da693ebba8579317ff57be2993ea.png"> <div data-title="">pagejank1.png</div></div></div><p data-type="paragraph"><br></p><p data-type="paragraph">正常情况下渲染操作可以与屏幕刷新保持同步，但由于这些操作运行在主线程中，也就意味这些操作可能被正在运行的 Javascript 代码所阻塞。</p><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/6bd8886a8c2b26a72105c7a2fba7bf3a.png"> <div data-title="">pagejank2.png</div></div></div><p data-type="paragraph"><br></p><p data-type="paragraph">为了不影响渲染操作，我们可以将 Javascript 操作优化成小块，然后使用<code data-type="codeinline">requestAnimationFrame()</code>，关于如何优化可以参考<a href="https://developers.google.com/web/fundamentals/performance/rendering/optimize-javascript-execution" title="" data-type="link">Optimize JavaScript Exectuion</a>。当需要大量计算时，也可以使用 Worker 来避免阻塞主进程。</p><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/45d6db6a394174c914eb37e13743f94d.png"> <div data-title="">raf.png</div></div></div><p data-type="paragraph"><br></p><h3 data-id="heading37" data-type="heading" top="12035">合成（Compositing）</h3><p data-type="paragraph"><br></p><p data-type="paragraph">现在，浏览器已经知道了文档结构、每一个元素的样式，元素的几何信息，绘制的顺序。将这些信息转化成屏幕上像素的过程叫做光栅化，光栅化是图形学的范畴。</p><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/9ed512afc63c664458faf1bd42247cc0.gif"> <div data-title="">rasterizing.gif</div></div></div><p data-type="paragraph">传统的做法是将可视区域的内容进行光栅化。随着用户滚动页面，不断的光栅化更多的区域。然而对于现代浏览器，有着更复杂的的过程，这个过程被称做合成。</p><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/ae1b6d19e8aeb45841f04bbfa72760dd.gif"> <div data-title="">composit.gif</div></div></div><p data-type="paragraph">合成是一种将页面拆分成多层的技术，合成线程可以将各个层在不同线程中光栅化，再组合成一个页面。当滚动时，如果层已经被光栅化，则会使用已经存在的层合成新的帧，动画则可以通过移动层来实现。</p><p data-type="paragraph"><br></p><h4 data-id="heading38" data-type="heading" top="12459">层（Layer）</h4><p data-type="paragraph"><br></p><p data-type="paragraph">为了决定层包含哪些元素，主线程需要遍历布局树以找到需要生成的部分。对开发者来说，当某一部分需要用独立的层渲染，我们可以使用 css 属性<code data-type="codeinline">will-change</code>让浏览器创建层，关于浏览器如何生成层的标准可自行查阅。</p><p data-type="paragraph"><br></p><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/b08901dee7af151982f600e6a7a6ba43.png"> <div data-title="">layer.png</div></div></div><p data-type="paragraph">虽然通过分层可以优化浏览器性能，但并不意味着应该给每个元素一个层，过多的层反而影响性能，所以在层的划分上应该具体形况具体分析。</p><p data-type="paragraph"><br></p><h3 data-id="heading39" data-type="heading" top="12792">栅格线程与合成线程</h3><p data-type="paragraph"><br></p><p data-type="paragraph">当布局树和绘制顺序确定以后，主线程会将这些信息提交给合成线程。合成线程会光栅化各个层。一个层包含的内容可能是一个完整的页面，也可能是页面的部分，所以合成线程将层拆分成许多块，并将它们发送给栅格线程。栅格线程光栅化这些块并将它们存储在 GPU 缓存中。</p><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/371b5fa654d59f0c8ccb2f4f0658c20a.png"> <div data-title="">raster.png</div></div></div><p data-type="paragraph">合成线程可以决定栅格线程光栅块的优先级，这样可以保证用户能看到的部分可以先被光栅化。一个层也会包含多种块以支持类似缩放这样的功能。</p><p data-type="paragraph"><br></p><p data-type="paragraph">当块被光栅化后，合成线程会使用 draw quads 收集这些信息并创建合成帧（Compositor frame）。</p><p data-type="paragraph"><br></p><h4 data-id="heading40" data-type="heading" top="13189">Draw quads</h4><p data-type="paragraph">存储在缓存中，包含类似块位置这样的信息，用于描述如何使用块合成页面。</p><h4 data-id="heading41" data-type="heading" top="13285">Compositor frame</h4><p data-type="paragraph">用于存储表现页面一帧中包含哪些 Draw quads 的集合。</p><p data-type="paragraph"><br></p><p data-type="paragraph">然后一个合成帧被提交给浏览器进程。这时如果浏览器 UI 有变化，或者插件的 UI 有变化时，另一个合成帧就会被创建出来。所以每当有交互发生时，合成线程就会创建更多的合成帧然后通过 GPU 将新的部分渲染出来。</p><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/397d4949099dd6d1aaffcb55e8678e37.png"> <div data-title="">composit.png</div></div></div><p data-type="paragraph">合成的好处在于其独立于主线程。合成线程不需要等待样式计算和 Javascript 代码的运行。这也是为什么合成更适合优化交互性能，但如果布局或者绘制需要重新计算则主线程是必须要参与的。</p><p data-type="paragraph"><br></p><p data-type="paragraph">本质上，浏览器的渲染过程就是将文本转换成图像的过程，而当用户与页面发生交互动作时，则显示新的图像。在这个过程中由渲染进程中的主线程完成计算工作，由合成线程和栅格线程完成图像的绘制工作。而在计算过程中，还有强制布局、重排、重绘等更加细节的概念会在后面的文章中做讲解。</p><p data-type="paragraph"><br></p><h2 data-id="heading42" data-type="heading" top="13738">从浏览器的角度看事件</h2><p data-type="paragraph"><br></p><p data-type="paragraph">当我们听到事件时，通常会联想到在一个文本框中输入或者单击鼠标，但从浏览器的角度看，输入事件意味着所有的用户动作。鼠标滚轮滚动或者屏幕触摸都是输入事件。</p><p data-type="paragraph"><br></p><p data-type="paragraph">当用户与页面发生交互时，浏览器进程首先接收到事件，然而，浏览器进程只关心事件发生时是在哪个页签中，所以浏览器进程会将事件类型和位置信息等发送给负责当前页签的渲染进程，渲染进程会恰当的找到事件发生的元素并且触发事件监听器。</p><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/7f8581ec78d48302c8ea81f713cdfa56.png"> <div data-title="">input (1).png</div></div></div><p data-type="paragraph"><br></p><h2 data-id="heading43" data-type="heading" top="14109">合成线程对事件的处理</h2><p data-type="paragraph"><br></p><p data-type="paragraph">在前面的章节中，我们知道了合成线程可以通过合成技术合成不同的光栅层优化性能，如果页面并不监听任何事件，合成线程可以完全独立于主线程生成新的合成帧。但如果页面监听了事件呢？</p><p data-type="paragraph"><br></p><h3 data-id="heading44" data-type="heading" top="14303">标记“慢滚动”区域</h3><p data-type="paragraph"><br></p><p data-type="paragraph">由于运行 Javascript 是主线程的工作，当页面被合成线程合成过，合成线程会标记那些有事件监听的区域。有了这些信息，当事件发生在响应的区域时，合成线程就会将事件发送给主线程处理。如果在非事件监听区域，则渲染进程直接创建新的帧而不关心主线程。</p><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/6fda6b7355162ca393787e870630a083.png"> <div data-title="">nfsr1.png</div></div></div><p data-type="paragraph"><br></p><h3 data-id="heading45" data-type="heading" top="14580">在事件监听时标记</h3><p data-type="paragraph"><br></p><p data-type="paragraph">在 web 开发中常见的方式就是事件代理。利用事件冒泡，我们可以在目标元素的上层元素中监听事件。参照下面的代码。</p><p data-type="paragraph"><br></p><div data-type="codeblock"><div data-codeblock-wrap=""><div data-codeblock-codes=""><div class="simplebar" data-simplebar="init"><div class="simplebar-wrapper" style="margin: 0px;"><div class="simplebar-height-auto-observer-wrapper"><div class="simplebar-height-auto-observer"></div></div> <div class="simplebar-mask"><div class="simplebar-offset" style="right: 0px; bottom: 0px;"><div class="simplebar-content-wrapper" style="height: 100%; overflow: hidden scroll;"><div class="simplebar-content" style="padding: 0px;"><div><pre data-origin="pm_code_preview" lang="javascript"><code data-type="codeline"><span data-type="markclass" class="hljs-variable language_">document</span>.<span data-type="markclass" class="hljs-property">body</span>.<span data-type="markclass" class="hljs-title function_">addEventListener</span>(<span data-type="markclass" class="hljs-string">'touchstart'</span>, <span data-type="markclass" class="hljs-function"><span data-type="markclass" class="hljs-params">event</span> =&gt;</span> {</code><code data-type="codeline">  <span data-type="markclass" class="hljs-keyword">if</span> (event.<span data-type="markclass" class="hljs-property">target</span> === area) {</code><code data-type="codeline">    event.<span data-type="markclass" class="hljs-title function_">preventDefault</span>();</code><code data-type="codeline">  }</code><code data-type="codeline">});</code></pre></div></div></div></div></div> <div class="simplebar-placeholder" style="width: 770px; height: 110px;"></div></div> <div class="simplebar-track simplebar-horizontal" style="visibility: hidden;"><div class="simplebar-scrollbar simplebar-visible" style="width: 0px; display: none;"></div></div> <div class="simplebar-track simplebar-vertical" style="visibility: visible;"><div class="simplebar-scrollbar simplebar-visible" style="height: 0px; display: none;"></div></div></div></div> <div data-codeblock-copy="">复制代码</div> <div data-codeblock-index=""><div data-codeblock-number="1"></div><div data-codeblock-number="2"></div><div data-codeblock-number="3"></div><div data-codeblock-number="4"></div><div data-codeblock-number="5"></div></div></div></div><p data-type="paragraph"><br></p><p data-type="paragraph">通过这种写法，可以更高效的监听事件。但如果从浏览器的角度看，此时整个页面会被标记成“慢滚动”区域。这意味着虽然页面中的某些部分并不需要事件监听，但合成线程依然要在每次交互发生后等待主线程处理事件，合成线程的优化效果不复存在。</p><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/f2e60c76e1cb2b104a46c0da8787d229.png"> <div data-title="">nfsr2.png</div></div></div><p data-type="paragraph">为了解决这个问题，我们可在事件代理时传入<code data-type="codeinline">passive: true</code><strong data-type="strong">（IE 不支持）</strong>参数。这样告诉渲染线程，依然需要将事件发送给主线程处理，但不需要等待。</p><p data-type="paragraph"><br></p><div data-type="codeblock"><div data-codeblock-wrap=""><div data-codeblock-codes=""><div class="simplebar" data-simplebar="init"><div class="simplebar-wrapper" style="margin: 0px;"><div class="simplebar-height-auto-observer-wrapper"><div class="simplebar-height-auto-observer"></div></div> <div class="simplebar-mask"><div class="simplebar-offset" style="right: 0px; bottom: 0px;"><div class="simplebar-content-wrapper" style="height: 100%; overflow: hidden scroll;"><div class="simplebar-content" style="padding: 0px;"><div><pre data-origin="pm_code_preview" lang="javascript"><code data-type="codeline"><span data-type="markclass" class="hljs-variable language_">document</span>.<span data-type="markclass" class="hljs-property">body</span>.<span data-type="markclass" class="hljs-title function_">addEventListener</span>(<span data-type="markclass" class="hljs-string">'touchstart'</span>, <span data-type="markclass" class="hljs-function"><span data-type="markclass" class="hljs-params">event</span> =&gt;</span> {</code><code data-type="codeline">    <span data-type="markclass" class="hljs-keyword">if</span> (event.<span data-type="markclass" class="hljs-property">target</span> === area) {</code><code data-type="codeline">        event.<span data-type="markclass" class="hljs-title function_">preventDefault</span>()</code><code data-type="codeline">    }</code><code data-type="codeline"> }, {<span data-type="markclass" class="hljs-attr">passive</span>: <span data-type="markclass" class="hljs-literal">true</span>});</code></pre></div></div></div></div></div> <div class="simplebar-placeholder" style="width: 770px; height: 110px;"></div></div> <div class="simplebar-track simplebar-horizontal" style="visibility: hidden;"><div class="simplebar-scrollbar simplebar-visible" style="width: 0px; display: none;"></div></div> <div class="simplebar-track simplebar-vertical" style="visibility: visible;"><div class="simplebar-scrollbar simplebar-visible" style="height: 0px; display: none;"></div></div></div></div> <div data-codeblock-copy="">复制代码</div> <div data-codeblock-index=""><div data-codeblock-number="1"></div><div data-codeblock-number="2"></div><div data-codeblock-number="3"></div><div data-codeblock-number="4"></div><div data-codeblock-number="5"></div></div></div></div><p data-type="paragraph"><br></p><p data-type="paragraph">关于使用 passive 改善滚屏性能，可以参考<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/EventTarget/addEventListener#%E4%BD%BF%E7%94%A8_passive_%E6%94%B9%E5%96%84%E7%9A%84%E6%BB%9A%E5%B1%8F%E6%80%A7%E8%83%BD" title="" data-type="link">MDN 使用passive改善滚屏性能</a>。</p><p data-type="paragraph"><br></p><h3 data-id="heading46" data-type="heading" top="15472">查找事件目标</h3><p data-type="paragraph"><br></p><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/0eb159798080da4adc7ffb76cf184ffa.png"> <div data-title="">hittest.png</div></div></div><p data-type="paragraph"><br></p><p data-type="paragraph">当渲染线程将事件发送给主线程后，第一件事就是找到事件触发的目标。通过在渲染过程中生成的绘制信息，可以根据坐标找到目标元素。</p><p data-type="paragraph"><br></p><h3 data-id="heading47" data-type="heading" top="15749">减少发送给主线程的事件数量</h3><p data-type="paragraph"><br></p><p data-type="paragraph">为了保证动画的顺畅，需要显示器在每秒刷新 60 次。对于典型的触摸事件由合成线程提交给主线程的事件频率可以达到每秒 60-120 次，对于典型的鼠标事件每秒会发送 100 次。事件发送的频率通常比屏幕刷新频率要高。</p><p data-type="paragraph"><br></p><p data-type="paragraph">如果类似<code data-type="codeinline">touchmove</code>这样的事件每秒向主线程发送 120 次可能会造成主线程执行时间过长而影响性能。</p><p data-type="paragraph"><br></p><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/6101cc07df5e744efb2a88208f1d1e52.png"> <div data-title="">rawevents.png</div></div></div><p data-type="paragraph">为了减少发送给主线程的事件数量，Chrome 合并了连续的事件。类似<code data-type="codeinline">wheel</code>，<code data-type="codeinline">mousewheel</code>，<code data-type="codeinline">mousemove</code>，<code data-type="codeinline">pointermove</code>，<code data-type="codeinline">touchmove</code>这样的事件会被延迟到下一次<code data-type="codeinline">requestAnimationFrame</code>前触发.</p><p data-type="paragraph"><br></p><div data-type="image"><div data-content=""><img src="./Chrome浏览器架构 - InfoQ 写作平台_files/53005a8114a736ca071a333946664ffd.png"> <div data-title="">coalescedevents.png</div></div></div><p data-type="paragraph"><br></p><p data-type="paragraph">而任何的离散事件，类似<code data-type="codeinline">keydown</code>, <code data-type="codeinline">keyup</code>, <code data-type="codeinline">mouseup</code>, <code data-type="codeinline">mousedown</code>, <code data-type="codeinline">touchstart</code>和 <code data-type="codeinline">touchend</code>都会立即被发送给主线程处理。</p><p data-type="paragraph"><br></p><h2 data-id="heading48" data-type="heading" top="16323">总结</h2><p data-type="paragraph"><br></p><p data-type="paragraph">到此，我们已经可以通过从用户在浏览器地址栏中的一次输入到页面图像的显示了解浏览器是如何工作的。这里我们总结一下。</p><p data-type="paragraph"><br></p><ul data-type="bulletedlist"><li><p data-type="paragraph">浏览器进程做为最重要的进程负责大多数页签外部的工作，包括地址栏显示、网络请求、页签状态管理等。</p></li><li><p data-type="paragraph">不同的渲染进程负责不同的站点渲染工作，渲染进程间彼此独立。</p></li><li><p data-type="paragraph">渲染进程在渲染页面的过程中会通过浏览器进程获取站点资源，只有安全的资源才会被渲染进程接收到。</p></li><li><p data-type="paragraph">渲染进程中主线程负责除了图像生成外绝大多数工作，如何减少主线程上代码的运行是交互性能优化的关键。</p></li><li><p data-type="paragraph">渲染进程中的合成线程和栅格线程负责图像生成，利用分层技术可以优化图像生成的效率。</p></li><li><p data-type="paragraph">当用户与页面发生交互时，事件的传播途径从浏览器进程到渲染进程的合成线程再根据事件监听的区域决定是否要传递给渲染进程的主线程处理。</p></li></ul><p data-type="paragraph"><br></p><p data-type="paragraph">在这个专栏中，后续还会有包括页面循环系统，V8，网络等章节围绕浏览器如何工作的这一话题做更细致的讲解，敬请期待。</p><p data-type="paragraph"><br></p><p data-type="paragraph">最后，感谢你的阅读。</p><p data-type="paragraph"><br></p></div></div><div data-v-026a1842="" data-v-61f0fa32="" class="selection-operation-bar note-bar popup-note-menu down" style="top: 26987px; left: 314px;"><div data-v-026a1842="" class="arrow down" style="left: 94px;"></div><div data-v-026a1842="" class="main"><div data-v-026a1842="" class="menu line"><i data-v-a949bb52="" data-v-026a1842="" class="com-icon iconfont icon-hover" style="font-size: 20px; color: rgb(255, 255, 255);"></i><span data-v-026a1842="" class="text">划线</span></div><!----><div data-v-026a1842="" class="menu comment"><i data-v-a949bb52="" data-v-026a1842="" class="com-icon iconfont icon-hover" style="font-size: 20px; color: rgb(255, 255, 255);"></i><span data-v-026a1842="" class="text">评论</span></div><div data-v-026a1842="" class="menu copy"><i data-v-a949bb52="" data-v-026a1842="" class="com-icon iconfont icon-hover" style="font-size: 20px; color: rgb(255, 255, 255);"></i><span data-v-026a1842="" class="text">复制</span></div></div></div></div></div><div data-v-5f47010e="" data-v-44530c6c="" class="author-information after-content"><div data-v-5f47010e="" data-v-44530c6c="" class="row"><span data-v-5f47010e="" data-v-44530c6c="" class="date">发布于: 2020 年 10 月 06 日</span><span data-v-5f47010e="" data-v-44530c6c="" class="views">阅读数: 13577</span></div></div><div data-v-5f47010e="" data-v-44530c6c="" class="copyright"><p data-v-5f47010e="" data-v-44530c6c="">版权声明: 本文为 InfoQ 作者【曲迪】的原创文章。</p><p data-v-5f47010e="" data-v-44530c6c="">原文链接:【<a href="https://xie.infoq.cn/article/5d36d123bfd1c56688e125ad3" target="_blank">https://xie.infoq.cn/article/5d36d123bfd1c56688e125ad3</a>】。</p><p data-v-5f47010e="" data-v-44530c6c="">本文遵守【CC-BY 4.0】协议，转载请保留原文出处及本版权声明。</p></div><!----><div data-v-4300d745="" data-v-5f47010e="" class="com-label-list tag-list" data-v-44530c6c=""><a data-v-4426e0e8="" data-v-4300d745="" href="https://xie.infoq.cn/tag/34" com-label-title="" class="com-label-title">chrome</a><a data-v-4426e0e8="" data-v-4300d745="" href="https://xie.infoq.cn/tag/455" com-label-title="" class="com-label-title">大前端</a><a data-v-4426e0e8="" data-v-4300d745="" href="https://xie.infoq.cn/tag/498" com-label-title="" class="com-label-title">浏览器</a><a data-v-4426e0e8="" data-v-4300d745="" href="https://xie.infoq.cn/tag/1264" com-label-title="" class="com-label-title">专栏</a></div><div data-v-5c7b5c28="" data-v-5f47010e="" author-card="" class="com-author-card author-info" data-v-44530c6c=""><div data-v-5c7b5c28="" class="author-card"><div data-v-5c7b5c28="" class="top"><div data-v-5c7b5c28="" class="avatar"><div data-v-6f271b48="" data-v-5c7b5c28="" class="com-avatar-wrap"><img data-v-6f271b48="" src="./Chrome浏览器架构 - InfoQ 写作平台_files/7a32c580.jpg" alt="用户头像" class="com-avatar" style="width: 55px; height: 55px;"><!----></div></div><div data-v-5c7b5c28="" class="info"><div data-v-5c7b5c28="" class="top"><h3 data-v-5c7b5c28="" class="author-name"><a data-v-d8d4e5b0="" data-v-6281d13f="" data-v-5c7b5c28="" rel="nofollow" com-author-name="" class="com-author-name">曲迪</a></h3><div data-v-d2847db8="" data-v-5c7b5c28="" gk-button="" gkbtn-color="unfollow" gkbtn-size="small" class="geek-foll-btn Button_button_3onsJ" follow-button="" data-follow="0"><i data-v-5c7b5c28="" class="iconfont"></i>关注</div></div><p data-v-5c7b5c28="" class="mood"> 完成比完美更重要 <span data-v-5c7b5c28="" class="dot"></span> 2017.12.31 加入</p></div></div><!----><p data-v-5c7b5c28="" class="intro">喜欢写代码的程序员</p></div></div><div data-v-7fad60de="" data-v-5f47010e="" class="widget-operation-bottom widget-operation inner" data-v-44530c6c=""><!----><div data-v-7fad60de="" class="like btn"><i data-v-7fad60de="" class="iconfont"></i><!----></div><div data-v-7fad60de="" class="favorite btn"><i data-v-7fad60de="" class="iconfont"></i></div><!----><div data-v-7fad60de="" class="weixin btn"><i data-v-7fad60de="" class="iconfont"></i></div><div data-v-7fad60de="" class="weibo btn"><i data-v-7fad60de="" class="iconfont"></i></div><div data-v-7fad60de="" class="horde btn"><i data-v-7fad60de="" class="iconfont"></i></div><div data-v-7fad60de="" data-self="2" data-label="举报" class="extra btn"><i data-v-7fad60de="" class="iconfont"></i></div></div><div data-v-1ee27d2c="" data-v-5f47010e="" class="article-comment-block comment-list-wrap" data-v-44530c6c=""><div data-v-1ee27d2c="" class="comment-list"><h2 data-v-1ee27d2c="">评论 <span data-v-1ee27d2c="" class="comment-number">(8 条评论)</span></h2><div data-v-1ee27d2c="" class="comment-form"><div data-v-1ee27d2c="" class="comment-input no-reference"><div data-v-045f148c="" data-v-1ee27d2c="" contenteditable="plaintext-only" spellcheck="false" placeholder="写下你的想法，一起交流" class="textarea comment-textarea empty"></div> <!----></div><div data-v-1ee27d2c="" class="comment-operation"><div data-v-1ee27d2c="" gk-button="" gkbtn-color="green" gkbtn-size="normal" disabled="disabled" class="comment-btn Button_button_3onsJ"> 发布 </div></div></div><div data-v-1ee27d2c="" class="list"><!----><div data-v-310b8e77="" data-v-56aed32d="" data-v-1ee27d2c="" class="reply-item comment-item"><div data-v-56aed32d="" data-v-310b8e77="" class="comment-avatar"><div data-v-6f271b48="" data-v-56aed32d="" class="com-avatar-wrap" data-v-310b8e77=""><img data-v-6f271b48="" src="./Chrome浏览器架构 - InfoQ 写作平台_files/dd471426.jpg" alt="用户头像" class="com-avatar" style="width: 40px; height: 40px;"><!----></div></div><div data-v-310b8e77="" class="reply-author"><a data-v-d8d4e5b0="" data-v-6281d13f="" data-v-310b8e77="" rel="nofollow" com-author-name="" class="com-author-name reply-user">王朝</a><!----></div><div data-v-310b8e77="" class="reply-content"><span data-v-310b8e77="" class="">真的。。。太厉害了</span><!----></div><div data-v-310b8e77="" class="reply-operation"><div data-v-310b8e77="" class="date">2021 年 08 月 05 日 15:26</div><div data-v-310b8e77="" class="reply-action"><span data-v-310b8e77="" class="like-btn"><i data-v-310b8e77="" class="iconfont"></i> 0 </span><span data-v-310b8e77="" class="reply-btn"><i data-v-310b8e77="" class="iconfont"></i><em data-v-310b8e77="">回复</em></span></div></div><!----></div><div data-v-310b8e77="" data-v-56aed32d="" data-v-1ee27d2c="" class="reply-item comment-item"><div data-v-56aed32d="" data-v-310b8e77="" class="comment-avatar"><div data-v-6f271b48="" data-v-56aed32d="" class="com-avatar-wrap" data-v-310b8e77=""><img data-v-6f271b48="" src="./Chrome浏览器架构 - InfoQ 写作平台_files/5984c38b.jpg" alt="用户头像" class="com-avatar" style="width: 40px; height: 40px;"><!----></div></div><div data-v-310b8e77="" class="reply-author"><a data-v-d8d4e5b0="" data-v-6281d13f="" data-v-310b8e77="" rel="nofollow" com-author-name="" class="com-author-name reply-user">周将军</a><!----></div><div data-v-310b8e77="" class="reply-content"><span data-v-310b8e77="" class="">看完了翻译，再看了原文。个人感觉原文更容易理解。</span><!----></div><div data-v-310b8e77="" class="reply-operation"><div data-v-310b8e77="" class="date">2021 年 06 月 23 日 17:43</div><div data-v-310b8e77="" class="reply-action"><span data-v-310b8e77="" class="like-btn"><i data-v-310b8e77="" class="iconfont"></i> 1 </span><span data-v-310b8e77="" class="reply-btn"><i data-v-310b8e77="" class="iconfont"></i><em data-v-310b8e77="">回复</em></span></div></div><!----></div><div data-v-310b8e77="" data-v-56aed32d="" data-v-1ee27d2c="" class="reply-item comment-item"><div data-v-56aed32d="" data-v-310b8e77="" class="comment-avatar"><div data-v-6f271b48="" data-v-56aed32d="" class="com-avatar-wrap" data-v-310b8e77=""><img data-v-6f271b48="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHoAAAB6CAYAAABwWUfkAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RDI1RjA3RkVCQ0ExMTFFODkyQTY4NDdDNjQ4Q0I3Q0QiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RDI1RjA3RkRCQ0ExMTFFODkyQTY4NDdDNjQ4Q0I3Q0QiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozNDQ5RjBBQUI4QzIxMUU4OEM2QkI5MDlENENEOUU3NiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozNDQ5RjBBQkI4QzIxMUU4OEM2QkI5MDlENENEOUU3NiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PjC0dCMAAAp5SURBVHja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" alt="用户头像" class="com-avatar" style="width: 40px; height: 40px;"><!----></div></div><div data-v-310b8e77="" class="reply-author"><a data-v-d8d4e5b0="" data-v-6281d13f="" data-v-310b8e77="" rel="nofollow" com-author-name="" class="com-author-name reply-user">vivi chen</a><!----></div><div data-v-310b8e77="" class="reply-content"><span data-v-310b8e77="" class="">这里翻译的有问题，应该大概是这样“​当合成线程向主线程发送输入事件时，要运行的第一件事情是找到目标元素。”</span><!----></div><div data-v-56aed32d="" data-v-310b8e77="" class="reference"><div data-v-041deacf="" data-v-56aed32d="" class="comment-reference" data-v-310b8e77=""><div data-v-041deacf="" class="content"><p data-v-041deacf="" class="text-row">当渲染线程将事件发送给主线程后，第一件事就是找到事件触发的目标。</p></div><!----></div></div><div data-v-310b8e77="" class="reply-operation"><div data-v-310b8e77="" class="date">2021 年 06 月 02 日 17:44</div><div data-v-310b8e77="" class="reply-action"><span data-v-310b8e77="" class="like-btn"><i data-v-310b8e77="" class="iconfont"></i> 0 </span><span data-v-310b8e77="" class="reply-btn"><i data-v-310b8e77="" class="iconfont"></i><em data-v-310b8e77="">回复</em></span></div></div><!----></div><div data-v-310b8e77="" data-v-56aed32d="" data-v-1ee27d2c="" class="reply-item comment-item"><div data-v-56aed32d="" data-v-310b8e77="" class="comment-avatar"><div data-v-6f271b48="" data-v-56aed32d="" class="com-avatar-wrap" data-v-310b8e77=""><img data-v-6f271b48="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHoAAAB6CAYAAABwWUfkAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RDI1RjA3RkVCQ0ExMTFFODkyQTY4NDdDNjQ4Q0I3Q0QiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RDI1RjA3RkRCQ0ExMTFFODkyQTY4NDdDNjQ4Q0I3Q0QiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozNDQ5RjBBQUI4QzIxMUU4OEM2QkI5MDlENENEOUU3NiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozNDQ5RjBBQkI4QzIxMUU4OEM2QkI5MDlENENEOUU3NiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PjC0dCMAAAp5SURBVHja7J0LbFxHFYaP18/dtb3e+hHHcRI3oS2PUipApYUgSpBKEaiKGwgSLZBCqEShQJEQpSAQUKpKIZFAgNKmQhU0QhRoFQpVBAJBKSmqgAaahrRRqHFsZ+NXYq93117ba85/72y0sb3rfdzHzOz80S9LbnfuzPl8587MnTNbc+z4f0gD1bOvYl8tfm5hb2J3sduF6/J8doE9IRxjDwifYh9nv8yeVz1ANYqC7ma/m32D8DXsBpeulWb/m/2c8DPsYQPapXoKoB9g38y+VvzOL73IPsI+zD7KXjKgKxPu1I+xd7E3SlrHM+zH2T8Rd74BXaRC7NvYe9jXKdZDPs9+hH2InTSgVxcGTp9h38XuUHzsM87+EfuH7FED2hagfklADpNeSgjYewX8qgQdZH+R/WV2C+mtGfaD7P3slB8VCPjUcAyuTrLvrwLIULNo60nRdu1B97KfYv9cLGhUmzaJtv/G61mEl6Axij4h5sLVrvezX2J/SifQWH78FftglXTTxQqxeJj9pIiR0qAxD36Bfavhmlc72MfcXjNwEzS6pWdI3hUtmdQrYnWnSqBR5j7RLTUahkULsXpITMECsoPG3PiXYn5sVJ7uETEMygoac8Wn2f2GVcXqF7Fslg10hP179o2GkWO6UcQ0Igto/NXh3ez1ho3jul7Ettlv0HileNhAdh32r0WsfQGNHR4/ZW83LFwXtk0dogp21VQC+gEyCyFeaoeIuaeg72Dfa2Lvue4VsS+9+y3jffSb2c86Pc8zKlp4n/1O9j/cvKOj7CcMZF+F2OMlUZuboLGsudnE2neBwQG3QO9mf9DEWBp9mP1Rp5/RPWSnp0RNfKXSebLTkEacuqN/YCBLqahg40jXjW0v5kWFvOoXjCoCjSzFfSaW0mu/YFU26LvJTkM1kltXClZlDcZa2f8lDzauGTki5HcjL3y61Dv6cwayUgKrz5d6R2PV5VUqcfVFRoVDIWptCVs/Gxvqqba21vr94uIizaXnKZFM0nQ8Yf3UQFPsPvaF5f8h33EPe1SHfFlbhLo62xnu6gch1NXVWQ6HgtTV0c7Q0zQ6NkGTF6ZUbnZEsPtuMXc04J8mRVNmAHZT73oKBctbjk+mUjQ4dNYCr6gG2VvJPpul4DO6X1XIzeEwXbG1r2zIED6LMlCWogK7ncUMxu5UE3KItmzupdpA5dvgUAbKQpmKas9aoC8nBbcGNfAgq29jL9XUOHd+DcpCmShbQW0XU628oG8n/3Kmy++rNvTwaNr5aqNMlK2gEIzbCoHepVqLom2t1sjZvelZ0LqGgtqVD/TryX7lpZQwNdLhGi7oasF0Behb1FsMCVJTo/t5fLiGm72Gi7plNdA3qdaK1uZmLa/loN67HDSy77ep1oqQh3dZSM07+h1kv5y6CBppH8rNIxobG7S8loMC07flgt6mYivqxAsK3a7lsLblgr6BjHTV23NBX6tiCxYzGS2v5bDelAWNQ847VWzB3Fxay2s5LLDtDpCCiyRZpWZntbyWG3c1QF+hau2n4zNaXssFbQHoPlVrP5NI0vzCguvXwTVwLYXVpzTopaUlGpuYdP06uAaupTroTpVbMD5x3tVtPygb11BcncqDxp12ZvisK3ecm2V7rA6AVv37KyiRTNFw7Jzj5aJMlK2BOrDjU4vTCyYmL1AN/+vpXkeV7ijCDTwci1llaqIQQNfp0prxSft5vWnDemvPdjla4BH2IHfX8ZkEaaQ67OteIs2EbIx1ne3UHm2jQJG7QjOZDE2cv0DnxiasLA7dpCXoXODRSCu1tjRTKNh0MR0nKwBNpmatxZDzU9NaAs4FjRyUVqoCoTvP7vvGS4oFDxZbJNE0HmRL1dJagK0atMvGlwAdJ4eOCvbuzqwt+tnrtDJWT6BcFx8H6DGyv9NBWgEqnrWRSAuFg0HfIOfCTqRSNDUVt57tGfnfVY8B9ITUM/3LotTd1bFiIOX3H15LOGx5/bpOio2OW1M7mZcZADom64h5c28PtTTLndWIem5Yv84a2f9vaETWkXsMfeCAfMEL0Na+jdJDzhXqijq7kQPmgAakBL1xQw8Fm5qUG9qizpIm5VmgT8lUIyS0RVqUzIqwhC482ibdJOYUQL8oS22Qk9zdpfRbU0sYPDqZq+2AjgM0houDMtQGJww01NcrDxptkOi0BLCdzI4cXpCl29NFErXFYpsFfVSWO1oXSdSWo7mgn5WhRvUadNu53bck+msuaHwRh+8bl2sDAW1AB+RoC5j+PRf0HPtPftdKp/fBkrTlz4LtJScePO13rdLz89qAlqQtv73Yw+T88im2r69h4jNJbUBL0JaMYLoC9JDfo+/peFwb0BK05TnBdAVo6HE/a4Y91LOzc8pDRhsk2A9+CcvloH+Gx4uftRs5N6o8aAnakBYs84IeZz/p77MtofTGedRdgj3hYDhWCDR00O9aIhVGxXxk1NmN1KAy9MiKef0q/9Mf2f/ys5ZIahs4M2xtqFfmTua6os4SJOSdYP+hGNCo6X6/a4uADY3E6PTAIKVS8h4rgbqhjqirJFmX+2iVLdz5vjwFp6dhQ4I0J/FjI16ktYVCoSZqqG/wbcvO4mKG0vNpSiZnaWo6TvGEVDlaZ9ivWW1AXVdg1PYd9kPSLEBwQCULqoy6P9+sqdAXnOH1y0ladpK7kbTCl9G9lr3q2muh/g8f+IqJnzK6Lx/ktUBDv2D/xcRQeoFRwVXNtUBj9PYFjEFMLKUV2NxDayRLFjN0/Sf7eyae0ur7ZG8cKahCg7FcIWUC24IvN3GVbgB2DXvN6Uixk1EUdIfpwqXrsj9RDORSQEPYlrLXxFca7RVMilKxXXfu3BqFm4Pc/dXf2O+iEl4pl7qOiHkavjhr1MTaNyH2H6IS9w2Us2A8JGCnTcw9V1rEfqjUD5b7ZgDd92dN3D3X3aU8l50ADWGDwoMm9p4JsX643A9X+q7vPpJgR0oV6KCINfkFGstun2Y/Zli4psdEjJf8BJ2duO82sF2DvJscWKhyapsGKvJx9gHDxjEdEDF1ZDXSyf04SAG5i/0tqqJjJ10QYvdtEUvHUqQCLlTyG2SvwZp5dnnzZMTu607fLG7tsHuU/R72WcOuaJ0VMXvUjcLd3EqJUxTeQmaHSjFCjN5KLp48EfDgr3S76M4XDM8VQky+KWI04uaFSn17VYnw9bY/Zl9l+Fp6WTyPPUlV9nIXPBqEry/GfvH5KgaMtj8gYuFZPrrX6Q7IrfmaaOSRKoR8RLT9qyIWpCvorJAI9j72DvZLVQAY7b1VtPmEHxXw+4ykw2Rvbrud/YqGgF8RbXsj+Zx3LsNhWFj9OcR+HXsnSXKKoQPjkZ2iTYfI50OAvB51l6Lr2J9kf4StygGhyNzHcRJIQn9etsrJCjorQO4ne/vMTWSn88okLFn+juzUpSdIgtMXVQWdq6iAfbNwt0/1iInR8xEBWYkvl1YJ9CX1JjtFFNuOt4kpyxtcuOPTYlZwjOzlSZzdhVRi5d7OqQp6NSGp/0r2VrJTh5DXjeP824XbxOAzm/y/IAZJOChlQhgn+bxKdqrLaTFq1mLp9v8CDAChjN4Gkw4l1AAAAABJRU5ErkJggg==" alt="用户头像" class="com-avatar" style="width: 40px; height: 40px;"><!----></div></div><div data-v-310b8e77="" class="reply-author"><a data-v-d8d4e5b0="" data-v-6281d13f="" data-v-310b8e77="" rel="nofollow" com-author-name="" class="com-author-name reply-user">vivi chen</a><!----></div><div data-v-310b8e77="" class="reply-content"><span data-v-310b8e77="" class="">提一个小小小小小小小（不值一提）的问题哈！从渲染进程负责页面的内容 开始，标题层级错啦，应该是一级标题，现在归属到访问预加载的内容里啦</span><!----></div><div data-v-56aed32d="" data-v-310b8e77="" class="reference"><div data-v-041deacf="" data-v-56aed32d="" class="comment-reference" data-v-310b8e77=""><div data-v-041deacf="" class="content"><p data-v-041deacf="" class="text-row">进程负责页</p></div><!----></div></div><div data-v-310b8e77="" class="reply-operation"><div data-v-310b8e77="" class="date">2021 年 06 月 02 日 14:10</div><div data-v-310b8e77="" class="reply-action"><span data-v-310b8e77="" class="like-btn"><i data-v-310b8e77="" class="iconfont"></i> 0 </span><span data-v-310b8e77="" class="reply-btn"><i data-v-310b8e77="" class="iconfont"></i><em data-v-310b8e77="">回复</em></span></div></div><!----></div><div data-v-310b8e77="" data-v-56aed32d="" data-v-1ee27d2c="" class="reply-item comment-item"><div data-v-56aed32d="" data-v-310b8e77="" class="comment-avatar"><div data-v-6f271b48="" data-v-56aed32d="" class="com-avatar-wrap" data-v-310b8e77=""><img data-v-6f271b48="" src="./Chrome浏览器架构 - InfoQ 写作平台_files/ef7f625a.jpg" alt="用户头像" class="com-avatar" style="width: 40px; height: 40px;"><!----></div></div><div data-v-310b8e77="" class="reply-author"><a data-v-d8d4e5b0="" data-v-6281d13f="" data-v-310b8e77="" rel="nofollow" com-author-name="" class="com-author-name reply-user">👊 👊</a><!----></div><div data-v-310b8e77="" class="reply-content"><span data-v-310b8e77="" class="">太棒了</span><!----></div><div data-v-310b8e77="" class="reply-operation"><div data-v-310b8e77="" class="date">2021 年 05 月 17 日 20:07</div><div data-v-310b8e77="" class="reply-action"><span data-v-310b8e77="" class="like-btn"><i data-v-310b8e77="" class="iconfont"></i> 0 </span><span data-v-310b8e77="" class="reply-btn"><i data-v-310b8e77="" class="iconfont"></i><em data-v-310b8e77="">回复</em></span></div></div><!----></div><div data-v-310b8e77="" data-v-56aed32d="" data-v-1ee27d2c="" class="reply-item comment-item"><div data-v-56aed32d="" data-v-310b8e77="" class="comment-avatar"><div data-v-6f271b48="" data-v-56aed32d="" class="com-avatar-wrap" data-v-310b8e77=""><img data-v-6f271b48="" src="./Chrome浏览器架构 - InfoQ 写作平台_files/27d69ba0.jpg" alt="用户头像" class="com-avatar" style="width: 40px; height: 40px;"><span data-v-6f271b48="" class="avatar-icon"><img data-v-6f271b48="" src="./Chrome浏览器架构 - InfoQ 写作平台_files/avatar-icon-number-1.a6aec119.png"></span></div></div><div data-v-310b8e77="" class="reply-author"><a data-v-d8d4e5b0="" data-v-6281d13f="" data-v-310b8e77="" rel="nofollow" com-author-name="" class="com-author-name reply-user">小天同学</a><!----></div><div data-v-310b8e77="" class="reply-content"><span data-v-310b8e77="" class="">这是极客时间的课程总结吗？哈哈</span><!----></div><div data-v-310b8e77="" class="reply-operation"><div data-v-310b8e77="" class="date">2020 年 10 月 09 日 11:16</div><div data-v-310b8e77="" class="reply-action"><span data-v-310b8e77="" class="like-btn"><i data-v-310b8e77="" class="iconfont"></i> 0 </span><span data-v-310b8e77="" class="reply-btn"><i data-v-310b8e77="" class="iconfont"></i><em data-v-310b8e77="">回复</em></span></div></div><!----><div data-v-56aed32d="" data-v-310b8e77="" class="reply-list"><span data-v-56aed32d="" data-v-310b8e77=""><div data-v-310b8e77="" data-v-56aed32d="" class="reply-item"><div data-v-310b8e77="" class="reply-author"><a data-v-d8d4e5b0="" data-v-6281d13f="" data-v-310b8e77="" rel="nofollow" com-author-name="" class="com-author-name reply-user">曲迪</a><!----></div><div data-v-310b8e77="" class="reply-content"><span data-v-310b8e77="" class="">取材于Google开发者文档</span><!----></div><div data-v-310b8e77="" class="reply-operation"><div data-v-310b8e77="" class="date">2020 年 10 月 09 日 20:04</div><div data-v-310b8e77="" class="reply-action"><span data-v-310b8e77="" class="like-btn"><i data-v-310b8e77="" class="iconfont"></i> 1 </span><span data-v-310b8e77="" class="reply-btn"><i data-v-310b8e77="" class="iconfont"></i><em data-v-310b8e77="">回复</em></span></div></div><!----></div></span><!----></div></div><div data-v-310b8e77="" data-v-56aed32d="" data-v-1ee27d2c="" class="reply-item comment-item"><div data-v-56aed32d="" data-v-310b8e77="" class="comment-avatar"><div data-v-6f271b48="" data-v-56aed32d="" class="com-avatar-wrap" data-v-310b8e77=""><img data-v-6f271b48="" src="./Chrome浏览器架构 - InfoQ 写作平台_files/060f6fef.jpg" alt="用户头像" class="com-avatar" style="width: 40px; height: 40px;"><!----></div></div><div data-v-310b8e77="" class="reply-author"><a data-v-d8d4e5b0="" data-v-6281d13f="" data-v-310b8e77="" rel="nofollow" com-author-name="" class="com-author-name reply-user">一家之煮</a><!----></div><div data-v-310b8e77="" class="reply-content"><span data-v-310b8e77="" class="">极客 匠心</span><!----></div><div data-v-310b8e77="" class="reply-operation"><div data-v-310b8e77="" class="date">2020 年 10 月 06 日 23:45</div><div data-v-310b8e77="" class="reply-action"><span data-v-310b8e77="" class="like-btn"><i data-v-310b8e77="" class="iconfont"></i> 0 </span><span data-v-310b8e77="" class="reply-btn"><i data-v-310b8e77="" class="iconfont"></i><em data-v-310b8e77="">回复</em></span></div></div><!----></div><div data-v-4c7bd645="" data-v-1ee27d2c="" class="com-more-button loading-btn"><span data-v-4c7bd645="" class="finish-label">没有更多了</span></div></div></div></div><!----></div><!----><div data-v-fc049942="" data-v-5f47010e="" id="gk-layer" gkmodal-color="common" class="report-modal Modal_gk-modal_3ly5T" data-v-44530c6c=""><!----><!----></div><div data-v-355438c6="" data-v-5f47010e="" id="gk-layer" gkmodal-color="base" class="share-weixin-modal Modal_gk-modal_3ly5T" data-v-44530c6c=""><!----><!----></div><div data-v-17597960="" data-v-5f47010e="" id="gk-layer" gkmodal-color="base" class="modal-share-horde Modal_gk-modal_3ly5T" data-v-44530c6c=""><!----><!----></div><!----></div><!----></div><div data-v-44530c6c="" id="check-bottom-bar"></div><div data-v-44530c6c="" layout-footer-wrap="" class="layout-footer-wrap"><div data-v-3f7820d9="" data-v-44530c6c="" class="footer layout-footer"><ul data-v-3f7820d9="" class="layout-content"><li data-v-3f7820d9="" class="theme"><div data-v-3f7820d9="" class="logo"><img data-v-3f7820d9="" src="./Chrome浏览器架构 - InfoQ 写作平台_files/logo.3bdee6e4.png" alt="logo"><p data-v-3f7820d9="">促进软件开发及相关领域知识与创新的传播</p></div></li><li data-v-3f7820d9=""><dl data-v-3f7820d9="" class="footer-nav"><dt data-v-3f7820d9="">InfoQ</dt><dd data-v-3f7820d9=""><!----><a data-v-3f7820d9="" href="https://www.infoq.cn/about" target="_blank" rel="noopener nofollow">关于我们</a></dd><dd data-v-3f7820d9=""><!----><a data-v-3f7820d9="" href="https://www.infoq.cn/contribute" target="_blank" rel="noopener nofollow">我要投稿</a></dd><dd data-v-3f7820d9=""><!----><a data-v-3f7820d9="" href="https://www.geekbang.org/partner" target="_blank" rel="noopener nofollow">合作伙伴</a></dd><dd data-v-3f7820d9=""><!----><a data-v-3f7820d9="" href="https://xie.infoq.cn/link?target=https%3A%2F%2Fwww.lagou.com%2Fgongsi%2Fj43775.html" target="_blank" rel="noopener nofollow">加入我们</a></dd><dd data-v-3f7820d9=""><!----><a data-v-3f7820d9="" href="https://infoq.cn/official/account" target="_blank" rel="noopener nofollow">关注我们</a></dd></dl></li><li data-v-3f7820d9=""><dl data-v-3f7820d9="" class="footer-nav"><dt data-v-3f7820d9="">联系我们</dt><dd data-v-3f7820d9=""><!----><a data-v-3f7820d9="" href="mailto:editors@geekbang.com" target="_blank" rel="noopener nofollow">内容投稿：editors@geekbang.com</a></dd><dd data-v-3f7820d9=""><!----><a data-v-3f7820d9="" href="mailto:hezuo@geekbang.com" target="_blank" rel="noopener nofollow">业务合作：hezuo@geekbang.com</a></dd><dd data-v-3f7820d9=""><!----><a data-v-3f7820d9="" href="mailto:feedback@geekbang.com" target="_blank" rel="noopener nofollow">反馈投诉：feedback@geekbang.com</a></dd><dd data-v-3f7820d9=""><!----><a data-v-3f7820d9="" href="mailto:zhaopin@geekbang.com" target="_blank" rel="noopener nofollow">加入我们：zhaopin@geekbang.com</a></dd><dd data-v-3f7820d9=""><!----><span data-v-3f7820d9="">联系电话：010-64738142</span></dd><dd data-v-3f7820d9=""><!----><span data-v-3f7820d9="">地址：北京市朝阳区叶青大厦北园</span></dd></dl></li><li data-v-3f7820d9=""><dl data-v-3f7820d9="" class="footer-nav"><dt data-v-3f7820d9="">InfoQ 近期会议</dt><dd data-v-3f7820d9=""><img data-v-3f7820d9="" src="./Chrome浏览器架构 - InfoQ 写作平台_files/628b5e750e918f52cda61a19fdc186f5.png" alt="会议图片"><a data-v-3f7820d9="" href="https://archsummit.infoq.cn/2021/beijing/?utm_source=infoq&amp;utm_medium=footer" target="_blank" rel="noopener nofollow">ArchSummit全球架构师峰会 3月24-25日</a></dd><dd data-v-3f7820d9=""><img data-v-3f7820d9="" src="./Chrome浏览器架构 - InfoQ 写作平台_files/628b5e750e918f52cda61a19fdc186f5.png" alt="会议图片"><a data-v-3f7820d9="" href="https://pcon.infoq.cn/2021/beijing/?utm_source=infoq&amp;utm_medium=footer" target="_blank" rel="noopener nofollow">PCon全球产品创新大会 3月25-26日</a></dd><dd data-v-3f7820d9=""><img data-v-3f7820d9="" src="./Chrome浏览器架构 - InfoQ 写作平台_files/628b5e750e918f52cda61a19fdc186f5.png" alt="会议图片"><a data-v-3f7820d9="" href="https://dive.infoq.cn/2021/beijing/?utm_source=infoq&amp;utm_medium=footer" target="_blank" rel="noopener nofollow">DIVE全球基础软件创新大会 3月25-26日</a></dd><dd data-v-3f7820d9=""><img data-v-3f7820d9="" src="./Chrome浏览器架构 - InfoQ 写作平台_files/682e88b72d998d472686410a05c67986.png" alt="会议图片"><a data-v-3f7820d9="" href="https://archsummit.infoq.cn/2022/shanghai/?utm_source=infoq&amp;utm_medium=footer" target="_blank" rel="noopener nofollow">ArchSummit全球架构师峰会 4月24-25日</a></dd><dd data-v-3f7820d9=""><img data-v-3f7820d9="" src="./Chrome浏览器架构 - InfoQ 写作平台_files/628b5e750e918f52cda61a19fdc186f5.png" alt="会议图片"><a data-v-3f7820d9="" href="https://qcon.infoq.cn/2022/beijing/?utm_source=infoq&amp;utm_medium=footer" target="_blank" rel="noopener nofollow">QCon全球软件开发大会 5月12-14日</a></dd><dd data-v-3f7820d9=""><img data-v-3f7820d9="" src="./Chrome浏览器架构 - InfoQ 写作平台_files/628b5e750e918f52cda61a19fdc186f5.png" alt="会议图片"><span data-v-3f7820d9="">GMTC全球大前端技术大会 6月10-11日</span></dd><dd data-v-3f7820d9=""><img data-v-3f7820d9="" src="./Chrome浏览器架构 - InfoQ 写作平台_files/e9389010abc33c8414653cdffd281a55.png" alt="会议图片"><span data-v-3f7820d9="">ArchSummit全球架构师峰会 7月15-16日</span></dd><dd data-v-3f7820d9=""><img data-v-3f7820d9="" src="./Chrome浏览器架构 - InfoQ 写作平台_files/628b5e750e918f52cda61a19fdc186f5.png" alt="会议图片"><span data-v-3f7820d9="">PCon全球产品创新大会 8月19-20日</span></dd></dl></li><li data-v-3f7820d9=""><dl data-v-3f7820d9="" class="footer-nav"><dt data-v-3f7820d9="">全球 InfoQ</dt><dd data-v-3f7820d9=""><img data-v-3f7820d9="" src="./Chrome浏览器架构 - InfoQ 写作平台_files/55cd81623e36f5ab7a7db74d60b74838.png" alt="会议图片"><a data-v-3f7820d9="" href="https://www.infoq.com/" target="_blank" rel="noopener nofollow">InfoQ  En</a></dd><dd data-v-3f7820d9=""><img data-v-3f7820d9="" src="./Chrome浏览器架构 - InfoQ 写作平台_files/95fe851c02c86120e9037eada6a36d13.png" alt="会议图片"><a data-v-3f7820d9="" href="https://www.infoq.com/jp/" target="_blank" rel="noopener nofollow">InfoQ Jp</a></dd><dd data-v-3f7820d9=""><img data-v-3f7820d9="" src="./Chrome浏览器架构 - InfoQ 写作平台_files/2aa440b6d94e94f64c508f16da38933e.png" alt="会议图片"><a data-v-3f7820d9="" href="http://www.infoq.com/fr/" target="_blank" rel="noopener nofollow">InfoQ Fr</a></dd><dd data-v-3f7820d9=""><img data-v-3f7820d9="" src="./Chrome浏览器架构 - InfoQ 写作平台_files/4e737ce82bc7c8a1c2f2307bcea9a11e.png" alt="会议图片"><a data-v-3f7820d9="" href="http://www.infoq.com/br/" target="_blank" rel="noopener nofollow">InfoQ Br</a></dd></dl></li></ul><div data-v-3f7820d9="" class="copyright"> Copyright © 2022, Geekbang Technology Ltd. All rights reserved. 极客邦控股（北京）有限公司 | <a data-v-3f7820d9="" target="_blank" href="https://xie.infoq.cn/link?target=http%3A%2F%2Fwww.beian.miit.gov.cn%2F" class="icp"> 京 ICP 备 16027448 号 - 5</a><a data-v-3f7820d9="" target="_blank" href="https://xie.infoq.cn/link?target=http%3A%2F%2Fwww.beian.gov.cn%2Fportal%2FregisterSystemInfo%3Frecordcode%3D11010502039052"><img data-v-3f7820d9="" src="./Chrome浏览器架构 - InfoQ 写作平台_files/beian.d0289dc0.png" alt="京公网安备"><span data-v-3f7820d9="">京公网安备 11010502039052号</span></a></div></div></div><div data-v-44530c6c="" id="gk-layer" gkmodal-color="common" class="offline-modal Modal_gk-modal_3ly5T"><!----><!----></div></div>
<img src="./Chrome浏览器架构 - InfoQ 写作平台_files/logo-121-75.yuij86g.png" alt="Chrome浏览器架构" style="display: none;">
<script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o),
            m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');
    ga('create', 'UA-103082599-11', 'auto');
    ga('send', 'pageview');
</script>
<script>
    var isRobot = /ltdgeekbang/i.test(window.navigator.userAgent.toLowerCase())
    if (!isRobot) {
        var __gBaiduSiteIdConfig__ = {
            infoq: '094d2af1d9a57fd9249b3fa259428445',
            xie: 'c53c258392315152cda6662d99774537'
        };
        var _hmt = _hmt || [];
        _hmt.push(['_setAccount', __gBaiduSiteIdConfig__.infoq]);
        _hmt.push(['_setAutoPageview', true]);
        _hmt.push(['_setAccount', __gBaiduSiteIdConfig__.xie]);
        _hmt.push(['_setAutoPageview', true]);

        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?" + __gBaiduSiteIdConfig__.infoq;
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
        
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?" + __gBaiduSiteIdConfig__.xie;
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
        
    }
</script>
<script>
    
    var isSmart = /swan\//.test(window.navigator.userAgent) || /^webswan-/.test(window.name);
    if (isSmart) {
        var smart = document.createElement("script");
        smart.src = "https://b.bdstatic.com/searchbox/icms/searchbox/js/swan-2.0.21.js";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(smart, s);
    }
</script>
<script>
    (function(para) {
        var p = para.sdk_url, n = para.name, w = window, d = document, s = 'script',x = null,y = null;
        if(typeof(w['sensorsDataAnalytic201505']) !== 'undefined') {
            return false;
        }
        w['sensorsDataAnalytic201505'] = n;
        w[n] = w[n] || function(a) {return function() {(w[n]._q = w[n]._q || []).push([a, arguments]);}};
        var ifs = ['track','quick','register','registerPage','registerOnce','trackSignup', 'trackAbtest', 'setProfile','setOnceProfile','appendProfile', 'incrementProfile', 'deleteProfile', 'unsetProfile', 'identify','login','logout','trackLink','clearAllRegister','getAppStatus'];
        for (var i = 0; i < ifs.length; i++) {
            w[n][ifs[i]] = w[n].call(null, ifs[i]);
        }
        if (!w[n]._t) {
            x = d.createElement(s), y = d.getElementsByTagName(s)[0];
            x.async = 1;
            x.src = p;
            x.setAttribute('charset','UTF-8');
            w[n].para = para;
            y.parentNode.insertBefore(x, y);
        }
    })({
        sdk_url: 'https://static.sensorsdata.cn/sdk/1.15.15/sensorsdata.min.js',
        heatmap_url: 'https://static.sensorsdata.cn/sdk/1.15.15/heatmap.min.js',
        name: 'sensors',
        server_url: 'https://sscentry.geekbang.org/sa?project=production',
        show_log: false,
        is_track_single_page: true,
        heatmap: {
            clickmap: 'not_collect',
            scroll_notice_map: 'not_collect'
        },
        preset_properties: {
            latest_referrer_host: true,
            latest_landing_page: true,
            url: true
        }
    });
</script>

    <script type="text/javascript" src="./Chrome浏览器架构 - InfoQ 写作平台_files/main.js"></script>



<div data-v-3710ffdc="" id="gkui-message-list" style="top: 24px;"><span data-v-3710ffdc=""></span></div><div id="gkui-modal-controller"><!----></div><div class="common-login-modal"><div data-v-467cbcd0="" id="gk-layer" gkmodal-color="base" class="modal-login Modal_gk-modal_3ly5T"><!----><!----></div><div data-v-5070518a="" id="gk-layer" gkmodal-color="base" class="modal-guide Modal_gk-modal_3ly5T"><!----><!----></div><div data-v-4e23a88d="" id="gk-layer" gkmodal-color="base" class="modal-receive-success Modal_gk-modal_3ly5T"><!----><!----></div><div data-v-b3d76520="" id="gk-layer" gkmodal-color="base" class="modal-rebind Modal_gk-modal_3ly5T"><!----><!----></div></div><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp pswp--zoom-allowed"><div class="pswp__bg"></div><div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div><div class="pswp__item"></div><div class="pswp__item"></div></div><div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div><button title="Close (Esc)" class="pswp__button pswp__button--close"></button><button title="Share" class="pswp__button pswp__button--share"></button><button title="Toggle fullscreen" class="pswp__button pswp__button--fs"></button><button title="Zoom in/out" class="pswp__button pswp__button--zoom"></button><div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div><button title="Previous (arrow left)" class="pswp__button pswp__button--arrow--left"></button><button title="Next (arrow right)" class="pswp__button pswp__button--arrow--right"></button><div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div><div><div id="gk-layer" gkmodal-color="logPhone" class="Modal_gk-modal_3ly5T" lockbody="true"><!----><!----></div></div><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEHAAEALAAAAAABAAEAAAICTAEAOw==" id="page-complete" style="display: none;"></body></html>